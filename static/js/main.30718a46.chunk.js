(this.webpackJsonpcaravan=this.webpackJsonpcaravan||[]).push([[0],{100:function(e,t,n){e.exports={feeMagicBtn:"styles_feeMagicBtn__QX0iX",utxoTxid:"styles_utxoTxid__1p6kt",outputsFormInput:"styles_outputsFormInput__3Osdm",unconfirmed:"styles_unconfirmed__3KzJ4",spent:"styles_spent__10i2F",outputsFormLabel:"styles_outputsFormLabel__NZOnp",maxSpend:"styles_maxSpend__32e8a"}},1116:function(e){e.exports=JSON.parse('{"name":"unchained-wallets","version":"0.0.13","description":"Unchained Capital\'s HD Wallets Library","main":"lib/index.js","repository":{"type":"git","url":"git+https://github.com/unchained-capital/unchained-wallets.git"},"author":"Unchained Capital","license":"MIT","bugs":{"url":"https://github.com/unchained-capital/unchained-wallets/issues"},"homepage":"https://github.com/unchained-capital/unchained-wallets","devDependencies":{"@babel/cli":"^7.7.0","@babel/core":"^7.7.2","@babel/preset-env":"^7.7.1","eslint":"^6.6.0","eslint-plugin-import":"^2.18.2","eslint-plugin-jest":"^23.0.3","jest":"^24.9.0","jest-junit":"^9.0.0","jsdoc":"^3.6.3","mocha":"^6.2.2"},"scripts":{"compile-images":"node images/compile.js","compile":"babel -d lib/ src/ && npm run compile-images","compile:watch":"babel --watch -d lib/ src/ && npm run compile-images","prepublish":"npm run compile","pretest":"npm run compile","prepare":"npm run compile","test":"jest lib","docs":"./bin/build-docs.sh","lint":"eslint src"},"bin":{},"dependencies":{"@babel/polyfill":"^7.7.0","@ledgerhq/hw-app-btc":"^5.2.0","@ledgerhq/hw-transport-node-hid":"^5.17.0","@ledgerhq/hw-transport-u2f":"^4.72.0","@ledgerhq/hw-transport-webusb":"^5.17.0","bignumber.js":"^8.1.1","bitcoinjs-lib":"^4.0.5","bowser":"^2.6.1","core-js":"^2.6.10","hi-base32":"^0.5.0","pako":"^1.0.10","punycode":"^2.1.1","trezor-connect":"^8.0.13","unchained-bitcoin":"^0.0.12"},"directories":{"lib":"lib"},"babel":{"presets":[["@babel/env",{"useBuiltIns":"usage","corejs":2}]]}}')},1124:function(e,t,n){"use strict";var a=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.trezorCoin=R,t.TrezorConfirmMultisigAddress=t.TrezorSignMultisigTransaction=t.TrezorExportExtendedPublicKey=t.TrezorExportPublicKey=t.TrezorExportHDNode=t.TrezorGetMetadata=t.TrezorInteraction=t.TREZOR_PUSH_AND_HOLD_BUTTON=t.TREZOR_BOTH_BUTTONS=t.TREZOR_RIGHT_BUTTON=t.TREZOR_LEFT_BUTTON=t.TREZOR=void 0,n(205),n(168),n(169),n(751),n(501),n(382),n(383),n(301),n(300),n(1125),n(170),n(752),n(108),n(1128),n(511),n(385),n(384);var r,o,i=(r=n(157))&&r.__esModule?r:{default:r},s=n(512),c=n(381);function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(c){r=!0,o=c}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(e,t,n,a,r,o,i){try{var s=e[o](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(a,r)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function f(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t,n){return(E="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.TREZOR="trezor";var P=n(1216).default,S=(y(o={},s.P2SH,"SPENDMULTISIG"),y(o,s.P2SH_P2WSH,"SPENDP2SHWITNESS"),y(o,s.P2WSH,"SPENDWITNESS"),o);t.TREZOR_LEFT_BUTTON="trezor_left_button";t.TREZOR_RIGHT_BUTTON="trezor_right_button";t.TREZOR_BOTH_BUTTONS="trezor_both_buttons";t.TREZOR_PUSH_AND_HOLD_BUTTON="trezor_push_and_hold_button";try{P.manifest({email:"help@unchained-capital.com",appUrl:"https://github.com/unchained-capital/unchained-wallets"})}catch(N){console.error("Unable to call TrezorConnect.manifest.")}var T=function(e){function t(e){var n,a=e.network;return p(this,t),(n=f(this,b(t).call(this))).network=a,n.trezorCoin=R(a),n}return v(t,e),h(t,[{key:"messages",value:function(){var e=E(b(t.prototype),"messages",this).call(this);return e.push({version:"One",state:c.PENDING,level:c.INFO,text:"Make sure your Trezor device is plugged in.",code:"device.connect"}),e.push({version:"T",state:c.PENDING,level:c.INFO,text:"Make sure your Trezor device is plugged in and unlocked.",code:"device.connect"}),e.push({state:c.ACTIVE,level:c.INFO,text:"Your browser should open a new Trezor Connect window.  If you do not see this window, ensure you have enabled popups for this site.",code:"trezor.connect.generic"}),e}},{key:"run",value:function(){var e,t=(e=a.mark((function e(){var t,n,r,o,i;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.connectParams(),n=u(t,2),r=n[0],o=n[1],e.next=3,r(o);case 3:if((i=e.sent).success){e.next=6;break}throw new Error(i.payload.error);case 6:return e.abrupt("return",this.parse(i.payload));case 7:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){d(o,a,r,i,s,"next",e)}function s(e){d(o,a,r,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}()},{key:"connectParams",value:function(){return[function(){throw new Error("Override the `connectParams` method on a subclass of TrezorInteraction.")},{}]}},{key:"parse",value:function(e){return e}}]),t}(c.DirectKeystoreInteraction);t.TrezorInteraction=T;var O=function(e){function t(){return p(this,t),f(this,b(t).call(this,{}))}return v(t,e),h(t,[{key:"connectParams",value:function(){return[P.getFeatures,{}]}},{key:"parse",value:function(e){var t=e.major_version,n=e.minor_version,a=e.patch_version,r=e.label,o=e.model,i=e.pin_protection,s=e.passphrase_protection,c="Model ".concat(o," v.").concat(t,".").concat(n,".").concat(a);return i&&(c+=" w/PIN"),s&&(c+=" w/PASS"),{spec:c,model:"Model ".concat(o),version:{major:t,minor:n,patch:a,string:"".concat(t,".").concat(n,".").concat(a)},label:r,pin:i,passphrase:s}}}]),t}(T);t.TrezorGetMetadata=O;var I=function(e){function t(e){var n,a=e.network,r=e.bip32Path;return p(this,t),(n=f(this,b(t).call(this,{network:a}))).bip32Path=r,n}return v(t,e),h(t,[{key:"messages",value:function(){var e=E(b(t.prototype),"messages",this).call(this);return(this.bip32Path||"").split("/").length<4&&e.push({state:c.PENDING,level:c.ERROR,text:"BIP32 path must be at least depth 3.",code:"trezor.bip32_path.minimum"}),e.push({state:c.ACTIVE,level:c.INFO,text:"Confirm in the Trezor Connect window that you want to 'Export public key'.  You may be prompted to enter your PIN.",code:"trezor.connect.export_hdnode"}),e}},{key:"connectParams",value:function(){return[P.getPublicKey,{path:this.bip32Path,coin:this.trezorCoin,crossChain:!0}]}}]),t}(T);t.TrezorExportHDNode=I;var w=function(e){function t(){return p(this,t),f(this,b(t).apply(this,arguments))}return v(t,e),h(t,[{key:"parse",value:function(e){return e.publicKey}}]),t}(I);t.TrezorExportPublicKey=w;var x=function(e){function t(){return p(this,t),f(this,b(t).apply(this,arguments))}return v(t,e),h(t,[{key:"parse",value:function(e){return e.xpub}}]),t}(I);t.TrezorExportExtendedPublicKey=x;var j=function(e){function t(e){var n,a=e.network,r=e.inputs,o=e.outputs,i=e.bip32Paths;return p(this,t),(n=f(this,b(t).call(this,{network:a}))).inputs=r,n.outputs=o,n.bip32Paths=i,n}return v(t,e),h(t,[{key:"messages",value:function(){var e=E(b(t.prototype),"messages",this).call(this);return e.push({state:c.ACTIVE,level:c.INFO,text:"Confirm in the Trezor Connect window that you want to 'Sign ".concat(this.network," transaction'.  You may be prompted to enter your PIN."),code:"trezor.connect.sign"}),e.push({state:c.ACTIVE,level:c.INFO,version:"One",text:"Confirm each output on your Trezor device and approve the transaction.",messages:[{text:"For each output, your Trezor device will display the output amount and address.",action:"trezor_right_button"},{text:"Your Trezor device will display the total output amounts and fee amount.",action:"trezor_right_button"}],code:"trezor.sign"}),e.push({state:c.ACTIVE,level:c.INFO,version:"T",text:"Confirm each output on your Trezor device and approve the transaction.",messages:[{text:'For each input, your Trezor device will display a "Confirm path" dialogue displaying the input BIP32 path.  It is safe to continue',action:"trezor_right_button"},{text:'For each output, your Trezor device will display a "Confirm sending" dialogue displaying the output amount and address.',action:"trezor_right_button"},{text:'Your Trezor device will display the "Confirm transaction" dialogue displaying the total output amount and fee amount.',action:"trezor_push_and_hold_button"}],code:"trezor.sign"}),e}},{key:"connectParams",value:function(){var e=this;return[P.signTransaction,{inputs:this.inputs.map((function(t,n){return function(e,t){var n=(0,s.multisigRequiredSigners)(e.multisig),a=(0,s.multisigAddressType)(e.multisig);return{script_type:S[a],multisig:{m:n,pubkeys:(0,s.multisigPublicKeys)(e.multisig).map((function(e){return C(e)})),signatures:Array(n).fill("")},prev_hash:e.txid,prev_index:e.index,address_n:(0,s.bip32PathToSequence)(t),amount:(0,i.default)(e.amountSats).toString()}}(t,e.bip32Paths[n])})),outputs:this.outputs.map((function(e){return function(e){return{amount:(0,i.default)(e.amountSats).toFixed(0),address:e.address,script_type:"PAYTOADDRESS"}}(e)})),coin:this.trezorCoin}]}},{key:"parse",value:function(e){return(e.signatures||[]).map((function(e){return"".concat(e,"01")}))}}]),t}(T);t.TrezorSignMultisigTransaction=j;var k=function(e){function t(e){var n,a=e.network,r=e.bip32Path,o=e.multisig;return p(this,t),(n=f(this,b(t).call(this,{network:a}))).bip32Path=r,n.multisig=o,n}return v(t,e),h(t,[{key:"messages",value:function(){var e=E(b(t.prototype),"messages",this).call(this);return e.push({state:c.ACTIVE,level:c.INFO,text:"Confirm in the Trezor Connect window that you want to 'Export ".concat(this.trezorCoin," address'.  You may be prompted to enter your PIN."),code:"trezor.connect.confirm_address"}),e.push({state:c.ACTIVE,level:c.INFO,version:"One",text:"Confirm the addresss on your Trezor device.",messages:[{text:'Your Trezor device may display a warning "Wrong address path for selected coin".  It is safe to continue',action:"trezor_right_button"},{text:"Your Trezor device will display the multisig address and BIP32 path.",action:"trezor_right_button"}],code:"trezor.confirm_address"}),e.push({state:c.ACTIVE,level:c.INFO,version:"T",text:"Confirm the addresss on your Trezor device.",messages:[{text:'For each signer in your quorum, your Trezor device will display a "Confirm path" dialogue displaying the signer\'s BIP32 path.  It is safe to continue',action:"trezor_right_button"},{text:"Your Trezor device will display the multisig address.",action:"trezor_right_button"}],code:"trezor.confirm_address"}),e}},{key:"connectParams",value:function(){return[P.getAddress,{path:this.bip32Path,address:(0,s.multisigAddress)(this.multisig),showOnTrezor:!0,coin:this.trezorCoin,crossChain:!0,multisig:{m:(0,s.multisigRequiredSigners)(this.multisig),pubkeys:(0,s.multisigPublicKeys)(this.multisig).map((function(e){return C(e)}))},scriptType:S[(0,s.multisigAddressType)(this.multisig)]}]}}]),t}(T);function R(e){return e===s.MAINNET?"Bitcoin":"Testnet"}function C(e){return{address_n:[],node:{depth:0,child_num:0,fingerprint:0,chain_code:"0".repeat(64),public_key:e}}}t.TrezorConfirmMultisigAddress=k},1131:function(e,t){},1134:function(e,t){},1247:function(e,t,n){"use strict";(function(e){var a=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.LedgerSignMultisigTransaction=t.LedgerExportExtendedPublicKey=t.LedgerExportPublicKey=t.LedgerGetMetadata=t.LedgerBitcoinInteraction=t.LedgerDashboardInteraction=t.LedgerInteraction=t.LEDGER_BOTH_BUTTONS=t.LEDGER_RIGHT_BUTTON=t.LEDGER_LEFT_BUTTON=t.LEDGER=void 0,n(387),n(525),n(205),n(168),n(169),n(751),n(501),n(300),n(382),n(383),n(301),n(1248),n(511),n(385),n(241),n(1249),n(527),n(774),n(170),n(752),n(108),n(384);var r,o=(r=n(157))&&r.__esModule?r:{default:r},i=n(512),s=n(381);function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(c){r=!0,o=c}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t,n,a,r,o,i){try{var s=e[o](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(a,r)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){d(o,a,r,i,s,"next",e)}function s(e){d(o,a,r,i,s,"throw",e)}i(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function E(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e,t,n){return(b="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.LEDGER="ledger";var P=n(172),S=n(1250).default,T=n(1257).default,O=n(1258).default;t.LEDGER_LEFT_BUTTON="ledger_left_button";t.LEDGER_RIGHT_BUTTON="ledger_right_button";t.LEDGER_BOTH_BUTTONS="ledger_both_buttons";var I=function(e){function t(){return m(this,t),E(this,v(t).apply(this,arguments))}return g(t,e),f(t,[{key:"messages",value:function(){var e=b(v(t.prototype),"messages",this).call(this);return e.push({state:s.PENDING,level:s.INFO,text:"Make sure your Ledger is plugged in.",code:"device.connect"}),e.push({state:s.PENDING,level:s.INFO,text:"Make sure you have unlocked your Ledger.",code:"device.unlock"}),e.push({state:s.ACTIVE,level:s.INFO,text:"Communicating with Ledger...",code:"device.active"}),e}},{key:"withTransport",value:function(){var e=p(a.mark((function e(t){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.create();case 3:return n=e.sent,e.abrupt("return",t(n));case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0.message||"navigator.usb is undefined"!==e.t0.message){e.next=16;break}return e.next=12,S.create();case 12:return r=e.sent,e.abrupt("return",t(r));case 16:throw new Error("Error with Ledger transport");case 17:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"withApp",value:function(e){return this.withTransport(function(){var t=p(a.mark((function t(n){var r;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new O(n),t.abrupt("return",e(r,n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),t}(s.DirectKeystoreInteraction);t.LedgerInteraction=I;var w=function(e){function t(){return m(this,t),E(this,v(t).apply(this,arguments))}return g(t,e),f(t,[{key:"messages",value:function(){var e=b(v(t.prototype),"messages",this).call(this);return e.push({state:s.PENDING,level:s.INFO,text:"Make sure you have the main Ledger dashboard open, NOT the Bitcoin app.",code:"ledger.app.dashboard"}),e.push({state:s.ACTIVE,level:s.INFO,text:"Make sure you have the main Ledger dashboard open, NOT the Bitcoin app.",code:"ledger.app.dashboard"}),e}}]),t}(I);t.LedgerDashboardInteraction=w;var x=function(e){function t(){return m(this,t),E(this,v(t).apply(this,arguments))}return g(t,e),f(t,[{key:"messages",value:function(){var e=b(v(t.prototype),"messages",this).call(this);return e.push({state:s.PENDING,level:s.INFO,text:"Make sure you have the Bitcoin app open.",code:"ledger.app.bitcoin"}),e.push({state:s.ACTIVE,level:s.INFO,text:"Make sure you have the Bitcoin app open.",code:"ledger.app.bitcoin"}),e}}]),t}(I);t.LedgerBitcoinInteraction=x;var j=function(t){function n(){return m(this,n),E(this,v(n).apply(this,arguments))}return g(n,t),f(n,[{key:"run",value:function(){var e=p(a.mark((function e(){var t=this;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.withTransport(function(){var e=p(a.mark((function e(n){var r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setScrambleKey("B0L0S"),e.next=3,n.send(224,1,0,0);case 3:return r=e.sent,e.abrupt("return",t.parseMetadata(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMetadata",value:function(t){try{var n=u(t),a=n.slice(0,n.length-2),r=e.from(a.slice(0,4)).readUIntBE(0,4),o=a[4],i=e.from(a.slice(5,5+o)).toString(),s=a[5+o],c=e.from(a.slice(5+o+1,5+o+1+s)),d=a[5+o+1+s],p=e.from(a.slice(7+o+s,7+o+s+d));0===p[p.length-1]&&(p=p.slice(0,p.length-1)),p=p.toString(),o||(i="0.0.0",c=e.allocUnsafeSlow(0),p="");i.includes("-osu");var m=i.replace("-osu",""),h=l(i.match(/([0-9]+.[0-9]+)(.[0-9]+)?(-(.*))?/)||[],5),f=(h[1],h[4],c.length>0?c[0]:0),E=(Boolean(8&f),Boolean(128&f),l((m||"").split("."),3)),b=E[0],v=E[1],g=E[2],y=l((p||"").split("."),2),P=y[0],S=y[1],T=[{minTargetId:855638020,model:"Nano X"},{minTargetId:823132162,model:"Nano S"},{minTargetId:823132162,model:"Blue"},{minTargetId:16777217,model:"MCU"}],O="Unknown";if(r)for(var I=0;I<T.length;I++){var w=T[I];if(r>=w.minTargetId){O=w.model;break}}return{spec:"".concat(O," v").concat(m," (MCU v").concat(p,")"),model:O,version:{major:b,minor:v,patch:g,string:m},mcuVersion:{major:P,minor:S,string:p}}}catch(x){throw console.error(x),new Error("Unable to parse metadata from Ledger device.")}}}]),n}(w);t.LedgerGetMetadata=j;var k=function(e){function t(e){var n,a=e.bip32Path;return m(this,t),(n=E(this,v(t).call(this))).bip32Path=a,n}return g(t,e),f(t,[{key:"messages",value:function(){return b(v(t.prototype),"messages",this).call(this)}},{key:"hasBIP32PathWarning",value:function(){var e=(0,i.bip32PathToSequence)(this.bip32Path),t=(0,i.hardenedBIP32Index)(0),n=(0,i.hardenedBIP32Index)(44),a=(0,i.hardenedBIP32Index)(100);return 5!==e.length||(e[0]!==n||(e[2]<t||e[2]>a||(0!==e[3]||(e[4]<0||e[4]>5e4))))}},{key:"run",value:function(){var e=this;return this.withApp(function(){var t=p(a.mark((function t(n){return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.getWalletPublicKey(e.bip32Path));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),t}(x),R=function(e){function t(){return m(this,t),E(this,v(t).apply(this,arguments))}return g(t,e),f(t,[{key:"run",value:function(){var e=p(a.mark((function e(){var n;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(v(t.prototype),"run",this).call(this);case 2:return n=e.sent,e.abrupt("return",this.parsePublicKey((n||{}).publicKey));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parsePublicKey",value:function(e){if(!e)throw new Error("Received no public key from Ledger device.");try{return(0,i.compressPublicKey)(e)}catch(t){throw console.error(t),new Error("Unable to compress public key from Ledger device.")}}}]),t}(k);t.LedgerExportPublicKey=R;var C=function(e){function t(e){var n,a=e.bip32Path,r=e.network;return m(this,t),(n=E(this,v(t).call(this,{bip32Path:a}))).network=r,n}return g(t,e),f(t,[{key:"messages",value:function(){return b(v(t.prototype),"messages",this).call(this)}},{key:"getFingerprint",value:function(){var e=p(a.mark((function e(){var t;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getParentPublicKey();case 2:return t=e.sent,e.abrupt("return",(0,i.getFingerprintFromPublicKey)(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getParentPublicKey",value:function(){var e=this;return this.withApp(function(){var t=p(a.mark((function t(n){var r;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,i.getParentPath)(e.bip32Path),t.next=3,n.getWalletPublicKey(r);case 3:return t.abrupt("return",t.sent.publicKey);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"run",value:function(){var e=p(a.mark((function e(){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(v(t.prototype),"run",this).call(this);case 2:return n=e.sent,e.next=5,this.getFingerprint();case 5:return r=e.sent,e.abrupt("return",(0,i.deriveExtendedPublicKey)(this.bip32Path,n.publicKey,n.chainCode,r,this.network));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(k);t.LedgerExportExtendedPublicKey=C;var N=function(e){function t(e){var n,a=e.network,r=e.inputs,o=e.outputs,i=e.bip32Paths;return m(this,t),(n=E(this,v(t).call(this))).network=a,n.inputs=r,n.outputs=o,n.bip32Paths=i,n}return g(t,e),f(t,[{key:"messages",value:function(){var e=b(v(t.prototype),"messages",this).call(this);return e.push({state:s.ACTIVE,level:s.WARNING,code:"ledger.sign.delay",text:"Your Ledger device may take up to several minutes to process a transaction with many inputs.",preProcessingTime:this.preProcessingTime(),postProcessingTime:this.postProcessingTime()}),this.anySegwitInputs()?(e.push({state:s.ACTIVE,level:s.INFO,code:"ledger.sign",version:"<1.6.0",text:'Your Ledger will ask you to "Confirm transaction" and display each output amount and address followed by the the fee amount.',action:"ledger_right_button"}),e.push({state:s.ACTIVE,level:s.INFO,code:"ledger.sign",version:">=1.6.0",text:"Confirm each output on your Ledger device and approve the transaction.",messages:[{text:'Your Ledger will ask you to "Review transaction".',action:"ledger_right_button"},{text:"For each output, your Ledger device will display the output amount...",action:"ledger_right_button"},{text:"...followed by the output address in several parts",action:"ledger_right_button"},{text:"Your Ledger will display the transaction fees.",action:"ledger_right_button"},{text:'Your Ledger will ask you to "Accept and send".',action:"ledger_both_buttons"}]})):(e.push({state:s.ACTIVE,level:s.INFO,code:"ledger.sign",version:"<1.6.0",text:"Confirm each output on your Ledger device and approve the transaction.",messages:[{text:"For each output, your Ledger will display the output amount and address for you to confirm.",action:"ledger_right_button"},{text:'Your Ledger will ask if you want to "Confirm the transaction".  Due to a bug in the Ledger software, your device may display the transaction fee as "UNKNOWN".',action:"ledger_right_button"}]}),e.push({state:s.ACTIVE,level:s.INFO,code:"ledger.sign",version:">=1.6.0",text:"Confirm each output on your Ledger device and approve the transaction.",messages:[{text:'For each output, your Ledger will ask you to "Review output".',action:"ledger_right_button"},{text:"Your Ledger will display the output amount.",action:"ledger_right_button"},{text:"Your Ledger will display the output address in several parts.",action:"ledger_right_button"},{text:'Your Ledger will ask if you want to "Accept" the output.',action:"ledger_both_buttons"},{text:'Your Ledger will ask if you want to "Confirm the transaction".',action:"ledger_right_button"},{text:'Due to a bug in the Ledger software, your device will display the transaction fee as "UNKNOWN".',action:"ledger_right_button"},{text:'Your Ledger will ask you to "Accept and send".',action:"ledger_both_buttons"}]})),e}},{key:"preProcessingTime",value:function(){return 10}},{key:"postProcessingTime",value:function(){return 10}},{key:"run",value:function(){var e=this;return this.withApp(function(){var t=p(a.mark((function t(n,r){var o;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.setExchangeTimeout(2e4*e.outputs.length),t.next=3,n.signP2SHTransaction(e.ledgerInputs(n),e.ledgerKeysets(),e.ledgerOutputScriptHex(n),0,1,e.anySegwitInputs(),1);case 3:return o=t.sent,t.abrupt("return",(o||[]).map((function(e){return e.endsWith("01")?e:"".concat(e,"01")})));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"ledgerInputs",value:function(e){return this.inputs.map((function(t){var n=(0,i.multisigAddressType)(t.multisig),a=e.splitTransaction(t.transactionHex,!0),r=n===i.P2SH?i.multisigRedeemScript:i.multisigWitnessScript,o=(0,i.scriptToHex)(r(t.multisig));return[a,t.index,o]}))}},{key:"ledgerKeysets",value:function(){var e=this;return this.bip32Paths.map((function(t){return e.ledgerBIP32Path(t)}))}},{key:"ledgerOutputScriptHex",value:function(e){var t=new P.TransactionBuilder;t.setVersion(1),this.network===i.TESTNET&&(t.network=P.networks.testnet);for(var n=0;n<this.outputs.length;n++)t.addOutput(this.outputs[n].address,new o.default(this.outputs[n].amountSats).toNumber());for(var a=0;a<this.inputs.length;a++)t.addInput(this.inputs[a].txid,this.inputs[a].index);var r=t.buildIncomplete().toHex(),s=e.splitTransaction(r,this.anySegwitInputs());return e.serializeTransactionOutputs(s).toString("hex")}},{key:"ledgerBIP32Path",value:function(e){return e.split("/").slice(1).join("/")}},{key:"anySegwitInputs",value:function(){for(var e=0;e<this.inputs.length;e++){var t=this.inputs[e],n=(0,i.multisigAddressType)(t.multisig);if(n===i.P2SH_P2WSH||n===i.P2WSH)return!0}return!1}}]),t}(x);t.LedgerSignMultisigTransaction=N}).call(this,n(24).Buffer)},1259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHermitQRCodeData=y,t.encodeHermitQRCodeData=P,t.HermitSignTransaction=t.HermitExportExtendedPublicKey=t.HermitExportPublicKey=t.HermitDisplayer=t.HermitReader=t.HermitInteraction=t.HERMIT=void 0,n(205),n(382),n(383),n(301),n(729),n(497),n(736),n(499),n(168),n(299),n(300),n(511),n(169),n(240),n(108),n(1260),n(241),n(1262),n(1263);var a=c(n(1264)),r=c(n(1266)),o=c(n(157)),i=n(512),s=n(381);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function p(e,t,n){return(p="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t="Unable to parse QR code";try{var n=a.default.decode.asBytes(e);try{var o=r.default.inflate(n,{to:"string"});try{return JSON.parse(o)}catch(i){throw new Error("".concat(t," (JSON parse error)"))}}catch(i){throw i.message&&i.message.startsWith(t)?i:new Error("".concat(t," (gzip decompression error)"))}}catch(i){throw i.message&&i.message.startsWith(t)?i:new Error("".concat(t," (Base32 decode error)"))}}function P(e){var t="Unable to create QR code";try{var n=JSON.stringify(e);try{var o=r.default.deflate(n,{gzip:!0});try{return a.default.encode(o)}catch(i){throw new Error("".concat(t," (Base32 encode error)"))}}catch(i){throw i.message&&i.message.startsWith(t)?i:new Error("".concat(t," (gzip compression error)"))}}catch(i){throw i.message&&i.message.startsWith(t)?i:new Error("".concat(t," (JSON encode error)"))}}function S(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{state:s.PENDING,level:s.INFO,code:"hermit.command",mode:"wallet"},{},{text:"".concat(e.instructions," '").concat(e.command,"'")},{},e)}t.HERMIT="hermit";var T=function(e){function t(){return m(this,t),h(this,f(t).apply(this,arguments))}return E(t,e),t}(s.IndirectKeystoreInteraction);t.HermitInteraction=T;var O=function(e){function t(){var e;return m(this,t),(e=h(this,f(t).call(this))).reader=!0,e}return E(t,e),d(t,[{key:"messages",value:function(){var e=p(f(t.prototype),"messages",this).call(this);return e.push({state:s.ACTIVE,level:s.INFO,code:"hermit.scanning",text:"Scan Hermit QR code now."}),e}}]),t}(T);t.HermitReader=O;var I=function(e){function t(){var e;return m(this,t),(e=h(this,f(t).call(this))).displayer=!0,e}return E(t,e),t}(O);t.HermitDisplayer=I;var w=function(e){function t(e){var n,a=e.bip32Path;return m(this,t),(n=h(this,f(t).call(this))).bip32Path=a,n}return E(t,e),d(t,[{key:"messages",value:function(){var e=p(f(t.prototype),"messages",this).call(this);return e.push(S({instructions:"Run the following Hermit command, replacing the BIP32 path if you need to:",command:"export-pub ".concat(this.bip32Path)})),e}},{key:"parse",value:function(e){var t=y(e),n=t.xpub,a=t.pubkey,r=t.bip32_path;if(!a)throw n?new Error("Make sure you export a plain public key and NOT an extended public key."):new Error("No public key in QR code.");if(!r)throw new Error("No BIP32 path in QR code.");return t.bip32Path=r,Reflect.deleteProperty(t,"bip32_path"),t}}]),t}(O);t.HermitExportPublicKey=w;var x=function(e){function t(e){var n,a=e.bip32Path;return m(this,t),(n=h(this,f(t).call(this))).bip32Path=a,n}return E(t,e),d(t,[{key:"messages",value:function(){var e=p(f(t.prototype),"messages",this).call(this);return e.push(S({instructions:"Run the following Hermit command, replacing the BIP32 path if you need to:",command:"export-xpub ".concat(this.bip32Path)})),e}},{key:"parse",value:function(e){var t=y(e),n=t.xpub,a=t.pubkey,r=t.bip32_path;if(!n)throw a?new Error("Make sure you export an extended public key and NOT a plain public key."):new Error("No extended public key in QR code.");if(!r)throw new Error("No BIP32 path in QR code.");return t.bip32Path=r,Reflect.deleteProperty(t,"bip32_path"),t}}]),t}(O);t.HermitExportExtendedPublicKey=x;var j=function(e){function t(e){var n,a=e.inputs,r=e.outputs,o=e.bip32Paths;return m(this,t),(n=h(this,f(t).call(this))).inputs=a,n.outputs=r,n.bip32Paths=o,n.inputAddressType="",n}return E(t,e),d(t,[{key:"isSupported",value:function(){return this.inputsAreSupported()&&this.outputsAreSupported()}},{key:"outputsAreSupported",value:function(){if(this.outputs&&this.outputs.length)for(var e=0;e<this.outputs.length;e++){if(this.outputs[e].address.match(/^(tb|bc)/))return!1}return!0}},{key:"inputsAreSupported",value:function(){if(this.inputs&&this.inputs.length)for(var e=0;e<this.inputs.length;e++){var t=this.inputs[e],n=(0,i.multisigAddressType)(t.multisig);if(n!==i.MULTISIG_ADDRESS_TYPES.P2SH)return this.inputAddressType=n,!1}return!0}},{key:"messages",value:function(){var e=p(f(t.prototype),"messages",this).call(this);return this.inputsAreSupported()||e.push({state:s.UNSUPPORTED,level:s.ERROR,code:"hermit.unsupported.inputaddress",text:"Unsupported input address type ".concat(this.inputAddressType,", must be P2SH.")}),this.outputsAreSupported()||e.push({state:s.UNSUPPORTED,level:s.ERROR,code:"hermit.unsupported.outputaddress",text:"Unsupported output address type. bech32 addresses are unsupported."}),this.inputsAreSupported()&&this.outputsAreSupported()?(e.push(S({instructions:"Scan this QR code into Hermit by running the following command:",command:"sign-bitcoin"})),e):e}},{key:"request",value:function(){return P(this.signatureRequestData())}},{key:"signatureRequestData",value:function(){for(var e={},t=0;t<this.inputs.length;t++){var n=this.inputs[t],a=this.bip32Paths[t],r=(0,i.scriptToHex)((0,i.multisigRedeemScript)(n.multisig));e[r]||(e[r]=[r,a]),e[r].push({txid:n.txid,index:n.index,amount:new o.default(n.amountSats).toNumber()})}return{inputs:Object.values(e),outputs:this.outputs.map((function(e){return{address:e.address,amount:new o.default(e.amountSats).toNumber()}}))}}},{key:"parse",value:function(e){var t=y(e).signatures;if(!t||0===t.length)throw new Error("No signatures in QR code.");return(t||[]).map((function(e){return"".concat(e,"01")}))}}]),t}(I);t.HermitSignTransaction=j},1279:function(e,t,n){},1280:function(e,t,n){},1281:function(e,t,n){},1282:function(e,t,n){e.exports=n.p+"static/media/logo.66481e66.png"},1284:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getTotalbalance",(function(){return ze})),n.d(a,"getPendingBalance",(function(){return Fe})),n.d(a,"getConfirmedBalance",(function(){return He})),n.d(a,"getSlicesWithLastUsed",(function(){return We})),n.d(a,"getSpendableSlices",(function(){return Ge})),n.d(a,"getSpentSlices",(function(){return qe})),n.d(a,"getSlicesWithBalance",(function(){return Ye})),n.d(a,"getZeroBalanceSlices",(function(){return Ve})),n.d(a,"getUnknownAddressSlices",(function(){return Xe})),n.d(a,"getUnknownAddresses",(function(){return Ze})),n.d(a,"getDepositableSlices",(function(){return Je}));var r={};n.r(r),n.d(r,"SET_ERROR_NOTIFICATION",(function(){return pt})),n.d(r,"CLEAR_ERROR_NOTIFICATION",(function(){return mt})),n.d(r,"setErrorNotification",(function(){return ht})),n.d(r,"clearErrorNotification",(function(){return ft}));var o={};n.r(o),n.d(o,"START_TEST_SUITE_RUN",(function(){return ai})),n.d(o,"SET_CURRENT_TEST_RUN",(function(){return ri})),n.d(o,"startTestSuiteRun",(function(){return oi})),n.d(o,"setCurrentTestRun",(function(){return ii}));var i={};n.r(i),n.d(i,"SET_KEYSTORE",(function(){return si})),n.d(i,"SET_KEYSTORE_NOTE",(function(){return ci})),n.d(i,"SET_KEYSTORE_STATUS",(function(){return li})),n.d(i,"setKeystore",(function(){return ui})),n.d(i,"setKeystoreNote",(function(){return di})),n.d(i,"setKeystoreStatus",(function(){return pi}));var s={};n.r(s),n.d(s,"START_TEST_RUN",(function(){return mi})),n.d(s,"END_TEST_RUN",(function(){return hi})),n.d(s,"RESET_TEST_RUN",(function(){return fi})),n.d(s,"SET_TEST_RUN_NOTE",(function(){return Ei})),n.d(s,"startTestRun",(function(){return bi})),n.d(s,"endTestRun",(function(){return vi})),n.d(s,"resetTestRun",(function(){return gi})),n.d(s,"setTestRunNote",(function(){return yi}));var c=n(0),l=n.n(c),u=n(30),d=n.n(u),p=n(77),m=n(17),h=n(806),f=n.n(h),E=n(807),b=n(11),v=n(19),g=n(13),y=n(12),P=n(101),S=n(832),T=n(52),O=n(1336),I=n(1335),w=n(251),x=n(483),j=n(115),k=n(1312),R=n(1309),C=n(1310),N=n(1311),_=n(540),A=n(1290),K=n(1291),M=n(1315),B=n(687),D=n(1319),U=n(1313),L=n(1314),z=n(1316),F=n(1317),H=n(1318),W=n(1320),G=n(1321),q=n(4),Y=n(27),V=n.n(Y),X=n(319),Z=n(6),J=Object(Z.satoshisToBitcoins)(V()(546)),Q=function(e,t){return l.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)};function $(e,t){var n=new Blob([e],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(n,t);else{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(n),a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}function ee(e){var t,n=e.slices,a=e.outputs,r=n.reduce((function(e,t){var n=e.count,a=e.balance;return{count:n+t.utxos.length,balance:t.balanceSats.plus(a)}}),{count:0,balance:new V.a(0)}),o=r.count,i=r.balance,s=a.reduce((function(e,t){return e.plus(t.amountSats)}),new V.a(0)),c=[],l=new V.a(0),u=function(e){var t=Object(q.a)(Object(q.a)({},e),{},{numOutputs:e.outputs.length}),n=Object(X.estimateMultisigTransactionFee)(t).toNumber(),a=t.outputs.reduce((function(e,t){return e.plus(t.amountSats)}),new V.a(0));if(a.plus(n).isGreaterThan(e.walletBalance))throw new Error("Wallet balance is insufficient to fund transaction");return new V.a(e.walletBalance).minus(n).minus(a).isLessThanOrEqualTo(546)}(Object(q.a)(Object(q.a)({},e),{},{walletBalance:i,numInputs:o}));u&&(t=!1);for(var d=0;d<n.length;d+=1){for(var p=n[d],m=p.utxos,h=0;h<m.length;h+=1)c.push(Object(q.a)(Object(q.a)({},m[h]),{},{multisig:p.multisig,bip32Path:p.bip32Path,change:p.change}));if(l=l.plus(p.balanceSats),!u){var f=Object(X.estimateMultisigTransactionFee)(Object(q.a)(Object(q.a)({},e),{},{numInputs:c.length,numOutputs:a.length})),E=Object(X.estimateMultisigTransactionFee)(Object(q.a)(Object(q.a)({},e),{},{numInputs:c.length,numOutputs:a.length+1})),b=l.minus(s);if(b.minus(f).isLessThanOrEqualTo(546)&&b.minus(f).isGreaterThanOrEqualTo(0)){t=!1;break}if(b.isGreaterThan(E)){t=!0;break}}}return[c,t]}var te=function(){return l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Disclaimer"}),l.a.createElement(N.a,null,l.a.createElement("small",null,"This application is in \u201calpha\u201d state and is presented for evaluation and testing only. It is provided \u201cas is,\u201d and any express or implied warranties, including but not limited to the implied warranties of merchantability and fitness for a particular purpose, are disclaimed. By using this application, you accept all risks of such use, including full responsibility for any direct or indirect loss of any kind resulting from the use of this application, which may involve complete loss of any Bitcoin or other coins associated with addresses used with this application. In no event shall Unchained Capital, Inc., its employees and affiliates, or developers of this application be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this application, even if advised of the possibility of such damage.")))},ne=function(){return l.a.createElement("div",null,l.a.createElement(x.a,{mt:4,mb:2},l.a.createElement(j.a,{variant:"h2"},"Welcome to Caravan!")),l.a.createElement(k.a,{container:!0,spacing:3},l.a.createElement(k.a,{container:!0,item:!0,md:8,spacing:2,direction:"column"},l.a.createElement(k.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Get Started"}),l.a.createElement(N.a,null,l.a.createElement(x.a,{mb:3},l.a.createElement(j.a,null,"Start using caravan by choosing to either make a multisig wallet or fully stateless address.")),l.a.createElement(k.a,{container:!0,alignItems:"center",justify:"center",spacing:3},l.a.createElement(k.a,{item:!0,xs:10,md:4},l.a.createElement(_.a,{variant:"contained","data-cy":"setup-wallet-button",size:"large",color:"primary",href:"#/wallet",startIcon:l.a.createElement(U.a,null)},"Wallet")),l.a.createElement(k.a,{item:!0,xs:10,md:4},l.a.createElement(_.a,{variant:"contained","data-cy":"setup-address-button",size:"large",color:"default",href:"#/address",startIcon:l.a.createElement(L.a,null)},"Address")))))),l.a.createElement(k.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Stateless Multisig Coordinator"}),l.a.createElement(N.a,null,l.a.createElement("p",null,"Caravan makes bitcoin multisig custody easier and safer through transparency and standards."),l.a.createElement("p",null,"Caravan is a ",l.a.createElement("strong",null,"coordination software")," for multisig addresses and wallets. Caravan can be used to build a multisig wallet derived from xpubs, or individual multisig addresses derived from pubkeys. In both cases, in order to transact from the wallet or address, you must also have your private keys and BIP32 paths."),l.a.createElement("p",null,"Caravan is ",l.a.createElement("strong",null,"stateless"),". It does not itself store any data outside your current browser session. You must safekeep the wallet details (xpubs, BIP32 paths) and addresses (redeem scripts, BIP32 paths) that you create.")))),l.a.createElement(k.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Keys"}),l.a.createElement(N.a,null,l.a.createElement("p",null,"All bitcoin is ultimately protected by private keys."),l.a.createElement("p",null,"Your private key may live on a piece of paper, a hardware wallet, some software on a laptop, or even just in your mind. Caravan, being stateless, does not store or ask for your private key but it can talk to hardware devices or software applications which do."),l.a.createElement("p",null,"Caravan supports entering public keys and signatures via text, so any wallet which can export such data can be made compatible with Caravan.")))),l.a.createElement(k.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Consensus"}),l.a.createElement(N.a,null,l.a.createElement("p",null,"In order to look up wallet addresses and their balances, and broadcast transactions, Caravan requires knowledge of the constantly changing bitcoin network."),l.a.createElement("p",null,"Running a full bitcoin node is the most private way to determine the current state of the bitcoin network. Caravan can be easily configured to use your own node for consensus information and broadcasting transactions."),l.a.createElement("p",null,"If you don't want to or cannot run your own full node, Caravan defaults to using the freely available API at",l.a.createElement("code",null," blockstream.info"),"."))))),l.a.createElement(k.a,{container:!0,item:!0,md:4,spacing:4,direction:"column"},l.a.createElement(k.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Learn More"}),l.a.createElement(N.a,null,l.a.createElement(A.a,null,l.a.createElement(K.a,null,l.a.createElement(M.a,null,l.a.createElement(z.a,null)),l.a.createElement(B.a,null,Q("https://unchained-capital.com/blog/gearing-up-the-caravan/","Blog Post"))),l.a.createElement(K.a,null,l.a.createElement(M.a,null,l.a.createElement(F.a,null)),l.a.createElement(B.a,null,Q("https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH","Video Tutorials"))),l.a.createElement(K.a,null,l.a.createElement(M.a,null,l.a.createElement(H.a,null)),l.a.createElement(B.a,null,Q("https://github.com/unchained-capital/caravan","Source Code"))))))),l.a.createElement(k.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Supported Devices"}),l.a.createElement(N.a,null,"Caravan has been ",l.a.createElement("a",{href:"#/test"},"tested")," with the following hardware wallets:",l.a.createElement("ul",null,l.a.createElement("li",null,Q("https://shop.trezor.io/product/trezor-one-white","Trezor One")),l.a.createElement("li",null,Q("https://shop.trezor.io/product/trezor-model-t","Trezor Model T")),l.a.createElement("li",null,Q("https://www.ledger.com/products/ledger-nano-s","Ledger Nano S")),l.a.createElement("li",null,Q("https://www.ledger.com/products/ledger-nano-x","Ledger Nano X"))),"And web browsers:",l.a.createElement("ul",null,l.a.createElement("li",null,Q("https://www.google.com/chrome/","Chrome")),l.a.createElement("li",null,Q("https://www.mozilla.org/en-US/firefox/new/","Firefox"))),"Seeing a bug or need a feature?"),l.a.createElement(D.a,null,l.a.createElement(_.a,{href:"https://github.com/unchained-capital/caravan/issues"},l.a.createElement(W.a,null)," \xa0 Report Issue"),l.a.createElement(_.a,{"data-cy":"run-tests-button",href:"#/test"},l.a.createElement(G.a,null)," \xa0 Run Tests")))))),l.a.createElement(x.a,{mt:2},l.a.createElement(te,null)))},ae=n(9),re=n.n(ae),oe=n(18),ie=n(1298),se=n(42),ce=n(56),le=n(179),ue=n.n(le);function de(){return(de=Object(oe.a)(re.a.mark((function e(t,n){var a,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.get(Object(Z.blockExplorerAPIURL)("/address/".concat(t,"/utxo"),n));case 3:return a=e.sent,r=a.data,e.next=7,Promise.all(r.map(function(){var e=Object(oe.a)(re.a.mark((function e(t){var a,r,o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.a.get(Object(Z.blockExplorerAPIURL)("/tx/".concat(t.txid,"/hex"),n));case 2:return a=e.sent,r=a.data,o=new V.a(t.value),e.abrupt("return",{confirmed:t.status.confirmed,txid:t.txid,index:t.vout,amount:Object(Z.satoshisToBitcoins)(o).toFixed(8),amountSats:o,transactionHex:r,time:t.status.block_time});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function pe(){return(pe=Object(oe.a)(re.a.mark((function e(t,n){var a,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.get(Object(Z.blockExplorerAPIURL)("/address/".concat(t),n));case 3:return a=e.sent,r=a.data,e.abrupt("return",{used:r.chain_stats.funded_txo_count>0||r.mempool_stats.funded_txo_count>0});case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function me(){return(me=Object(oe.a)(re.a.mark((function e(t){var n,a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.get(Object(Z.blockExplorerAPIURL)("/fee-estimates",t));case 3:return n=e.sent,a=n.data,e.abrupt("return",Math.ceil(a[2]));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function he(){return(he=Object(oe.a)(re.a.mark((function e(t,n){var a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.post(Object(Z.blockExplorerAPIURL)("/tx",n),t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function fe(e,t,n){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(oe.a)(re.a.mark((function e(t,n,a){var r,o=arguments;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>3&&void 0!==o[3]?o[3]:[],e.abrupt("return",new Promise(function(){var e=Object(oe.a)(re.a.mark((function e(o,i){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue()(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},auth:n,data:{jsonrpc:"2.0",id:0,method:"".concat(a),params:r}}).then((function(e){return o(e.data)})).catch(i);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){return e.response&&e.response.data&&e.response.data.error&&-4===e.response.data.error.code}function ve(e){return{url:e.url,auth:{username:e.username,password:e.password}}}function ge(){return(ge=Object(oe.a)(re.a.mark((function e(t){var n,a,r,o,i,s,c,l;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,a=t.auth,r=t.address,o=t.addresses,e.prev=1,i=o||[r],e.next=5,fe(n,a,"listunspent",[0,9999999,i]);case 5:return s=e.sent,c=[],s.result.forEach((function(e){c.push(fe(n,a,"gettransaction",[e.txid]))})),e.next=10,Promise.all(c);case 10:return l=e.sent,e.abrupt("return",s.result.map((function(e,t){var n=new V.a(e.amount);return{confirmed:(e.confirmations||0)>0,txid:e.txid,index:e.vout,amount:n.toFixed(8),amountSats:Object(Z.bitcoinsToSatoshis)(n),transactionHex:l[t].result.hex,time:l[t].result.blocktime}})));case 14:return e.prev=14,e.t0=e.catch(1),console.error("There was a problem:",e.t0.message),e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function ye(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(oe.a)(re.a.mark((function e(t){var n,a,r,o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,a=t.auth,r=t.address,e.prev=1,e.next=4,fe(n,a,"getreceivedbyaddress",[r]);case 4:if("undefined"!==typeof(o=e.sent).result){e.next=7;break}throw new Error("Error: invalid response from ".concat(n));case 7:return e.abrupt("return",{used:o.result>0});case 10:return e.prev=10,e.t0=e.catch(1),be(e.t0)?console.warn("Address ".concat(r," not found in bitcoind's wallet. Query failed.")):console.error(e.t0.message),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Se(){return(Se=Object(oe.a)(re.a.mark((function e(t){var n,a,r,o,i,s;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,a=t.auth,r=t.numBlocks,o=void 0===r?2:r,e.next=3,fe(n,a,"estimatesmartfee",[o]);case 3:return i=e.sent,s=i.result.feerate,e.abrupt("return",Math.ceil(1e5*s));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(){return(Te=Object(oe.a)(re.a.mark((function e(t){var n,a,r,o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,a=t.auth,r=t.hex,e.prev=1,e.next=4,fe(n,a,"sendrawtransaction",[r]);case 4:return o=e.sent,e.abrupt("return",o.result);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("send tx error",e.t0),e.t0.response&&e.t0.response.data.error.message||e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Oe(e){var t=e.url,n=e.auth,a=e.addresses,r=e.label,o=e.rescan,i=[t,n,"importmulti",[a.map((function(e){return{scriptPubKey:{address:e},label:r,timestamp:0}})),{rescan:o}]];return o?(fe.apply(void 0,i),new Promise((function(e){return e({result:[]})}))):fe.apply(void 0,i)}function Ie(e,t,n){return"public"===n.type?function(e,t){return de.apply(this,arguments)}(e,t):function(e){return ge.apply(this,arguments)}(Object(q.a)(Object(q.a)({},ve(n)),{address:e}))}function we(e,t,n){return xe.apply(this,arguments)}function xe(){return(xe=Object(oe.a)(re.a.mark((function e(t,n,a){var r,o,i,s;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={utxos:[],balanceSats:V()(0),fetchedUTXOs:!1,fetchUTXOsError:""},e.prev=1,e.next=4,Ie(t,n,a);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),o="private"===a.type&&be(e.t0)?{utxos:[],balanceSats:V()(0),addressKnown:!1,fetchedUTXOs:!0,fetchUTXOsError:""}:{fetchUTXOsError:e.t0.toString()};case 10:if(r){e.next=12;break}return e.abrupt("return",o);case 12:return i=Object(Z.sortInputs)(r),s=i.map((function(e){return e.amountSats})).reduce((function(e,t){return e.plus(t)}),new V.a(0)),e.abrupt("return",Object(q.a)(Object(q.a)({},o),{},{balanceSats:s,utxos:i,fetchedUTXOs:!0,fetchUTXOsError:""}));case 15:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function je(e,t,n){return"public"===n.type?function(e,t){return pe.apply(this,arguments)}(e,t):ye(Object(q.a)(Object(q.a)({},ve(n)),{address:e}))}function ke(e,t){return"public"===t.type?function(e){return me.apply(this,arguments)}(e):function(e){return Se.apply(this,arguments)}(Object(q.a)(Object(q.a)({},ve(t)),{numBlocks:1}))}function Re(e,t,n){return"public"===n.type?function(e,t){return he.apply(this,arguments)}(e,t):function(e){return Te.apply(this,arguments)}(Object(q.a)(Object(q.a)({},ve(n)),{hex:e}))}var Ce=n(408),Ne=function(e){return"asc"===e?-1:1};function _e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.bip32Path&&!t.bip32Path)throw new Error("Mising BIP32 path for comparing slices.");var a=Ne(n);if(e.change&&!t.change)return a;if(!e.change&&t.change)return-a;var r=parseInt(e.bip32Path.split("/").reverse()[0],10),o=parseInt(t.bip32Path.split("/").reverse()[0],10);return r>o?a:-a}function Ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.balanceSats&&!t.balanceSats)throw new Error("Missing balance for comparing slices");var a=Ne(n);return e.balanceSats.isEqualTo(t.balanceSats)?0:e.balanceSats.isGreaterThan(t.balanceSats)?a:-a}function Ke(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.utxos&&!t.utxos)throw new Error("Missing utxo array for comparing slices");var a=Ne(n);return e.utxos.length===t.utxos.length?0:e.utxos.length>t.utxos.length?a:-a}function Me(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",a=Ne(n);if(!e.utxos&&!t.utxos&&!e.lastUsed&&!t.lastUsed)return 0;if("Spent"===e.lastUsed)return t.lastUsed&&"Spent"!==t.lastUsed?-a:a;if("Spent"===t.lastUsed)return e.lastUsed&&"Spent"!==e.lastUsed?a:-a;if(e.lastUsed&&t.lastUsed)return e.lastUsed===t.lastUsed?0:e.lastUsed>=t.lastUsed?a:-a;if(e.lastUsed&&(!t.lastUsed||0===t.utxos.length))return a;if(t.lastUsed&&(!e.lastUsed||0===e.utxos.length))return-a;if(0===e.utxos.length)return 0===t.utxos.length?0:a;if(0===t.utxos.length)return 0===e.utxos.length?0:-a;var r=Math.min.apply(Math,Object(se.a)(e.utxos.map((function(e){return e.time})))),o=Math.min.apply(Math,Object(se.a)(t.utxos.map((function(e){return e.time}))));return Number.isNaN(r)&&Number.Number.isNaN(o)?0:Number.isNaN(r)?a:Number.isNaN(o)?-a:r>o?a:-a}function Be(e){var t="m/1".length;if("m/1"===e.slice(0,t)&&e.slice(t).match(/^([0-9]+)$/g))return!0;var n,a=e.match(/\/([0-9]+('?))/g).slice(-2),r=Object(Ce.a)(a);try{for(r.s();!(n=r.n()).done;){if(n.value.includes("'"))return!1}}catch(o){r.e(o)}finally{r.f()}return"/1"===a[0]&&2===a.length}var De=n(116),Ue=function(e){return Object.values(e.wallet.deposits.nodes)},Le=function(e){return[].concat(Object(se.a)(Object.values(e.wallet.deposits.nodes)),Object(se.a)(Object.values(e.wallet.change.nodes)))},ze=Object(De.a)(Le,(function(e){return e.reduce((function(e,t){return e+t.utxos.reduce((function(e,t){return e+parseInt(t.amountSats,10)}),0)}),0)})),Fe=Object(De.a)(Ue,(function(e){return e.reduce((function(e,t){return t.utxos.length?t.utxos.reduce((function(e,t){return t.confirmed?e:e+parseInt(t.amountSats,10)}),0)+e:e}),0)})),He=Object(De.a)([ze,Fe],(function(e,t){return e-t})),We=Object(De.a)(Le,(function(e){return e.map((function(e){if(!e.utxos.length&&e.addressUsed)return Object(q.a)(Object(q.a)({},e),{},{lastUsed:"Spent"});if(!e.utxos.length&&e.balanceSats.isEqualTo(0))return e;var t=Math.max.apply(Math,Object(se.a)(e.utxos.map((function(e){return e.time}))));return Number.isNaN(t)||e.balanceSats.isGreaterThan(0)&&!e.utxos.length?Object(q.a)(Object(q.a)({},e),{},{lastUsed:"Pending"}):Object(q.a)(Object(q.a)({},e),{},{lastUsed:new Date(1e3*t).toLocaleDateString()})}))})),Ge=Object(De.a)(We,(function(e){return e.filter((function(e){return("Pending"!==e.lastUsed||e.change)&&"Spent"!==e.lastUsed&&e.utxos.length}))})),qe=Object(De.a)(We,(function(e){return e.filter((function(e){return e.addressUsed&&e.balanceSats.isEqualTo(0)}))})),Ye=Object(De.a)(We,(function(e){return e.filter((function(e){return e.balanceSats.isGreaterThan(0)}))})),Ve=Object(De.a)(We,(function(e){return e.filter((function(e){return e.balanceSats.isEqualTo(0)&&!e.addressUsed}))})),Xe=Object(De.a)(Le,(function(e){return e.filter((function(e){return!e.addressKnown}))})),Ze=Object(De.a)([Le,Xe],(function(e){return e.map((function(e){return e.multisig.address}))})),Je=Object(De.a)(Ue,(function(e){return e.filter((function(e){return e.balanceSats.isEqualTo(0)&&!e.addressUsed}))}));function Qe(e){return{type:"SET_REQUIRED_SIGNERS",value:e}}function $e(e){return{type:"SET_INPUTS",value:e}}function et(){return{type:"ADD_OUTPUT"}}function tt(e){return{type:"SET_CHANGE_OUTPUT_INDEX",value:e}}function nt(e,t){return{type:"SET_OUTPUT_ADDRESS",number:e,value:t}}function at(e,t){return{type:"SET_OUTPUT_AMOUNT",number:e,value:t}}function rt(e){return{type:"SET_CHANGE_ADDRESS",value:e}}function ot(e){return{type:"DELETE_OUTPUT",number:e}}function it(e){return{type:"SET_FEE_RATE",value:e}}function st(e){return{type:"SET_FEE",value:e}}function ct(e){return{type:"FINALIZE_OUTPUTS",value:e}}function lt(e){return{type:"SET_BALANCE_ERROR",value:e}}function ut(e){return{type:"UPDATE_AUTO_SPEND",value:e}}function dt(e){return{type:"SET_SPEND_STEP",value:e}}var pt="SET_ERROR_NOTIFICATION",mt="CLEAR_ERROR_NOTIFICATION";function ht(e){return{type:pt,value:e}}function ft(){return{type:mt}}var Et=0,bt=1,vt=2;function gt(e){return{type:"UPDATE_DEPOSIT_SLICE",value:Object(q.a)(Object(q.a)({},e),{change:!1})}}function yt(e){return{type:"UPDATE_CHANGE_SLICE",value:Object(q.a)(Object(q.a)({},e),{change:!0})}}function Pt(e,t){return{type:"UPDATE_WALLET_NAME",value:t}}function St(){return{type:"RESET_WALLET_VIEW"}}function Tt(){return{type:"RESET_WALLET"}}var Ot=function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=Object(oe.a)(re.a.mark((function e(n,a){var r,o,i,s;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a().settings.network,o=a(),i=o.client,e.prev=2,s=t.map((function(e){var t=e.multisig.address;return Promise.all([we(t,r,i),je(t,r,i)])})),e.next=6,Promise.all(s);case 6:e.sent.forEach((function(e,a){var r=Object(ce.a)(e,2),o=r[0],i=r[1],s=t[a];if(o&&o.utxos.length){var c=s.change?yt:gt,l=Object(q.a)(Object(q.a)({bip32Path:s.bip32Path,addressKnown:!0},o),{},{addressStatus:i});n(c(l))}})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("There was a problem getting updated braid data:",e.t0.message),n(ht(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),It=n(611),wt=n(265),xt=function(e){var t=e.network;return l.a.createElement(wt.a,{"data-cy":"bitcoin-icon",htmlColor:t===Z.MAINNET?"orange":"grey"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"bitcoin",className:"svg-inline--fa fa-bitcoin fa-w-16",role:"img",viewBox:"0 0 512 512"},l.a.createElement("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-141.651-35.33c4.937-32.999-20.191-50.739-54.55-62.573l11.146-44.702-27.213-6.781-10.851 43.524c-7.154-1.783-14.502-3.464-21.803-5.13l10.929-43.81-27.198-6.781-11.153 44.686c-5.922-1.349-11.735-2.682-17.377-4.084l.031-.14-37.53-9.37-7.239 29.062s20.191 4.627 19.765 4.913c11.022 2.751 13.014 10.044 12.68 15.825l-12.696 50.925c.76.194 1.744.473 2.829.907-.907-.225-1.876-.473-2.876-.713l-17.796 71.338c-1.349 3.348-4.767 8.37-12.471 6.464.271.395-19.78-4.937-19.78-4.937l-13.51 31.147 35.414 8.827c6.588 1.651 13.045 3.379 19.4 5.006l-11.262 45.213 27.182 6.781 11.153-44.733a1038.209 1038.209 0 0 0 21.687 5.627l-11.115 44.523 27.213 6.781 11.262-45.128c46.404 8.781 81.299 5.239 95.986-36.727 11.836-33.79-.589-53.281-25.004-65.991 17.78-4.098 31.174-15.792 34.747-39.949zm-62.177 87.179c-8.41 33.79-65.308 15.523-83.755 10.943l14.944-59.899c18.446 4.603 77.6 13.717 68.811 48.956zm8.417-87.667c-7.673 30.736-55.031 15.12-70.393 11.292l13.548-54.327c15.363 3.828 64.836 10.973 56.845 43.035z"})))};xt.defaultProps={network:Z.MAINNET};var jt=xt,kt=n(696),Rt=n(413),Ct=n(1322),Nt=n(1323),_t=n(1324),At=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){var e=a.props.name;a.setState({newName:e})},a.render=function(){var e=a.props.name,t=a.state,n=t.editing,r=t.newName,o=t.error;return n?l.a.createElement(k.a,{container:!0,alignItems:"center"},l.a.createElement(k.a,{item:!0},l.a.createElement(kt.a,{autoFocus:!0,label:"Name",value:r,onChange:a.handleChange,error:a.hasError(),helperText:o})),l.a.createElement(k.a,{item:!0},l.a.createElement(Rt.a,{"data-cy":"save-button",size:"small",onClick:a.submit,disabled:a.hasError()},l.a.createElement(Ct.a,null))),l.a.createElement(k.a,{item:!0},l.a.createElement(Rt.a,{"data-cy":"cancel-button",color:"secondary",size:"small",onClick:a.cancel},l.a.createElement(Nt.a,null)))):l.a.createElement("span",null,l.a.createElement(Rt.a,{"data-cy":"edit-button",size:"small",onClick:a.startEditing},l.a.createElement(_t.a,null)),"\xa0",l.a.createElement("span",{"data-cy":"editable-name-value"},e))},a.hasError=function(){return""!==a.state.error},a.startEditing=function(e){var t=a.props.name;e.preventDefault(),a.setState({editing:!0,newName:t})},a.handleChange=function(e){var t=e.target.value,n="";null!==t&&void 0!==t&&""!==t||(n="Name cannot be blank."),a.setState({newName:t,error:n})},a.submit=function(){var e=a.props;(0,e.setName)(e.number,a.state.newName),a.setState({editing:!1})},a.cancel=function(){var e=a.props.name;a.setState({error:"",newName:e,editing:!1})},a.state={editing:!1,newName:"",error:""},a}return n}(l.a.Component),Kt=Object(It.a)((function(e){return{root:{height:"100%"},title:{fontSize:"2rem",color:"#212529"},balance:{fontSize:"1.2rem"},gutter:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(2)}}})),Mt=function(e){var t=e.walletName,n=e.setName,a=e.balance,r=void 0===a?0:a,o=e.pendingBalance,i=e.editable,s=e.network,c=Kt();return l.a.createElement(R.a,{"data-cy":"wallet-info-card",className:c.root},l.a.createElement(N.a,null,l.a.createElement(k.a,{container:!0,direction:"row",alignItems:"center"},i?l.a.createElement(k.a,{item:!0},l.a.createElement(j.a,{variant:"h1",className:c.title},l.a.createElement(At,{number:0,name:t,setName:n}))):l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{container:!0,alignItems:"center",className:c.gutter},l.a.createElement(k.a,{item:!0,xs:1},l.a.createElement(jt,{network:s})),l.a.createElement(k.a,{item:!0},l.a.createElement(j.a,{variant:"h1",className:c.title},t))),l.a.createElement(k.a,{container:!0,className:c.gutter},l.a.createElement(k.a,{item:!0,xs:12,mt:5},l.a.createElement(j.a,{"data-cy":"balance",variant:"subtitle1",className:c.balance},r," BTC")),l.a.createElement(k.a,{item:!0},l.a.createElement(j.a,{"data-cy":"pending-balance",variant:"caption"},0!==o?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{style:{color:o>0?"green":"red",fontWeight:"bold"}},o>0?"+":"",o," BTC")," ","(unconfirmed)"):"")))))))};Mt.defaultProps={network:Z.NETWORKS.TESTNET,balance:0,pendingBalance:0};var Bt=Mt,Dt=n(541),Ut=n(697),Lt=n(698),zt=n(1359);function Ft(e){return{type:"SET_NETWORK",value:e}}function Ht(e){return{type:"SET_TOTAL_SIGNERS",value:e}}function Wt(e){return{type:"SET_REQUIRED_SIGNERS",value:e}}function Gt(e){return{type:"SET_ADDRESS_TYPE",value:e}}function qt(e){return{type:"SET_FROZEN",value:e}}var Yt=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleNetworkChange=function(t){(0,e.props.setNetwork)(t.target.value)},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props,t=e.network,n=e.frozen;return l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Network"}),l.a.createElement(N.a,null,l.a.createElement(Dt.a,{component:"fieldset"},l.a.createElement(Ut.a,null,l.a.createElement(Lt.a,{id:"mainnet",control:l.a.createElement(zt.a,{color:"primary"}),name:"network",value:"mainnet",label:l.a.createElement("strong",null,"Mainnet"),onChange:this.handleNetworkChange,checked:t===Z.MAINNET,disabled:n}),l.a.createElement(Lt.a,{id:"testnet",control:l.a.createElement(zt.a,{color:"primary"}),name:"network",value:"testnet",label:"Testnet",onChange:this.handleNetworkChange,checked:t===Z.TESTNET,disabled:n})),l.a.createElement(ie.a,null,l.a.createElement("small",null,"Choose 'Mainnet' if you don't understand the difference.")))))}}]),n}(l.a.Component);var Vt={setNetwork:Ft},Xt=Object(m.b)((function(e){return{network:e.settings.network,frozen:e.settings.frozen}}),Vt)(Yt),Zt=n(1325),Jt=n(1326),Qt=(n(484),function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).renderIncrementRequiredSigners=function(){var t=e.props,n=t.requiredSigners,a=t.totalSigners,r=t.frozen,o=n===a||r;return l.a.createElement(Rt.a,{color:"primary",onClick:e.handleIncrementRequiredSigners,disabled:o},l.a.createElement(Zt.a,null))},e.renderDecrementRequiredSigners=function(){var t=e.props,n=t.requiredSigners,a=t.frozen,r=1===n||a;return l.a.createElement(Rt.a,{color:"secondary",onClick:e.handleDecrementRequiredSigners,disabled:r},l.a.createElement(Jt.a,null))},e.renderIncrementTotalSigners=function(){var t=e.props,n=t.totalSigners,a=t.frozen,r=7===n||a;return l.a.createElement(Rt.a,{color:"primary",onClick:e.handleIncrementTotalSigners,disabled:r},l.a.createElement(Zt.a,null))},e.renderDecrementTotalSigners=function(){var t=e.props,n=t.requiredSigners,a=t.totalSigners,r=t.frozen,o=a===n||2===a||r;return l.a.createElement(Rt.a,{color:"secondary",onClick:e.handleDecrementTotalSigners,disabled:o},l.a.createElement(Jt.a,null))},e.handleIncrementRequiredSigners=function(t){var n=e.props,a=n.requiredSigners;(0,n.setRequiredSigners)(a+1),t.preventDefault()},e.handleDecrementRequiredSigners=function(t){var n=e.props,a=n.requiredSigners;(0,n.setRequiredSigners)(a-1),t.preventDefault()},e.handleIncrementTotalSigners=function(t){var n=e.props,a=n.totalSigners;(0,n.setTotalSigners)(a+1),t.preventDefault()},e.handleDecrementTotalSigners=function(t){var n=e.props,a=n.totalSigners;(0,n.setTotalSigners)(a-1),t.preventDefault()},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props,t=e.requiredSigners,n=e.totalSigners;return l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Quorum"}),l.a.createElement(N.a,null,l.a.createElement(x.a,null,l.a.createElement(k.a,{container:!0,justify:"center"},l.a.createElement(k.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0"),l.a.createElement(k.a,{container:!0,item:!0,xs:3,direction:"column",alignItems:"center"},l.a.createElement(k.a,{item:!0},this.renderIncrementRequiredSigners()),l.a.createElement(k.a,{item:!0},l.a.createElement(j.a,{variant:"h2"},t)),l.a.createElement(k.a,{item:!0},l.a.createElement("small",null,l.a.createElement("p",null,"Required"))),l.a.createElement(k.a,{item:!0},this.renderDecrementRequiredSigners())),l.a.createElement(k.a,{container:!0,item:!0,xs:2,direction:"column",alignItems:"center",justify:"center"},l.a.createElement(k.a,{item:!0},l.a.createElement(j.a,{variant:"h6"},"of"))),l.a.createElement(k.a,{item:!0,container:!0,xs:3,direction:"column",alignItems:"center"},l.a.createElement(k.a,{item:!0},this.renderIncrementTotalSigners()),l.a.createElement(k.a,{item:!0},l.a.createElement(j.a,{variant:"h2"},n)),l.a.createElement(k.a,{item:!0},l.a.createElement("small",null,l.a.createElement("p",null,"Total"))),l.a.createElement(k.a,{item:!0},this.renderDecrementTotalSigners())),l.a.createElement(k.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0")))))}}]),n}(l.a.Component));var $t={setTotalSigners:Ht,setRequiredSigners:Wt},en=Object(m.b)((function(e){return e.settings}),$t)(Qt),tn=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleTypeChange=function(t){(0,e.props.setType)(t.target.value)},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props,t=e.addressType,n=e.frozen;return l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Address Type"}),l.a.createElement(N.a,null,l.a.createElement(Dt.a,{component:"fieldset"},l.a.createElement(Ut.a,null,l.a.createElement(Lt.a,{id:Z.P2SH,control:l.a.createElement(zt.a,{color:"primary"}),name:"type",value:Z.P2SH,label:Z.P2SH,onChange:this.handleTypeChange,checked:t===Z.P2SH,disabled:n}),l.a.createElement(Lt.a,{id:Z.P2SH_P2WSH,control:l.a.createElement(zt.a,{color:"primary"}),name:"type",value:Z.P2SH_P2WSH,label:Z.P2SH_P2WSH,onChange:this.handleTypeChange,checked:t===Z.P2SH_P2WSH,disabled:n}),l.a.createElement(Lt.a,{id:Z.P2WSH,control:l.a.createElement(zt.a,{color:"primary"}),name:"type",value:Z.P2WSH,label:Z.P2WSH,onChange:this.handleTypeChange,checked:t===Z.P2WSH,disabled:n})),l.a.createElement(ie.a,null,l.a.createElement("small",null,"Choose '",Z.P2WSH,"' for best practices, '",Z.P2SH,"' for greatest compatibility.")))))}}]),n}(l.a.Component);var nn={setType:Gt},an=Object(m.b)((function(e){return e.settings}),nn)(tn);function rn(e){return function(t){return{type:e,value:t}}}function on(e){var t,n={},a=Object.keys(e);for(t=0;t<a.length;t+=1){var r=a[t],o=e[r];n[r]=rn(o)}return n}function sn(e){return function(t,n){return{type:e,number:t,value:n}}}function cn(e){var t,n={},a=Object.keys(e);for(t=0;t<a.length;t+=1){var r=a[t],o=e[r];n[r]=sn(o)}return n}var ln=function(e){var t=e.handleUrlChange,n=e.handleUsernameChange,a=e.handlePasswordChange,r=e.client,o=e.urlError,i=e.usernameError,s=e.passwordError,c=e.privateNotes,u=e.connectSuccess,d=e.connectError,p=e.testConnection;return l.a.createElement("div",null,l.a.createElement("p",null,"A ",l.a.createElement("code",null,"bitcoind"),"-compatible client is required to query UTXO data, estimate fees, and broadcast transactions."),l.a.createElement("p",null,l.a.createElement("small",null,"Due to CORS requirements, you must use a proxy around the node. Instructions are available ",Q("https://github.com/unchained-capital/caravan#adding-cors-headers","here"),".")),l.a.createElement("form",null,l.a.createElement(k.a,{container:!0,direction:"column",spacing:1},l.a.createElement(k.a,{item:!0},l.a.createElement(kt.a,{fullWidth:!0,label:"URL",value:r.url,onChange:t,error:""!==o,helperText:o})),l.a.createElement(k.a,{item:!0},l.a.createElement(kt.a,{id:"bitcoind-username",fullWidth:!0,label:"Username",value:r.username,onChange:n,error:""!==i,helperText:i})),l.a.createElement(k.a,{item:!0},l.a.createElement(kt.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",value:r.password,onChange:a,error:""!==s,helperText:s})),l.a.createElement(k.a,{item:!0},l.a.createElement(x.a,{mt:1},l.a.createElement(_.a,{variant:"contained",onClick:p},"Test Connection")),l.a.createElement(x.a,{mt:2},u&&l.a.createElement(ie.a,null,"Connection Success!"),""!==d&&l.a.createElement(ie.a,{error:!0},d))))),c)};ln.defaultProps={urlError:"",usernameError:"",passwordError:"",privateNotes:l.a.createElement("span")};var un=ln,dn=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleTypeChange=function(e){var t=a.props,n=t.setType,r=t.network,o=t.setUrl,i=a.state.urlEdited,s=e.target.value;"private"!==s||i||o("http://localhost:".concat("mainnet"===r?8332:18332)),n(s)},a.handleUrlChange=function(e){var t=a.props,r=t.setUrl,o=t.setUrlError,i=a.state.urlEdited,s=e.target.value,c=n.validateUrl(s);i||c||a.setState({urlEdited:!0}),r(s),o(c)},a.handleUsernameChange=function(e){var t=a.props,r=t.setUsername,o=t.setUsernameError,i=e.target.value,s=n.validateUsername(i);r(i),o(s)},a.handlePasswordChange=function(e){var t=a.props,r=t.setPassword,o=t.setPasswordError,i=e.target.value,s=n.validatePassword(i);r(i),o(s)},a.testConnection=Object(oe.a)(re.a.mark((function e(){var t,n,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.network,r=t.client,a.setState({connectError:"",connectSuccess:!1}),e.prev=2,e.next=5,ke(n,r);case 5:a.setState({connectSuccess:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),a.setState({connectError:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[2,8]])}))),a.state={urlEdited:!1,connectError:"",connectSuccess:!1},a}return Object(v.a)(n,null,[{key:"validatePassword",value:function(){return""}},{key:"validateUsername",value:function(){return""}},{key:"validateUrl",value:function(e){return/^http(s)?:\/\/[^\s]+$/.exec(e)?"":"Must be a valid URL."}}]),Object(v.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.client,a=t.urlError,r=t.usernameError,o=t.passwordError,i=t.privateNotes,s=this.state,c=s.connectSuccess,u=s.connectError;return l.a.createElement(R.a,null,l.a.createElement(k.a,{container:!0,justify:"space-between"},l.a.createElement(C.a,{title:"Bitcoin Client"})),l.a.createElement(N.a,null,l.a.createElement(k.a,{item:!0},l.a.createElement(Dt.a,{component:"fieldset"},l.a.createElement(Ut.a,null,l.a.createElement(Lt.a,{id:"public",control:l.a.createElement(zt.a,{color:"primary"}),name:"clientType",value:"public",label:l.a.createElement("strong",null,"Public"),onChange:this.handleTypeChange,checked:"public"===n.type}),l.a.createElement(Lt.a,{id:"private",control:l.a.createElement(zt.a,{color:"primary"}),name:"clientType",value:"private",label:"Private",onChange:this.handleTypeChange,checked:"private"===n.type})),"public"===n.type?l.a.createElement(ie.a,null,"'Public' uses the ",l.a.createElement("code",null,"blockstream.info")," API. Switch to private to use a ",l.a.createElement("code",null,"bitcoind")," node."):l.a.createElement(un,{handleUrlChange:function(t){return e.handleUrlChange(t)},handleUsernameChange:function(t){return e.handleUsernameChange(t)},handlePasswordChange:function(t){return e.handlePasswordChange(t)},client:n,urlError:a,usernameError:r,passwordError:o,privateNotes:i,connectSuccess:c,connectError:u,testConnection:function(){return e.testConnection()}})))))}}]),n}(l.a.Component);dn.defaultProps={urlError:"",usernameError:"",passwordError:"",privateNotes:l.a.createElement("span")};var pn=Object(m.b)((function(e){return{network:e.settings.network,client:e.client,urlError:e.client.urlError,url:e.client.url}}),on({setType:"SET_CLIENT_TYPE",setUrl:"SET_CLIENT_URL",setUsername:"SET_CLIENT_USERNAME",setPassword:"SET_CLIENT_PASSWORD",setUrlError:"SET_CLIENT_URL_ERROR",setUsernameError:"SET_CLIENT_USERNAME_ERROR",setPasswordError:"SET_CLIENT_PASSWORD_ERROR"}))(dn),mn=n(316),hn=n(726),fn=n(826),En=n.n(fn),bn=n(699),vn=n(700),gn=n(701),yn=n(702),Pn=n(703),Sn=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).render=function(){return l.a.createElement(x.a,null,l.a.createElement(bn.a,null,l.a.createElement(vn.a,null,l.a.createElement(gn.a,null,l.a.createElement(yn.a,null,"Name"),l.a.createElement(yn.a,null,"BIP32 Path"),l.a.createElement(yn.a,null,"Extended Public Key"))),l.a.createElement(Pn.a,null,e.renderConfirmationInfo())))},e.renderConfirmationInfo=function(){var t=e.props.extendedPublicKeyImporters;return Object.values(t).map((function(e){return l.a.createElement(gn.a,{key:e.extendedPublicKey},l.a.createElement(yn.a,null,e.name),l.a.createElement(yn.a,null,"text"===e.method?"N/A":e.bip32Path),l.a.createElement(yn.a,null,e.extendedPublicKey))}))},e}return n}(l.a.Component);var Tn=Object(m.b)((function(e){return{extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters}}),{})(Sn),On=n(1358),In=n(1332),wn=n(727),xn=n(416),jn=n.n(xn),kn=n(5),Rn=n.n(kn),Cn={c:Rn.a.arrayOf(Rn.a.number).isRequired,e:Rn.a.number.isRequired,s:Rn.a.number.isRequired},Nn=(Rn.a.bool,Rn.a.string,Rn.a.array,Rn.a.shape({}),Rn.a.string.isRequired,Rn.a.shape(Cn),Rn.a.array,Rn.a.bool.isRequired,Rn.a.bool.isRequired,Rn.a.bool,Rn.a.string.isRequired,Rn.a.bool,Rn.a.bool.isRequired,Rn.a.string,Rn.a.string.isRequired,Rn.a.string,Rn.a.string,Rn.a.string,Rn.a.string,Rn.a.string,Rn.a.string,Rn.a.string,Rn.a.string,Rn.a.number,Rn.a.number,Rn.a.string,Rn.a.bool,n(425)),_n=n(810),An=n.n(_n),Kn=n(1327),Mn=Object(It.a)((function(){return{copyText:{"&:hover":{cursor:"pointer"}},code:{fontSize:"1rem"}}})),Bn=function(e){var t=e.newline,n=e.text,a=e.children,r=e.showIcon,o=e.showText,i=e.code,s=Object(Nn.a)(e,["newline","text","children","showIcon","showText","code"]),u=Object(c.useState)(!1),d=Object(ce.a)(u,2),p=d[0],m=d[1],h=Object(c.useState)(null),f=Object(ce.a)(h,2),E=f[0],b=f[1],v=Object(w.useSnackbar)().enqueueSnackbar;Object(c.useEffect)((function(){E&&clearTimeout(E)}),[]);var g=Mn(),y=function(){return i?l.a.createElement("code",{className:g.code},n):l.a.createElement("span",null,n)};return l.a.createElement("span",Object.assign({onClick:function(e){return e.stopPropagation()}},s),l.a.createElement(An.a,{text:n,onCopy:function(){var e=setTimeout((function(){m(!1),b(null)}),1e3);m(!0),b(e),function(){var e=n.length>25?"".concat(n.substring(0,25),"..."):n;v("Copied ".concat(e," to clipboard"),{preventDuplicate:!0})}()},options:{format:"text/plain"}},l.a.createElement("span",{style:{fontStyle:p?"italic":"inherit",overflowWrap:"break-word"},className:"copyable ".concat(g.copyText)},a,o&&l.a.createElement(y,null),t&&l.a.createElement("br",null),r&&l.a.createElement(Rt.a,null,l.a.createElement(Kn.a,{fontSize:"small",color:p?"primary":"action"})))))};Bn.defaultProps={newline:!1,showIcon:!1,children:l.a.createElement("span"),showText:!0,code:!1};var Dn=Bn,Un=n(811),Ln=n.n(Un),zn=n(713),Fn=n(1333),Hn=n(728),Wn=n(1341),Gn=(n(492),n(100)),qn=n.n(Gn),Yn=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).renderInputs=function(){var t=e.props,n=t.inputs,a=t.network;return n.map((function(e,t){var n="".concat(qn.a.utxoTxid).concat(e.confirmed?"":" ".concat(qn.a.unconfirmed)),r=e.confirmed?"confirmed":"unconfirmed";return l.a.createElement(gn.a,{hover:!0,key:e.txid},l.a.createElement(yn.a,null,t+1),l.a.createElement(yn.a,{className:n},l.a.createElement(Dn,{text:e.txid,showIcon:!0,showText:!1},l.a.createElement("code",{title:r},e.txid))),l.a.createElement(yn.a,null,l.a.createElement(Dn,{text:e.index.toString()})),l.a.createElement(yn.a,null,l.a.createElement(Dn,{text:Object(Z.satoshisToBitcoins)(e.amountSats).toString()})),l.a.createElement(yn.a,null,Q(Object(Z.blockExplorerTransactionURL)(e.txid,a),l.a.createElement(Wn.a,null))))}))},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props,t=e.inputs,n=e.inputsTotalSats;return l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{variant:"h5"},"Available Inputs (".concat(t.length,")")," "),l.a.createElement("p",null,"The following UTXOs will be spent as inputs in a new transaction."),l.a.createElement(bn.a,null,l.a.createElement(vn.a,null,l.a.createElement(gn.a,{hover:!0},l.a.createElement(yn.a,null,"Number"),l.a.createElement(yn.a,null,"TXID"),l.a.createElement(yn.a,null,"Index"),l.a.createElement(yn.a,null,"Amount (BTC)"),l.a.createElement(yn.a,null,"View"))),l.a.createElement(Pn.a,null,this.renderInputs()),l.a.createElement(Hn.a,null,l.a.createElement(gn.a,{hover:!0},l.a.createElement(yn.a,{colSpan:3},"TOTAL:"),l.a.createElement(yn.a,{colSpan:2},Object(Z.satoshisToBitcoins)(n).toString())))))}}]),n}(l.a.Component);var Vn=Object(m.b)((function(e){return Object(q.a)({},e.settings)}))(Yn),Xn=n(803),Zn=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).renderScript=function(e,t){var n=Object(Z.scriptToHex)(t),a=Object(Z.scriptToOps)(t);return l.a.createElement(x.a,{mt:2},l.a.createElement(j.a,{variant:"h6"},e),l.a.createElement(k.a,{container:!0,spacing:2},l.a.createElement(k.a,{item:!0,sm:6},l.a.createElement(Dn,{text:n,showIcon:!0,code:!0})),l.a.createElement(k.a,{item:!0,sm:6},l.a.createElement(Dn,{text:a,showIcon:!0,code:!0}))))},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props,t=e.network,n=e.multisig,a=e.showAddress,r=n.address,o=Object(Z.multisigRedeemScript)(n),i=Object(Z.multisigWitnessScript)(n);return l.a.createElement(x.a,{mt:2},a&&l.a.createElement(j.a,{variant:"h6"},"Address"),l.a.createElement(j.a,{align:"center",variant:"h5"},l.a.createElement(k.a,{container:!0,direction:"column",spacing:2},a&&l.a.createElement(k.a,{item:!0},l.a.createElement(Dn,{text:r,showIcon:!0,code:!0}),"\xa0",Q(Object(Z.blockExplorerAddressURL)(r,t),l.a.createElement(Wn.a,null))),l.a.createElement(k.a,{item:!0,justify:"center",container:!0,spacing:3},l.a.createElement(k.a,{item:!0},l.a.createElement(Xn.a,{label:"BTC"})),l.a.createElement(k.a,{item:!0},l.a.createElement(Xn.a,{label:Object(Z.networkLabel)(t)})),l.a.createElement(k.a,{item:!0},l.a.createElement(Xn.a,{label:"".concat(Object(Z.multisigRequiredSigners)(n),"-of-").concat(Object(Z.multisigTotalSigners)(n))})),l.a.createElement(k.a,{item:!0},l.a.createElement(Xn.a,{label:Object(Z.multisigAddressType)(n)}))))),this.renderScript("Script",n),o&&this.renderScript("Redeem Script",o),i&&this.renderScript("Witness Script",i))}}]),n}(l.a.Component);Zn.defaultProps={showAddress:!0};var Jn=Object(m.b)((function(e){return e.settings}),{})(Zn),Qn=n(1340),$n=n(816),ea=n.n($n),ta=Object(It.a)((function(){return{tooltip:{fontSize:".8rem"}}}));function na(e){var t=e.addresses,n=void 0===t?[]:t,a=e.client,r=e.importCallback,o=Object(c.useState)(!1),i=Object(ce.a)(o,2),s=i[0],u=i[1],d=Object(c.useState)(""),p=Object(ce.a)(d,2),m=p[0],h=p[1],f=Object(c.useState)(!1),E=Object(ce.a)(f,2),b=E[0],v=E[1],g=Object(c.useState)(""),y=Object(ce.a)(g,2),P=y[0],S=y[1],T=Object(c.useState)(!1),O=Object(ce.a)(T,2),I=O[0],w=O[1],j=ta();Object(c.useEffect)((function(){var e=function(){var e=Object(oe.a)(re.a.mark((function e(){var t,r,o,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!1),t=n[n.length-1]){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,ye(Object(q.a)(Object(q.a)({},ve(a)),{},{address:t}));case 7:(r=e.sent)&&"undefined"!==typeof r.used?w(!1):w(!0),S(""),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),o=e.t0.response&&e.t0.response.status||"unknown",i=401===o?e.t0.response.statusText:500===o?e.t0.response.data.error.message:e.t0.message||"An unknown address error occured",S(i);case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}();"private"!==a.type||I&&1!==n.length||e()}),[n,a]);var R=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"".concat(e?"A":"a","ddress").concat(n&&n.length>1?"es":"")};function C(){return(C=Object(oe.a)(re.a.mark((function e(){var t,o,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.prev=1,e.next=4,Oe(Object(q.a)(Object(q.a)({},ve(a)),{addresses:n,label:"",rescan:b}));case 4:if(t=e.sent,o=t.result.reduce((function(e,t){return t.error&&t.error.message||e}),""),h(o),u(!o.length),!r){e.next=12;break}return i=t.result.filter((function(e){return e.success})),e.next=12,r(i,b);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),h("Unable to import, check your settings and try again"),u(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}var N="To get accurate information from your node, your ".concat(R(),"\nwill need to be imported to your node. Importing will give you accurate balance information\nhowever to know if an address has been used prior to import, a rescan needs to take place.");return l.a.createElement(k.a,{className:j.container},l.a.createElement(x.a,{component:"span",ml:2},l.a.createElement(_.a,{variant:"contained",disabled:!I&&!b||!n.length,onClick:function(){return C.apply(this,arguments)}},"Import ",R(!0))),l.a.createElement(x.a,{component:"span",ml:2},l.a.createElement(Lt.a,{control:l.a.createElement(Qn.a,{checked:b,onChange:function(e){return v(e.target.checked)},color:"secondary"}),label:"Rescan"}),l.a.createElement(zn.a,{title:N,classes:{tooltip:j.tooltip}},l.a.createElement(ea.a,{fontSize:"small",color:"disabled"}))),l.a.createElement(x.a,null,P.length>0&&l.a.createElement(ie.a,{error:!0},P),m.length>0&&l.a.createElement(ie.a,{error:!0},m),s&&b&&l.a.createElement(ie.a,null,R(!0)," imported, rescan of your node may take some time."),s&&!b&&l.a.createElement(ie.a,null,R(!0)," imported.")))}na.defaultProps={addresses:[],importCallback(){}};var aa=na,ra=n(1345),oa=n(1344),ia=n(8),sa=n(542),ca=n(545),la=n(711),ua=cn({setSignatureImporterName:"SET_SIGNATURE_IMPORTER_NAME",setSignatureImporterMethod:"SET_SIGNATURE_IMPORTER_METHOD",setSignatureImporterBIP32Path:"SET_SIGNATURE_IMPORTER_BIP32_PATH",setSignatureImporterPublicKeys:"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS",setSignatureImporterSignature:"SET_SIGNATURE_IMPORTER_SIGNATURE",setSignatureImporterFinalized:"SET_SIGNATURE_IMPORTER_FINALIZED",setSignatureImporterComplete:"SET_SIGNATURE_IMPORTER_COMPLETE"}),da=ua.setSignatureImporterName,pa=ua.setSignatureImporterMethod,ma=ua.setSignatureImporterBIP32Path,ha=ua.setSignatureImporterPublicKeys,fa=ua.setSignatureImporterSignature,Ea=ua.setSignatureImporterFinalized,ba=ua.setSignatureImporterComplete,va=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.state,t=e.signatureJSON,n=e.error;return l.a.createElement(x.a,{mt:2},l.a.createElement(kt.a,{fullWidth:!0,multiline:!0,variant:"outlined",name:"signature",label:"Signature",rows:5,value:t,onChange:a.handleChange,error:a.hasError(),helperText:n}),l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{variant:"contained",color:"primary",size:"large",onClick:a.finalize,disabled:""===t},"Add Signature")))},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){var t=e.target.value,n="";try{JSON.parse(t)}catch(r){n="Invalid JSON."}a.setState({signatureJSON:t,error:n})},a.finalize=function(){var e=a.props.validateAndSetSignature,t=a.state.signatureJSON;try{e(JSON.parse(t),a.setError)}catch(n){a.setError(n.message)}},a.state={signatureJSON:"",error:""},a}return n}(l.a.Component),ga=n(819),ya=n.n(ga),Pa=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.state,t=e.status,n=e.error,r=a.props,o=r.interaction,i=r.width,s=r.startText;if(t===ia.PENDING){var c=o.messageFor({state:t,code:"hermit.command"});return l.a.createElement("div",null,l.a.createElement("p",null,c.instructions),l.a.createElement(k.a,{container:!0,justify:"center",className:"mb-2"},l.a.createElement(Dn,{text:c.command,showText:!1},l.a.createElement("code",null,l.a.createElement("strong",null,c.mode,">")," ",c.command))),l.a.createElement("p",null,"When you are ready, scan the QR code produced by Hermit:"),l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{variant:"contained",color:"primary",className:"mt-2",size:"large",onClick:a.handleStart},s)))}return t===ia.ACTIVE?l.a.createElement(k.a,{container:!0,direction:"column"},l.a.createElement(k.a,{item:!0},l.a.createElement(ya.a,{delay:300,onError:a.handleError,onScan:a.handleScan,style:{width:i},facingMode:"user"})),l.a.createElement(k.a,{item:!0},l.a.createElement(_.a,{variant:"contained",color:"secondary",size:"small",onClick:a.handleStop},"Cancel"))):"error"===t||"success"===t?l.a.createElement("div",null,l.a.createElement(ie.a,{error:!0},n),l.a.createElement(_.a,{variant:"contained",color:"secondary",size:"small",onClick:a.handleStop},"Reset")):null},a.handleStart=function(){var e=a.props.onStart;a.setState({status:ia.ACTIVE,error:""}),e&&e()},a.handleError=function(e){var t=a.props.onClear;a.setState({status:"error",error:e.message}),t&&t()},a.handleScan=function(e){var t=a.props,n=t.onSuccess,r=t.interaction;if(e)try{n(r.parse(e)),a.setState({status:"success"})}catch(o){a.handleError(o)}},a.handleStop=function(){var e=a.props.onClear;a.setState({status:ia.PENDING,error:""}),e&&e()},a.state={status:ia.PENDING,error:""},a}return n}(c.Component);Pa.defaultProps={width:"256px",startText:"Scan"};var Sa=Pa,Ta=function(e){var t=e.width,n=e.string;return l.a.createElement(Dn,{text:n,newline:!0,showText:!1},l.a.createElement(jn.a,{size:t,value:n,level:"L"}))};Ta.defaultProps={string:"",width:120};var Oa=Ta,Ia=n(217),wa=n(1342),xa=n(1343),ja=(n(1279),function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props.messages;return l.a.createElement(A.a,{style:{maxHeight:"400px",overflow:"auto"},dense:!0},t.map(e.renderMessage))},e.renderMessage=function(t,n){return l.a.createElement(K.a,{key:n},t.level&&l.a.createElement(M.a,null,e.messageIcon(t)),l.a.createElement(B.a,null,e.renderMessageBodyAndSubmessages(t)))},e.renderMessageBodyAndSubmessages=function(t){return l.a.createElement(x.a,null,e.renderMessageBody(t),t.messages&&l.a.createElement(A.a,{dense:!0},t.messages.map(e.renderMessage)))},e.renderMessageBody=function(e){return l.a.createElement(x.a,null,e.image&&l.a.createElement(x.a,{align:"center"},l.a.createElement("img",{className:"InteractionMessages-image",src:"data:".concat(e.image.mimeType,";base64, ").concat(e.image.data),alt:e.image.label})),l.a.createElement("p",null,e.text))},e.messageIcon=function(e){switch(e.level){case ia.INFO:return l.a.createElement(wa.a,null);case ia.WARNING:return l.a.createElement(xa.a,null);case ia.ERROR:return l.a.createElement(oa.a,null);default:return null}},e}return n}(l.a.Component)),ka=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props,n=t.version,a=t.currentVersion;return l.a.createElement(x.a,{role:"tabpanel",hidden:n!==a,id:"interactionMessages-tabpanel-".concat(n),"aria-labelledby":"interactionMessages-tab-".concat(n)},n===a&&l.a.createElement(ja,{messages:e.filteredMessages()}))},e.filteredMessages=function(){var t=e.props,n=t.messages,a=t.version;return n.filter((function(e){return!e.version||e.version===a}))},e}return n}(l.a.Component),Ra=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.filteredMessages(),t=e.messages,n=e.versions,r=a.currentVersion(n);return n.length<2?l.a.createElement(ja,{messages:t}):l.a.createElement(x.a,null,l.a.createElement(j.a,{variant:"h6"},"Model"),l.a.createElement(Ia.a,{square:!0},l.a.createElement(On.a,{value:r,onChange:a.handleChange,"aria-label":"interactionMessages-version"},n.map((function(e){return l.a.createElement(In.a,{key:e,value:e,label:e,id:"interactionMessages-tab-".concat(e),"aria-controls":"interactionMessages-tabpanel-".concat(e)})})))),n.map((function(e){return l.a.createElement(ka,{key:e,version:e,currentVersion:r,messages:t})})))},a.currentVersion=function(e){var t=a.state.currentVersion;return t||e[e.length-1]},a.handleChange=function(e,t){a.setState({currentVersion:t})},a.filteredMessages=function(){var e=a.props,t=e.messages,n=e.excludeCodes,r=[],o=[];return t.forEach((function(e){for(var t=0;t<n.length;t+=1){var a=n[t];if((e.code||"").includes(a))return}r.push(e),e.version&&!o.includes(e.version)&&o.push(e.version)})),{versions:o,messages:r}},a.state={currentVersion:""},a}return n}(l.a.Component);Ra.defaultProps={messages:[],excludeCodes:[]};var Ca=Ra,Na=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).interaction=function(){var e=a.props,t=e.signatureImporter,n=e.network,r=e.inputs,o=e.outputs,i=r.map((function(e){return"undefined"===typeof e.bip32Path?t.bip32Path:"".concat(t.bip32Path).concat(e.bip32Path.slice(1))}));return Object(ia.SignMultisigTransaction)({keystore:ia.HERMIT,network:n,inputs:r,outputs:o,bip32Paths:i})},a.render=function(){var e=a.props,t=e.signatureImporter,n=e.disableChangeMethod,r=e.resetBIP32Path,o=a.state,i=o.bip32PathError,s=o.signatureError,c=o.status,u=a.interaction();return c===ia.UNSUPPORTED?l.a.createElement(Ca,{messages:u.messagesFor({state:c}),excludeCodes:["hermit.signature_request","hermit.command"]}):l.a.createElement(x.a,{mt:2},l.a.createElement(k.a,{container:!0},l.a.createElement(k.a,{item:!0,md:10},l.a.createElement(kt.a,{name:"bip32Path",value:t.bip32Path,onChange:a.handleBIP32PathChange,disabled:c!==ia.PENDING,error:a.hasBIP32PathError(),helperText:i})),l.a.createElement(k.a,{item:!0,md:2},!a.bip32PathIsDefault()&&l.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:r,disabled:c!==ia.PENDING},"Default"))),l.a.createElement(ie.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),l.a.createElement(x.a,{mt:2},l.a.createElement(k.a,{container:!0,justify:"center"},l.a.createElement(k.a,{item:!0},l.a.createElement(Oa,{width:400,string:u.request()}))),l.a.createElement(Sa,{startText:"Scan Signature QR Code",interaction:u,onStart:n,onSuccess:a.import,onClear:a.clear}),l.a.createElement(Ca,{messages:u.messagesFor({state:c}),excludeCodes:["hermit.signature_request","hermit.command"]}),l.a.createElement(ie.a,{error:!0},s)))},a.import=function(e){var t=a.props,n=t.validateAndSetSignature,r=t.enableChangeMethod;a.setState({signatureError:""}),r(),n(e,(function(e){a.setState({signatureError:e})}))},a.clear=function(){var e=a.props,t=e.resetBIP32Path,n=e.enableChangeMethod;t(),a.setState({signatureError:""}),n()},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(e){a.setState({bip32PathError:e})}))},a.bip32PathIsDefault=function(){var e=a.props,t=e.signatureImporter,n=e.defaultBIP32Path;return t.bip32Path===n},a.state={bip32PathError:"",signatureError:"",status:a.interaction(!0).isSupported()?ia.PENDING:ia.UNSUPPORTED},a}return n}(l.a.Component),_a=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(){var e=a.props,t=e.signatureImporter,n=e.network,r=e.inputs,o=e.outputs,i=t.method,s=r.map((function(e){return"undefined"===typeof e.bip32Path?t.bip32Path:"".concat(t.bip32Path).concat(e.bip32Path.slice(1))}));return Object(ia.SignMultisigTransaction)({network:n,keystore:i,inputs:r,outputs:o,bip32Paths:s})},a.render=function(){var e=a.props,t=e.signatureImporter,n=e.extendedPublicKeyImporter,r=a.state.status,o=a.interaction();return r===ia.UNSUPPORTED?l.a.createElement(ie.a,{error:!0},o.messageTextFor({state:r})):l.a.createElement(x.a,{mt:2},(null===n||"undefined"===typeof n||"text"===n.method)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{container:!0},l.a.createElement(k.a,{item:!0,md:10},l.a.createElement(kt.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path",type:"text",value:t.bip32Path,onChange:a.handleBIP32PathChange,disabled:r!==ia.PENDING,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),l.a.createElement(k.a,{item:!0,md:2},!a.bip32PathIsDefault()&&l.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:r!==ia.PENDING},"Default"))),l.a.createElement(ie.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),l.a.createElement(x.a,{mt:2},a.renderAction()),a.renderDeviceConfirmInfo(),l.a.createElement(Ca,{messages:o.messagesFor({state:r}),excludeCodes:["bip32"]}))},a.renderDeviceConfirmInfo=function(){var e=a.props,t=e.fee,n=e.inputsTotalSats;return a.state.status===ia.ACTIVE?l.a.createElement(x.a,null,l.a.createElement("p",null,"Your device will ask you to verify the following information:"),l.a.createElement(bn.a,null,l.a.createElement(vn.a,null,l.a.createElement(gn.a,{hover:!0},l.a.createElement(yn.a,null),l.a.createElement(yn.a,null,"Amount (BTC)"))),l.a.createElement(Pn.a,null,a.renderTargets(),l.a.createElement(gn.a,{hover:!0},l.a.createElement(yn.a,null,"Fee"),l.a.createElement(yn.a,null,t)),l.a.createElement(gn.a,{hover:!0},l.a.createElement(yn.a,null,"Total"),l.a.createElement(yn.a,null,Object(Z.satoshisToBitcoins)(n).toString()))))):""},a.renderTargets=function(){return a.props.outputs.map((function(e){return l.a.createElement(gn.a,{hover:!0,key:e.address},l.a.createElement(yn.a,null,"Address ",l.a.createElement("code",null,e.address)),l.a.createElement(yn.a,null,e.amount))}))},a.renderAction=function(){var e=a.state,t=e.signatureError,n=e.status;return l.a.createElement(k.a,{container:!0,alignItems:"center"},l.a.createElement(k.a,{item:!0,md:3},l.a.createElement(_.a,{variant:"contained",size:"large",color:"primary",onClick:a.sign,disabled:n!==ia.PENDING},"Sign")),l.a.createElement(k.a,{item:!0,md:9},l.a.createElement(ie.a,{error:!0},t)))},a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.status;return""!==t||a.interaction().hasMessagesFor({state:n,level:ia.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.status;return""!==t?t:a.interaction().messageTextFor({state:n,level:ia.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,(function(){}),a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.signatureImporter,n=e.defaultBIP32Path;return t.bip32Path===n},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.sign=Object(oe.a)(re.a.mark((function e(){var t,n,r,o,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.disableChangeMethod,r=t.validateAndSetSignature,o=t.enableChangeMethod,n(),a.setState({signatureError:"",status:ia.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:i=e.sent,r(i,(function(e){var t={signatureError:e};""!==e&&(t.status=ia.PENDING),a.setState(t)})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({signatureError:e.t0.message,status:ia.PENDING});case 14:o();case 15:case"end":return e.stop()}}),e,null,[[3,10]])}))),a.state={signatureError:"",bip32PathError:"",status:a.interaction(!0).isSupported()?ia.PENDING:ia.UNSUPPORTED},a}return n}(l.a.Component),Aa=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).titleRef=l.a.createRef(),a.componentDidMount=function(){a.resetBIP32Path(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.title=function(){var e=a.props,t=e.number,n=e.signatureImporter,r=e.setName;return l.a.createElement(At,{number:t,name:n.name,setName:r})},a.scrollToTitle=function(){a.props.number===a.getCurrent()&&a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.renderImport=function(){var e=a.props,t=e.signatureImporter,n=e.number,r=e.extendedPublicKeyImporter,o=n>a.getCurrent(),i=a.state.disableChangeMethod,s="signature-".concat(n,"-importer-select-label");return o?l.a.createElement("p",null,"Once you have imported the signature above, you will be able to import another signature here."):l.a.createElement("form",null,(null===r||"undefined"===typeof r||"text"===r.method)&&l.a.createElement(Dt.a,{fullWidth:!0},l.a.createElement(sa.a,{id:s},"Select Method"),l.a.createElement(ca.a,{labelId:s,id:"signature-".concat(n,"-importer-select"),disabled:i,value:t.method,onChange:a.handleMethodChange},l.a.createElement(la.a,{value:""},"< Select method >"),l.a.createElement(la.a,{value:ia.TREZOR},"Trezor"),l.a.createElement(la.a,{value:ia.LEDGER},"Ledger"),l.a.createElement(la.a,{value:ia.HERMIT},"Hermit"),l.a.createElement(la.a,{value:"text"},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.network,n=e.signatureImporter,r=e.signatureImporters,o=e.inputs,i=e.inputsTotalSats,s=e.outputs,c=e.fee,u=e.isWallet,d=e.extendedPublicKeyImporter;return"text"===n.method?l.a.createElement(va,{signatureImporter:n,validateAndSetSignature:a.validateAndSetSignature}):n.method===ia.HERMIT?l.a.createElement(Na,{network:t,signatureImporter:n,inputs:o,outputs:s,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:a.defaultBIP32Path(),validateAndSetSignature:a.validateAndSetSignature,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):n.method===ia.TREZOR||n.method===ia.LEDGER?l.a.createElement(_a,{network:t,signatureImporter:n,signatureImporters:r,inputs:o,outputs:s,inputsTotalSats:i,fee:c,isWallet:u,extendedPublicKeyImporter:d,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:a.defaultBIP32Path(),validateAndSetSignature:a.validateAndSetSignature,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):null},a.handleMethodChange=function(e){var t=a.props,n=t.number;(0,t.setMethod)(n,e.target.value),a.reset()},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.reset=function(){var e=a.props,t=e.number,n=e.setSignature,r=e.setPublicKeys,o=e.setFinalized;n(t,""),r(t,[]),o(t,!1)},a.defaultBIP32Path=function(){var e=a.props,t=e.addressType,n=e.network;return e.isWallet?Object(Z.multisigBIP32Root)(t,n):Object(Z.multisigBIP32Path)(t,n)},a.resetBIP32Path=function(){var e=a.props,t=e.number,n=e.setBIP32Path;if(e.isWallet&&"text"!==a.props.extendedPublicKeyImporter.method)return;n(t,a.defaultBIP32Path())},a.validateAndSetBIP32Path=function(e,t,n,r){var o=a.props,i=o.number,s=o.setBIP32Path,c=Object(Z.validateBIP32Path)(e,r);s(i,e),c?n(c):(n(""),t())},a.renderSignature=function(){var e=a.props,t=e.signatureImporter,n=e.txid,r=JSON.stringify(t.signature);return l.a.createElement("div",null,l.a.createElement("p",null,"The following signature was imported:"),l.a.createElement(x.a,null,l.a.createElement(Dn,{text:r,showIcon:!0,code:!0})),l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{variant:"contained",color:"secondary",disabled:""!==n,size:"small",onClick:a.reset},"Remove Signature")))},a.validateAndSetSignature=function(e,t){var n=a.props,r=n.number,o=n.inputs,i=n.signatureImporters,s=n.setComplete,c=n.network,l=n.outputs;if(Array.isArray(e))if(e.length<o.length)t("Not enough signatures (must be exactly one for each input).");else if(e.length>o.length)t("Too many signatures (must be exactly one for each input).");else{for(var u=[],d=Object.values(i).filter((function(e){return e.finalized})),p=0;p<e.length;p+=1){var m=p+1,h=e[p];if(""!==Object(Z.validateHex)(h))return void t("Signature for input ".concat(m," is not valid hex."));var f=void 0;try{f=Object(Z.validateMultisigSignature)(c,o,l,p,h)}catch(v){return void t("Signature for input ".concat(m," is invalid."))}if(!f)return void t("Signature for input ".concat(m," is invalid."));for(var E=0;E<d.length;E+=1){var b=d[E];if(b.signature[p]===h||b.publicKeys[p]===f)return void t("Signature for input ".concat(m," is a duplicate of a previously provided signature."))}u.push(f)}s(r,{signature:e,publicKeys:u,finalized:!0})}else t("Signature is not an array of strings.")},a.state={disableChangeMethod:!1},a}return Object(v.a)(n,[{key:"getCurrent",value:function(){var e=this.props.signatureImporters;return Object.keys(e).reduce((function(t,n){return t+(e[n].finalized?1:0)}),1)}},{key:"render",value:function(){var e=this.props.signatureImporter;return l.a.createElement(R.a,null,l.a.createElement(C.a,{title:this.title(),ref:this.titleRef}),l.a.createElement(N.a,null,e.finalized?this.renderSignature():this.renderImport()))}}]),n}(l.a.Component);var Ka={setName:da,setMethod:pa,setBIP32Path:ma,setPublicKeys:ha,setSignature:fa,setFinalized:Ea,setComplete:ba},Ma=Object(m.b)((function(e,t){return Object(q.a)(Object(q.a)({},{signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],fee:e.spend.transaction.fee,txid:e.spend.transaction.txid}),e.spend.transaction)}),Ka)(Aa),Ba=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){var e=a.props,t=e.signingKeys,n=e.number;t[n-1]>0&&a.updateKeySelection(t[n-1])},a.render=function(){var e=a.state.selection,t=a.props.number;return l.a.createElement("div",null,a.renderKeySelectorMenu(),e>0&&t>0&&a.renderSignatureImporter())},a.renderSignatureImporter=function(){var e=a.props.number,t=a.getAssociatedExtendedPublicKeyImporter();return l.a.createElement(x.a,{mt:2},l.a.createElement(Ma,{number:e,extendedPublicKeyImporter:t}))},a.getAssociatedExtendedPublicKeyImporter=function(){var e=a.props.extendedPublicKeyImporters,t=a.state.selection,n=null;return t&&(n=e[t]),n},a.renderKeySelectorMenu=function(){var e=a.props,t=e.number,n=e.signatureImporters,r=e.setBIP32Path,o=a.state.selection,i="keySelector".concat(t),s=a.getAssociatedExtendedPublicKeyImporter();if(null!==s&&t>0){var c=n[t];if(c.signature.length>0)return"";s.bip32Path!==c.bip32Path&&"text"!==s.method&&setTimeout((function(){r(t,s.bip32Path)}),0)}return l.a.createElement("form",null,l.a.createElement(Dt.a,{fullWidth:!0},l.a.createElement(sa.a,{id:i},"Select Key"),l.a.createElement(ca.a,{labelId:i,id:"signature-".concat(t,"-key-select"),value:o,onChange:a.handleKeyChange},l.a.createElement(la.a,{value:""},"< Select Extended Public Key >"),a.renderKeySelectorMenuItems())))},a.extendedPublicKeyImporterNotUsed=function(e){var t=a.props,n=t.inputs,r=t.network,o=t.signatureImporters;if(0===t.number)return!0;for(var i=0;i<n.length;i+=1)for(var s=n[i],c=Object(Z.deriveChildPublicKey)(e.extendedPublicKey,s.bip32Path,r),l=1;l<=Object.keys(o).length;l+=1)for(var u=o[l],d=0;d<u.publicKeys.length;d+=1){if(u.publicKeys[d]===c)return!1}return!0},a.renderKeySelectorMenuItems=function(){for(var e=a.props,t=e.extendedPublicKeyImporters,n=e.totalSigners,r=[],o=1;o<=n;o+=1){var i=t[o];a.extendedPublicKeyImporterNotUsed(i)&&r.push(l.a.createElement(la.a,{value:o,key:o},i.name))}return r},a.handleKeyChange=function(e){var t=a.props.onChange;(a.updateKeySelection(e.target.value),t)&&t(e,a.props.extendedPublicKeyImporters[e.target.value])},a.state={selection:""},a}return Object(v.a)(n,[{key:"updateKeySelection",value:function(e){if(this.setState({selection:e}),""!==e){var t=this.props,n=t.extendedPublicKeyImporters,a=t.setMethod,r=t.number,o=t.setSigningKey,i=n[e].method;a(r,"text"===i?"":i),r>0&&o(r,e)}}}]),n}(l.a.Component);Ba.defaultProps={onChange:null};var Da={setBIP32Path:ma,setMethod:pa,setSigningKey:function(e,t){return{type:"SET_SIGNING_KEY",number:e,value:t}}},Ua=Object(m.b)((function(e){return Object(q.a)(Object(q.a)({},e.quorum),{},{totalSigners:e.spend.transaction.totalSigners,inputs:e.spend.transaction.inputs,network:e.settings.network,signatureImporters:e.spend.signatureImporters,signingKeys:e.spend.transaction.signingKeys})}),Da)(Ba),La={hasInteraction:!1,interactionState:ia.PENDING,interactionError:"",interactionMessage:""},za=function(e,t){switch(t.type){case"RESET":return Object(q.a)(Object(q.a)({},e),{},{interactionError:"",interactionMessage:"",interactionState:ia.PENDING});case"SET_ACTIVE":return Object(q.a)(Object(q.a)({},e),{},{interactionState:ia.ACTIVE});case"HAS_INTERACTION":return Object(q.a)(Object(q.a)({},e),{},{hasInteraction:t.value});case"SET_MESSAGE":return Object(q.a)(Object(q.a)({},e),{},{interactionMessage:t.value,interactionError:""});case"SET_ERROR":return Object(q.a)(Object(q.a)({},e),{},{interactionError:t.value,interactionMessage:""});default:return e}},Fa=function(e){var t=e.slice,n=e.network,a=Object(c.useReducer)(za,La),r=Object(ce.a)(a,2),o=r[0],i=r[1],s=Object(c.useState)(null),u=Object(ce.a)(s,2),d=u[0],p=u[1],m=Object(Z.multisigAddressType)(t.multisig),h=Object(Z.multisigRequiredSigners)(t.multisig),f=Object(Z.multisigTotalSigners)(t.multisig);function E(){return(E=Object(oe.a)(re.a.mark((function e(){var n,a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:"SET_ACTIVE"}),n=t.multisig,e.prev=2,e.next=5,d.run();case 5:(a=e.sent).address===n.address&&a.serializedPath===d.bip32Path?i({type:"SET_MESSAGE",value:"Success"}):i({type:"SET_ERROR",value:"An unknown error occured"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i({type:"SET_ERROR",value:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return l.a.createElement(k.a,{item:!0,md:12},l.a.createElement(Ua,{number:0,onChange:function(e,a){var r=t.multisig,o=t.bip32Path;p(Object(ia.ConfirmMultisigAddress)({keystore:a.method,network:n,bip32Path:"".concat(a.bip32Path).concat(o.slice(1)),multisig:r})),i({type:"HAS_INTERACTION",value:!0}),i({type:"RESET"})}}),o.hasInteraction&&l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,null,l.a.createElement("p",null,"Confirm the following",n.length?n:""," ",m," ",h,"-of-",f," multisig address on your device:"),l.a.createElement(bn.a,null,l.a.createElement(Pn.a,null,l.a.createElement(gn.a,null,l.a.createElement(yn.a,null,"Address:"),l.a.createElement(yn.a,null,l.a.createElement("code",null,t.multisig.address))),l.a.createElement(gn.a,null,l.a.createElement(yn.a,null,"BIP32 Path:"),l.a.createElement(yn.a,null,l.a.createElement("code",null,d.bip32Path)))))),""!==o.interactionMessage&&l.a.createElement(x.a,{mt:2,align:"center"},l.a.createElement(j.a,{variant:"h5",style:{color:"green"}},l.a.createElement(ra.a,null),"\xa0 ",o.interactionMessage)),""!==o.interactionError&&l.a.createElement(x.a,{mt:2,align:"center",style:{color:"red"}},l.a.createElement(j.a,{variant:"h5"},l.a.createElement(oa.a,null),"\xa0 Confirmation Error"),l.a.createElement(j.a,{variant:"caption"},o.interactionError)),""===o.interactionMessage&&""===o.interactionError&&l.a.createElement(Ca,{messages:d.messagesFor({state:o.interactionState})}),l.a.createElement(_.a,{variant:"contained",size:"large",onClick:function(){return E.apply(this,arguments)},disabled:o.interactionState===ia.ACTIVE},"Confirm"),(""!==o.interactionMessage||""!==o.interactionError)&&l.a.createElement(_.a,{size:"large",onClick:function(){return i({type:"RESET"})}},"Reset")))};Fa.defaultProps={network:""};var Ha=Fa,Wa=Object(It.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var Ga=function(e,t){var n=e.tab,a=l.a.createElement(In.a,Object.assign({value:t.toString(),key:t},function(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}(t),n));return n.disabled?l.a.createElement(zn.a,{title:"Not available for this address",key:t,arrow:!0},l.a.createElement("div",null,a)):a};function qa(e){var t=e.children,n=e.value,a=e.index,r=Object(Nn.a)(e,["children","value","index"]);return l.a.createElement(k.a,Object.assign({container:!0,justify:"center",style:{display:n===a?"inherit":"none"}},r),l.a.createElement(k.a,{item:!0,md:11},l.a.createElement(x.a,null,t)))}qa.defaultProps={children:l.a.createElement("span")};var Ya=function(e){var t=e.slice,n=e.client,a=e.network,r=l.a.useState("0"),o=Object(ce.a)(r,2),i=o[0],s=o[1],c=Wa(),u=[{tab:{label:"Redeem Script"},panel:l.a.createElement(Jn,{multisig:t.multisig,showAddress:!1})},{tab:{label:"Confirm on Device"},panel:l.a.createElement("div",null,l.a.createElement(j.a,{variant:"h6"},"Verify Address with Quorum Participants"),l.a.createElement(j.a,{variant:"caption"},"(not all device variants supported)"),l.a.createElement(Ha,{slice:t,network:a}))},{tab:{label:"UTXOs",disabled:!t.balanceSats.isGreaterThan(0)},panel:l.a.createElement(Vn,{inputs:t.utxos,inputsTotalSats:t.balanceSats})},{tab:{label:"Watch Address",disabled:"private"!==n.type},panel:l.a.createElement("div",null,l.a.createElement(j.a,{variant:"h6"},"Import Watch-Only Address"),l.a.createElement(j.a,{variant:"caption"},"Address must be imported to get accurate balance data. If this address has previous history, a rescan may be required."),l.a.createElement(x.a,{my:3},l.a.createElement(aa,{addresses:[t.multisig.address],client:n})))}];return l.a.createElement(k.a,{container:!0,className:c.root},l.a.createElement(Fn.a,{position:"static",color:"default",variant:"outlined"},l.a.createElement(On.a,{value:i,onChange:function(e,t){return s(t)},"aria-label":"Slice Details View",centered:!0},u.map(Ga))),u.map((function(e,t){var n=e.panel;return l.a.createElement(qa,{value:i,index:t.toString(),key:t},l.a.createElement(x.a,{my:3},n))})))},Va=Object(It.a)((function(e){return{panel:{boxShadow:"inset 0px 0px 4px 1px ".concat(e.palette.grey[500])},spent:{textDecoration:"line-through"}}})),Xa=function(e){var t=e.slices,n=e.search,a=e.paging,r=e.title,o=e.client,i=e.network,s=e.disabled,c=Va(),u={search:n,paging:a,detailPanelType:"single",showTitle:r&&r.length||!1,emptyRowsWhenPaging:!1,pageSize:10,pageSizeOptions:[10,20,50]};u.toolbar=u.showTitle&&u.search;var d=[{title:"Path Suffix",field:"bip32Path",render:function(e){return l.a.createElement(j.a,null,e.bip32Path.replace("m","*"))},type:"string",defaultSort:"asc",customSort:_e},{title:"UTXOs",field:"utxos",width:"50px",render:function(e){return l.a.createElement(j.a,null,e.utxos.length)},customSort:Ke},{title:"Balance",field:"balanceSats",render:function(e){return l.a.createElement(j.a,null,Object(Z.satoshisToBitcoins)(e.balanceSats).toString())},customSort:Ae},{title:"Last Used",field:"lastUsed",render:function(e){return l.a.createElement(j.a,null,e.lastUsed||"")},customSort:Me},{title:"Address",field:"address",sorting:!1,render:function(e){return l.a.createElement(Dn,{text:e.multisig.address,showIcon:!0,showText:!0,code:!0,className:e.addressUsed&&e.balanceSats.isEqualTo(0)?c.spent:""})}}];return d=d.filter((function(e){return!s.includes(e.field)})),l.a.createElement(Ln.a,{options:u,columns:d,data:t,detailPanel:[{tooltip:"Address Details",render:function(e){return l.a.createElement(x.a,{p:1,className:c.panel},l.a.createElement(Ya,{client:o,slice:e,network:i}))}}]})};Xa.defaultProps={search:!1,paging:!1,title:"",disabled:[]};var Za,Ja=Xa,Qa=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).getNextDepositAddress=function(){var e=a.state.depositIndex;a.setState({depositIndex:e+1}),setTimeout(a.getDepositAddress,0)},a.getDepositAddress=function(){var e=a.props,t=e.network,n=e.client,r=e.updateDepositSlice,o=e.depositableSlices,i=e.enqueueSnackbar,s=a.state.depositIndex;s<o.length&&a.setState({slice:o[s],address:o[s].multisig.address}),clearInterval(Za),Za=setInterval(Object(oe.a)(re.a.mark((function e(){var o,s,c,l;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=a.state,c=s.address,l=s.slice,e.next=4,we(c,t,n);case 4:(o=e.sent)&&o.utxos&&o.utxos.length&&(clearInterval(Za),r(Object(q.a)(Object(q.a)({},o),{},{bip32Path:l.bip32Path})),i("Deposit received. A new address should now be available for deposit."),a.resetDepositAddressIndex(),setTimeout(a.getDepositAddress,2e3)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),2e3)},a.handleAmountChange=function(e){var t=e.target.value,n="";t.length&&!t.match(/^[0-9.]+$/)&&(n="Amount must be numeric");var r=t.split(".");r.length>2?n="Amount must be numeric":2===r.length&&r[1].length>8&&(n="Amount must have maximum precision of 8 decimal places"),a.setState({amount:e.target.value,amountError:n})},a.qrString=function(){var e=a.state,t=e.address,n=e.amount;return"bitcoin:".concat(t).concat(n?"?amount=".concat(n):"")},a.resetDepositAddressIndex=function(){var e=a.props.depositableSlices;a.setState({slice:e[0],address:e[0].multisig.address,depositIndex:0})},a.state={address:"",amount:0,amountError:"",depositIndex:0,slice:null},a}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.getDepositAddress()}},{key:"componentWillUnmount",value:function(){clearInterval(Za)}},{key:"render",value:function(){var e=this.props,t=e.client,n=e.network,a=e.depositableSlices,r=this.state,o=r.address,i=r.amount,s=r.amountError,c=r.depositIndex,u=r.slice;return l.a.createElement("div",null,l.a.createElement(R.a,null,l.a.createElement(N.a,null,l.a.createElement(k.a,{container:!0,justify:"center",direction:"column",alignItems:"center"},l.a.createElement(k.a,{item:!0,md:6},l.a.createElement(Dn,{text:o,newline:!0,showText:!1},l.a.createElement(jn.a,{size:300,value:this.qrString(),level:"L"}))),l.a.createElement(k.a,{item:!0},l.a.createElement(j.a,{align:"center",variant:"subtitle1"},"Scan QR code or click to copy address to clipboard.")),l.a.createElement(k.a,{item:!0,md:6},l.a.createElement(x.a,{my:3},l.a.createElement(kt.a,{fullWidth:!0,label:"Amount BTC",name:"depositAmount",onChange:this.handleAmountChange,value:i,error:""!==s,helperText:s,InputProps:{endAdornment:l.a.createElement(hn.a,{position:"end"},l.a.createElement(jt,{network:n}))}})))),u?l.a.createElement(Ja,{slices:[u],client:t,network:n,disabled:["lastUsed"]}):"",l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.getNextDepositAddress,disabled:c>=a.length-1},"Next Address")))))}}]),n}(l.a.Component);var $a,er={updateDepositSlice:gt,resetWalletView:St},tr=Object(m.b)((function(e){return Object(q.a)(Object(q.a)({},e.settings),{},{depositableSlices:Je(e),client:e.client})}),er)(Object(w.withSnackbar)(Qa)),nr=n(1299),ar=n(1294),rr=n(800),or=n(804),ir=n(802),sr=n(397),cr=n(1360),lr=n(1339),ur=n(1338),dr=n(823),pr=n.n(dr),mr=n(822),hr=n.n(mr),fr=n(821),Er=n.n(fr),br=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).interaction=null,a.componentDidMount=function(){a.defaultMode()},a.addressContent=function(){var e=a.props,t=e.node,n=e.network,r=e.client,o=t.multisig,i=t.addressUsed,s=t.balanceSats,c=a.state,u=c.expandMode,d=c.showMenu,p=c.showMenuIcon;return l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(j.a,null,l.a.createElement(Dn,{text:o.address,showIcon:!0,showText:!1},l.a.createElement("code",{className:i&&s.isEqualTo(0)?qn.a.spent:""},o.address),"\xa0"),Q(Object(Z.blockExplorerAddressURL)(o.address,n),l.a.createElement(Er.a,{onClick:function(e){return e.stopPropagation()}}))),l.a.createElement(hr.a,{onClick:a.handleMenu,style:{float:"right",display:p&&a.hasAdditionalOptions()?"block":"none"},"aria-controls":"address-menu","aria-haspopup":"true"}),l.a.createElement(sr.a,{id:"address-menu",anchorEl:$a,keepMounted:!0,open:d,onClose:a.handleClose},s.isGreaterThan(0)&&l.a.createElement(la.a,{selected:0===u,onClick:function(e){a.setState({expandMode:0}),a.handleClose(e)}},"UTXOs"),l.a.createElement(la.a,{selected:1===u,onClick:function(e){a.setState({expandMode:1}),a.handleClose(e)}},"Scripts"),a.canConfirm()&&l.a.createElement(la.a,{selected:2===u,onClick:function(e){a.setState({expandMode:2}),a.handleClose(e)}},"Confirm on Device"),"private"===r.type&&l.a.createElement(la.a,{selected:3===u,onClick:function(e){a.setState({expandMode:3}),a.handleClose(e)}},"Watch with bitcoind Node")))},a.canConfirm=function(){var e=a.props.extendedPublicKeyImporters;return Object.values(e).filter((function(e){return"trezor"===e.method})).length>0},a.hasAdditionalOptions=function(){var e=a.props,t=e.client;return e.node.balanceSats.isGreaterThan(0)||"private"===t.type||a.canConfirm()},a.handleClose=function(e){e.stopPropagation(),a.setState({showMenu:!1})},a.handleMenu=function(e){e.stopPropagation(),$a=e.target,a.setState({showMenu:!0})},a.panelExpand=function(e,t){a.setState({showMenuIcon:t})},a.render=function(){var e=a.props.node.bip32Path;return l.a.createElement(cr.a,{onChange:a.panelExpand},l.a.createElement(lr.a,{expandIcon:l.a.createElement(pr.a,null),"aria-controls":"panel1a-content",id:"address-header".concat(e)},a.addressContent()),l.a.createElement(ur.a,null,l.a.createElement(k.a,{container:!0},a.expandContent())))},a.defaultMode=function(){var e=a.props.node.balanceSats;a.setState({expandMode:e.isGreaterThan(0)?0:1})},a.expandContent=function(){var e=a.props,t=e.client,n=e.node,r=n.utxos,o=n.balanceSats,i=n.multisig,s=a.state.expandMode;switch("public"===t.type&&3===s&&a.defaultMode(),o.isEqualTo(0)&&0===s&&a.defaultMode(),s){case 0:return l.a.createElement(k.a,{item:!0,md:12},l.a.createElement(Vn,{inputs:r,inputsTotalSats:o}));case 1:return l.a.createElement(k.a,{item:!0,md:12},l.a.createElement(Jn,{multisig:i,showAddress:!1}));case 2:return a.renderAddressConfirmation();case 3:return l.a.createElement(k.a,{item:!0,md:12},l.a.createElement(aa,{addresses:[i.address]}));default:return""}},a.renderAddressConfirmation=function(){var e=a.state,t=e.interactionState,n=e.interactionMessage,r=e.interactionError,o=e.hasInteraction;return l.a.createElement(k.a,{item:!0,md:12},l.a.createElement(Ua,{number:0,onChange:a.keySelected}),o&&l.a.createElement(l.a.Fragment,null,a.confirmAddressDescription(),""!==n&&l.a.createElement(x.a,{mt:2,align:"center"},l.a.createElement(j.a,{variant:"h5",style:{color:"green"}},l.a.createElement(ra.a,null),"\xa0 ",n)),""!==r&&l.a.createElement(x.a,{mt:2,align:"center",style:{color:"red"}},l.a.createElement(j.a,{variant:"h5"},l.a.createElement(oa.a,null),"\xa0 Confirmation Error"),l.a.createElement(j.a,{variant:"caption"},r)),""===n&&""===r&&l.a.createElement(Ca,{messages:a.interaction.messagesFor({state:t})}),l.a.createElement(_.a,{variant:"contained",size:"large",onClick:a.confirmOnDevice,disabled:t===ia.ACTIVE},"Confirm"),(""!==n||""!==r)&&l.a.createElement(_.a,{size:"large",onClick:a.resetInteractionState},"Reset")))},a.resetInteractionState=function(){a.setState({interactionError:"",interactionMessage:"",interactionState:ia.PENDING})},a.confirmOnDevice=Object(oe.a)(re.a.mark((function e(){var t,n,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({interactionState:ia.ACTIVE}),t=a.props.node,n=t.multisig,e.prev=3,e.next=6,a.interaction.run();case 6:(r=e.sent).address===n.address&&r.serializedPath===a.interaction.bip32Path?a.setState({interactionState:ia.ACTIVE,interactionMessage:"Success",interactionError:""}):a.setState({interactionState:ia.ACTIVE,interactionError:"An unknow error occured",interactionMessage:""}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),a.setState({interactionState:ia.ACTIVE,interactionError:e.t0.message,interactionMessage:""});case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),a.keySelected=function(e,t){var n=a.props,r=n.network,o=n.node,i=o.multisig,s=o.bip32Path;a.interaction=Object(ia.ConfirmMultisigAddress)({keystore:t.method,network:r,bip32Path:"".concat(t.bip32Path).concat(s.slice(1)),multisig:i}),a.setState({hasInteraction:!0}),a.resetInteractionState()},a.state={expandMode:null,showMenu:!1,showMenuIcon:!1,hasInteraction:!1,interactionState:ia.PENDING,interactionError:"",interactionMessage:""},a}return Object(v.a)(n,[{key:"confirmAddressDescription",value:function(){var e=this.props,t=e.network,n=e.node,a=e.requiredSigners,r=e.totalSigners,o=n.multisig,i=Object(Z.multisigAddressType)(o);return l.a.createElement(x.a,null,l.a.createElement("p",null,"Confirm the following ",t," ",i," ",a,"-of-",r," multisig address on your device:"),l.a.createElement(bn.a,null,l.a.createElement(Pn.a,null,l.a.createElement(gn.a,null,l.a.createElement(yn.a,null,"Address:"),l.a.createElement(yn.a,null,l.a.createElement("code",null,o.address))),l.a.createElement(gn.a,null,l.a.createElement(yn.a,null,"BIP32 Path:"),l.a.createElement(yn.a,null,l.a.createElement("code",null,this.interaction.bip32Path))))))}}]),n}(l.a.Component);br.defaultProps={network:Z.NETWORKS.TESTNET};var vr=Object(m.b)((function(e){return{network:e.settings.network,requiredSigners:e.settings.requiredSigners,totalSigners:e.settings.totalSigners,client:e.client,extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters}}),{})(br),gr=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){e.generate()},e.render=function(){var t=e.props,n=t.bip32Path,a=t.spend,r=t.fetchedUTXOs,o=t.balanceSats,i=t.multisig,s=t.utxos,c=t.walletMode,u=t.addressKnown,d=c===vt;return l.a.createElement(gn.a,{key:n},d&&l.a.createElement(yn.a,null,l.a.createElement(rr.a,{id:n,name:"spend",onChange:e.handleSpend,checked:a,disabled:!r||o.isEqualTo(0)})),l.a.createElement(yn.a,null,l.a.createElement("code",null,n.replace("m","*"))),l.a.createElement(yn.a,null,s.length),l.a.createElement(yn.a,null,r&&u?Object(Z.satoshisToBitcoins)(o).toFixed():""),l.a.createElement(yn.a,null,e.maxUtxoDate()),l.a.createElement(yn.a,null,i?e.renderAddress():"..."))},e.maxUtxoDate=function(){var t=e.props.utxos;if(!t.length)return"";var n=Math.max.apply(Math,Object(se.a)(t.map((function(e){return e.time}))));return Number.isNaN(n)?"Pending":new Date(1e3*n).toLocaleDateString()},e.renderAddress=function(){var t=e.props.braidNode;return l.a.createElement(vr,{node:t})},e.generate=function(){var t=e.props,n=t.present,a=t.change,r=t.bip32Path,o=t.addNode;n||o(a,r)},e.handleSpend=function(t){var n=e.props,a=n.change,r=n.bip32Path,o=n.updateNode,i=n.inputs,s=n.utxos,c=n.multisig,l=n.setInputs,u=n.updateAutoSpend,d=n.setFeeRate,p=n.feeRate;l(t.target.checked?i.concat(s.map((function(e){return Object(q.a)(Object(q.a)({},e),{},{multisig:c,bip32Path:r})}))):i.filter((function(e){return 0===s.filter((function(t){return t.txid===e.txid&&t.index===e.index})).length}))),o(a,{spend:t.target.checked,bip32Path:r}),u(!1),d(p)},e}return n}(l.a.Component);gr.defaultProps={multisig:{},present:!1};var yr={setInputs:$e,setFeeRate:it,updateAutoSpend:ut},Pr=Object(m.b)((function(e,t){var n="1"===(t.bip32Path||"").split("/")[1],a=e.wallet[n?"change":"deposits"];return Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},e.settings),{change:n}),a.nodes[t.bip32Path]),e.spend.transaction),{},{walletMode:e.wallet.common.walletMode,braidNode:a.nodes[t.bip32Path]})}),yr)(gr),Sr=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).sortAddresses=function(e){var t=a.state,n=t.orderBy,r=t.orderDir;e===n?a.setState({page:0,orderDir:"asc"===r?"desc":"asc"}):a.setState({page:0,orderBy:e})},a.renderFilters=function(){var e=a.state,t=e.filterIncludeSpent,n=e.filterIncludeZeroBalance;return l.a.createElement(nr.a,{row:!0},l.a.createElement(ar.a,{component:"h2"},l.a.createElement(x.a,{mr:3},"Show Additional")),l.a.createElement(Lt.a,{control:l.a.createElement(rr.a,{checked:t,value:"filterIncludeSpent",onChange:a.filterAddresses}),label:"Spent Addresses"}),l.a.createElement(Lt.a,{control:l.a.createElement(rr.a,{checked:n,value:"filterIncludeZeroBalance",onChange:a.filterAddresses}),label:"Zero Balance"}))},a.filterAddresses=function(e,t){a.setState({[e.target.value]:t,page:0})},a.getNodeSet=function(){var e=a.props,t=e.changeNodes,n=e.depositNodes,r=a.state,o=r.filterIncludeSpent,i=r.filterIncludeZeroBalance,s=r.orderBy,c=r.orderDir,l=Object.values(n).concat(Object.values(t)).reduce((function(e,t){var n=e;return n[t.bip32Path]=t,n}),{}),u=[];return Object.values(l).forEach((function(e){(e.balanceSats.isGreaterThan(0)||i&&e.balanceSats.isEqualTo(0)&&!e.addressUsed||o&&e.addressUsed)&&u.push(e)})),u=(u=u.sort((function(e,t){var n="asc"===c?1:-1;if("bip32Path"===s)return e.change&&!t.change?n:!e.change&&t.change?-n:parseInt(e.bip32Path.split("/").reverse()[0],10)>parseInt(t.bip32Path.split("/").reverse()[0],10)?n:-n;if("balanceSats"===s)return e.balanceSats.isEqualTo(t.balanceSats)?0:e.balanceSats.isGreaterThan(t.balanceSats)?n:-n;if("utxos"===s)return e.utxos.length===t.utxos.length?0:e.utxos.length>t.utxos.length?n:-n;if("time"===s){if(0===e.utxos.length)return 0===t.utxos.length?0:n;if(0===t.utxos.length)return 0===e.utxos.length?0:-n;var a=Math.min.apply(Math,Object(se.a)(e.utxos.map((function(e){return e.time})))),r=Math.min.apply(Math,Object(se.a)(t.utxos.map((function(e){return e.time}))));return Number.isNaN(a)&&Number.Number.isNaN(r)?0:Number.isNaN(a)?n:Number.isNaN(r)?-n:a>r?n:-n}return 0}))).reduce((function(e,t){var n=e;return n[t.bip32Path]=t,n}),{})},a.renderNodes=function(){for(var e=a.state,t=e.page,n=e.nodesPerPage,r=e.spend,o=a.props,i=o.addNode,s=o.updateNode,c=t*n,u=[],d=a.getNodeSet(),p=0;p<n;p+=1){var m=c+p;if(m>Object.keys(d).length-1)break;var h=Object.values(d)[m].bip32Path,f=Object.values(d)[m].change,E=l.a.createElement(Pr,{key:h,bip32Path:h,addNode:i,updateNode:s,change:f,spend:r});u.push(E)}return u},a.handlePageChange=function(e,t){var n=t;a.setState({page:n})},a.handleChangeRowsPerPage=function(e){a.setState({nodesPerPage:e.target.value,page:0})},a.pageCount=function(){var e=a.state.nodesPerPage;return Math.ceil(a.rowCount()/e)},a.rowCount=function(){var e=a.getNodeSet();return Object.keys(e).length},a.state={page:0,nodesPerPage:10,spend:!1,filterIncludeSpent:!1,filterIncludeZeroBalance:!1,orderBy:"bip32Path",orderDir:"asc"},a}return Object(v.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.page,a=t.nodesPerPage,r=t.orderBy,o=t.orderDir,i=this.props.walletMode===vt;return l.a.createElement(k.a,{item:!0,md:12},l.a.createElement(bn.a,{style:{tableLayout:"fixed"}},l.a.createElement(vn.a,null,l.a.createElement(gn.a,null,i&&l.a.createElement(yn.a,{width:62},"Spend?"),l.a.createElement(yn.a,{width:106},l.a.createElement(or.a,{active:"bip32Path"===r,direction:o,onClick:function(){return e.sortAddresses("bip32Path")}},"BIP32 Path")),l.a.createElement(yn.a,{width:78},l.a.createElement(or.a,{active:"utxos"===r,direction:o,onClick:function(){return e.sortAddresses("utxos")}},"UTXOs")),l.a.createElement(yn.a,{width:82},l.a.createElement(or.a,{active:"balanceSats"===r,direction:o,onClick:function(){return e.sortAddresses("balanceSats")}},"Balance")),l.a.createElement(yn.a,{width:98},l.a.createElement(or.a,{active:"time"===r,direction:o,onClick:function(){return e.sortAddresses("time")}},"Last Used")),l.a.createElement(yn.a,null,"Address"))),l.a.createElement(Pn.a,null,this.renderNodes())),l.a.createElement(k.a,{container:!0},l.a.createElement(k.a,{item:!0,md:6},l.a.createElement(ir.a,{component:"div",count:this.rowCount(),rowsPerPage:a,page:n,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handlePageChange,onChangeRowsPerPage:this.handleChangeRowsPerPage}))),!i&&this.renderFilters())}}]),n}(l.a.Component);var Tr=Object(m.b)((function(e){return Object(q.a)({changeNodes:e.wallet.change.nodes,depositNodes:e.wallet.deposits.nodes,walletMode:e.wallet.common.walletMode,client:e.client},e.settings)}),{})(Sr),Or=n(825),Ir=n.n(Or),wr=n(824),xr=n.n(wr),jr=n(1346),kr=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).displayBalanceAction=function(){var t=e.props,n=t.isWallet,a=t.finalizedOutputs,r=t.autoSpend;return n?!r&&!a&&e.hasBalanceError()&&e.isBalanceable():!a&&e.hasBalanceError()&&e.isBalanceable()},e.addChangeAddress=function(){var t=e.props,n=t.changeNode,a=t.number,r=t.setAddress,o=t.setChangeOutput;r(a,n.multisig.address),o(a)},e.renderChangeAdornment=function(){var t=e.props,n=t.changeNode,a=t.number,r=t.changeOutputIndex,o=t.address,i=t.isWallet,s=t.autoSpend;if(i&&s)return{};if(null!==n){var c,u=!1;if(0===r&&""===o)c="Set to wallet change address";else{if(a!==r)return{};c="Your change will go here.",u=!0}return{endAdornment:l.a.createElement(hn.a,{position:"end"},l.a.createElement(zn.a,{placement:"top",title:c},l.a.createElement("small",null,l.a.createElement(Rt.a,{onClick:e.addChangeAddress,disabled:u},l.a.createElement(xr.a,null)))))}}return{}},e.handleAddressChange=function(t){var n=e.props,a=n.number;(0,n.setAddress)(a,t.target.value)},e.hasAddressError=function(){return""!==e.props.addressError},e.handleAmountChange=function(t){var n=e.props,a=n.number;(0,n.setAmount)(a,t.target.value)},e.hasAmountError=function(){return""!==e.props.amountError},e.isNotBalanceable=function(){var t=e.props,n=t.number,a=t.outputs,r=t.feeError,o=t.amountError,i=t.amount,s=t.inputsTotalSats;if(""!==r)return!0;for(var c=0;c<a.length;c+=1)if(c!==n-1&&(""!==a[c].amountError||""===a[c].amount))return!0;var l=e.autoBalancedAmount();return""!==Object(Z.validateOutputAmount)(Object(Z.bitcoinsToSatoshis)(l),s)||""===o&&l===new V.a(i)},e.isBalanceable=function(){return!e.isNotBalanceable()},e.hasBalanceError=function(){return""!==e.props.balanceError},e.autoBalancedAmount=function(){var t=e.props,n=t.number,a=t.fee,r=t.inputsTotalSats,o=t.outputs.filter((function(e,t){return t!==n-1})).map((function(e){return e.amountSats})).reduce((function(e,t){return e.plus(t)}),new V.a(0)),i=Object(Z.bitcoinsToSatoshis)(new V.a(a));return Object(Z.satoshisToBitcoins)(r.minus(o.plus(i)))},e.balanceAction=function(){var t=e.props.balanceError;return!e.hasBalanceError()||e.isNotBalanceable()?null:t.split(" ")[0]},e.handleBalance=function(){var t=e.props,n=t.number;(0,t.setAmount)(n,e.autoBalancedAmount().toString())},e.hasError=function(){return e.hasAddressError()||e.hasAmountError()},e.handleDelete=function(){var t=e.props,n=t.number;(0,t.remove)(n)},e.handleMaxSpend=function(t){t.preventDefault();var n=e.props,a=n.number;(0,n.setMaxSpend)(a)},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props,t=e.outputs,n=e.finalizedOutputs,a=e.address,r=e.amount,o=e.addressError,i=e.amountError,s=e.changeOutputIndex,c=e.autoSpend,u=e.isWallet,d=e.number,p=u?10:1;return l.a.createElement(k.a,{container:!0,spacing:p},l.a.createElement(k.a,{item:!0,xs:7},l.a.createElement(kt.a,{fullWidth:!0,placeholder:"Address",name:"destination",className:qn.a.outputsFormInput,disabled:n,onChange:this.handleAddressChange,value:a,error:this.hasAddressError(),helperText:o,InputProps:this.renderChangeAdornment()})),l.a.createElement(k.a,{item:!0,xs:3},l.a.createElement(kt.a,{fullWidth:!0,placeholder:"Amount",className:qn.a.outputsFormInput,name:"amount",disabled:n,onChange:this.handleAmountChange,value:r,error:this.hasAmountError(),helperText:i,InputProps:{startAdornment:l.a.createElement(hn.a,{position:"start"},u&&c&&d===t.length&&d!==s&&l.a.createElement(j.a,{onClick:this.handleMaxSpend,className:qn.a.maxSpend,style:{fontSize:".7rem"}},"MAX")),endAdornment:l.a.createElement(hn.a,{position:"end"},l.a.createElement(ie.a,null,"BTC"))}})),this.displayBalanceAction()&&l.a.createElement(k.a,{item:!0,xs:1},l.a.createElement(zn.a,{title:"".concat(this.balanceAction()," to ").concat(this.autoBalancedAmount().toString()),placement:"top"},l.a.createElement("small",null,l.a.createElement(Rt.a,{onClick:this.handleBalance},"Increase"===this.balanceAction()?l.a.createElement(Zt.a,null):l.a.createElement(Jt.a,null))))),!n&&t.length>(s>0&&c?2:1)&&l.a.createElement(k.a,{item:!0,xs:1},l.a.createElement(zn.a,{title:"Remove Output",placement:"top"},l.a.createElement(Rt.a,{onClick:this.handleDelete},l.a.createElement(jr.a,null)))))}}]),n}(l.a.Component);kr.defaultProps={changeNode:{}};var Rr={setAddress:nt,setAmount:at,remove:ot,setChangeOutput:tt,setMaxSpend:function(e){return function(t,n){var a=Ge(n()),r=He(n()),o=n(),i=o.settings,s=i.addressType,c=i.requiredSigners,l=i.totalSigners,u=o.spend.transaction,d=u.outputs,p=u.feeRate,m=a.reduce((function(e,t){return e+t.utxos.length}),0),h=Object(Z.estimateMultisigTransactionFee)({addressType:s,numInputs:m,numOutputs:d.length,m:c,n:l,feesPerByteInSatoshis:p}),f=d.reduce((function(e,t){return e.plus(t.amount.length?t.amountSats:0)}),new V.a(0)),E=Object(Z.satoshisToBitcoins)(new V.a(r).minus(d.length>1?f:0).minus(h));return E.isLessThanOrEqualTo(Object(Z.satoshisToBitcoins)(h))&&d.length>1||E.isLessThan(J)?t(lt("Not enough available funds for max spend. Clear other outputs or wait for incoming deposits to confirm.")):t(at(e,E.toFixed()))}}},Cr=Object(m.b)((function(e,t){return Object(q.a)(Object(q.a)(Object(q.a)({},e.spend.transaction),e.spend.transaction.outputs[t.number-1]),{},{changeNode:e.wallet.change.nextNode})}),Rr)(kr),Nr=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).titleRef=l.a.createRef(),a.outputsTotal=0,a.componentDidMount=function(){a.initialOutputState(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){var e=a.props,t=e.signatureImporters,n=e.isWallet;0!==Object.keys(t).reduce((function(e,n){return e+t[n].finalized}),0)||n||a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.renderOutputs=function(){var e=a.props,t=e.outputs,n=e.changeOutputIndex,r=e.autoSpend;return Object(mn.map)(t).map((function(e,t){return l.a.createElement(x.a,{key:t,display:r&&n===t+1?"none":"block"},l.a.createElement(k.a,{container:!0},l.a.createElement(Cr,{number:t+1})))}))},a.inputsTotal=function(){var e=a.props.inputsTotalSats;return Object(Z.satoshisToBitcoins)(e)},a.outputsAndFeeTotal=function(){var e=a.props,t=e.outputs,n=e.fee,r=e.updatesComplete,o=e.inputs,i=t.map((function(e){var t=e.amount;return t&&t.length&&!isNaN(t)||(t=0),new V.a(t)})).reduce((function(e,t){return e.plus(t)}),new V.a(0));return n&&o.length&&(i=i.plus(n)),r?(a.outputsTotal=i,i.toFixed(8)):"0.00000000"},a.hasFeeRateFetchError=function(){return""!==a.state.feeRateFetchError},a.hasFeeRateError=function(){return""!==a.props.feeRateError},a.hasFeeError=function(){return""!==a.props.feeError},a.hasBalanceError=function(){return""!==a.props.balanceError},a.hasError=function(){return a.hasFeeRateFetchError()||a.hasFeeRateError()||a.hasFeeError()||a.hasBalanceError()},a.handleAddOutput=function(){(0,a.props.addOutput)()},a.handleFeeRateChange=function(e){var t=a.props.setFeeRate,n=e.target.value;(""===n||NaN===parseFloat(n,10)||parseFloat(n,10)<1)&&(n="0"),t(n)},a.handleFeeChange=function(e){(0,a.props.setFee)(e.target.value)},a.handleFinalize=function(){(0,a.props.finalizeOutputs)(!0)},a.handleReset=function(){var e=a.props,t=e.resetOutputs,n=e.isWallet;t(),n||setTimeout((function(){return a.initialOutputState()}),0)},a.getFeeEstimate=Object(oe.a)(re.a.mark((function e(){var t,n,r,o,i,s;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.client,r=t.network,o=t.setFeeRate,i=1,s="",e.prev=3,e.next=6,ke(r,n);case 6:i=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),s="There was an error fetching the fee rate.";case 13:return e.prev=13,o(i.toString()),a.setState({feeRateFetchError:s}),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[3,9,13,17]])}))),a.gatherSignaturesDisabled=function(){var e=a.props,t=e.finalizedOutputs,n=e.outputs;if(0===e.inputs.length)return!0;if(t||a.hasError())return!0;for(var r=0;r<n.length;r+=1){var o=n[r];if(""===o.address||""===o.amount||""!==o.addressError||""!==o.amountError)return!0}return!1},a.state={feeRateFetchError:""},a}return Object(v.a)(n,null,[{key:"unitLabel",value:function(e,t){var n={endAdornment:l.a.createElement(hn.a,{position:"end"},l.a.createElement(ie.a,null,e))};return t&&(n=Object(q.a)(Object(q.a)({},n),t)),n}}]),Object(v.a)(n,[{key:"initialOutputState",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n,a,r,o,i,s,c,l;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.inputs,a=t.outputs,e.next=3,this.getFeeEstimate();case 3:r=this.props,o=r.inputsTotalSats,i=r.fee,s=r.setOutputAmount,c=Object(Z.bitcoinsToSatoshis)(new V.a(i)),l=Object(Z.satoshisToBitcoins)(o.minus(c)),n.length&&""===a[0].amount&&s(1,l.toFixed(8));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.feeRate,a=e.fee,r=e.finalizedOutputs,o=e.feeRateError,i=e.feeError,s=e.balanceError,c=e.inputs,u=e.isWallet,d=e.autoSpend,p=this.state.feeRateFetchError,m=c&&c.length>0?a:"0.0000",h=u?10:1;return l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,{ref:this.titleRef},l.a.createElement(k.a,{container:!0,spacing:h},l.a.createElement(k.a,{item:!0,xs:4},l.a.createElement(j.a,{variant:"caption",className:qn.a.outputsFormLabel},"To")),l.a.createElement(k.a,{item:!0,xs:3},"\xa0"),l.a.createElement(k.a,{item:!0,xs:3},l.a.createElement(j.a,{variant:"caption",className:qn.a.outputsFormLabel},"Amount"))),l.a.createElement(k.a,null,this.renderOutputs()),l.a.createElement(k.a,{item:!0,container:!0,spacing:h},l.a.createElement(k.a,{item:!0,xs:12},l.a.createElement(_.a,{color:"primary",disabled:r,onClick:this.handleAddOutput},l.a.createElement(Ir.a,null)," Add output"))),l.a.createElement(k.a,{item:!0,container:!0,spacing:h},l.a.createElement(k.a,{item:!0,xs:3},l.a.createElement(x.a,{mt:3},l.a.createElement(j.a,{variant:"caption",className:qn.a.outputsFormLabel},"Fee Rate"),l.a.createElement(kt.a,{fullWidth:!0,value:t,type:"number",minimum:0,step:1,name:"fee_rate",disabled:r,onChange:this.handleFeeRateChange,error:this.hasFeeRateError(),helperText:p||o,InputProps:{endAdornment:l.a.createElement(hn.a,{position:"end"},l.a.createElement(zn.a,{placement:"top",title:"Estimate best rate"},l.a.createElement("small",null,l.a.createElement(Rt.a,{onClick:this.getFeeEstimate,disabled:r},l.a.createElement(G.a,null)))),l.a.createElement(ie.a,null,"Sats/byte"))}}))),l.a.createElement(k.a,{item:!0,xs:4},l.a.createElement(x.a,{mt:3},"\xa0")),!u||u&&!d?l.a.createElement(k.a,{item:!0,xs:3},l.a.createElement(x.a,{mt:3},l.a.createElement(j.a,{variant:"caption",className:qn.a.outputsFormLabel},"Estimated Fees"),l.a.createElement(kt.a,{fullWidth:!0,name:"fee_total",disabled:r,value:m,onChange:this.handleFeeChange,error:this.hasFeeError(),helperText:i,InputProps:n.unitLabel("BTC",{readOnly:!0,disableUnderline:!0,style:{color:"gray"}})}))):"",l.a.createElement(k.a,{item:!0,xs:2})),l.a.createElement(k.a,{item:!0,container:!0,spacing:h},l.a.createElement(k.a,{item:!0,xs:4},l.a.createElement(x.a,{mt:7},l.a.createElement(j.a,{variant:"h6"},!u||u&&!d?"Totals":"Output Total"))),l.a.createElement(k.a,{item:!0,xs:3},l.a.createElement(x.a,{display:!u||u&&!d?"block":"none",mt:7},l.a.createElement(kt.a,{fullWidth:!0,label:"Inputs Total",readOnly:!0,value:this.inputsTotal().toFixed(8),disabled:r,InputProps:n.unitLabel("BTC",{readOnly:!0})}))),l.a.createElement(k.a,{item:!0,xs:3},l.a.createElement(x.a,{mt:7},l.a.createElement(kt.a,{fullWidth:!0,label:!u||u&&!d?"Outputs & Fee Total":"",value:this.outputsAndFeeTotal(),error:this.hasBalanceError(),disabled:r,helperText:s,InputProps:n.unitLabel("BTC",{readOnly:!0,disableUnderline:!0})}))),l.a.createElement(k.a,{item:!0,xs:2}))),!u&&l.a.createElement(x.a,{mt:7},l.a.createElement(k.a,{container:!0,spacing:3,justify:"center"},l.a.createElement(k.a,{item:!0},l.a.createElement(_.a,{variant:"contained",color:"primary",disabled:this.gatherSignaturesDisabled(),onClick:this.handleFinalize},"Gather Signatures")),l.a.createElement(k.a,{item:!0},l.a.createElement(_.a,{variant:"contained",color:"secondary",disabled:r,onClick:this.handleReset},"Reset Outputs")))))}}]),n}(l.a.Component);Nr.defaultProps={updatesComplete:!1};var _r={addOutput:et,setOutputAmount:at,setFeeRate:it,setFee:st,finalizeOutputs:ct,resetOutputs:function(){return{type:"RESET_OUTPUTS"}}},Ar=Object(m.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},{network:e.settings.network,client:e.client}),e.spend.transaction),e.client),{},{signatureImporters:e.spend.signatureImporters,change:e.wallet.change})}),_r)(Nr),Kr=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).buildSignedTransaction=function(){var e=a.props,t=e.network,n=e.inputs,r=e.outputs,o=e.signatureImporters;return Object(Z.signedMultisigTransaction)(t,n,r,Object.values(o).map((function(e){return e.signature})))},a.handleBroadcast=Object(oe.a)(re.a.mark((function e(){var t,n,r,o,i,s,c;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.client,r=t.network,o=t.setTxid,i=a.buildSignedTransaction(),s="",c="",a.setState({broadcasting:!0}),e.prev=5,e.next=8,Re(i.toHex(),r,n);case 8:c=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0),s="There was an error broadcasting the transaction.: ".concat(e.t0);case 15:return e.prev=15,a.setState({txid:c,error:s,broadcasting:!1}),o(c),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[5,11,15,19]])}))),a.transactionURL=function(){var e=a.props.network,t=a.state.txid;return Object(Z.blockExplorerTransactionURL)(t,e)},a.state={error:"",broadcasting:!1,txid:""},a}return Object(v.a)(n,[{key:"render",value:function(){var e=this.state,t=e.error,n=e.broadcasting,a=e.txid,r=this.buildSignedTransaction(),o=r.toHex();return l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Broadcast"}),l.a.createElement(N.a,null,l.a.createElement("form",null,r&&l.a.createElement(x.a,{mt:4},l.a.createElement(j.a,{variant:"h6"},"Signed Transaction"),l.a.createElement(Dn,{text:o,code:!0,showIcon:!0})),""===a?l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{variant:"contained",color:"primary",disabled:!r||n,onClick:this.handleBroadcast},"Broadcast Transaction"),l.a.createElement(ie.a,{error:!0},t),l.a.createElement("small",null,l.a.createElement(ie.a,null,"Warning: Broadcasting this transaction cannot be undone."))):l.a.createElement(x.a,{mt:2},l.a.createElement(j.a,{variant:"h5"},l.a.createElement(Dn,{text:a,code:!0,showIcon:!0}),"\xa0",Q(this.transactionURL(),l.a.createElement(Wn.a,null))),l.a.createElement("p",null,"Transaction successfully broadcast.")))))}}]),n}(l.a.Component);var Mr={setTxid:function(e){return{type:"SET_TXID",value:e}}},Br=Object(m.b)((function(e){return Object(q.a)(Object(q.a)({network:e.settings.network,client:e.client},e.client),{},{signatureImporters:e.spend.signatureImporters,inputs:e.spend.transaction.inputs,outputs:e.spend.transaction.outputs})}),Mr)(Kr),Dr=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.state.showUnsignedTransaction,t=a.props.unsignedTransaction;if(e){var n=t.toHex();return l.a.createElement("div",null,l.a.createElement("small",null,l.a.createElement(_.a,{size:"small",onClick:a.handleHideUnsignedTransaction},"Hide Unsigned Transaction")),l.a.createElement("p",null,l.a.createElement(Dn,{text:n,showIcon:!0})))}return l.a.createElement("small",null,l.a.createElement(_.a,{size:"small",onClick:a.handleShowUnsignedTransaction},"Show Unsigned Transaction"))},a.handleShowUnsignedTransaction=function(){a.setState({showUnsignedTransaction:!0})},a.handleHideUnsignedTransaction=function(){a.setState({showUnsignedTransaction:!1})},a.state={showUnsignedTransaction:!1},a}return n}(l.a.Component);var Ur=Object(m.b)((function(e){return{unsignedTransaction:e.spend.transaction.unsignedTransaction}}),{})(Dr),Lr=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).renderKeySelectors=function(){for(var e=a.props.requiredSigners,t=[],n=1;n<=e;n+=1)t.push(l.a.createElement(x.a,{key:n,mt:2},l.a.createElement(Ua,{number:n})));return t},a.signaturesFinalized=function(){var e=a.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every((function(e){return e.finalized}))},a.handleReturn=function(){var e=a.props,t=e.resetTransaction,n=e.resetWalletView;t(),n()},a.handleCancel=function(e){var t=a.props,n=t.finalizeOutputs,r=t.requiredSigners,o=t.setRequiredSigners,i=t.setSpendStep;e.preventDefault(),o(r),n(!1),i(0)},a.render=function(){var e=a.state.spent;return l.a.createElement(x.a,null,l.a.createElement(_.a,{href:"#",onClick:a.handleCancel},"Edit Transaction"),l.a.createElement(x.a,{mt:2},l.a.createElement(Ur,null)),a.renderKeySelectors(),l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{href:"#",onClick:function(e){e.preventDefault(),a.handleReturn()}},"Abandon Transaction")),a.signaturesFinalized()&&l.a.createElement(x.a,{mt:2},l.a.createElement(Br,null)),e&&l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{variant:"contained",color:"primary",onClick:a.handleReturn},"Return")))},a.state={spent:!1},a}return Object(v.a)(n,[{key:"componentWillUnmount",value:function(){var e=this.props.resetTransaction;this.state.spent&&e()}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.txid,a=e.changeSlice,r=e.updateTxSlices;return n.length&&!t.spent?(r(a),{spent:!0}):null}}]),n}(l.a.Component);var zr={finalizeOutputs:ct,setRequiredSigners:Qe,updateTxSlices:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return function(){var r=Object(oe.a)(re.a.mark((function r(o,i){var s,c,l,u,d,p,m,h,f,E,b,v,g,y,P,S,T,O,I,w,x,j;return re.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=i(),c=s.settings.network,l=s.client,u=s.spend.transaction,d=u.changeAddress,p=u.inputs,m=u.txid,h=s.wallet,f=h.deposits,E=f.nextNode,b=f.nodes,v=h.change.nodes,g=function(){var e=Object(oe.a)(re.a.mark((function e(t,n){var a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t,c,l);case 2:return a=e.sent,e.abrupt("return",Object(q.a)({addressUsed:!0,change:Be(n),address:t,bip32Path:n},a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=Object(se.a)(p),t&&t.multisig.address===d&&y.push(t),P=[],S=new Set,y.forEach((function(e){var t=e.multisig.address;S.has(t)||a.has(t)||(S.add(t),P.push(g(t,e.bip32Path)))})),r.prev=7,r.next=10,Promise.all(P);case 10:T=r.sent,r.next=16;break;case 13:return r.prev=13,r.t0=r.catch(7),r.abrupt("return",o(ht("There was a problem updating wallet state. Try a refresh. Error: ".concat(r.t0.message))));case 16:for(O=0;O<T.length;O+=1)I=T[O],w=I.change?v[I.bip32Path].utxos.length:b[I.bip32Path].utxos.length,I&&I.utxos&&I.utxos.length!==w&&(o({type:I.change?"UPDATE_CHANGE_SLICE":"UPDATE_DEPOSIT_SLICE",value:I}),a.add(I.address));if(a.size===T.length||!n){r.next=19;break}return r.abrupt("return",setTimeout((function(){return o(e(t,n-1,a))}),750));case 19:if(n){r.next=23;break}return x="There was a problem updating the wallet balance.\n      It is recommended you refresh the wallet to make sure UTXO current set is up to date.",m&&m.length&&(x+=" Transaction ID: ".concat(m)),r.abrupt("return",o(ht(x)));case 23:return r.next=25,g(E.multisig.address,E.bip32Path);case 25:if((j=r.sent).utxos.length===b[j.bip32Path].utxos.length){r.next=28;break}return r.abrupt("return",o({type:"UPDATE_DEPOSIT_SLICE",value:j}));case 28:case"end":return r.stop()}}),r,null,[[7,13]])})));return function(e,t){return r.apply(this,arguments)}}()},resetTransaction:function(){return{type:"RESET_TRANSACTION"}},resetWalletView:St,setSpendStep:dt},Fr=Object(m.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},e.wallet),e.spend),e.quorum),{},{txid:e.spend.transaction.txid,requiredSigners:e.spend.transaction.requiredSigners,totalSigners:e.spend.transaction.totalSigners,changeSlice:e.wallet.change.nextNode})}),zr)(Lr),Hr=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props,n=t.feeRate,a=t.fee,r=t.inputsTotalSats,o=t.editTransaction,i=t.handleSignTransaction;return l.a.createElement(x.a,null,l.a.createElement("h2",null,"Transaction Preview"),l.a.createElement(Ur,null),l.a.createElement("h3",null,"Inputs"),e.renderInputs(),l.a.createElement("h3",null,"Outputs"),e.renderOutputs(),l.a.createElement(k.a,{container:!0},l.a.createElement(k.a,{item:!0,xs:4},l.a.createElement("h3",null,"Fee"),l.a.createElement("div",null,V()(a).toFixed(8)," BTC ")),l.a.createElement(k.a,{item:!0,xs:4},l.a.createElement("h3",null,"Fee Rate"),l.a.createElement("div",null,n," sats/byte")),l.a.createElement(k.a,{item:!0,xs:4},l.a.createElement("h3",null,"Total"),l.a.createElement("div",null,Object(Z.satoshisToBitcoins)(V()(r||0)).toFixed(8)," ","BTC"))),l.a.createElement(x.a,{mt:2},l.a.createElement(k.a,{container:!0,spacing:2},l.a.createElement(k.a,{item:!0},l.a.createElement(_.a,{variant:"contained",onClick:function(e){e.preventDefault(),o()}},"Edit Transaction")),l.a.createElement(k.a,{item:!0},l.a.createElement(_.a,{variant:"contained",color:"primary",onClick:i},"Sign Transaction")))))},e.renderAddresses=function(){var t=e.mapAddresses();return Object.keys(t).map((function(e){return l.a.createElement(gn.a,{key:e},l.a.createElement(yn.a,null,l.a.createElement("code",null,e)),l.a.createElement(yn.a,null,t[e].utxos.length),l.a.createElement(yn.a,null,l.a.createElement("code",null,t[e].amount.toFixed(8))))}))},e.renderOutputAddresses=function(){var t=e.props,n=t.changeAddress;return t.outputs.map((function(e){return l.a.createElement(gn.a,{key:e.address},l.a.createElement(yn.a,null,l.a.createElement("code",null,e.address),e.address===n?l.a.createElement("small",null,"\xa0(change)"):""),l.a.createElement(yn.a,null,l.a.createElement("code",null,V()(e.amount).toFixed(8))))}))},e.renderOutputs=function(){return l.a.createElement(bn.a,null,l.a.createElement(vn.a,null,l.a.createElement(gn.a,null,l.a.createElement(yn.a,null,"Address"),l.a.createElement(yn.a,null,"Amount (BTC)"))),l.a.createElement(Pn.a,null,e.renderOutputAddresses()),l.a.createElement(Hn.a,null,l.a.createElement(gn.a,null,l.a.createElement(yn.a,null,"TOTAL:"),l.a.createElement(yn.a,null,e.outputsTotal()))))},e.renderInputs=function(){var t=e.props.inputsTotalSats;return l.a.createElement(bn.a,null,l.a.createElement(vn.a,null,l.a.createElement(gn.a,null,l.a.createElement(yn.a,null,"Address"),l.a.createElement(yn.a,null,"UTXO count"),l.a.createElement(yn.a,null,"Amount (BTC)"))),l.a.createElement(Pn.a,null,e.renderAddresses()),l.a.createElement(Hn.a,null,l.a.createElement(gn.a,null,l.a.createElement(yn.a,{colSpan:2},"TOTAL:"),l.a.createElement(yn.a,null,Object(Z.satoshisToBitcoins)(t).toString()))))},e.mapAddresses=function(){return e.props.inputs.reduce((function(e,t){var n=e,a=t.confirmed,r=t.txid,o=t.index,i=t.amount;return n[t.multisig.address]=e[t.multisig.address]||{amount:V()(0),utxos:[]},n[t.multisig.address].utxos.push({confirmed:a,txid:r,index:o,amount:i}),n[t.multisig.address].amount=e[t.multisig.address].amount.plus(V()(t.amount)),n}),{})},e.outputsTotal=function(){var t=e.props.outputs;return Object(Z.satoshisToBitcoins)(t.reduce((function(e,t){return e.plus(V()(t.amountSats||0))}),V()(0))).toString()},e}return n}(l.a.Component),Wr=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).outputsAmount=new V.a(0),e.coinSelection=ee,e.feeAmount=new V.a(0),e.componentDidUpdate=function(t){e.props.finalizedOutputs&&!t.finalizedOutputs&&e.showPreview()},e.previewDisabled=function(){var t=e.props,n=t.finalizedOutputs,a=t.outputs,r=t.feeRateError,o=t.feeError,i=t.inputs,s=t.balanceError,c=t.autoSpend;if(0===i.length&&!c)return!0;if(n||r||o||s)return!0;for(var l=0;l<a.length;l+=1){var u=a[l];if(""===u.address||""===u.amount||""!==u.addressError||""!==u.amountError)return!0}return!1},e.showSignTransaction=function(){(0,e.props.setSpendStep)(2)},e.handleShowPreview=function(){var t=e.props,n=t.autoSelectCoins,a=t.autoSpend,r=t.finalizeOutputs;a?n():r(!0)},e.showPreview=function(){(0,e.props.setSpendStep)(1)},e.showCreate=function(){var t=e.props,n=t.finalizeOutputs,a=t.setSpendStep,r=t.resetNodesSpend,o=t.autoSpend,i=t.deleteChangeOutput;a(0),n(!1),o&&(r(),i())},e.handleSpendMode=function(t){var n=e.props,a=n.updateAutoSpend,r=n.resetNodesSpend,o=n.deleteChangeOutput;a(!t.target.checked),a(!t.target.checked),r(),o()},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.autoSpend,a=t.changeAddress,r=t.updateNode,o=t.addNode,i=t.spendingStep,s=t.fee,c=t.feeRate,u=t.inputs,d=t.inputsTotalSats,p=t.outputs;return l.a.createElement(R.a,null,l.a.createElement(N.a,null,l.a.createElement(k.a,{container:!0},2===i&&l.a.createElement(k.a,{item:!0,md:12},l.a.createElement(x.a,null,l.a.createElement(Fr,null))),0===i&&l.a.createElement(k.a,{item:!0,md:12},l.a.createElement(k.a,{container:!0,direction:"row-reverse"},l.a.createElement(x.a,{display:"flex-end"},l.a.createElement(x.a,{p:1},l.a.createElement(Lt.a,{control:l.a.createElement(Qn.a,{checked:!n,onChange:this.handleSpendMode}),label:"Manual"})))),l.a.createElement(x.a,{component:"div",display:n?"none":"block"},l.a.createElement(Tr,{addNode:o,updateNode:r})),l.a.createElement(Ar,null),l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{onClick:this.handleShowPreview,variant:"contained",color:"primary",disabled:this.previewDisabled()},"Preview Transaction"))),1===i&&l.a.createElement(k.a,{item:!0,md:12},l.a.createElement(x.a,{mt:3},l.a.createElement(Hr,{changeAddress:a,editTransaction:this.showCreate,fee:s,feeRate:c,inputs:u,inputsTotalSats:d,outputs:p,handleSignTransaction:function(){return e.showSignTransaction()}}))))))}}]),n}(l.a.Component);Wr.defaultProps={autoSpend:!1,balanceError:null,changeNodes:{},depositNodes:{},finalizedOutputs:!1,feeError:null,feeRateError:null,spendingStep:0};var Gr={autoSelectCoins:function(){return function(e,t){var n,a,r,o=t(),i=o.settings,s=o.spend.transaction,c=o.wallet.change.nextNode.multisig.address,l=i.totalSigners,u=i.requiredSigners,d=i.addressType,p=s.outputs,m=s.feeRate,h=Ge(t());try{var f=ee({outputs:p,feesPerByteInSatoshis:m,m:u,n:l,addressType:d,slices:h}),E=Object(ce.a)(f,2);n=E[0],a=E[1]}catch(P){return e(lt(P.message))}var b={addressType:d,numInputs:n.length,m:u,n:l,feesPerByteInSatoshis:m};if(a){var v=p.reduce((function(e,t){return e.plus(t.amountSats)}),new V.a(0)),g=n.reduce((function(e,t){return e.plus(t.amountSats)}),new V.a(0));r=Object(Z.estimateMultisigTransactionFee)(Object(q.a)(Object(q.a)({},b),{},{numOutputs:p.length+1}));var y=g.minus(r).minus(v).toFixed(8);e(function(e){var t=e.value,n=e.address;return function(e,a){var r=a().spend.transaction,o=r.outputs,i=r.changeOutputIndex;i||e({type:"ADD_OUTPUT"});var s=i||o.length+1;e(tt(s)),e(rt(n)),e(nt(s,n)),e(at(s,t))}}({address:c,value:Object(Z.satoshisToBitcoins)(y).toFixed()}))}else r=Object(Z.estimateMultisigTransactionFee)(Object(q.a)(Object(q.a)({},b),{},{numOutputs:p.length}));e(st(Object(Z.satoshisToBitcoins)(r).toFixed())),e($e(n)),e(ct(!0))}},deleteChangeOutput:function(){return function(e,t){var n=t().spend.transaction.changeOutputIndex;n&&e(ot(n))}},updateAutoSpend:ut,setInputs:$e,updateChangeSlice:yt,updateDepositSlice:gt,setAddress:nt,resetNodesSpend:function(){return{type:"RESET_NODES_SPEND"}},setFeeRate:it,addOutput:et,finalizeOutputs:ct,setChangeAddress:rt,setSpendStep:dt},qr=Object(m.b)((function(e){return Object(q.a)(Object(q.a)({},e.spend.transaction),{},{changeNodes:e.wallet.change.nodes,changeNode:e.wallet.change.nextNode,depositNodes:e.wallet.deposits.nodes,autoSpend:e.spend.transaction.autoSpend})}),Gr)(Wr),Yr=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).filterAddresses=function(e,t){a.setState({[e.target.value]:t},(function(){return a.setDisplaySlices()}))},a.state={filterIncludeSpent:!1,filterIncludeZeroBalance:!1,displaySlices:e.slicesWithBalance.length?Object(se.a)(e.slicesWithBalance):[]},a}return Object(v.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.slicesWithBalance;e.slicesWithBalance.length!==t.length&&this.setDisplaySlices()}},{key:"setDisplaySlices",value:function(){var e=this.props,t=e.slicesWithBalance,n=e.zeroBalanceSlices,a=e.spentSlices,r=this.state,o=r.filterIncludeSpent,i=r.filterIncludeZeroBalance,s=Object(se.a)(t);o&&s.push.apply(s,Object(se.a)(a)),i&&s.push.apply(s,Object(se.a)(n)),this.setState({displaySlices:s})}},{key:"render",value:function(){var e=this.state,t=e.filterIncludeSpent,n=e.filterIncludeZeroBalance,a=e.displaySlices,r=this.props,o=r.client,i=r.network;return l.a.createElement(R.a,null,l.a.createElement(N.a,null,l.a.createElement(k.a,{container:!0,direction:"column"},l.a.createElement(k.a,{item:!0},l.a.createElement(Ja,{slices:a,client:o,network:i,paging:!0})),l.a.createElement(k.a,{item:!0},l.a.createElement(nr.a,{row:!0},l.a.createElement(ar.a,{component:"h2"},l.a.createElement(x.a,{mr:3},"Show Additional")),l.a.createElement(Lt.a,{control:l.a.createElement(rr.a,{checked:t,value:"filterIncludeSpent",onChange:this.filterAddresses}),label:"Spent Addresses"}),l.a.createElement(Lt.a,{control:l.a.createElement(rr.a,{checked:n,value:"filterIncludeZeroBalance",onChange:this.filterAddresses}),label:"Zero Balance"}))))))}}]),n}(l.a.PureComponent);var Vr=Object(m.b)((function(e){return{slicesWithBalance:Ye(e),zeroBalanceSlices:Ve(e),spentSlices:qe(e),walletMode:e.wallet.common.walletMode,client:e.client,network:e.settings.network}}))(Yr),Xr=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).scrollRef=l.a.createRef(),e.componentDidMount=function(){e.scrollRef.current.scrollIntoView({behavior:"smooth"})},e.render=function(){var t=e.props.walletMode;return l.a.createElement("div",null,l.a.createElement(On.a,{ref:e.scrollRef,value:t,onChange:e.handleModeChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},l.a.createElement(In.a,{label:"Addresses",value:Et}),l.a.createElement(In.a,{label:"Receive",value:bt}),l.a.createElement(In.a,{label:"Send",value:vt})),l.a.createElement(x.a,{mt:2},e.renderModeComponent()))},e.renderModeComponent=function(){var t=e.props,n=t.walletMode,a=t.addNode,r=t.updateNode;if(e.addressesAreLoaded())return n===bt?l.a.createElement(tr,null):n===vt?l.a.createElement(qr,{addNode:a,updateNode:r}):n===Et?l.a.createElement(Vr,null):"";var o=e.progress();return l.a.createElement(wn.a,{variant:"determinate",value:o})},e.progress=function(){var t=e.props,n=t.change;return 100*(t.deposits.trailingEmptyNodes+n.trailingEmptyNodes)/40},e.addressesAreLoaded=function(){var t=e.props,n=t.change,a=t.deposits,r=t.nodesLoaded,o=t.initialLoadComplete;return!!r||(a.trailingEmptyNodes>=20||a.fetchUTXOsErrors>=5)&&(n.trailingEmptyNodes>=20||n.fetchUTXOsErrors>=5)&&(o(),!0)},e.handleModeChange=function(t,n){var a=e.props,r=a.setMode,o=a.requiredSigners,i=a.setRequiredSigners,s=a.signatureImporters;n===vt&&Object.keys(s).length!==o&&i(o),r(n)},e}return n}(l.a.Component);var Zr={setMode:function(e){return{type:"UPDATE_WALLET_MODE",value:e}},setRequiredSigners:Qe,initialLoadComplete:function(){return{type:"INITIAL_LOAD_COMPLETE"}}},Jr=Object(m.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)({},e.wallet),e.wallet.common),{},{requiredSigners:e.spend.transaction.requiredSigners,signatureImporters:e.spend.signatureImporters})}),Zr)(Xr),Qr=function(e){var t=e.onClearFn,n=e.onDownloadFn;return l.a.createElement(k.a,{container:!0,spacing:2},l.a.createElement(k.a,{item:!0},l.a.createElement(_.a,{variant:"contained",color:"primary",onClick:n},"Download Wallet Details")),l.a.createElement(k.a,{item:!0},l.a.createElement(_.a,{onClick:function(e){return function(e){e.preventDefault(),sessionStorage&&sessionStorage.removeItem("caravan_config"),t(e)}(e)},variant:"contained",color:"secondary"},"Clear Wallet")))},$r=cn({setExtendedPublicKeyImporterName:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME",resetExtendedPublicKeyImporterBIP32Path:"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterBIP32Path:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",setExtendedPublicKeyImporterMethod:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD",setExtendedPublicKeyImporterExtendedPublicKey:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY",setExtendedPublicKeyImporterFinalized:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED"}),eo=$r.setExtendedPublicKeyImporterName,to=$r.setExtendedPublicKeyImporterBIP32Path,no=$r.resetExtendedPublicKeyImporterBIP32Path,ao=$r.setExtendedPublicKeyImporterMethod,ro=$r.setExtendedPublicKeyImporterExtendedPublicKey,oo=$r.setExtendedPublicKeyImporterFinalized;function io(e){return{type:"SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE",value:e}}var so=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).title=function(){var e=a.props,t=e.totalSigners,n=e.requiredSigners,r=e.addressType;return l.a.createElement("span",{className:"justify-content-between d-flex"},"Your ",n,"-of-",t," ",r," Multisig Wallet",l.a.createElement("small",{className:"text-muted"}," Extended Public Keys: ".concat(a.extendedPublicKeyCount(),"/").concat(t)))},a.testConnection=function(){var e=Object(oe.a)(re.a.mark((function e(t,n){var r,o,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.network,o=t.client,i=t.setPasswordError,e.prev=1,e.next=4,ke(r,o);case 4:i(""),a.setState({connectSuccess:!0},(function(){n&&setTimeout(n,750)})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),a.setState({connectSuccess:!1}),e.t0.response&&401===e.t0.response.status?i("Unauthorized: Incorrect username and password combination"):i(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),a.extendedPublicKeyCount=function(){var e=a.props.extendedPublicKeyImporters;return Object.values(e).filter((function(e){return e.finalized})).length},a.toggleImporters=function(e){e.preventDefault();var t=a.props,n=t.setImportersVisible,r=t.configuring,o=t.resetWallet,i=t.setGenerating;r||(i(!1),o()),n(!r)},a.generate=function(){var e=a.props,t=e.setImportersVisible,n=e.freeze,r=e.setGenerating;n(!0),t(!1),r(!0),a.setState({connectSuccess:!1},(function(){a.addNode(!1,"m/0/0",!0),a.addNode(!0,"m/1/0",!0)}))},a.updateNode=function(e,t){var n=a.props,r=n.updateChangeSlice,o=n.updateDepositSlice;(e?r:o)(t)},a.addNode=function(){var e=Object(oe.a)(re.a.mark((function e(t,n,r){var o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.generateMultisig(t,n,r);case 2:o=e.sent,a.updateNode(t,Object(q.a)({bip32Path:n},o));case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),a.generateMultisig=function(){var e=Object(oe.a)(re.a.mark((function e(t,n,r){var o,i,s,c,l,u,d,p,m,h,f,E;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=a.props,i=o.extendedPublicKeyImporters,s=o.totalSigners,c=o.network,l=o.addressType,u=o.requiredSigners,d=[],p=1;p<=s;p+=1)m=i[p],h=Object(Z.deriveChildPublicKey)(m.extendedPublicKey,n,c),d.push(h);return d.sort(),f=Z.generateMultisigFromPublicKeys.apply(void 0,[c,l,u].concat(d)),e.next=7,a.fetchUTXOs(t,f,r);case 7:return E=e.sent,e.abrupt("return",Object(q.a)({multisig:f},E));case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),a.fetchUTXOs=function(){var e=Object(oe.a)(re.a.mark((function e(t,n,r){var o,i,s,c,l;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.props,i=o.network,s=o.client,e.next=3,we(n.address,i,s);case 3:if(!(l=e.sent)||l.fetchUTXOsError.length){e.next=8;break}return e.next=7,je(n.address,i,s);case 7:c=e.sent;case 8:return c&&(l=Object(q.a)(Object(q.a)({},l),{},{addressUsed:c.used})),r&&setTimeout((function(){return a.generateNextNodeIfNecessary(t)})),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),a.generateNextNodeIfNecessary=function(e){var t=a.props,n=t.change,r=t.deposits,o=(e?n:r).trailingEmptyNodes,i=(e?n:r).fetchUTXOsErrors,s=Object.keys((e?n:r).nodes);if(!(o>=20||i>=5)){s.sort((function(e,t){var n=(e||"").split("/"),a=(t||"").split("/");return parseInt(n[2],10)-parseInt(a[2],10)}));var c=(s[s.length-1]||"").split("/"),l=parseInt(c[2],10),u="m/".concat(c[1],"/").concat(l+1);setTimeout((function(){return a.addNode(e,u,!0)}))}},a.refreshNodes=Object(oe.a)(re.a.mark((function e(){var t,n,r,o,i,s;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.change,r=t.deposits,o=t.resetNodesFetchErrors,i=Object.values(r.nodes).concat(Object.values(n.nodes)),s=Math.max(n.fetchUTXOsErrors,r.fetchUTXOsErrors),o(),e.next=6,Promise.all(i.map(function(){var e=Object(oe.a)(re.a.mark((function e(t){var n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchUTXOs(t.change,t.multisig);case 2:n=e.sent,a.updateNode(t.change,Object(q.a)({bip32Path:t.bip32Path},n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:s>=5&&Math.max(n.fetchUTXOsErrors,r.fetchUTXOsErrors)<5&&console.log("we had errors but now looks good, try to build more");case 7:case"end":return e.stop()}}),e)}))),a.state={connectSuccess:!1},a}return Object(v.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.refreshNodes,a=t.common.nodesLoaded,r=t.setGenerating;this.debouncedTestConnection=Object(mn.debounce)((function(t){return e.testConnection(t)}),500,{trailing:!0,leading:!1}),n(this.refreshNodes),a&&r(!0)}},{key:"componentDidUpdate",value:function(){var e=Object(oe.a)(re.a.mark((function e(t){var n,a,r,o,i,s,c;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.client.password,a=this.props,r=a.setPasswordError,o=a.network,i=a.client,s=a.common.nodesLoaded,c=a.setIsWallet,n!==i.password&&i.password.length&&this.debouncedTestConnection({network:o,client:i,setPasswordError:r}),!t.common.nodesLoaded&&s&&c();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePasswordEnter",value:function(){var e=Object(oe.a)(re.a.mark((function e(t){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.debouncedTestConnection.cancel(),e.next=4,this.testConnection(this.props,this.generate);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePasswordChange",value:function(){var e=Object(oe.a)(re.a.mark((function e(t){var n,a,r,o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=this.props,a=n.setPassword,r=n.setPasswordError,o=t.target.value,this.setState({connectSuccess:!1},(function(){a(o),r("")}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"body",value:function(){var e=this,t=this.props,n=t.totalSigners,a=t.configuring,r=t.downloadWalletDetails,o=t.client,i=t.generating,s=this.state.connectSuccess;return this.extendedPublicKeyCount()===n?i&&!a?l.a.createElement(Jr,{addNode:this.addNode,updateNode:this.updateNode}):l.a.createElement(R.a,null,l.a.createElement(C.a,{title:this.title()}),l.a.createElement(N.a,null,l.a.createElement(_.a,{href:"#",onClick:this.toggleImporters},a?"Hide Key Selection":"Edit Details"),l.a.createElement(Tn,null),l.a.createElement("p",null,"You have imported all\xa0",n," extended public keys. You will need to save this information."),l.a.createElement(Qr,{onClearFn:function(t){return e.toggleImporters(t)},onDownloadFn:r}),"private"===o.type&&l.a.createElement(x.a,{my:5},l.a.createElement(k.a,{container:!0,spacing:2,alignItems:"center"},l.a.createElement(k.a,{item:!0,xs:12},l.a.createElement(j.a,{variant:"subtitle1"},"This config uses a private client. Please enter password if not set.")),l.a.createElement(k.a,{item:!0},l.a.createElement(kt.a,{id:"client-username",label:"Username",defaultValue:o.username,InputProps:{readOnly:!0,disabled:!0,startAdornment:l.a.createElement(hn.a,{position:"start"},l.a.createElement(En.a,null))}})),l.a.createElement(k.a,{item:!0,md:4,xs:10},l.a.createElement("form",{onSubmit:function(t){return e.handlePasswordEnter(t)}},l.a.createElement(kt.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",placeholder:"Enter bitcoind password",value:o.password,onChange:function(t){return e.handlePasswordChange(t)},error:o.passwordError.length>0,helperText:o.passwordError}),s&&l.a.createElement(ie.a,null,"Connection confirmed with password!"))))),l.a.createElement("p",null,"Please confirm that the above information is correct and you wish to generate your wallet."),l.a.createElement(_.a,{id:"confirm-wallet",type:"button",variant:"contained",color:"primary",onClick:this.generate,disabled:"private"===o.type&&!s},"Confirm"))):l.a.createElement("p",null,"Once you have imported all ".concat(n," extended public keys, "),"your wallet will be generated here.")}},{key:"render",value:function(){return l.a.createElement("div",null,this.body())}}]),n}(l.a.Component);var co=Object(q.a)({freeze:qt,updateDepositSlice:gt,updateChangeSlice:yt,fetchSliceData:Ot,setImportersVisible:io,setIsWallet:function(){return{type:"SET_IS_WALLET"}},resetWallet:Tt,resetNodesFetchErrors:function(){return{type:"RESET_NODES_FETCH_ERRORS"}}},on({setPassword:"SET_CLIENT_PASSWORD",setPasswordError:"SET_CLIENT_PASSWORD_ERROR"})),lo=Object(m.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},e.settings),{client:e.client}),e.quorum),e.wallet),e.wallet.common)}),co)(so),uo=n(7),po=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.setBIP32PathToDefault()},a.render=function(){var e=a.props.extendedPublicKeyImporter,t=a.state,n=t.error,r=t.extendedPublicKey,o=t.extendedPublicKeyError,i=t.bip32PathError;return l.a.createElement("div",null,l.a.createElement(x.a,{mt:2},l.a.createElement(kt.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:r,onChange:a.handleExtendedPublicKeyChange,error:a.hasExtendedPublicKeyError(),helperText:o})),l.a.createElement(x.a,{mt:2},l.a.createElement(k.a,{container:!0},l.a.createElement(k.a,{item:!0,md:10},l.a.createElement(kt.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:a.handleBIP32PathChange,error:a.hasBIP32PathError(),helperText:i}),l.a.createElement(ie.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),l.a.createElement(k.a,{item:!0,md:2},!a.bip32PathIsDefault()&&l.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path},"Default"))),l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===r||a.hasError()},"Import Extended Public Key"))),l.a.createElement(ie.a,{className:"text-danger"},n))},a.import=function(){var e=a.props,t=e.network,n=e.extendedPublicKeyImporter,r=e.validateAndSetExtendedPublicKey,o=a.state.extendedPublicKey;r(Object(Z.deriveChildExtendedPublicKey)(o,n.bip32Path,t),(function(e){a.setState({error:e})}))},a.setBIP32PathToDefault=function(){(0,a.props.validateAndSetBIP32Path)("m/0",(function(){}),(function(){}))},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.hasExtendedPublicKeyError=function(){return""!==a.state.extendedPublicKeyError},a.hasError=function(){return a.hasBIP32PathError()||a.hasExtendedPublicKeyError()},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,(function(){}),a.setBIP32PathError,{mode:"unhardened"})},a.bip32PathIsDefault=function(){return"m/0"===a.props.extendedPublicKeyImporter.bip32Path},a.resetBIP32Path=function(){a.setBIP32PathToDefault(),a.setBIP32PathError("")},a.handleExtendedPublicKeyChange=function(e){var t=a.props,n=t.network,r=t.extendedPublicKeyImporters,o=e.target.value,i=Object(Z.validateExtendedPublicKey)(o,n);""===i&&Object.values(r).find((function(e){return e.extendedPublicKey===o}))&&(i="This extended public key has already been imported."),a.setState({extendedPublicKey:o,extendedPublicKeyError:i})},a.state={error:"",extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:""},a}return n}(l.a.Component),mo=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.props.extendedPublicKeyImporter,t=a.state.error;return l.a.createElement(x.a,{mt:2},l.a.createElement(kt.a,{fullWidth:!0,name:"publicKey",label:"Extended Public Key",value:e.extendedPublicKey,onChange:a.handleChange,error:a.hasError(),helperText:t}))},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){(0,a.props.validateAndSetExtendedPublicKey)(e.target.value,a.setError)},a.state={error:""},a}return n}(l.a.Component),ho=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){(0,a.props.resetBIP32Path)()},a.interaction=function(){var e=a.props,t=e.network,n=e.extendedPublicKeyImporter;return new ia.HermitExportExtendedPublicKey({network:t,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.disableChangeMethod,t=a.state.extendedPublicKeyError;return l.a.createElement(nr.a,null,l.a.createElement(Sa,{startText:"Import Extended Public Key",interaction:a.interaction(),onStart:e,onSuccess:a.import,onClear:a.onClear}),l.a.createElement(ie.a,{className:"text-danger"},t))},a.setError=function(e){a.setState({extendedPublicKeyError:e})},a.import=function(e){var t=a.props,n=t.validateAndSetBIP32Path,r=t.validateAndSetExtendedPublicKey;(0,t.enableChangeMethod)();var o=e.xpub;n(e.bip32Path,(function(){r(o,a.setError)}),a.setError)},a.onClear=function(){var e=a.props,t=e.reset,n=e.enableChangeMethod;t(!0),a.setError(""),n()},a.state={extendedPublicKeyError:""},a}return n}(l.a.Component),fo=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(){var e=a.props,t=e.network,n=e.extendedPublicKeyImporter;return Object(ia.ExportExtendedPublicKey)({network:t,keystore:n.method,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.extendedPublicKeyImporter,t=a.state,n=t.status,r=t.extendedPublicKeyError,o=a.interaction();return n===ia.UNSUPPORTED?l.a.createElement(ie.a,{className:"text-danger"},o.messageTextFor({status:n})):l.a.createElement(x.a,{mt:2},l.a.createElement(k.a,{container:!0},l.a.createElement(k.a,{item:!0,md:6},l.a.createElement(kt.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:a.handleBIP32PathChange,disabled:n!==ia.PENDING,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),l.a.createElement(k.a,{item:!0,md:6},!a.bip32PathIsDefault()&&l.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:n!==ia.PENDING},"Default"))),l.a.createElement(ie.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:a.hasBIP32PathError()||n===ia.ACTIVE},"Import Extended Public Key")),l.a.createElement(Ca,{messages:o.messagesFor({state:n}),excludeCodes:["bip32"]}),l.a.createElement(ie.a,{className:"text-danger"},r))},a.import=Object(oe.a)(re.a.mark((function e(){var t,n,r,o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.validateAndSetExtendedPublicKey,r=t.enableChangeMethod,(0,t.disableChangeMethod)(),a.setState({extendedPublicKeyError:"",status:ia.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:o=e.sent,n(o,(function(e){a.setState({extendedPublicKeyError:e,status:ia.PENDING})})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({extendedPublicKeyError:e.t0.message,status:ia.PENDING});case 14:r();case 15:case"end":return e.stop()}}),e,null,[[3,10]])}))),a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.status;return""!==t||a.interaction().hasMessagesFor({state:n,level:ia.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.status;return""!==t?t:a.interaction().messageTextFor({state:n,level:ia.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,(function(){}),a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.extendedPublicKeyImporter,n=e.defaultBIP32Path;return t.bip32Path===n},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.state={extendedPublicKeyError:"",bip32PathError:"",status:a.interaction().isSupported()?ia.PENDING:ia.UNSUPPORTED},a}return n}(l.a.Component),Eo=function(e){var t=e.message;return l.a.createElement("small",null,l.a.createElement(A.a,null,l.a.createElement(K.a,{color:"error.main"},l.a.createElement(M.a,null,l.a.createElement(j.a,{color:"error"},l.a.createElement(xa.a,null))),l.a.createElement(B.a,null,l.a.createElement(j.a,{color:"error"},t)))))},bo=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).title=function(){var e=a.props,t=e.number,n=e.extendedPublicKeyImporter,r=e.setName;return l.a.createElement(At,{number:t,name:n.name,setName:r})},a.renderImport=function(){var e=a.props,t=e.extendedPublicKeyImporter,n=e.number,r=a.state.disableChangeMethod,o="xpub-".concat(n,"-importer-select-label");return l.a.createElement("div",null,l.a.createElement(Dt.a,{fullWidth:!0},l.a.createElement(sa.a,{id:o},"Select Method"),l.a.createElement(ca.a,{labelId:o,id:"public-key-".concat(n,"-importer-select"),disabled:r,value:t.method,onChange:a.handleMethodChange},l.a.createElement(la.a,{value:""},"< Select method >"),l.a.createElement(la.a,{value:ia.TREZOR},"Trezor"),l.a.createElement(la.a,{value:ia.LEDGER},"Ledger"),l.a.createElement(la.a,{value:ia.HERMIT},"Hermit"),l.a.createElement(la.a,{value:"xpub"},"Derive from extended public key"),l.a.createElement(la.a,{value:"text"},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.extendedPublicKeyImporters,n=e.extendedPublicKeyImporter,r=e.network,o=e.addressType,i=e.defaultBIP32Path;return n.method===ia.TREZOR||n.method===ia.LEDGER?l.a.createElement(fo,{extendedPublicKeyImporter:n,validateAndSetExtendedPublicKey:a.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,addressType:o,defaultBIP32Path:i,network:r}):n.method===ia.HERMIT?l.a.createElement(ho,{extendedPublicKeyImporter:n,validateAndSetExtendedPublicKey:a.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,resetBIP32Path:a.resetBIP32Path,reset:a.reset}):"xpub"===n.method?l.a.createElement(po,{extendedPublicKeyImporter:n,extendedPublicKeyImporters:t,validateAndSetExtendedPublicKey:a.validateAndSetExtendedPublicKey,network:r,validateAndSetBIP32Path:a.validateAndSetBIP32Path}):"text"===n.method?l.a.createElement(mo,{extendedPublicKeyImporter:n,validateAndSetExtendedPublicKey:a.validateAndSetExtendedPublicKey}):null},a.handleMethodChange=function(e){var t=a.props,n=t.number,r=t.setMethod,o=t.setExtendedPublicKey;r(n,e.target.value),o(n,"")},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.finalize=function(){var e=a.props,t=e.number;(0,e.setFinalized)(t,!0)},a.reset=function(e){var t=a.props,n=t.number,r=t.setExtendedPublicKey,o=t.setFinalized;r(n,""),o(n,!1),e&&a.resetBIP32Path()},a.renderBIP32Path=function(){var e=a.props.extendedPublicKeyImporter;return"text"===e.method?l.a.createElement("div",{className:"mt-4"},l.a.createElement("p",null,"Make sure you ",l.a.createElement("strong",null,"record the corresponding BIP32 path."))):l.a.createElement("div",{className:"mt-4"},l.a.createElement("p",null,"The BIP32 path for this extended public key is:"),l.a.createElement("div",{className:"text-center"},l.a.createElement(Dn,{text:e.bip32Path,showIcon:!0})),l.a.createElement("p",{className:"mt-4"},"You will need this BIP32 path to sign for this key later."," ",l.a.createElement("strong",null,"Write down this BIP32 path!")))},a.validateAndSetBIP32Path=function(e,t,n,r){var o=a.props,i=o.number,s=o.setBIP32Path,c=Object(Z.validateBIP32Path)(e,r);s(i,e),c?n(c):(n(""),t())},a.resetBIP32Path=function(){var e=a.props,t=e.number;(0,e.resetBIP32Path)(t)},a.renderExtendedPublicKey=function(){var e=a.props,t=e.extendedPublicKeyImporter,n=e.network,r=e.classes,o=a.state.conversionMessage,i=t.method===ia.HERMIT&&n===Z.NETWORKS.TESTNET?"this should not be an issue as hermit signing is not affected by the conversion.":"this may indicate an invalid network setting, if so correct setting, remove key and try again.";return l.a.createElement("div",null,l.a.createElement("p",null,"The following extended public key was imported:"),l.a.createElement("div",{className:r.xpub},l.a.createElement(Dn,{text:t.extendedPublicKey,showIcon:!0})),a.renderBIP32Path(),""!==o&&l.a.createElement(x.a,{mb:2},l.a.createElement(ie.a,null,o,", ",i," ")),l.a.createElement(_.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){a.reset(t.method===ia.HERMIT)}},"Remove Extended Public Key"))},a.validateAndSetExtendedPublicKey=function(e,t,n){var r=a.props,o=r.number,i=r.network,s=r.extendedPublicKeyImporters,c=r.setExtendedPublicKey,l=Object(Z.validateExtendedPublicKey)(e,i),u=e;if(""!==l)try{u=Object(Z.convertExtendedPublicKey)(e,"testnet"===i?"tpub":"xpub")}catch(m){return t(m.message),void c(o,e)}var d=Object(Z.validateExtendedPublicKey)(u,i);if(""!==d)return t(d),void c(o,e);if(c(o,u),u&&Object.values(s).find((function(e,t){return t!==o-1&&e.extendedPublicKey===u})))t("This extended public key has already been imported.");else{t("");var p=u===e?"":"Your extended public key has been converted from ".concat(e.slice(0,4)," to ").concat(u.slice(0,4));a.setState({conversionMessage:p}),a.finalize(),n&&n()}},a.state={disableChangeMethod:!1,conversionMessage:""},a}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props,t=e.extendedPublicKeyImporter,n=e.finalizedNetwork,a=e.network,r=t.method&&t.conflict,o="";return r&&(o=n!==a?"Warning, you can not mix xpub and tpub.  Do not proceed without resolving by either removing conflicting imported keys or returning network type to original state!":"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"),l.a.createElement(R.a,null,l.a.createElement(C.a,{title:this.title()}),l.a.createElement(N.a,null,r&&l.a.createElement(Eo,{message:o}),t.finalized?this.renderExtendedPublicKey():this.renderImport()))}}]),n}(l.a.Component);var vo={setName:eo,resetBIP32Path:no,setBIP32Path:to,setMethod:ao,setExtendedPublicKey:ro,setFinalized:oo},go=Object(uo.a)((function(){return{xpub:{lineHeight:".8rem",overflowWrap:"break-word"}}}))(bo),yo=Object(m.b)((function(e,t){return Object(q.a)(Object(q.a)(Object(q.a)({},e.settings),e.quorum),{extendedPublicKeyImporter:e.quorum.extendedPublicKeyImporters[t.number]})}),vo)(go),Po=n(1334),So=n(709),To=n(1347),Oo=n(1348),Io=n(1349),wo=Object(It.a)((function(){return{card:{height:"100%",flexDirection:"column",display:"flex"},cardContent:{textAlign:"center",paddingTop:"0px",display:"flex",flex:1}}})),xo=function(e){var t=e.addresses,n=e.client,a=e.handleRefresh,r=e.onClearConfig,o=e.onDownloadConfig,i=e.onImportAddresses,s=e.refreshing,c=e.walletActivated,u=wo();return l.a.createElement(R.a,{className:u.card},l.a.createElement(C.a,{title:"Wallet Actions"}),l.a.createElement(N.a,{className:u.cardContent},l.a.createElement(k.a,{container:!0,spacing:1,alignItems:"center",justify:"center"},l.a.createElement(k.a,{item:!0,xs:12},l.a.createElement(Po.a,{variant:"outlined"},l.a.createElement(zn.a,{title:"Force a refresh for latest wallet state and balance."},l.a.createElement(_.a,{onClick:a,disabled:!c,startIcon:s?l.a.createElement(So.a,{size:24}):l.a.createElement(To.a,null)},"Refresh")),l.a.createElement(zn.a,{title:"Download wallet configuration to local machine for backup. No security is lost with this, but access to this file provides anyone who has it information about balances."},l.a.createElement(_.a,{startIcon:l.a.createElement(Oo.a,null),onClick:o},"Download Configuration")),l.a.createElement(zn.a,{title:"Only clears the wallet config from browser sessions. Funds remain unaffected."},l.a.createElement(_.a,{startIcon:l.a.createElement(Io.a,null),onClick:function(e){e.preventDefault(),sessionStorage&&sessionStorage.removeItem("caravan_config"),r(e)}},"Clear Wallet")))),"private"===n.type&&l.a.createElement(k.a,{item:!0},l.a.createElement(aa,{addresses:t,client:n,importCallback:i})))))};xo.defaultProps={walletActivated:!1,refreshing:!1,addresses:[]};var jo=xo,ko=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleImport=function(e){var t=e.target,n=new FileReader;n.readAsText(t.files[0]),n.onload=function(e){var t=e.target.result;a.setConfigJson(t)}},a.refresh=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({refreshing:!0}),e.next=3,a.generatorRefresh();case 3:a.setState({refreshing:!1});case 4:case"end":return e.stop()}}),e)}))),a.importDetails=function(){var e=a.state.configJson,t=a.props,n=t.setTotalSigners,r=t.setRequiredSigners,o=t.setAddressType,i=t.setNetwork,s=t.setExtendedPublicKeyImporterMethod,c=t.setExtendedPublicKeyImporterExtendedPublicKey,l=t.setExtendedPublicKeyImporterBIP32Path,u=t.setExtendedPublicKeyImporterFinalized,d=t.setExtendedPublicKeyImporterName,p=t.updateWalletNameAction,m=t.setClientType,h=t.setClientUrl,f=t.setClientUsername,E=JSON.parse(e);n(E.quorum.totalSigners),r(E.quorum.requiredSigners),o(E.addressType),i(E.network),p(0,E.name),m(E.client.type),"private"===E.client.type&&(h(E.client.url),f(E.client.username)),E.extendedPublicKeys.forEach((function(e,t){var n=t+1;d(n,e.name),s(n,e.method),l(n,e.bip32Path),c(n,e.xpub),u(n,!0)}))},a.renderWalletImporter=function(){var e=a.state.configError;return a.props.configuring?l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{htmlFor:"upload-config"},l.a.createElement("input",{style:{display:"none"},id:"upload-config",name:"upload-config",accept:"application/json",onChange:a.handleImport,type:"file"}),l.a.createElement(_.a,{color:"primary",variant:"contained",component:"span",style:{marginTop:"20px"}},"Import Wallet Configuration")),l.a.createElement(ie.a,{error:!0},e)):""},a.renderSettings=function(){var e=null;return a.props.configuring&&(e=l.a.createElement(k.a,{item:!0,md:4},l.a.createElement(x.a,null,l.a.createElement(en,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(an,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(Xt,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(pn,null)))),e},a.renderExtendedPublicKeyImporters=function(){for(var e=a.props,t=e.totalSigners,n=e.configuring,r=[],o=1;o<=t;o+=1)r.push(l.a.createElement(x.a,{key:o,mt:1===o?0:2,display:n?"block":"none"},l.a.createElement(yo,{key:o,number:o})));return r},a.downloadWalletDetails=function(e){e.preventDefault(),$(a.walletDetailsText(),a.walletDetailsFilename())},a.walletDetailsText=function(){var e=a.props,t=e.addressType,n=e.network,r=e.totalSigners,o=e.requiredSigners,i=e.walletName;return'{\n  "name": "'.concat(i,'",\n  "addressType": "').concat(t,'",\n  "network": "').concat(n,'",\n  "client":  ').concat(a.clientDetails(),',\n  "quorum": {\n    "requiredSigners": ').concat(o,',\n    "totalSigners": ').concat(r,'\n  },\n  "extendedPublicKeys": [\n').concat(a.extendedPublicKeyImporterBIP32Paths(),"\n  ]\n}\n")},a.clientDetails=function(){var e=a.props.client;return"private"===e.type?'{\n    "type": "private",\n    "url": "'.concat(e.url,'",\n    "username": "').concat(e.username,'"\n  }'):'{\n    "type": "public"\n  }'},a.extendedPublicKeyImporterBIP32Paths=function(){for(var e=a.props.totalSigners,t=[],n=1;n<=e;n+=1)t.push("".concat(a.extendedPublicKeyImporterBIP32Path(n)).concat(n<e?",":""));return t.join("\n")},a.extendedPublicKeyImporterBIP32Path=function(e){var t=a.props.extendedPublicKeyImporters[e],n="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path;return'    {\n      "name": "'.concat(t.name,'",\n      "bip32Path": "').concat(n,'",\n      "xpub": "').concat(t.extendedPublicKey,'",\n      "method": "').concat(t.method,'"\n    }')},a.walletDetailsFilename=function(){var e=a.props,t=e.totalSigners,n=e.requiredSigners,r=e.addressType,o=e.walletName;return"bitcoin-".concat(n,"-of-").concat(t,"-").concat(r,"-").concat(o,".json")},a.totalBalance=function(){var e=a.props,t=e.deposits,n=e.change;return Object.keys(t.nodes).length?Object(Z.satoshisToBitcoins)(t.balanceSats.plus(n.balanceSats)).toFixed():""},a.clearConfig=function(e){var t=a.props,n=t.setExtendedPublicKeyImporterVisible,r=t.resetWallet;e.preventDefault(),r(),n(!0),a.setState({generating:!1})},a.render=function(){var e=a.props,t=e.client,n=e.configuring,r=e.confirmedBalance,o=e.walletName,i=e.setName,s=e.deposits,c=e.change,u=e.network,d=e.pendingBalance,p=e.nodesLoaded,m=e.frozen,h=e.unknownAddresses,f=a.state,E=f.refreshing,b=f.generating,v=c.fetchUTXOsErrors+s.fetchUTXOsErrors>0?"Wallet loaded with errors":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,{mt:3},l.a.createElement(k.a,{container:!0,spacing:3},l.a.createElement(k.a,{item:!0,xs:10,md:6},l.a.createElement(Bt,{editable:!Object.keys(s.nodes).length||!Object.keys(c.nodes).length,walletName:o,setName:i,balance:+Object(Z.satoshisToBitcoins)(r).toFixed(),pendingBalance:+Object(Z.satoshisToBitcoins)(d).toFixed(),network:u})),l.a.createElement(k.a,{item:!0,xs:10,md:6},(p||m)&&l.a.createElement(jo,{addresses:h,refreshing:E,walletActivated:p,handleRefresh:function(){return a.refresh()},onClearConfig:function(e){a.clearConfig(e)},onDownloadConfig:function(e){return a.downloadWalletDetails(e)},client:t,onImportAddresses:function(e,t){return a.afterImportAddresses(t)}})))),v.length?l.a.createElement(ie.a,{style:{float:"right",padding:"11px"},error:!0},v):"",l.a.createElement(x.a,null,l.a.createElement(k.a,{container:!0,spacing:3},l.a.createElement(k.a,{item:!0,xs:12},a.renderWalletImporter()),l.a.createElement(k.a,{item:!0,md:n?8:12},a.renderExtendedPublicKeyImporters(),l.a.createElement(x.a,{mt:2},l.a.createElement(lo,{generating:b,setGenerating:function(e){return a.setGenerating(e)},downloadWalletDetails:a.downloadWalletDetails,refreshNodes:function(e){return a.generatorRefresh=e}}))),a.renderSettings())))},a.state={configError:"",configJson:"",refreshing:!1,generating:!1},a}return Object(v.a)(n,null,[{key:"validateProperties",value:function(e,t,n){for(var a=0;a<t.length;a+=1){var r=t[a],o=""!==n?e[n]:e;if(!Object.prototype.hasOwnProperty.call(o,r))return'Configuration missing property "'.concat(""!==n?"".concat(n,"."):"").concat(r,'"')}return""}},{key:"validateConfig",value:function(e){var t=n.validateProperties(e,["name","addressType","network","client","quorum","extendedPublicKeys"],"");if(""!==t)return t;var a="public"===e.client.type?["type"]:["type","url","username"],r=n.validateProperties(e,a,"client");if(""!==r)return r;var o=n.validateProperties(e,["requiredSigners","totalSigners"],"quorum");return""!==o?o:n.validateExtendedPublicKeys(e.extendedPublicKeys,e.network)}},{key:"validateExtendedPublicKeys",value:function(e,t){for(var n={name:function(e,t){return"string"===typeof e?"":"Extended public key ".concat(t," name must be a string")},bip32Path:function(t,n){if("text"===e[n-1].method)return"";var a=Object(Z.validateBIP32Path)(t);return""!==a?"Extended public key ".concat(n," error: ").concat(a):""},xpub:function(e){return Object(Z.validateExtendedPublicKey)(e,t)},method:function(e,t){return~["trezor","ledger","hermit","xpub","text"].indexOf(e)?"":"Invalid method for extended public key ".concat(t)}},a=Object.keys(n),r=0;r<e.length;r+=1)for(var o=0;o<a.length;o+=1){var i=a[o],s=e[r][i],c=n[i](s,r+1);if(""!==c)return c}return""}}]),Object(v.a)(n,[{key:"componentDidMount",value:function(){if(sessionStorage){var e=sessionStorage.getItem("caravan_config");e&&this.setConfigJson(e)}}},{key:"setConfigJson",value:function(e){var t,a=this;try{var r=JSON.parse(e);t=n.validateConfig(r)}catch(o){t="Invlaid JSON"}sessionStorage&&sessionStorage.setItem("caravan_config",e),this.setState({configJson:e,configError:t},(function(){""===t&&a.importDetails()}))}},{key:"setGenerating",value:function(e){var t=this.state.generating,n=e;void 0===e&&(n=!t),this.setState({generating:n})}},{key:"afterImportAddresses",value:function(){var e=Object(oe.a)(re.a.mark((function e(t,n){var a,r,o,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return");case 2:return a=this.props,r=a.unknownSlices,o=a.fetchSliceData,i=r.reduce((function(e,n){return t.indexOf(n.multisig.address)>-1&&e.push(n),n}),[]),e.next=6,o(i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(l.a.Component);ko.defaultProps={pendingBalance:0};var Ro=Object(q.a)(Object(q.a)({fetchSliceData:Ot,resetWallet:Tt,setName:Pt,setTotalSigners:Ht,setRequiredSigners:Wt,setAddressType:Gt,setNetwork:Ft,setExtendedPublicKeyImporterMethod:ao,setExtendedPublicKeyImporterExtendedPublicKey:ro,setExtendedPublicKeyImporterBIP32Path:to,setExtendedPublicKeyImporterName:eo,setExtendedPublicKeyImporterFinalized:oo,setExtendedPublicKeyImporterVisible:io,updateWalletNameAction:Pt},on({setClientType:"SET_CLIENT_TYPE",setClientUrl:"SET_CLIENT_URL",setClientUsername:"SET_CLIENT_USERNAME",setClientPassword:"SET_CLIENT_PASSWORD"})),{},{updateDepositNode:gt,updateChangeNode:yt}),Co=Object(m.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},e.settings),e.quorum),{walletName:e.wallet.common.walletName,nodesLoaded:e.wallet.common.nodesLoaded,walletMode:e.wallet.common.walletMode}),{},{confirmedBalance:a.getConfirmedBalance(e),pendingBalance:a.getPendingBalance(e),unknownAddresses:Ze(e),unknownSlices:Xe(e)},e.wallet),{},{client:e.client})}),Ro)(ko);var No=cn({setPublicKeyImporterName:"SET_PUBLIC_KEY_IMPORTER_NAME",resetPublicKeyImporterBIP32Path:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterBIP32Path:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterMethod:"SET_PUBLIC_KEY_IMPORTER_METHOD",setPublicKeyImporterPublicKey:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",setPublicKeyImporterFinalized:"SET_PUBLIC_KEY_IMPORTER_FINALIZED",movePublicKeyImporterUp:"MOVE_PUBLIC_KEY_IMPORTER_UP",movePublicKeyImporterDown:"MOVE_PUBLIC_KEY_IMPORTER_DOWN"}),_o=No.setPublicKeyImporterName,Ao=No.setPublicKeyImporterBIP32Path,Ko=No.resetPublicKeyImporterBIP32Path,Mo=No.setPublicKeyImporterMethod,Bo=No.setPublicKeyImporterPublicKey,Do=No.setPublicKeyImporterFinalized,Uo=No.movePublicKeyImporterUp,Lo=No.movePublicKeyImporterDown,zo=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).isInConflict=function(){var t=e.props.publicKeyImporters;return Object.values(t).some((function(e){return e.conflict}))},e.publicKeyCount=function(){var t=e.props.publicKeyImporters;return Object.values(t).filter((function(e){return e.finalized})).length},e.publicKeysAreCanonicallySorted=function(){var t=e.props.publicKeyImporters,n=Object.values(t).map((function(e){return e.publicKey})).filter((function(e){return""!==e})),a=Object.values(t).map((function(e){return e.publicKey})).filter((function(e){return""!==e})).sort();return n.filter((function(e,t){return e===a[t]})).length===n.length},e.canonicallySortPublicKeys=function(){(0,e.props.sortPublicKeyImporters)()},e.generateMultisig=function(){for(var t=e.props,n=t.network,a=t.publicKeyImporters,r=t.totalSigners,o=t.requiredSigners,i=t.addressType,s=t.setMultisigAddress,c=[],l=1;l<=r;l+=1)c.push(a[l].publicKey);var u=Z.generateMultisigFromPublicKeys.apply(void 0,[n,i,o].concat(c));return s(u.address),u},e.downloadAddressDetails=function(t){t.preventDefault();var n=e.generateMultisig();$(e.addressDetailsText(n),e.addressDetailsFilename(n))},e.addressDetailsFilename=function(t){var n=e.props,a=n.totalSigners,r=n.requiredSigners,o=n.addressType;return"bitcoin-".concat(r,"-of-").concat(a,"-").concat(o,"-").concat(t.address,".txt")},e.addressDetailsText=function(t){var n=e.props,a=n.addressType,r=n.network,o=n.totalSigners,i=n.requiredSigners,s=Object(Z.multisigRedeemScript)(t),c=Object(Z.multisigWitnessScript)(t),l=s?"Redeem Script: ".concat(Object(Z.scriptToHex)(s)):"",u=c?"Witness Script: ".concat(Object(Z.scriptToHex)(c)):"",d=s&&c?"\n\n":"";return"Address: ".concat(t.address,"\n\nType: ").concat(a,"\n\nNetwork: ").concat(r,"\n\nQuorum: ").concat(i,"-of-").concat(o,"\n\nBIP32 Paths:\n").concat(e.publicKeyImporterBIP32Paths(),"\n\n").concat(l).concat(d).concat(u,"\n")},e.publicKeyImporterBIP32Paths=function(){for(var t=e.props.totalSigners,n=[],a=1;a<=t;a+=1)n.push(e.publicKeyImporterBIP32Path(a));return n.join("\n")},e.publicKeyImporterBIP32Path=function(t){var n=e.props.publicKeyImporters[t],a="text"===n.method?"Unknown (make sure you have written this down previously!)":n.bip32Path;return"  * ".concat(n.name,": ").concat(a,": ").concat(n.publicKey)},e.title=function(){var t=e.props,n=t.totalSigners,a=t.requiredSigners,r=t.addressType;return l.a.createElement(k.a,{container:!0,justify:"space-between"},l.a.createElement(k.a,{item:!0},a,"-of-",n," Multisig ",r," "),l.a.createElement(k.a,{item:!0},l.a.createElement("small",null,"Public Keys: ".concat(e.publicKeyCount(),"/").concat(n))))},e}return Object(v.a)(n,[{key:"body",value:function(){var e=this.props.totalSigners;if(this.publicKeyCount()===e){var t=this.generateMultisig(),n=this.publicKeysAreCanonicallySorted();return l.a.createElement("div",null,this.isInConflict()&&l.a.createElement(Eo,null),!n&&l.a.createElement(k.a,{container:!0,justify:"space-between"},l.a.createElement(k.a,{item:!0,md:8},l.a.createElement(ie.a,{error:!0},"WARNING: These public keys are not in the standard"," ",Q("https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki","BIP67 order"),".")),l.a.createElement(k.a,{item:!0,md:4},l.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.canonicallySortPublicKeys},"Sort Public Keys"))),l.a.createElement(x.a,{mt:2},l.a.createElement(Jn,{multisig:t})),l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.downloadAddressDetails},"Download Address Details")))}return l.a.createElement("p",null,"Once you have imported all ".concat(e," public keys, "),"your address details will be displayed here.")}},{key:"render",value:function(){return l.a.createElement(R.a,null,l.a.createElement(C.a,{title:this.title()}),l.a.createElement(N.a,null,this.body()))}}]),n}(l.a.Component);var Fo={sortPublicKeyImporters:function(){return{type:"SORT_PUBLIC_KEY_IMPORTERS"}},setMultisigAddress:function(e){return{type:"UPDATE_MULTISIG_ADDRESS",value:e}}},Ho=Object(m.b)((function(e){return Object(q.a)(Object(q.a)({},e.settings),e.address)}),Fo)(zo),Wo=n(1350),Go=n(1351),qo=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.state,t=e.error,n=e.publicKey;return l.a.createElement(x.a,{mt:2},l.a.createElement(kt.a,{fullWidth:!0,name:"publicKey",label:"Public Key",value:n,onChange:a.handleChange,error:a.hasError(),helperText:t}),l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===n||a.hasError()},"Add Public Key")))},a.import=function(){(0,a.props.validateAndSetPublicKey)(a.state.publicKey,a.setError)},a.hasError=function(){return""!==a.state.error},a.setError=function(e){a.setState({error:e})},a.handleChange=function(e){var t=e.target.value,n=Object(Z.validatePublicKey)(t);a.setState({publicKey:t,error:n})},a.state={error:"",publicKey:""},a}return n}(l.a.Component),Yo=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.setBIP32PathToDefault()},a.render=function(){var e=a.props.publicKeyImporter,t=a.state,n=t.extendedPublicKey,r=t.extendedPublicKeyError,o=t.bip32PathError,i=t.conversionMessage;return l.a.createElement("div",null,l.a.createElement(x.a,{mt:2},l.a.createElement(kt.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:n,onChange:a.handleExtendedPublicKeyChange,error:a.hasExtendedPublicKeyError(),helperText:r})),""!==i&&l.a.createElement(x.a,{mb:2},l.a.createElement(ie.a,null,i,", this may indicate an invalid network setting, if so correct setting, remove key and try again.")),l.a.createElement(x.a,{mt:2},l.a.createElement(k.a,{container:!0},l.a.createElement(k.a,{item:!0,md:10},l.a.createElement(kt.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:e.bip32Path,onChange:a.handleBIP32PathChange,error:a.hasBIP32PathError(),helperText:o}),l.a.createElement(ie.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),l.a.createElement(k.a,{item:!0,md:2},!a.bip32PathIsDefault()&&l.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path},"Default"))),l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:""===n||a.hasError()},"Import Public Key"))))},a.import=function(){var e=a.props,t=e.network,n=e.publicKeyImporter,r=e.validateAndSetPublicKey,o=a.state.extendedPublicKey;r(Object(Z.deriveChildPublicKey)(o,n.bip32Path,t),(function(e){return a.setState({bip32PathError:e})}))},a.setBIP32PathToDefault=function(){(0,a.props.validateAndSetBIP32Path)("m/0",(function(){}),(function(){}))},a.hasBIP32PathError=function(){return""!==a.state.bip32PathError},a.hasExtendedPublicKeyError=function(){return""!==a.state.extendedPublicKeyError},a.hasError=function(){return a.hasBIP32PathError()||a.hasExtendedPublicKeyError()},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,(function(){}),a.setBIP32PathError,{mode:"unhardened"})},a.bip32PathIsDefault=function(){return"m/0"===a.props.publicKeyImporter.bip32Path},a.resetBIP32Path=function(){a.setBIP32PathToDefault(),a.setBIP32PathError("")},a.handleExtendedPublicKeyChange=function(e){var t=a.props.network,n=e.target.value,r=n;if(""!==Object(Z.validateExtendedPublicKeyForNetwork)(n,t))try{r=Object(Z.convertExtendedPublicKey)(n,"testnet"===t?"tpub":"xpub")}catch(s){return void a.setState({extendedPublicKey:n,extendedPublicKeyError:s.message,conversionMessage:""})}var o=Object(Z.validateExtendedPublicKey)(r,t);if(""===o){var i=r===n?"":"Your extended public key has been converted from ".concat(n.slice(0,4)," to ").concat(r.slice(0,4));a.setState({extendedPublicKey:r,extendedPublicKeyError:"",conversionMessage:i})}else a.setState({extendedPublicKey:n,extendedPublicKeyError:o,conversionMessage:""})},a.state={extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:"",conversionMessage:""},a}return n}(l.a.Component),Vo=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){(0,a.props.resetBIP32Path)()},a.interaction=function(){var e=a.props,t=e.network,n=e.publicKeyImporter;return Object(ia.ExportPublicKey)({keystore:ia.HERMIT,network:t,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.disableChangeMethod,t=a.state.publicKeyError;return l.a.createElement(nr.a,null,l.a.createElement(Sa,{startText:"Import Public Key",interaction:a.interaction(),onStart:e,onSuccess:a.import,onClear:a.onClear}),l.a.createElement(ie.a,{error:!0},t))},a.setError=function(e){a.setState({publicKeyError:e})},a.import=function(e){var t=a.props,n=t.validateAndSetBIP32Path,r=t.validateAndSetPublicKey;(0,t.enableChangeMethod)();var o=e.pubkey;n(e.bip32Path,(function(){r(o,a.setError)}),a.setError)},a.onClear=function(){var e=a.props,t=e.reset,n=e.enableChangeMethod;t(!0),a.setError(""),n()},a.state={publicKeyError:""},a}return n}(l.a.Component),Xo=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.resetBIP32Path()},a.interaction=function(){var e=a.props,t=e.network,n=e.publicKeyImporter;return Object(ia.ExportPublicKey)({network:t,keystore:n.method,bip32Path:n.bip32Path})},a.render=function(){var e=a.props.publicKeyImporter,t=a.state,n=t.status,r=t.publicKeyError,o=a.interaction();return n===ia.UNSUPPORTED?l.a.createElement(ie.a,{error:!0},o.messageTextFor({status:n})):l.a.createElement(x.a,{mt:2},l.a.createElement(k.a,{container:!0},l.a.createElement(k.a,{item:!0,md:6},l.a.createElement(kt.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:a.handleBIP32PathChange,disabled:n!==ia.PENDING,error:a.hasBIP32PathError(),helperText:a.bip32PathError()})),l.a.createElement(k.a,{item:!0,md:6},!a.bip32PathIsDefault()&&l.a.createElement(_.a,{type:"button",variant:"contained",size:"small",onClick:a.resetBIP32Path,disabled:n!==ia.PENDING},"Default"))),l.a.createElement(ie.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:a.import,disabled:a.hasBIP32PathError()||n===ia.ACTIVE},"Import Public Key")),l.a.createElement(Ca,{messages:o.messagesFor({state:n}),excludeCodes:["bip32"]}),l.a.createElement(ie.a,{error:!0},r))},a.import=Object(oe.a)(re.a.mark((function e(){var t,n,r,o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.validateAndSetPublicKey,r=t.enableChangeMethod,(0,t.disableChangeMethod)(),a.setState({publicKeyError:"",status:ia.ACTIVE}),e.prev=3,e.next=6,a.interaction().run();case 6:o=e.sent,n(o,(function(e){a.setState({publicKeyError:e,status:ia.PENDING})})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),a.setState({publicKeyError:e.t0.message,status:ia.PENDING});case 14:r();case 15:case"end":return e.stop()}}),e,null,[[3,10]])}))),a.hasBIP32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.status;return""!==t||a.interaction().hasMessagesFor({state:n,level:ia.ERROR,code:"bip32"})},a.bip32PathError=function(){var e=a.state,t=e.bip32PathError,n=e.status;return""!==t?t:a.interaction().messageTextFor({state:n,level:ia.ERROR,code:"bip32"})},a.setBIP32PathError=function(e){a.setState({bip32PathError:e})},a.handleBIP32PathChange=function(e){(0,a.props.validateAndSetBIP32Path)(e.target.value,(function(){}),a.setBIP32PathError)},a.bip32PathIsDefault=function(){var e=a.props,t=e.publicKeyImporter,n=e.defaultBIP32Path;return t.bip32Path===n},a.resetBIP32Path=function(){var e=a.props.resetBIP32Path;a.setBIP32PathError(""),e()},a.state={publicKeyError:"",bip32PathError:"",status:a.interaction().isSupported()?ia.PENDING:ia.UNSUPPORTED},a}return n}(l.a.Component),Zo=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).title=function(){var e=a.props,t=e.number,n=e.totalSigners,r=e.publicKeyImporter,o=e.setName;return l.a.createElement(k.a,{container:!0,justify:"space-between"},l.a.createElement(k.a,{item:!0},l.a.createElement(At,{number:t,name:r.name,setName:o})),l.a.createElement(k.a,{item:!0},l.a.createElement(k.a,{container:!0,justify:"flex-end"},l.a.createElement(_.a,{type:"button",variant:"contained",onClick:a.moveUp,disabled:1===t},l.a.createElement(Wo.a,null)),l.a.createElement("span",null,"\xa0"),l.a.createElement(_.a,{type:"button",variant:"contained",onClick:a.moveDown,disabled:t===n},l.a.createElement(Go.a,null)))))},a.renderImport=function(){var e=a.props,t=e.publicKeyImporter,n=e.number,r=a.state.disableChangeMethod,o="public-key-".concat(n,"-importer-select-label");return l.a.createElement("div",null,l.a.createElement(Dt.a,{fullWidth:!0},l.a.createElement(sa.a,{id:o},"Select Method"),l.a.createElement(ca.a,{labelId:o,id:"public-key-".concat(n,"-importer-select"),disabled:r,value:t.method,onChange:a.handleMethodChange},l.a.createElement(la.a,{value:""},"< Select method >"),l.a.createElement(la.a,{value:ia.TREZOR},"Trezor"),l.a.createElement(la.a,{value:ia.LEDGER},"Ledger"),l.a.createElement(la.a,{value:ia.HERMIT},"Hermit"),l.a.createElement(la.a,{value:"xpub"},"Derive from extended public key"),l.a.createElement(la.a,{value:"text"},"Enter as text"))),a.renderImportByMethod())},a.renderImportByMethod=function(){var e=a.props,t=e.publicKeyImporter,n=e.network,r=e.addressType,o=e.defaultBIP32Path;return t.method===ia.TREZOR||t.method===ia.LEDGER?l.a.createElement(Xo,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,addressType:r,defaultBIP32Path:o,network:n}):t.method===ia.HERMIT?l.a.createElement(Vo,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,reset:a.reset}):"xpub"===t.method?l.a.createElement(Yo,{network:n,publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey,validateAndSetBIP32Path:a.validateAndSetBIP32Path}):"text"===t.method?l.a.createElement(qo,{publicKeyImporter:t,validateAndSetPublicKey:a.validateAndSetPublicKey}):null},a.handleMethodChange=function(e){var t=a.props,n=t.number,r=t.setMethod,o=t.setPublicKey;r(n,e.target.value),o(n,"")},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.finalize=function(){var e=a.props,t=e.number;(0,e.setFinalized)(t,!0)},a.reset=function(e){var t=a.props,n=t.number,r=t.setPublicKey,o=t.setFinalized;r(n,""),o(n,!1),e&&a.resetBIP32Path()},a.moveUp=function(e){var t=a.props,n=t.moveUp,r=t.number;e.preventDefault(),n(r)},a.moveDown=function(e){var t=a.props,n=t.moveDown,r=t.number;e.preventDefault(),n(r)},a.renderBIP32Path=function(){var e=a.props.publicKeyImporter;return"text"!==e.method?l.a.createElement(x.a,{mt:4},l.a.createElement("p",null,"The BIP32 path for this public key is:"),l.a.createElement(k.a,{container:!0,justify:"center"},l.a.createElement(Dn,{text:e.bip32Path,code:!0})),l.a.createElement(x.a,{mt:4},l.a.createElement("p",null,"You will need this BIP32 path to sign for this key later."," ",l.a.createElement("strong",null,"Write down this BIP32 path!")))):null},a.validateAndSetBIP32Path=function(e,t,n,r){var o=a.props,i=o.number,s=o.setBIP32Path,c=Object(Z.validateBIP32Path)(e,r);s(i,e),c?n(c):(n(""),t())},a.resetBIP32Path=function(){var e=a.props,t=e.number;(0,e.resetBIP32Path)(t)},a.renderPublicKey=function(){var e=a.props.publicKeyImporter;return l.a.createElement("div",null,l.a.createElement("p",null,"The following public key was imported:"),l.a.createElement(k.a,{container:!0,justify:"center"},l.a.createElement(Dn,{text:e.publicKey,showIcon:!0,code:!0})),a.renderBIP32Path(),l.a.createElement(x.a,{mt:2},l.a.createElement(_.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){a.reset(e.method===ia.HERMIT)}},"Remove Public Key")))},a.validateAndSetPublicKey=function(e,t,n){var r=a.props,o=r.number,i=r.publicKeyImporters,s=r.setPublicKey,c=Object(Z.validatePublicKey)(e);s(o,e),c?t&&t(c):e&&Object.values(i).find((function(t,n){return n!==o-1&&t.publicKey===e}))?t&&t("This public key has already been imported."):(t&&t(""),a.finalize(),n&&n())},a.state={disableChangeMethod:!1},a}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props.publicKeyImporter;return l.a.createElement(R.a,null,l.a.createElement(C.a,{title:this.title()}),l.a.createElement(N.a,null,e.method&&"text"!==e.method&&e.conflict&&l.a.createElement(Eo,{message:"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"}),e.finalized?this.renderPublicKey():this.renderImport()))}}]),n}(l.a.Component);var Jo={setName:_o,setBIP32Path:Ao,resetBIP32Path:Ko,setMethod:Mo,setPublicKey:Bo,setFinalized:Do,moveUp:Uo,moveDown:Lo},Qo=Object(m.b)((function(e,t){return Object(q.a)(Object(q.a)(Object(q.a)({},e.settings),e.address),{publicKeyImporter:e.address.publicKeyImporters[t.number]})}),Jo)(Zo),$o=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props,n=t.address,a=t.client;return l.a.createElement(x.a,{mt:2},l.a.createElement(k.a,{container:!0,spacing:3},l.a.createElement(k.a,{item:!0,xs:12},l.a.createElement("h1",null,"Address Generator")),l.a.createElement(k.a,{item:!0,md:8},e.renderPublicKeyImporters(),l.a.createElement(x.a,{mt:2},l.a.createElement(Ho,null))),l.a.createElement(k.a,{item:!0,md:4},l.a.createElement(x.a,null,l.a.createElement(en,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(an,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(Xt,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(pn,{publicNotes:l.a.createElement("span",null,'If you plan to use this address with your own bitcoind node you can import the address created here by switching for "Public" to "Private". Otherwise no action is needed here.'),privateNotes:l.a.createElement("div",null,l.a.createElement(aa,{addresses:[n],client:a}))})))))},e.renderPublicKeyImporters=function(){for(var t=e.props.totalSigners,n=[],a=1;a<=t;a+=1)n.push(l.a.createElement(x.a,{key:a,mt:1===a?0:2},l.a.createElement(Qo,{number:a})));return n},e}return n}(l.a.Component);$o.defaultProps={address:""};var ei=Object(m.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)({},{totalSigners:e.settings.totalSigners}),e.address),{},{client:e.client})}))($o),ti=n(1355),ni=n(1356),ai="START_TEST_SUITE_RUN",ri="SET_CURRENT_TEST_RUN";function oi(){return{type:ai}}function ii(e){return{type:ri,value:e}}var si="SET_KEYSTORE",ci="SET_KEYSTORE_NOTE",li="SET_KEYSTORE_STATUS";function ui(e,t){return{type:si,keystoreType:e,version:t}}function di(e){return{type:ci,value:e}}function pi(e){return{type:li,value:e}}var mi="START_TEST_RUN",hi="END_TEST_RUN",fi="RESET_TEST_RUN",Ei="SET_TEST_RUN_NOTE";function bi(e){return{type:mi,testRunIndex:e}}function vi(e,t,n){return{type:hi,testRunIndex:e,status:t,message:n}}function gi(e){return{type:fi,testRunIndex:e}}function yi(e,t){return{type:Ei,testRunIndex:e,note:t}}var Pi=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){var n=e.props,a=n.setNote,r=n.mode,o=n.testRunIndex,i=t.target.value;"testRun"===r?a(o,i):a(i)},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props.note;return l.a.createElement(kt.a,{name:"notes",label:"Notes",value:e,onChange:this.handleChange,multiline:!0,fullWidth:!0,rows:3})}}]),n}(l.a.Component);Pi.defaultProps={testRunIndex:0};var Si={setNote:di},Ti={setNote:yi},Oi=Object(m.b)((function(e){return{note:e.keystore.note,mode:"keystore"}}),Si)(Pi),Ii=Object(m.b)((function(e){return{mode:"testRun",testRunIndex:e.testSuiteRun.currentTestRunIndex,note:e.testSuiteRun.testRuns[e.testSuiteRun.currentTestRunIndex].note}}),Ti)(Pi),wi=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).detectVersion=Object(oe.a)(re.a.mark((function t(){var n,a,r,o,i,s;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,a=n.type,r=n.setKeystore,o=n.setKeystoreStatus,i=n.setErrorNotification,o(ia.ACTIVE),t.prev=2,t.next=5,e.interaction().run();case 5:(s=t.sent)&&r(a,s.spec),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0),i(t.t0.message);case 13:o(ia.PENDING);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.interaction=function(){var t=e.props.type;return Object(ia.GetMetadata)({keystore:t})},e.handleTypeChange=function(t){var n=e.props,a=n.version;(0,n.setKeystore)(t.target.value,a)},e.handleVersionChange=function(t){var n=e.props,a=n.type;(0,n.setKeystore)(a,t.target.value)},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.status,a=e.version;return l.a.createElement(x.a,null,l.a.createElement(k.a,{container:!0,spacing:2,justify:"center"},l.a.createElement(k.a,{item:!0,md:4},l.a.createElement(Dt.a,{fullWidth:!0},l.a.createElement(sa.a,{id:"keystore-select-label"},"Type"),l.a.createElement(ca.a,{labelId:"keystore-select-label",id:"keystore-select",value:t,onChange:this.handleTypeChange},l.a.createElement(la.a,{value:""},"< Select type >"),l.a.createElement(la.a,{value:ia.TREZOR},"Trezor"),l.a.createElement(la.a,{value:ia.LEDGER},"Ledger"),l.a.createElement(la.a,{value:ia.HERMIT},"Hermit")))),l.a.createElement(k.a,{item:!0,md:6},l.a.createElement(kt.a,{name:"version",fullWidth:!0,label:"Version",value:a,disabled:""===t,onChange:this.handleVersionChange})),l.a.createElement(k.a,{item:!0,md:2},l.a.createElement(_.a,{disabled:n===ia.ACTIVE||""===t||t===ia.HERMIT,onClick:this.detectVersion},n===ia.ACTIVE?"Detecting...":"Detect"))),t&&t!==ia.HERMIT&&l.a.createElement(Ca,{messages:this.interaction().messagesFor({state:n})}),l.a.createElement(Oi,null))}}]),n}(l.a.Component),xi=Object(q.a)(Object(q.a)({},i),{},{setErrorNotification:ht}),ji=Object(m.b)((function(e){return Object(q.a)({},e.keystore)}),xi)(wi),ki=n(268),Ri=n.n(ki),Ci=n(827),Ni=n.n(Ci),_i=n(1337),Ai=n(1352),Ki=n(1353),Mi=n(1354),Bi=n(430),Di=function(){function e(t){Object(b.a)(this,e),this.params=t||{}}return Object(v.a)(e,[{key:"postprocess",value:function(e){return e}},{key:"interaction",value:function(){throw Error("Define the `interaction` method in your subclass of `Test`.")}},{key:"matches",value:function(e,t){return e===t}}]),Object(v.a)(e,[{key:"diff",value:function(e,t){if("string"===typeof e&&"string"===typeof t)return Object(Bi.diffChars)(e,t);if("object"===typeof e&&"object"===typeof t){if(void 0!==e.length&&void 0!==t.length)return Object(Bi.diffArrays)(e,t);if(void 0===e.length&&void 0===t.length)return Object(Bi.diffJSON)(e,t)}return null}},{key:"supports",value:function(){return!0}},{key:"name",value:function(){return this.params.name}},{key:"description",value:function(){return this.params.description}},{key:"expected",value:function(){return this.params.expected}},{key:"actual",value:function(){var e=Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.postprocess(this.interaction().run()));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.actual();case 3:return t=e.sent,e.abrupt("return",this.resolve(t));case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{status:"error",message:e.t0.message});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"resolve",value:function(e){var t=this.expected();return this.matches(t,e)?{status:"success"}:{status:"failure",expected:t,actual:e,diff:this.diff(t,e)}}}]),e}();Di.SUCCESS="success",Di.FAILURE="failure",Di.ERROR="error";var Ui=Di,Li=(n(1280),function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props,n=t.testSuiteRun,a=t.keystore,r=Ni.a.getParser(window.navigator.userAgent);return l.a.createElement(k.a,{container:!0,direction:"column",spacing:3},l.a.createElement(k.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Summary"}),l.a.createElement(N.a,null,l.a.createElement("dl",null,l.a.createElement("dt",null,"OS:"),l.a.createElement("dd",null,r.getOSName()," ",r.getOSVersion()),l.a.createElement("dt",null,"Browser:"),l.a.createElement("dd",null,r.getBrowserName()," ",r.getBrowserVersion()),l.a.createElement("dt",null,"unchained-wallets:"),l.a.createElement("dd",null,"v.",ia.VERSION),a.type&&l.a.createElement(x.a,null,l.a.createElement("dt",null,"Keystore:"),l.a.createElement("dd",null,e.keystoreName(a.type)," ",a.version)),a.note&&l.a.createElement(x.a,null,l.a.createElement("dt",null,"Notes:"),l.a.createElement("dd",null,a.note)))))),l.a.createElement(k.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Tests",subheader:"".concat(n.testRuns.length," Total")}),l.a.createElement(N.a,null,e.renderTests()))))},e.renderTests=function(){var t=e.props,n=t.testSuiteRun;return""===t.keystore.type?l.a.createElement("p",null,"Choose a keystore type to generate a test suite..."):l.a.createElement(x.a,null,l.a.createElement(j.a,{variant:"h6"},l.a.createElement("span",{className:"TestSuiteRunSummary-success"},n.testRuns.filter((function(e){return e.status===Ui.SUCCESS})).length," ",l.a.createElement("small",null,"SUCCESS")),"\xa0 / \xa0",l.a.createElement("span",{className:"TestSuiteRunSummary-failure"},n.testRuns.filter((function(e){return e.status===Ui.FAILURE})).length," ",l.a.createElement("small",null,"FAIL")),"\xa0 / \xa0",l.a.createElement("span",{className:"TestSuiteRunSummary-error"},n.testRuns.filter((function(e){return e.status===Ui.ERROR})).length," ",l.a.createElement("small",null,"ERROR"))),l.a.createElement(_i.a,null),l.a.createElement(A.a,{style:{maxHeight:"200px",overflow:"auto"},dense:!0,component:"nav"},n.testRuns.map(e.renderTestRun)))},e.renderTestRun=function(t,n){var a=e.props.testSuiteRun;return l.a.createElement(K.a,{selected:a.currentTestRunIndex===n,button:!0,key:n,onClick:e.testRunChooser(n),disabled:!a.started},e.renderTestRunResult(t),l.a.createElement(B.a,null,t.test.name(),t.status!==ia.PENDING&&t.status!==ia.ACTIVE&&l.a.createElement("small",null,"\xa0 (",Ri.a.duration(t.endedAt.diff(t.startedAt)).asSeconds(),"s)")),t.note&&l.a.createElement(M.a,null,l.a.createElement(zn.a,{title:t.note},l.a.createElement(Ai.a,null))))},e.renderTestRunResult=function(e){switch(e.status){case ia.PENDING:return l.a.createElement(M.a,null,l.a.createElement(Ki.a,{className:"TestSuiteRunSummary-pending"}));case Ui.SUCCESS:return l.a.createElement(M.a,null,l.a.createElement(ra.a,{className:"TestSuiteRunSummary-success"}));case Ui.FAILURE:return l.a.createElement(M.a,null,l.a.createElement(Mi.a,{className:"TestSuiteRunSummary-failure"}));case Ui.ERROR:return l.a.createElement(M.a,null,l.a.createElement(oa.a,{className:"TestSuiteRunSummary-error"}));case ia.ACTIVE:return l.a.createElement(M.a,null,l.a.createElement(So.a,{className:"TestSuiteRunSummary-active"}));default:return null}},e.testRunChooser=function(t){var n=e.props.setCurrentTestRun;return function(){n(t)}},e.keystoreName=function(e){switch(e){case ia.TREZOR:return"Trezor";case ia.LEDGER:return"Ledger";case ia.HERMIT:return"Hermit";default:return""}},e}return n}(l.a.Component)),zi={setCurrentTestRun:ii},Fi=Object(m.b)((function(e){return{keystore:e.keystore,testSuiteRun:e.testSuiteRun}}),zi)(Li),Hi=(n(1281),function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){document.addEventListener("keydown",e.handleKeyDown)},e.componentWillUnmount=function(){document.removeEventListener("keydown",e.handleKeyDown)},e.handleKeyDown=function(t){var n=e.props,a=n.status,r=n.isLastTest,o=n.nextTest;32===t.keyCode&&"textarea"!==t.target.tagName.toLowerCase()&&(t.preventDefault(),a!==ia.ACTIVE&&(a===ia.PENDING?e.start():r||o()))},e.render=function(){var t=e.props,n=t.test,a=t.testRunIndex,r=t.status,o=t.keystore;return n?l.a.createElement(x.a,null,l.a.createElement(R.a,null,l.a.createElement(C.a,{title:n.name(),subheader:"Test ".concat(a+1)}),l.a.createElement(N.a,null,n.description(),e.renderInteractionMessages(),o.type===ia.HERMIT&&n.interaction().displayer&&r===ia.PENDING&&l.a.createElement(x.a,{align:"center"},l.a.createElement(Oa,{width:400,string:n.interaction().request()})),r===ia.PENDING&&o.type!==ia.HERMIT&&l.a.createElement(x.a,{align:"center"},l.a.createElement(_.a,{variant:"contained",color:"primary",onClick:e.start},"Start Test")),o.type===ia.HERMIT&&!e.testComplete()&&l.a.createElement(x.a,null,l.a.createElement(Sa,{onStart:e.start,onSuccess:e.resolve,onClear:e.reset,startText:"Scan Hermit Response",interaction:n.interaction()})),e.testComplete()&&e.renderResult(),l.a.createElement(Ii,null)),l.a.createElement(D.a,null,r===ia.ACTIVE&&l.a.createElement(_.a,{disabled:!0},l.a.createElement(So.a,null),"\xa0 Running test..."),e.testComplete()&&l.a.createElement(_.a,{color:"secondary",onClick:e.reset},"Reset Test")))):l.a.createElement(x.a,null,l.a.createElement("p",null,"No test selected."))},e.testComplete=function(){var t=e.props.status;return t===Ui.SUCCESS||t===Ui.ERROR||t===Ui.FAILURE},e.renderInteractionMessages=function(){var t=e.props,n=t.status,a=t.test;return n===ia.PENDING||n===ia.ACTIVE?l.a.createElement(Ca,{excludeCodes:["hermit.command"],messages:a.interaction().messagesFor({state:n})}):null},e.renderResult=function(){var t=e.props,n=t.status,a=t.message;switch(n){case Ui.SUCCESS:return l.a.createElement(x.a,{mt:2,align:"center"},l.a.createElement(j.a,{variant:"h5",className:"TestRun-success"},l.a.createElement(ra.a,null),"\xa0 Test passed"));case Ui.FAILURE:return l.a.createElement(x.a,{mt:2},l.a.createElement(x.a,{align:"center"},l.a.createElement(j.a,{variant:"h5",className:"TestRun-failure"},l.a.createElement(Mi.a,null),"\xa0 Test failed")),a);case Ui.ERROR:return l.a.createElement(x.a,{mt:2},l.a.createElement(x.a,{align:"center"},l.a.createElement(j.a,{variant:"h5",className:"TestRun-error"},l.a.createElement(oa.a,null),"\xa0 Test error")),a);default:return null}},e.start=Object(oe.a)(re.a.mark((function t(){var n,a,r,o,i;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,a=n.test,r=n.keystore,o=n.testRunIndex,(0,n.startTestRun)(o),r.type!==ia.HERMIT){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,a.run();case 6:i=t.sent,e.handleResult(i);case 8:case"end":return t.stop()}}),t)}))),e.resolve=function(t){var n=e.props.test,a=n.resolve(n.postprocess(t));e.handleResult(a)},e.handleResult=function(t){var n=e.props,a=n.testRunIndex,r=n.endTestRun,o=n.setErrorNotification;t.status===Ui.ERROR&&o(t.message),r(a,t.status,e.formatMessage(t))},e.reset=function(){var t=e.props,n=t.testRunIndex;(0,t.resetTestRun)(n)},e.formatMessage=function(t){switch(t.status){case Ui.FAILURE:return l.a.createElement(x.a,null,l.a.createElement("dl",null,l.a.createElement("dt",null,"Expected:"),l.a.createElement("dd",null,l.a.createElement("code",{className:"TestRun-wrap"},e.formatOutput(t.expected))),l.a.createElement("dt",null,"Actual:"),l.a.createElement("dd",null,l.a.createElement("code",{className:"TestRun-wrap"},e.formatOutput(t.actual))),t.diff&&l.a.createElement("div",null,l.a.createElement("dt",null,"Diff:"),l.a.createElement("dd",null,l.a.createElement("code",{className:"TestRun-wrap"},t.diff.map(e.formatDiffSegment))))));case Ui.ERROR:return l.a.createElement("code",null,t.message);default:return""}},e.formatOutput=function(e){switch(typeof e){case"object":return JSON.stringify(e);case"string":case"number":return e;default:return"Did not recognize output type"}},e.formatDiffSegment=function(t,n){return l.a.createElement("span",{key:n,className:"TestRun-diff-segment-".concat(e.diffSegmentClass(t))},t.value)},e.diffSegmentClass=function(e){return e.added?"added":e.removed?"removed":"common"},e}return n}(l.a.Component)),Wi=Object(q.a)(Object(q.a)({},s),r),Gi=Object(m.b)((function(e,t){return Object(q.a)(Object(q.a)(Object(q.a)({},{keystore:e.keystore}),e.testSuiteRun.testRuns[t.testRunIndex]||{}),{testRunIndex:t.testRunIndex})}),Wi)(Hi);Hi.defaultProps={test:{}};var qi=Gi,Yi=Z.TEST_FIXTURES.bip39Phrase,Vi=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return l.a.createElement(k.a,{container:!0},l.a.createElement(k.a,{item:!0,md:3},l.a.createElement("ol",null,Yi.slice(0,6).map(n.renderSeedWord))),l.a.createElement(k.a,{item:!0,md:3},l.a.createElement("ol",{start:7},Yi.slice(6,12).map(n.renderSeedWord))),l.a.createElement(k.a,{item:!0,md:3},l.a.createElement("ol",{start:13},Yi.slice(12,18).map(n.renderSeedWord))),l.a.createElement(k.a,{item:!0,md:3},l.a.createElement("ol",{start:19},Yi.slice(18,24).map(n.renderSeedWord))))}}],[{key:"renderSeedWord",value:function(e,t){return l.a.createElement("li",{key:t},l.a.createElement("code",null,e))}}]),n}(l.a.Component),Xi=Object(m.b)((function(){return{}}),{})(Vi),Zi=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){document.addEventListener("keydown",e.handleKeyDown)},e.componentWillUnmount=function(){document.removeEventListener("keydown",e.handleKeyDown)},e.currentTestIsActive=function(){var t=e.props.testSuiteRun;if(!t.started)return!1;var n=t.testRuns[t.currentTestRunIndex];return!!n&&n.status===ia.ACTIVE},e.handleKeyDown=function(t){if(e.props.testSuiteRun.started){if(e.currentTestIsActive())return;switch(t.keyCode){case 37:case 38:e.isFirstTest()||e.previousTest();break;case 39:case 40:e.isLastTest()||e.nextTest()}}else{if(32!==t.keyCode)return;var n=t.target.tagName.toLowerCase();if("textarea"===n||"input"===n)return;if(t.preventDefault(),e.startDisabled())return;e.start()}},e.render=function(){var t=e.props.testSuiteRun;return l.a.createElement(x.a,{mt:2},t.started&&l.a.createElement(x.a,{mt:2,mb:2},l.a.createElement(wn.a,{variant:"determinate",value:t.testRuns.filter((function(e){return e.status!==ia.PENDING&&e.status!==ia.ACTIVE})).length/t.testRuns.length*100})),l.a.createElement(k.a,{container:!0,spacing:3},l.a.createElement(k.a,{item:!0,md:4},l.a.createElement(Fi,null)),l.a.createElement(k.a,{item:!0,md:8},e.renderBody())))},e.renderSetup=function(){return l.a.createElement(k.a,{container:!0,direction:"column",spacing:3},l.a.createElement(k.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Choose Keystore"}),l.a.createElement(N.a,null,l.a.createElement(ji,null),l.a.createElement(x.a,{align:"center",mt:2},l.a.createElement(_.a,{variant:"contained",color:"primary",disabled:e.startDisabled(),onClick:e.start,type:"submit"},"Begin Test Suite"))))),l.a.createElement(k.a,{item:!0},l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Keystore Setup"}),l.a.createElement(N.a,null,l.a.createElement("p",null,"Ensure your keystore has been initialized with the following seed:"),l.a.createElement(Xi,null)))))},e.renderBody=function(){var t=e.props.testSuiteRun;return t.started?l.a.createElement(x.a,null,l.a.createElement(qi,{isLastTest:e.isLastTest(),nextTest:e.nextTest,testRunIndex:t.currentTestRunIndex}),l.a.createElement(x.a,{mt:2},l.a.createElement(k.a,{container:!0,justify:"space-between"},l.a.createElement(k.a,{item:!0},l.a.createElement(_.a,{disabled:e.isFirstTest()||e.currentTestIsActive(),onClick:e.previousTest},l.a.createElement(ti.a,null)," \xa0 Previous")),l.a.createElement(k.a,{item:!0},l.a.createElement(_.a,{disabled:e.isLastTest()||e.currentTestIsActive(),onClick:e.nextTest},"Next \xa0 ",l.a.createElement(ni.a,null)))))):e.renderSetup()},e.start=function(){(0,e.props.startTestSuiteRun)()},e.startDisabled=function(){var t=e.props,n=t.testSuiteRun,a=t.keystore;return""===a.type||a.status===ia.ACTIVE||n.started||0===n.testRuns.length},e.isFirstTest=function(){return 0===e.props.testSuiteRun.currentTestRunIndex},e.isLastTest=function(){var t=e.props.testSuiteRun;return t.currentTestRunIndex===t.testRuns.length-1},e.previousTest=function(){var t=e.props,n=t.testSuiteRun,a=t.setCurrentTestRun;n.currentTestRunIndex<1||a(n.currentTestRunIndex-1)},e.nextTest=function(){var t=e.props,n=t.testSuiteRun,a=t.setCurrentTestRun;n.currentTestRunIndex!==n.testRuns.length-1&&a(n.currentTestRunIndex+1)},e}return n}(l.a.Component),Ji=Object(q.a)({},o),Qi=Object(m.b)((function(e){return{keystore:e.keystore,testSuiteRun:e.testSuiteRun}}),Ji)(Zi);var $i=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).disabled=function(){},a.hasScriptError=function(){return""!==a.state.scriptError},a.hasFetchUTXOsError=function(){return""!==a.state.fetchUTXOsError},a.hasError=function(){return a.hasScriptError()||a.hasFetchUTXOsError()},a.scriptName=function(){switch(a.props.addressType){case Z.P2SH:return"redeem";case Z.P2SH_P2WSH:case Z.P2WSH:return"witness";default:return null}},a.scriptTitle=function(){var e=a.scriptName();return e.charAt(0).toUpperCase()+e.substring(1)},a.handleScriptChange=function(e){var t=e.target.value,n="";(""===t&&(n="".concat(a.scriptTitle()," script cannot be blank.")),""===n&&(t.includes("\n")||t.includes("\t")||t.includes(" "))&&(n="".concat(a.scriptTitle()," script should not contain spaces, tabs, or newlines.")),""===n)&&(""!==Object(Z.validateHex)(t)&&(n="".concat(a.scriptTitle()," script is not valid hex.")));if(""!==t&&""===n)try{a.generateMultisig(t)}catch(r){console.error(r),n="Failed to parse ".concat(a.scriptName()," script.")}a.setState({scriptHex:t,scriptError:n,fetchUTXOsError:"",fetchedUTXOs:!1})},a.generateMultisig=function(e){var t=a.props,n=t.network,r=t.addressType,o=a.state.scriptHex;return e&&(o=e),Object(Z.generateMultisigFromHex)(n,r,o)},a.renderDetails=function(){var e=a.state.fetchUTXOsError,t=a.props,n=t.chosePerformSpend,r=t.choseConfirmOwnership,o=t.client,i=a.generateMultisig(),s=n||r;return l.a.createElement("div",null,l.a.createElement(Jn,{multisig:i}),l.a.createElement(x.a,{mt:2},l.a.createElement(k.a,{container:!0,spacing:3},l.a.createElement(k.a,{item:!0},l.a.createElement(_.a,{variant:"contained",color:"primary",size:"large",onClick:a.performSpend,disabled:s},"Spend from this address")),l.a.createElement(k.a,{item:!0},l.a.createElement(_.a,{variant:"contained",size:"large",onClick:a.confirmOwnership,disabled:s},"Confirm ownership"))),l.a.createElement(ie.a,{error:!0},e)),"private"===o.type&&l.a.createElement(x.a,{mt:2},l.a.createElement(aa,{addresses:[i.address],client:o})))},a.performSpend=Object(oe.a)(re.a.mark((function e(){var t,n,r,o,i,s,c,l,u,d,p,m;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.setRequiredSigners,r=t.setTotalSigners,o=t.setInputs,i=t.setFrozen,s=t.choosePerformSpend,c=a.generateMultisig(),e.next=4,a.fetchUTXOs(c);case 4:(l=e.sent)?(u=l.utxos,d=l.balanceSats,p="",d.isLessThanOrEqualTo(0)&&(p="This address has a zero balance."),a.setState({fetchedUTXOs:!0,fetchUTXOsError:p}),""===p&&(m=u.map((function(e){return Object(q.a)(Object(q.a)({},e),{},{multisig:c})})),o(m),n(Object(Z.multisigRequiredSigners)(c)),r(Object(Z.multisigTotalSigners)(c)),i(!0),s())):a.setState({fetchedUTXOs:!1,fetchUTXOsError:"Failed to fetch UTXOs."});case 6:case"end":return e.stop()}}),e)}))),a.fetchUTXOs=function(){var e=Object(oe.a)(re.a.mark((function e(t){var n,r,o,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.network,o=n.client,e.next=3,we(t.address,r,o);case 3:if(!((i=e.sent)&&i.utxos&&i.utxos.length)){e.next=6;break}return e.abrupt("return",i);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.confirmOwnership=function(){var e=a.props,t=e.chooseConfirmOwnership,n=e.setOwnershipMultisig,r=e.setFrozen;n(a.generateMultisig()),t(),r(!0)},a.state={scriptHex:"",scriptError:"",fetchUTXOsError:"",fetchedUTXOs:!1},a}return Object(v.a)(n,[{key:"render",value:function(){var e=this.state,t=e.scriptHex,n=e.scriptError,a=e.fetchedUTXOs;return l.a.createElement(R.a,null,l.a.createElement(C.a,{title:"Enter ".concat(this.scriptTitle()," Script")}),l.a.createElement(N.a,null,l.a.createElement("form",null,l.a.createElement(kt.a,{fullWidth:!0,multiline:!0,autoFocus:!0,variant:"outlined",label:"".concat(this.scriptTitle()," Script"),value:t,rows:5,onChange:this.handleScriptChange,disabled:a&&!this.hasFetchUTXOsError(),helperText:n,error:""!==n})),""===t||this.hasScriptError()?l.a.createElement("p",null,"Enter a valid ",this.scriptName()," script to generate an address to spend funds from."):this.renderDetails()))}}]),n}(l.a.Component);var es={choosePerformSpend:function(){return{type:"CHOOSE_PERFORM_SPEND"}},setInputs:$e,setTotalSigners:function(e){return{type:"SET_TOTAL_SIGNERS",value:e}},setRequiredSigners:Qe,chooseConfirmOwnership:function(){return{type:"CHOOSE_CONFIRM_OWNERSHIP"}},setOwnershipMultisig:function(e){return{type:"SET_OWNERSHIP_MULTISIG",value:e}},setFrozen:qt},ts=Object(m.b)((function(e){return Object(q.a)(Object(q.a)(Object(q.a)({},e.settings),{client:e.client}),{choseConfirmOwnership:e.spend.ownership.chosen,chosePerformSpend:e.spend.transaction.chosen})}),es)($i),ns=n(828),as=n.n(ns),rs=n(829),os=n.n(rs),is=n(395),ss=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).titleRef=l.a.createRef(),a.componentDidMount=function(){a.resetBIP32Path(),a.scrollToTitle()},a.componentDidUpdate=function(){a.scrollToTitle()},a.scrollToTitle=function(){a.titleRef.current.scrollIntoView({behavior:"smooth"})},a.handleMethodChange=function(e){(0,a.props.setMethod)(e.target.value),a.reset()},a.disableChangeMethod=function(){a.setState({disableChangeMethod:!0})},a.enableChangeMethod=function(){a.setState({disableChangeMethod:!1})},a.reset=function(){(0,a.props.reset)()},a.resetBIP32Path=function(){(0,a.props.resetBIP32Path)()},a.validateAndSetBIP32Path=function(e,t,n,r){var o=a.props.setBIP32Path,i=Object(Z.validateBIP32Path)(e,r);o(e),i?n(i):(n(""),t())},a.validateAndSetPublicKey=function(e,t,n){var r=a.props.setPublicKey,o=Object(Z.validatePublicKey)(e);r(e),o?t&&t(o):(t&&t(""),n&&n())},a.renderConfirmation=function(){var e=a.props,t=e.publicKeys,n=e.publicKeyImporter;if(""===n.publicKey)return null;if(t.includes(n.publicKey)){var r=Object(is.a)(M.a)({color:"green"});return l.a.createElement(A.a,null,l.a.createElement(K.a,null,l.a.createElement(r,null,l.a.createElement(as.a,null)),l.a.createElement(B.a,null,"The public key exported at BIP32 path"," ",l.a.createElement("code",null,n.bip32Path)," is present in the provided redeem script.")))}return l.a.createElement(A.a,null,l.a.createElement(K.a,null,l.a.createElement(M.a,null,l.a.createElement(j.a,{color:"error"},l.a.createElement(os.a,null))),l.a.createElement(B.a,null,"The public key exported at BIP32 path"," ",l.a.createElement("code",null,n.bip32Path)," is not present in the provided redeem script.")))},a.renderImportByMethod=function(){var e=a.props,t=e.network,n=e.publicKeyImporter,r=e.defaultBIP32Path;return n.method===ia.HERMIT?l.a.createElement(Vo,{publicKeyImporter:n,validateAndSetBIP32Path:a.validateAndSetBIP32Path,validateAndSetPublicKey:a.validateAndSetPublicKey,resetBIP32Path:a.resetBIP32Path,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod,reset:a.reset}):n.method===ia.TREZOR||n.method===ia.LEDGER?l.a.createElement(Xo,{network:t,publicKeyImporter:n,validateAndSetBIP32Path:a.validateAndSetBIP32Path,resetBIP32Path:a.resetBIP32Path,defaultBIP32Path:r,validateAndSetPublicKey:a.validateAndSetPublicKey,enableChangeMethod:a.enableChangeMethod,disableChangeMethod:a.disableChangeMethod}):null},a.state={disableChangeMethod:!1},a}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.state.disableChangeMethod,n="public-key-importer-select-label",a="".concat(n,"-select");return l.a.createElement(R.a,null,l.a.createElement(C.a,{ref:this.titleRef,title:"Confirm Ownership"}),l.a.createElement(N.a,null,l.a.createElement("form",null,l.a.createElement("p",null,"How will you confirm your ownership of this address?"),l.a.createElement(Dt.a,{fullWidth:!0},l.a.createElement(sa.a,{id:n},"Select Method"),l.a.createElement(ca.a,{labelId:a,id:"public-key-importer-select",disabled:t,value:e.method,onChange:this.handleMethodChange},l.a.createElement(la.a,{value:""},"< Select method >"),l.a.createElement(la.a,{value:ia.TREZOR},"Trezor"),l.a.createElement(la.a,{value:ia.LEDGER},"Ledger"),l.a.createElement(la.a,{value:ia.HERMIT},"Hermit"))),this.renderImportByMethod(),this.renderConfirmation(),""!==e.method&&l.a.createElement(_.a,{variant:"contained",size:"small",color:"secondary",role:"button",onClick:this.reset},"Start Again"))))}}]),n}(l.a.Component);var cs={setMethod:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_METHOD",value:e}},setBIP32Path:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",value:e}},setPublicKey:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",value:e}},resetBIP32Path:function(){return{type:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH"}},reset:function(){return{type:"RESET_PUBLIC_KEY_IMPORTER"}}},ls=Object(m.b)((function(e){return e.spend.ownership}),cs)(ss),us=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).render=function(){return l.a.createElement(x.a,{mt:2},l.a.createElement(k.a,{container:!0,spacing:3},l.a.createElement(k.a,{item:!0,md:8},l.a.createElement(x.a,null,l.a.createElement(ts,null)),e.renderBody()),l.a.createElement(k.a,{item:!0,md:4},l.a.createElement(x.a,null,l.a.createElement(an,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(Xt,null)),l.a.createElement(x.a,{mt:2},l.a.createElement(pn,null)))))},e.renderBody=function(){var t=e.props,n=t.transaction;return t.ownership.chosen?l.a.createElement(x.a,{mt:2},l.a.createElement(ls,null)):l.a.createElement(x.a,null,e.spendable()&&l.a.createElement(x.a,null,l.a.createElement(x.a,{mt:2},l.a.createElement(R.a,null,l.a.createElement(N.a,null,l.a.createElement(Vn,{inputs:n.inputs,inputsTotalSats:n.inputsTotalSats})))),l.a.createElement(x.a,{mt:2},l.a.createElement(R.a,null,l.a.createElement(N.a,null,l.a.createElement(j.a,{variant:"h5"},"Define Outputs"),l.a.createElement(Ar,null))))),n.finalizedOutputs&&l.a.createElement("div",null,l.a.createElement(x.a,{mt:2},l.a.createElement(Ur,null)),l.a.createElement(x.a,{mt:2},e.renderSignatureImporters())),e.signaturesFinalized()&&l.a.createElement(x.a,{mt:2},l.a.createElement(Br,null)))},e.renderSignatureImporters=function(){for(var t=e.props.transaction,n=[],a=1;a<=t.requiredSigners;a+=1)n.push(l.a.createElement(x.a,{key:a,mt:2},l.a.createElement(Ma,{number:a})));return n},e.spendable=function(){return e.props.transaction.inputs.length>0},e.signaturesFinalized=function(){var t=e.props.signatureImporters;return Object.values(t).length>0&&Object.values(t).every((function(e){return e.finalized}))},e.confirmOwnership=function(t){e.setState({addressFinalized:!0,confirmOwnership:t})},e}return n}(l.a.Component);var ds=Object(m.b)((function(e){return e.spend}))(us),ps=n(712),ms=n(830),hs=n.n(ms),fs=Object(It.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},menuItem:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingX:e.spacing(3)},menuLink:{color:"inherit",textDecoration:"none"}}})),Es=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.title,a=e.classes,r=e.handleClose;return l.a.createElement("a",{href:t,className:a.menuLink},l.a.createElement(la.a,{className:a.menuItem,onClick:r},n))}}]),n}(l.a.Component),bs=function(){var e=fs(),t=l.a.useState(null),n=Object(ce.a)(t,2),a=n[0],r=n[1];return l.a.createElement("div",{className:e.root},l.a.createElement(Fn.a,{position:"static"},l.a.createElement(ps.a,null,l.a.createElement(j.a,{variant:"h6",className:e.title},l.a.createElement(_.a,{color:"inherit",href:"#/"},"Caravan")),l.a.createElement(_.a,{"aria-controls":"simple-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){r(e.currentTarget)}},l.a.createElement(x.a,{mr:3},l.a.createElement(j.a,null,"Menu")),l.a.createElement(hs.a,null)),l.a.createElement(sr.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:function(){return r(null)}},[{href:"#/wallet",title:"Wallet"},{href:"#/address",title:"Create Address"},{href:"#/script",title:"Script Explorer"},{href:"#/help",title:"Help"}].map((function(t){var n=t.href,a=t.title;return l.a.createElement(Es,{href:n,title:a,classes:e,key:n,handleClose:function(){return r(null)}})}))))))},vs=n(831),gs=n(1282),ys=function(){return l.a.createElement(x.a,{mt:2},l.a.createElement("hr",null),l.a.createElement(k.a,{container:!0,justify:"space-between",alignItems:"center"},l.a.createElement(k.a,{item:!0,sm:2},Q("https://www.unchained-capital.com",l.a.createElement("img",{src:gs,className:"logo",alt:"Unchained Capital logo",height:"32"}))),l.a.createElement(k.a,{item:!0,sm:6},l.a.createElement("p",null,"Copyright\xa0",new Date(Date.now()).getFullYear()," by Unchained Capital and released under an MIT license.")),l.a.createElement(k.a,{item:!0,sm:1,align:"right"},l.a.createElement("p",null," v",vs.a," "))))},Ps=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={error:null,errorInfo:null},a}return Object(v.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:t,error:e})}},{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.error,a=t.errorInfo;return a?l.a.createElement(x.a,{m:4},l.a.createElement(x.a,{m:2},l.a.createElement(j.a,{variant:"h3",component:"h1"},"Something went wrong.")),l.a.createElement(x.a,{m:2},l.a.createElement(j.a,{variant:"body1"},"Let us know what happened on"," ",l.a.createElement("a",{href:"https://github.com/unchained-capital/caravan/issues",target:"_blank",rel:"noopener noreferrer"},"github"),".")),l.a.createElement(x.a,{mx:2,my:3},l.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},n&&n.toString(),l.a.createElement("br",null),a.componentStack))):e}}]),n}(l.a.Component),Ss=n(612),Ts=n(1357),Os={clearErrorNotification:ft},Is=Object(m.b)((function(e){return e.errorNotification}),Os)((function(e){var t=e.open,n=e.message,a=e.clearErrorNotification;return l.a.createElement(Ss.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,onClose:a,ContentProps:{"aria-describedby":"error-notification"},message:l.a.createElement("span",{id:"error-notification"},n),action:[l.a.createElement(Rt.a,{key:"close","aria-label":"close",color:"inherit",onClick:a},l.a.createElement(Ts.a,null))]})})),ws=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(O.a,null),l.a.createElement(w.SnackbarProvider,{maxSnack:3},l.a.createElement(I.a,{maxWidth:"lg"},l.a.createElement(bs,null),l.a.createElement(Ps,null,l.a.createElement(S.a,null,l.a.createElement(T.d,null,l.a.createElement(T.b,{path:"/test",component:Qi}),l.a.createElement(T.b,{path:"/address",component:ei}),l.a.createElement(T.a,{from:"/spend",to:"/script"}),l.a.createElement(T.b,{path:"/script",component:ds}),l.a.createElement(T.b,{path:"/wallet",component:Co}),l.a.createElement(T.b,{path:"/help",component:ne}),l.a.createElement(T.b,{path:"/",component:ne}))),l.a.createElement(Is,null)),l.a.createElement(ys,null))))},xs=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).history=Object(P.a)(),e}return Object(v.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.resetApp;this.unlisten=this.history.listen((function(){e()}))}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){return l.a.createElement(ws,null)}}]),n}(c.Component);var js=Object(m.b)(null,(function(e){return{resetApp:function(){return e({type:"RESET_APP_STATE"})}}}))(xs),ks=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Rs(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Cs=function(e,t){return Object(q.a)(Object(q.a)({},e),t)},Ns={network:Z.MAINNET,totalSigners:3,requiredSigners:2,addressType:Z.P2SH,frozen:!1},_s={type:"public",url:"",username:"",password:"",urlError:"",usernameError:"",passwordError:"",status:"unknown"},As={present:!0,bip32Path:"",publicKeys:[],multisig:{},address:"",balanceSats:new V.a(0),utxos:[],change:!1,spend:!1,fetchedUTXOs:!1,fetchUTXOsError:"",addressUsed:!1,addressKnown:!0},Ks={nodes:{},trailingEmptyNodes:0,fetchUTXOsErrors:0,balanceSats:new V.a(0),spendingSats:new V.a(0),nextNode:null};function Ms(e,t){var n=Object(q.a)(Object(q.a)(Object(q.a)({},As),e.nodes[t.value.bip32Path]||{}),t.value),a={};a[n.bip32Path]=n;var r=Object(q.a)(Object(q.a)({},e),{nodes:Object(q.a)(Object(q.a)({},e.nodes),a)});if("undefined"!==typeof t.value.spend&&(r.spendingSats=t.value.spend?e.spendingSats.plus(n.balanceSats):e.spendingSats.minus(n.balanceSats)),t.value.balanceSats){var o=e.nodes[n.bip32Path]?e.nodes[n.bip32Path].balanceSats:V()(0);r.balanceSats=e.balanceSats.plus(n.balanceSats.minus(o))}var i=0,s=0,c=Object.keys(r.nodes);c.sort((function(e,t){var n=(e||"").split("/"),a=(t||"").split("/");return parseInt(n[2],10)-parseInt(a[2],10)}));for(var l=!1,u=0;u<c.length;u+=1){var d=c[c.length-(u+1)],p=r.nodes[d];p.fetchedUTXOs&&(!p.balanceSats.isEqualTo(0)||p.addressUsed||l?l=!0:i+=1),""!==p.fetchUTXOsError&&(s+=1)}return r.trailingEmptyNodes=i,r.fetchUTXOsErrors=s,r.nextNode=function(e){for(var t=Object.values(e.nodes),n=0;n<t.length;n+=1){var a=t[n];if(a.balanceSats.isEqualTo(0)&&!a.addressUsed)return a}return null}(r),r}function Bs(e){var t=Object(q.a)({},e);return Object.values(t.nodes).forEach((function(e){e.spend=!1})),t}var Ds=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ks,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"RESET_NODES_SPEND":return Bs(t);case"RESET_NODES_FETCH_ERRORS":return Cs(t,{fetchUTXOsErrors:0,nodes:Object.values(t.nodes).reduce((function(e,t){var n=e;return n[t.bip32Path]=Object(q.a)(Object(q.a)({},t),{},{fetchUTXOsError:""}),n}),{})});case e:return Ms(t,n);default:return t}}};function Us(e){var t=(new Date).getTime().toString(),n=Object.values(e.extendedPublicKeyImporters).map((function(e){return e.extendedPublicKey})).join("");return"".concat(t,"-").concat(n)}var Ls=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:e,bip32Path:Object(Z.multisigBIP32Root)(Z.P2SH,Z.MAINNET),bip32PathModified:!1,method:"",extendedPublicKey:"",finalized:!1,confliect:!1}};function zs(){return{extendedPublicKeyImporters:Object(se.a)(Array(4).keys()).slice(1).reduce((function(e,t){return Object(q.a)(Object(q.a)({},e),{},{[t]:Ls("Extended Public Key ".concat(t))})}),{}),defaultBIP32Path:Object(Z.multisigBIP32Root)(Z.P2SH,Z.MAINNET),network:Z.MAINNET,addressType:Z.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",configuring:!0}}function Fs(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function Hs(e,t,n){var a={};a[n]=t.value;var r=Object(q.a)(Object(q.a)({},e),{nodes:{}});return r.extendedPublicKeyImporters[t.number]=Cs(e.extendedPublicKeyImporters[t.number],a),Object.values(r.extendedPublicKeyImporters).reduce((function(e,t){return e+t.finalized}),0)===Object.keys(r.extendedPublicKeyImporters).length&&"finalized"===n&&(r.configuring=!1),Fs(r.extendedPublicKeyImporters[t.number],e),Cs(r,{fingerprint:Us(r)})}function Ws(e,t){for(var n=t.value,a={},r=1;r<=n;r+=1)a[r]=e.extendedPublicKeyImporters[r]||Ls("Extended Public Key ".concat(r));var o=0;return Object.keys(a).forEach((function(e){a[e].finalized&&(o+=1)})),Object(q.a)(Object(q.a)({},e),{},{configuring:o<n},{extendedPublicKeyImporters:a})}function Gs(e,t,n){for(var a=1;a<=Object.values(e.extendedPublicKeyImporters).length;a+=1){var r=t.extendedPublicKeyImporters[a];r.bip32PathModified||r.finalized||(r.bip32Path=n),Fs(r,t)}}function qs(e,t){var n=e.addressType,a=t.value,r=Object(Z.multisigBIP32Root)(n,a),o=Object(q.a)(Object(q.a)({},e),{network:a,defaultBIP32Path:r});return Gs(e,o,r),o}function Ys(e,t){var n=t.value,a=e.network,r=Object(Z.multisigBIP32Root)(n,a),o=Object(q.a)(Object(q.a)({},e),{addressType:n,defaultBIP32Path:r});return Gs(e,o,r),o}function Vs(e,t){var n=Object(q.a)({},e);if(!0===t.value&&""===e.finalizedNetwork)n.finalizedNetwork=e.network,n.finalizedAddressType=e.addressType;else if(!1===t.value&&""!==e.finalizedNetwork){1===Object.values(e.extendedPublicKeyImporters).reduce((function(e,t){return!0===t.finalized?e+1:e}),0)&&(n.finalizedNetwork="",n.finalizedAddressType="",Object.values(n.extendedPublicKeyImporters).forEach((function(e){return e.conflict=!1})))}return n}function Xs(e){var t=(new Date).getTime().toString(),n=Object.values(e.publicKeyImporters).map((function(e){return e.publicKey})).join("");return"".concat(t,"-").concat(n)}var Zs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:e,bip32Path:Object(Z.multisigBIP32Path)(Z.P2SH,Z.MAINNET),bip32PathModified:!1,method:"",publicKey:"",finalized:!1,conflict:!1}};function Js(){return{publicKeyImporters:Object(se.a)(Array(4).keys()).slice(1).reduce((function(e,t){return Object(q.a)(Object(q.a)({},e),{},{[t]:Zs("Public Key ".concat(t))})}),{}),defaultBIP32Path:Object(Z.multisigBIP32Path)(Z.P2SH,Z.MAINNET),network:Z.MAINNET,addressType:Z.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",address:""}}function Qs(e,t){if(1===t.number)return e;var n=Object(q.a)({},e),a=e.publicKeyImporters[t.number-1],r=e.publicKeyImporters[t.number];return n.publicKeyImporters[t.number-1]=r,n.publicKeyImporters[t.number]=a,Cs(n,{fingerprint:Xs(n)})}function $s(e,t){if(t.number===Object.values(e.publicKeyImporters).length)return e;var n=Object(q.a)({},e),a=e.publicKeyImporters[t.number+1],r=e.publicKeyImporters[t.number];return n.publicKeyImporters[t.number+1]=r,n.publicKeyImporters[t.number]=a,Cs(n,{fingerprint:Xs(n)})}function ec(e){for(var t=Object.values(e.publicKeyImporters),n=t.map((function(e){return e.publicKey})).sort().map((function(e){return t.find((function(t){return t.publicKey===e}))})),a={},r=1;r<=n.length;r+=1)a[r]=n[r-1];var o=Object(q.a)(Object(q.a)({},e),{publicKeyImporters:a});return Cs(o,{fingerprint:Xs(o)})}function tc(e,t){if(t.finalizedNetwork){var n=Object(q.a)({},t.publicKeyImporters);return n[e].conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType,Cs(t,{publicKeyImporters:n})}return t}function nc(e,t,n){var a={};a[n]=t.value;var r=Object(q.a)({},e);return r.publicKeyImporters[t.number]=Cs(e.publicKeyImporters[t.number],a),r=tc(t.number,e),Cs(r,{fingerprint:Xs(r)})}function ac(e,t){for(var n=t.value,a={},r=1;r<=n;r+=1)a[r]=e.publicKeyImporters[r]||Object(q.a)(Object(q.a)({},Zs()),{name:"Public Key ".concat(r)});var o=Object(q.a)(Object(q.a)({},e),{publicKeyImporters:a,stub:t.type});return Cs(o,{fingerprint:Xs(o)})}function rc(e,t){for(var n=Object(q.a)({},e),a=1;a<=Object.values(e.publicKeyImporters).length;a+=1){var r=n.publicKeyImporters[a];r.bip32PathModified||r.finalized||(r.bip32Path=t),n=tc(a,n)}return n}function oc(e,t){var n=t.value,a=e.addressType,r=Object(Z.multisigBIP32Path)(a,n),o=Object(q.a)(Object(q.a)({},e),{network:n,defaultBIP32Path:r});return o=rc(o,r)}function ic(e,t){var n=e.network,a=t.value,r=Object(Z.multisigBIP32Path)(a,n),o=Object(q.a)(Object(q.a)({},e),{addressType:a,defaultBIP32Path:r});return o=rc(o,r)}function sc(e,t){var n=Object(q.a)({},e);if(!0===t.value&&""===e.finalizedNetwork&&"text"!==n.publicKeyImporters[t.number].method)n.finalizedNetwork=e.network,n.finalizedAddressType=e.addressType;else if(!1===t.value&&""!==e.finalizedNetwork){1===Object.values(e.publicKeyImporters).reduce((function(e,t){return!0===t.finalized&&"text"!==t.method?e+1:e}),0)&&(n.finalizedNetwork="",n.finalizedAddressType="",Object.values(n.publicKeyImporters).forEach((function(e){return e.conflict=!1})))}return n}var cc={walletMode:Et,walletName:"My Multisig Wallet",nodesLoaded:!1};function lc(e){return Cs(e,{walletMode:Et})}var uc={chosen:!1,publicKeyImporter:Object(q.a)({},{bip32Path:"",method:"",publicKey:""}),network:Z.MAINNET,addressType:Z.P2SH,publicKeys:[],address:"",defaultBIP32Path:Object(Z.multisigBIP32Path)(Z.P2SH,Z.MAINNET)};function dc(e,t,n){var a={};return a[n]=t.value,Object(q.a)(Object(q.a)({},e),{publicKeyImporter:Object(q.a)(Object(q.a)({},e.publicKeyImporter),a)})}function pc(e,t){var n=t.value,a=Object(Z.multisigAddressType)(n),r=Object(Z.multisigBIP32Path)(a,e.network);return Object(q.a)(Object(q.a)({},e),{network:e.network,addressType:a,publicKeys:Object(Z.multisigPublicKeys)(n),address:n.address,defaultBIP32Path:r})}var mc={name:"",method:"",publicKeys:[],signature:[],bip32Path:"",finalized:!1},hc={};function fc(e,t){for(var n={},a=1;a<=t.value;a+=1)n[a]=Object(q.a)(Object(q.a)({},mc),{name:"Signature ".concat(a)});return n}function Ec(e,t,n){var a={};a[n]=t.value;var r=Object(q.a)({},e);return r[t.number]=Cs(e[t.number],a),r}function bc(e,t){var n=Object(q.a)({},e);return n[t.number]=Cs(e[t.number],t.value),n}function vc(e,t){var n=e.txid.toLowerCase(),a=t.txid.toLowerCase();return n<a?-1:n>a?1:e.n<t.n?-1:e.n>t.n?1:0}var gc=function(){return{chosen:!1,network:Z.MAINNET,inputs:[],inputsTotalSats:new V.a(0),outputs:[{address:"",amount:"",amountSats:"",addressError:"",amountError:""}],changeOutputIndex:0,feeRate:"",feeRateError:"",fee:"",feeError:"",finalizedOutputs:!1,txid:"",balanceError:"",addressType:Z.P2SH,requiredSigners:2,totalSigners:3,unsignedTransaction:{},isWallet:!1,autoSpend:!0,changeAddress:"",updatesComplete:!0,signingKeys:[0,0],spendingStep:0}};function yc(e,t){var n=t.value.reduce((function(e,t){return e.plus(t.amountSats)}),new V.a(0));return Cs(e,{inputs:t.value.sort(vc),inputsTotalSats:n})}function Pc(e,t,n){return Object(Z.satoshisToBitcoins)(Object(Z.estimateMultisigTransactionFee)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:n,m:e.requiredSigners,n:e.totalSigners,feesPerByteInSatoshis:t})).toFixed(8).toString()}function Sc(e,t){for(var n=Object(q.a)({},e),a=[],r=0;r<n.outputs.length;r+=1)r!==t.number-1?a.push(n.outputs[r]):t.number===n.changeOutputIndex&&(n.changeOutputIndex=0),t.number<n.changeOutputIndex&&(n.changeOutputIndex-=1);return Object(q.a)(Object(q.a)({},n),{outputs:a,fee:Pc(n,n.feeRate,a.length)})}function Tc(e,t){var n=t.value,a=Object(Z.validateFeeRate)(n),r=""===a?Pc(e,n,e.outputs.length):"";return Cs(e,{feeRate:n,feeRateError:a,fee:r,feeError:""})}function Oc(e,t){var n=t.value,a=Object(Z.bitcoinsToSatoshis)(n),r=Object(Z.validateFee)(a,e.inputsTotalSats);return Cs(e,{fee:n,feeError:r,feeRateError:""})}function Ic(e){var t=e.outputs.concat({address:"",amount:"",amountSats:"",addressError:"",amountError:""});return Object(q.a)(Object(q.a)({},e),{outputs:t,fee:Pc(e,e.feeRate,t.length)})}function wc(e,t){var n=Object(se.a)(e.outputs),a=t.value,r=Object(Z.validateAddress)(a,e.network);if(""===r)for(var o=0;o<e.inputs.length;o+=1){var i=e.inputs[o];if(i.multisig&&a===i.multisig.address){r="Output address cannot equal input address.";break}}if(""===r)for(var s=0;s<e.outputs.length;s+=1)if(s!==t.number-1&&e.outputs[s].address===a){r="Duplicate output address.";break}return n[t.number-1].address=a,n[t.number-1].addressError=r,Object(q.a)(Object(q.a)({},e),{outputs:n})}function xc(e,t){var n=Object(se.a)(e.outputs),a=t.value,r=Object(Z.bitcoinsToSatoshis)(V()(a)),o=Object(Z.validateOutputAmount)(r,e.inputsTotalSats);e.isWallet&&"Total input amount must be positive."===o&&(o=""),e.isWallet&&"Output amount is too large."===o&&(o="");var i=V()(a).dp();return i>8&&(a=a.slice(0,8-i)),n[t.number-1].amount=a,n[t.number-1].amountError=o,n[t.number-1].amountSats=o?"":r,Object(q.a)(Object(q.a)({},e),{outputs:n})}function jc(e,t){var n=Object(Z.unsignedMultisigTransaction)(e.network,e.inputs,e.outputs);return Object(q.a)(Object(q.a)({},e),{finalizedOutputs:t.value,unsignedTransaction:n})}function kc(e,t){return Cs(e,{requiredSigners:t.value,signingKeys:Array(t.value).fill(0)})}function Rc(e,t){var n=Object(se.a)(e.signingKeys);return n[t.number-1]=t.value,Cs(e,{signingKeys:n})}function Cc(e){return Cs(e,{outputs:[{address:"",amount:"",amountSats:"",addressError:"",amountError:""}],fee:"",balanceError:"",changeOutputIndex:0})}function Nc(e){var t=Cs(e,Object(q.a)(Object(q.a)({},gc()),{},{totalSigners:e.totalSigners,network:e.network,addressType:e.addressType,isWallet:e.isWallet,changeAddress:e.changeAddress}));return t=Cc(t=kc(t,{value:e.requiredSigners}))}function _c(e){var t=Object(q.a)({},e);if(t.outputs.find((function(e){return""!==e.addressError||""!==e.amountError}))||""!==t.feeError||""!==t.feeRateError||0===t.inputs.length)return Object(q.a)(Object(q.a)({},t),{},{balanceError:""});var n=Object(Z.bitcoinsToSatoshis)(new V.a(t.fee)),a=function(e){return e.outputs.reduce((function(e,t){var n=t.amount;return e.plus(Object(Z.bitcoinsToSatoshis)(new V.a(n||0)))}),new V.a(0))}(t);if(!t.inputsTotalSats.isEqualTo(a.plus(n))){var r=a.plus(n).minus(t.inputsTotalSats),o="";if(r.isNaN())o="Cannot calculate total.";else{t=Cs(t,{updatesComplete:!0});var i=r.isLessThan(0)?"Increase":"Decrease";o="".concat(i," by ").concat(Object(Z.satoshisToBitcoins)(r.absoluteValue()).toFixed(8),".")}return Object(q.a)(Object(q.a)({},t),{},{balanceError:o})}var s=new V.a(Pc(t,"1",0));return new V.a(t.fee).isLessThan(s)?Object(q.a)(Object(q.a)({},t),{},{balanceError:"Fee is too small. Should be no less than ".concat(Object(Z.bitcoinsToSatoshis)(s)," satoshis.")}):Object(q.a)(Object(q.a)({},t),{},{balanceError:""})}var Ac={type:"",version:"",note:"",status:ia.PENDING},Kc=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"postprocess",value:function(e){return e.pubkey?e.pubkey:e}},{key:"name",value:function(){return"Export ".concat(this.params.network," public key at ").concat(this.params.bip32Path)}},{key:"description",value:function(){return l.a.createElement("p",null,"Export a public key at BIP32 path",l.a.createElement("code",null,this.params.bip32Path),".")}},{key:"interaction",value:function(){return Object(ia.ExportPublicKey)({keystore:this.params.keystore,network:this.params.network,bip32Path:this.params.bip32Path})}},{key:"expected",value:function(){return Z.TEST_FIXTURES.nodes[this.params.bip32Path].pub}}]),n}(Ui),Mc=function(e){return[new Kc({keystore:e,network:Z.TESTNET,bip32Path:"m/45'/1'/0'/0/0"}),new Kc({keystore:e,network:Z.TESTNET,bip32Path:"m/48'/1'/0'/1'/0/0"}),new Kc({keystore:e,network:Z.TESTNET,bip32Path:"m/48'/1'/0'/2'/0/0"}),new Kc({keystore:e,network:Z.MAINNET,bip32Path:"m/45'/0'/0'/0/0"}),new Kc({keystore:e,network:Z.MAINNET,bip32Path:"m/48'/0'/0'/1'/0/0"}),new Kc({keystore:e,network:Z.MAINNET,bip32Path:"m/48'/0'/0'/2'/0/0"})]},Bc=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"postprocess",value:function(e){return e.pubkey?e.pubkey:e}},{key:"name",value:function(){return"Export ".concat(this.params.network," xpub at ").concat(this.params.bip32Path)}},{key:"description",value:function(){return l.a.createElement("p",null,"Export an extended public key at BIP32 path"," ",l.a.createElement("code",null,this.params.bip32Path))}},{key:"interaction",value:function(){return Object(ia.ExportExtendedPublicKey)({keystore:this.params.keystore,network:this.params.network,bip32Path:this.params.bip32Path})}},{key:"expected",value:function(){return this.params.network===Z.MAINNET?Z.TEST_FIXTURES.nodes[this.params.bip32Path].xpub:Z.TEST_FIXTURES.nodes[this.params.bip32Path].tpub}}]),n}(Ui),Dc=function(e){return[new Bc({keystore:e,network:Z.TESTNET,bip32Path:"m/45'/0'/0'"}),new Bc({keystore:e,network:Z.TESTNET,bip32Path:"m/45'/0'/0'/0"}),new Bc({keystore:e,network:Z.TESTNET,bip32Path:"m/45'/0'/0'/0/0"}),new Bc({keystore:e,network:Z.TESTNET,bip32Path:"m/45'/0'/4'"}),new Bc({keystore:e,network:Z.TESTNET,bip32Path:"m/45'/0'/4'/0/0"}),new Bc({keystore:e,network:Z.TESTNET,bip32Path:"m/45'/0'/4'/6/2"}),new Bc({keystore:e,network:Z.TESTNET,bip32Path:"m/45'/0'/4'/99'"}),new Bc({keystore:e,network:Z.TESTNET,bip32Path:"m/45'/0'/4'/99'/0/0"}),new Bc({keystore:e,network:Z.TESTNET,bip32Path:"m/45'/0'/4'/99'/2147483647/3/1"}),new Bc({keystore:e,network:Z.MAINNET,bip32Path:"m/45'/0'/0'"}),new Bc({keystore:e,network:Z.MAINNET,bip32Path:"m/45'/0'/0'/0"}),new Bc({keystore:e,network:Z.MAINNET,bip32Path:"m/45'/0'/0'/0/0"}),new Bc({keystore:e,network:Z.MAINNET,bip32Path:"m/45'/0'/4'"}),new Bc({keystore:e,network:Z.MAINNET,bip32Path:"m/45'/0'/4'/0/0"}),new Bc({keystore:e,network:Z.MAINNET,bip32Path:"m/45'/0'/4'/6/2"}),new Bc({keystore:e,network:Z.MAINNET,bip32Path:"m/45'/0'/4'/99'"}),new Bc({keystore:e,network:Z.MAINNET,bip32Path:"m/45'/0'/4'/99'/0/0"}),new Bc({keystore:e,network:Z.MAINNET,bip32Path:"m/45'/0'/4'/99'/2147483647/3/1"})]},Uc=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"postprocess",value:function(e){return e.signatures?e.signatures:e}},{key:"matches",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"description",value:function(){return l.a.createElement(x.a,null,l.a.createElement("p",null,"Sign a transaction which",this.params.description,"."),l.a.createElement("p",null,l.a.createElement("small",null,"This transaction is not meant to be broadcast, but just in case, the output address is fixed and owned by Unchained Capital.")),l.a.createElement(bn.a,null,l.a.createElement(Pn.a,null,l.a.createElement(gn.a,null,l.a.createElement(yn.a,null,"Output Address:"),l.a.createElement(yn.a,null,Q(Object(Z.blockExplorerAddressURL)(this.outputAddress(),this.params.network),l.a.createElement("code",null,this.outputAddress())))),l.a.createElement(gn.a,null,l.a.createElement(yn.a,null,"Output Amount:"),l.a.createElement(yn.a,null,Object(Z.satoshisToBitcoins)(this.outputAmountSats()).toString()," BTC")),l.a.createElement(gn.a,null,l.a.createElement(yn.a,null,"Fees:"),l.a.createElement(yn.a,null,Object(Z.satoshisToBitcoins)(this.feeSats()).toString()," BTC")))))}},{key:"inputsTotalSats",value:function(){return this.params.inputs.reduce((function(e,t){return e+t.amountSats.toNumber()}),0)}},{key:"outputAddress",value:function(){return this.params.outputs[0].address}},{key:"outputAmountSats",value:function(){return this.params.outputs[0].amountSats.toNumber()}},{key:"feeSats",value:function(){return this.inputsTotalSats()-this.outputAmountSats()}},{key:"unsignedTransaction",value:function(){return Object(Z.unsignedMultisigTransaction)(this.params.network,this.params.inputs,this.params.outputs)}},{key:"interaction",value:function(){return Object(ia.SignMultisigTransaction)({keystore:this.params.keystore,network:this.params.network,inputs:this.params.inputs,outputs:this.params.outputs,bip32Paths:this.params.bip32Paths})}},{key:"expected",value:function(){return this.params.signature}}]),n}(Ui);function Lc(e){return Z.TEST_FIXTURES.transactions.map((function(t){return new Uc(Object(q.a)(Object(q.a)({},t),{keystore:e}))}))}var zc=Mc(ia.TREZOR).concat(Dc(ia.TREZOR)).concat(Lc(ia.TREZOR)),Fc=Mc(ia.LEDGER).concat(Dc(ia.LEDGER)).concat(Lc(ia.LEDGER)),Hc=Mc(ia.HERMET).concat(Dc(ia.HERMET)).concat(Lc(ia.HERMET)),Wc={};Wc[ia.TREZOR]=zc,Wc[ia.LEDGER]=Fc,Wc[ia.HERMIT]=Hc;Z.TEST_FIXTURES.bip39Phrase;var Gc={startedAt:"",endedAt:"",status:ia.PENDING,message:"",note:""},qc={started:!1,startedAt:"",endedAt:"",testRuns:[],currentTestRunIndex:-1},Yc=function(e){return""===e.keystoreType?[]:(Wc[e.keystoreType]||[]).map((function(e){return Object(q.a)(Object(q.a)({},Gc),{test:e})}))},Vc=function(e,t,n){return Object(q.a)(Object(q.a)({},e),{testRuns:e.testRuns.map((function(e,a){return a===t?Object(q.a)(Object(q.a)({},e),n):e}))})},Xc={message:"",open:!1},Zc=Object(p.c)({ownership:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uc,t=arguments.length>1?arguments[1]:void 0,n=dc(e,{value:""},"publicKey");switch(t.type){case"CHOOSE_CONFIRM_OWNERSHIP":return Cs(e,{chosen:!0});case"SET_NETWORK":return Cs(e,{network:t.value});case"SET_OWNERSHIP_MULTISIG":return pc(e,t);case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return dc(n,t,"bip32Path");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return dc(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return dc(e,t,"publicKey");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return dc(e,{value:e.defaultBIP32Path},"bip32Path");case"RESET_PUBLIC_KEY_IMPORTER":return Object(q.a)(Object(q.a)({},e),{publicKeyImporter:Object(q.a)(Object(q.a)({},e.publicKeyImporter),{bip32Path:e.defaultBIP32Path,publicKey:""})});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gc(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHOOSE_PERFORM_SPEND":return Cs(e,{chosen:!0});case"SET_NETWORK":return Cs(e,{network:t.value});case"SET_ADDRESS_TYPE":return Cs(e,{addressType:t.value});case"SET_REQUIRED_SIGNERS":return kc(e,t);case"SET_TOTAL_SIGNERS":return Cs(e,{totalSigners:t.value});case"SET_INPUTS":return _c(yc(e,t));case"ADD_OUTPUT":return _c(Ic(e));case"SET_CHANGE_OUTPUT_INDEX":return Cs(e,{changeOutputIndex:t.value});case"SET_OUTPUT_ADDRESS":return _c(wc(e,t));case"SET_OUTPUT_AMOUNT":return _c(xc(e,t));case"DELETE_OUTPUT":return _c(Sc(e,t));case"SET_FEE_RATE":return _c(Tc(e,t));case"SET_FEE":return _c(Oc(e,t));case"FINALIZE_OUTPUTS":return jc(e,t);case"RESET_OUTPUTS":return Cc(e);case"SET_TXID":return Cs(e,{txid:t.value});case"SET_IS_WALLET":return Cs(e,{isWallet:!0});case"RESET_TRANSACTION":return Nc(e);case"UPDATE_AUTO_SPEND":return Cs(e,{autoSpend:t.value});case"SET_SIGNING_KEY":return Rc(e,t);case"SET_CHANGE_ADDRESS":return Cs(e,{changeAddress:t.value});case"RESET_NODES_SPEND":return yc(e,{value:[]});case"SET_BALANCE_ERROR":return Cs(e,{balanceError:t.value});case"SET_SPEND_STEP":return Cs(e,{spendingStep:t.value});default:return e}},signatureImporters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_TRANSACTION":return Object(q.a)({},hc);case"SET_REQUIRED_SIGNERS":return fc(0,t);case"SET_SIGNATURE_IMPORTER_NAME":return Ec(e,t,"name");case"SET_SIGNATURE_IMPORTER_METHOD":return Ec(e,t,"method");case"SET_SIGNATURE_IMPORTER_BIP32_PATH":return Ec(e,t,"bip32Path");case"SET_SIGNATURE_IMPORTER_SIGNATURE":return Ec(e,t,"signature");case"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS":return Ec(e,t,"publicKeys");case"SET_SIGNATURE_IMPORTER_FINALIZED":return Ec(e,t,"finalized");case"SET_SIGNATURE_IMPORTER_COMPLETE":return bc(e,t);default:return e}}}),Jc=Object(p.c)({deposits:Ds("UPDATE_DEPOSIT_SLICE"),change:Ds("UPDATE_CHANGE_SLICE"),common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_WALLET_MODE":return Cs(e,{walletMode:t.value});case"UPDATE_WALLET_NAME":return Cs(e,{walletName:t.value});case"RESET_WALLET_VIEW":return lc(e);case"INITIAL_LOAD_COMPLETE":return Cs(e,{nodesLoaded:!0});default:return e}}}),Qc=Object(p.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ns,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK":return Cs(e,{network:t.value});case"SET_TOTAL_SIGNERS":return Cs(e,{totalSigners:t.value});case"SET_REQUIRED_SIGNERS":return Cs(e,{requiredSigners:t.value});case"SET_ADDRESS_TYPE":return Cs(e,{addressType:t.value});case"SET_FROZEN":return Cs(e,{frozen:t.value});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CLIENT_TYPE":return Cs(e,{type:t.value});case"SET_CLIENT_URL":return Cs(e,{url:t.value});case"SET_CLIENT_USERNAME":return Cs(e,{username:t.value});case"SET_CLIENT_PASSWORD":return Cs(e,{password:t.value});case"SET_CLIENT_URL_ERROR":return Cs(e,{urlError:t.value});case"SET_CLIENT_USERNAME_ERROR":return Cs(e,{usernameError:t.value});case"SET_CLIENT_PASSWORD_ERROR":return Cs(e,{passwordError:t.value});default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK":return oc(e,t);case"SET_ADDRESS_TYPE":return ic(e,t);case"SET_TOTAL_SIGNERS":return ac(e,t);case"SET_PUBLIC_KEY_IMPORTER_NAME":return nc(e,t,"name");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return nc(nc(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return nc(nc(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return nc(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return nc(e,t,"publicKey");case"SET_PUBLIC_KEY_IMPORTER_FINALIZED":return nc(sc(e,t),t,"finalized");case"MOVE_PUBLIC_KEY_IMPORTER_UP":return Qs(e,t);case"MOVE_PUBLIC_KEY_IMPORTER_DOWN":return $s(e,t);case"SORT_PUBLIC_KEY_IMPORTERS":return ec(e);case"UPDATE_MULTISIG_ADDRESS":return Cs(e,{address:t.value});default:return e}},spend:Zc,quorum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zs(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK":return qs(e,t);case"SET_ADDRESS_TYPE":return Ys(e,t);case"SET_TOTAL_SIGNERS":return Ws(e,t);case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME":return Hs(e,t,"name");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Hs(Hs(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH":return Hs(Hs(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD":return Hs(e,t,"method");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY":return Hs(e,t,"extendedPublicKey");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED":return Hs(Vs(e,t),t,"finalized");case"SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE":return Object(q.a)(Object(q.a)({},e),{configuring:t.value});default:return e}},wallet:Jc,testSuiteRun:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case si:return Object(q.a)(Object(q.a)({},e),{testRuns:Yc(t)});case ai:return Object(q.a)(Object(q.a)({},e),{started:!0,startedAt:Ri()(),currentTestRunIndex:0});case ri:return Object(q.a)(Object(q.a)({},e),{currentTestRunIndex:t.value});case mi:return Vc(e,t.testRunIndex,{startedAt:Ri()(),status:ia.ACTIVE});case hi:return Vc(e,t.testRunIndex,{endedAt:Ri()(),status:t.status,message:t.message});case fi:return Vc(e,t.testRunIndex,Gc);case Ei:return Vc(e,t.testRunIndex,{note:t.note});default:return e}},keystore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ac,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case si:return Object(q.a)(Object(q.a)({},e),{type:t.keystoreType,version:t.version});case ci:return Object(q.a)(Object(q.a)({},e),{note:t.value});case li:return Object(q.a)(Object(q.a)({},e),{status:t.value});default:return e}},errorNotification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pt:return Object(q.a)(Object(q.a)({},e),{open:!0,message:t.value});case mt:return Object(q.a)(Object(q.a)({},e),{open:!1,message:""});default:return e}}}),$c=function(e,t){var n=e;return"RESET_WALLET"!==t.type&&"RESET_APP_STATE"!==t.type||(n=void 0),Qc(n,t)},el=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,tl=Object(p.e)($c,el(Object(p.a)(f.a,E.a)));d.a.render(l.a.createElement(m.a,{store:tl},l.a.createElement(js,null)),document.getElementById("app")),function(){if("serviceWorker"in navigator){if(new URL("/caravan",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/caravan","/service-worker.js");ks?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Rs(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Rs(e)}))}}()},381:function(e,t,n){"use strict";var a=n(9);Object.defineProperty(t,"__esModule",{value:!0}),t.IndirectKeystoreInteraction=t.DirectKeystoreInteraction=t.UnsupportedInteraction=t.KeystoreInteraction=t.LEVELS=t.STATES=t.ERROR=t.WARNING=t.INFO=t.ACTIVE=t.PENDING=t.UNSUPPORTED=void 0,n(205),n(168),n(501),n(108),n(382),n(383),n(301),n(300),n(384),n(241),n(499);var r,o=(r=n(1123))&&r.__esModule?r:{default:r};function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n,a,r,o,i){try{var s=e[o](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){s(o,a,r,i,c,"next",e)}function c(e){s(o,a,r,i,c,"throw",e)}i(void 0)}))}}function l(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,n){return(u="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function E(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}t.UNSUPPORTED="unsupported";t.PENDING="pending";t.ACTIVE="active";t.INFO="info";t.WARNING="warning";t.ERROR="error";var b=["pending","active","unsupported"];t.STATES=b;var v=["info","warning","error"];t.LEVELS=v;var g=function(){function e(){h(this,e),this.environment=o.default.getParser(window.navigator.userAgent)}return E(e,[{key:"isSupported",value:function(){return!0}},{key:"messages",value:function(){return[]}},{key:"messagesFor",value:function(e){var t=e.state,n=e.level,a=e.code,r=e.text,o=e.version;return this.messages().filter((function(e){return(!t||e.state===t)&&((!n||e.level===n)&&(!(a&&!(e.code||"").match(a))&&(!(r&&!(e.text||"").match(r))&&!(o&&!(e.version||"").match(o)))))}))}},{key:"hasMessagesFor",value:function(e){var t=e.state,n=e.level,a=e.code,r=e.text,o=e.version;return this.messagesFor({state:t,level:n,code:a,text:r,version:o}).length>0}},{key:"messageFor",value:function(e){var t=e.state,n=e.level,a=e.code,r=e.text,o=e.version,i=this.messagesFor({state:t,level:n,code:a,text:r,version:o});return i.length>0?i[0]:null}},{key:"messageTextFor",value:function(e){var t=e.state,n=e.level,a=e.code,r=e.text,o=e.version,i=this.messageFor({state:t,level:n,code:a,text:r,version:o});return i?i.text:null}}]),e}();t.KeystoreInteraction=g;var y=function(e){function t(e){var n,a=e.text,r=e.code;return h(this,t),(n=l(this,d(t).call(this))).text=a,n.code=r,n}return p(t,e),E(t,[{key:"isSupported",value:function(){return!1}},{key:"messages",value:function(){var e=u(d(t.prototype),"messages",this).call(this);return e.push({state:"unsupported",level:"error",code:this.code,text:this.text}),e}},{key:"run",value:function(){var e=c(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error(this.text);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"request",value:function(){throw new Error(this.text)}},{key:"parse",value:function(){throw new Error(this.text)}}]),t}(g);t.UnsupportedInteraction=y;var P=function(e){function t(){var e;return h(this,t),(e=l(this,d(t).call(this))).direct=!0,e}return p(t,e),E(t,[{key:"run",value:function(){var e=c(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Override the `run` method in this interaction.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"request",value:function(){throw new Error("This interaction is direct and does not support a `request` method.")}},{key:"parse",value:function(){throw new Error("This interaction is direct and does not support a `parse` method.")}}]),t}(g);t.DirectKeystoreInteraction=P;var S=function(e){function t(){var e;return h(this,t),(e=l(this,d(t).call(this))).indirect=!0,e}return p(t,e),E(t,[{key:"request",value:function(){throw new Error("Override the `request` method in this interaction.")}},{key:"parse",value:function(e){throw console.log(e),new Error("Override the `parse` method in this interaction.")}},{key:"run",value:function(){var e=c(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("This interaction is indirect and does not support a `run` method.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),t}(g);t.IndirectKeystoreInteraction=S},484:function(e,t,n){},8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={VERSION:!0,DIRECT_KEYSTORES:!0,INDIRECT_KEYSTORES:!0,KEYSTORES:!0,GetMetadata:!0,ExportPublicKey:!0,ExportExtendedPublicKey:!0,SignMultisigTransaction:!0,ConfirmMultisigAddress:!0};t.GetMetadata=function(e){switch(e.keystore){case i.TREZOR:return new i.TrezorGetMetadata;case s.LEDGER:return new s.LedgerGetMetadata;default:return new o.UnsupportedInteraction({code:"unsupported",text:"This keystore does not return a version."})}},t.ExportPublicKey=function(e){var t=e.keystore,n=e.network,a=e.bip32Path;switch(t){case i.TREZOR:return new i.TrezorExportPublicKey({network:n,bip32Path:a});case s.LEDGER:return new s.LedgerExportPublicKey({bip32Path:a});case c.HERMIT:return new c.HermitExportPublicKey({bip32Path:a});default:return new o.UnsupportedInteraction({code:"unsupported",text:"This keystore is not supported when exporting public keys."})}},t.ExportExtendedPublicKey=function(e){var t=e.keystore,n=e.network,a=e.bip32Path;switch(t){case i.TREZOR:return new i.TrezorExportExtendedPublicKey({network:n,bip32Path:a});case c.HERMIT:return new c.HermitExportExtendedPublicKey({bip32Path:a});case s.LEDGER:return new s.LedgerExportExtendedPublicKey({network:n,bip32Path:a});default:return new o.UnsupportedInteraction({code:"unsupported",text:"This keystore is not supported when exporting extended public keys."})}},t.SignMultisigTransaction=function(e){var t=e.keystore,n=e.network,a=e.inputs,r=e.outputs,l=e.bip32Paths;switch(t){case i.TREZOR:return new i.TrezorSignMultisigTransaction({network:n,inputs:a,outputs:r,bip32Paths:l});case s.LEDGER:return new s.LedgerSignMultisigTransaction({network:n,inputs:a,outputs:r,bip32Paths:l});case c.HERMIT:return new c.HermitSignTransaction({inputs:a,outputs:r,bip32Paths:l});default:return new o.UnsupportedInteraction({code:"unsupported",text:"This keystore is not supported when signing multisig transactions."})}},t.ConfirmMultisigAddress=function(e){var t=e.keystore,n=e.network,a=e.bip32Path,r=e.multisig;switch(t){case i.TREZOR:return new i.TrezorConfirmMultisigAddress({network:n,bip32Path:a,multisig:r});default:return new o.UnsupportedInteraction({code:"unsupported",text:"This keystore is not supported when confirming multisig addresses."})}},t.KEYSTORES=t.INDIRECT_KEYSTORES=t.DIRECT_KEYSTORES=t.VERSION=void 0,n(729),n(497),n(736),n(499),n(168),n(169),n(240),n(108),n(299),n(300);var r=n(1116),o=n(381);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=n(1124);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var s=n(1247);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var c=n(1259);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var d=r.version;t.VERSION=d;var p={TREZOR:i.TREZOR,LEDGER:s.LEDGER};t.DIRECT_KEYSTORES=p;var m={HERMIT:c.HERMIT};t.INDIRECT_KEYSTORES=m;var h=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},p,{},m);t.KEYSTORES=h},831:function(e){e.exports=JSON.parse('{"a":"0.2.0"}')},838:function(e,t,n){e.exports=n(1284)},870:function(e,t){},873:function(e,t){},893:function(e,t){},895:function(e,t){},905:function(e,t){},907:function(e,t){}},[[838,1,2]]]);
//# sourceMappingURL=main.30718a46.chunk.js.map