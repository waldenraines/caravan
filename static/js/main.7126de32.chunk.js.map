{"version":3,"sources":["components/ScriptExplorer/styles.module.scss","../../unchained-bitcoin/lib/block_explorer.js","../../unchained-bitcoin/lib/fixtures.js","../../unchained-wallets/lib/coldcard.js","../../unchained-wallets/lib/custom.js","../../unchained-wallets/lib/hermit.js","../../unchained-wallets/lib/ledger.js","../../unchained-wallets/lib/trezor.js","images/logo.png","utils/constants.js","utils/ExternalLink.jsx","utils/index.js","components/Disclaimer.jsx","components/Help.jsx","block_explorer.js","bitcoind.js","blockchain.js","utils/slices.js","selectors/wallet.js","actions/transactionActions.js","actions/errorNotificationActions.js","actions/walletActions.js","actions/braidActions.js","components/BitcoinIcon.jsx","components/EditableName.jsx","components/Wallet/WalletInfoCard.jsx","actions/settingsActions.js","components/NetworkPicker.jsx","components/QuorumPicker.jsx","components/AddressTypePicker.jsx","actions/utils.js","actions/clientActions.js","components/ClientPicker/PrivateClientSettings.jsx","components/ClientPicker/index.jsx","components/StartingAddressIndexPicker.jsx","components/Wallet/ConfirmWallet.jsx","proptypes/utils.js","proptypes/slice.js","proptypes/client.js","proptypes/settings.js","components/Copyable.jsx","components/ScriptExplorer/UTXOSet.jsx","components/MultisigDetails.jsx","components/ImportAddressesButton.jsx","actions/signatureImporterActions.js","components/ScriptExplorer/TextSignatureImporter.jsx","components/InteractionMessages.jsx","components/ScriptExplorer/DirectSignatureImporter.jsx","components/Hermit/HermitReader.jsx","components/Hermit/HermitDisplayer.jsx","components/Hermit/HermitSignatureImporter.jsx","components/ScriptExplorer/IndirectSignatureImporter.jsx","components/Coldcard/ColdcardFileReader.jsx","components/Coldcard/ColdcardSigningButtons.jsx","components/Coldcard/ColdcardSigner.jsx","components/Coldcard/ColdcardSignatureImporter.jsx","components/ScriptExplorer/SignatureImporter.jsx","components/Wallet/ExtendedPublicKeySelector.jsx","components/Slices/ConfirmAddress.jsx","components/Slices/SliceDetails.jsx","components/Slices/SlicesTable.jsx","components/Wallet/WalletDeposit.jsx","components/Wallet/AddressExpander.jsx","components/Wallet/Node.jsx","components/Wallet/NodeSet.jsx","components/ScriptExplorer/OutputEntry.jsx","components/ScriptExplorer/OutputsForm.jsx","components/Wallet/constants.js","components/ScriptExplorer/Transaction.jsx","components/UnsignedTransaction.jsx","components/Wallet/WalletSign.jsx","components/Wallet/TransactionPreview.jsx","components/Wallet/WalletSpend.jsx","components/Slices/SlicesTableContainer.jsx","components/Wallet/WalletControl.jsx","components/Wallet/WalletConfigInteractionButtons.jsx","actions/extendedPublicKeyImporterActions.js","components/Wallet/WalletGenerator.jsx","components/Wallet/DirectExtendedPublicKeyImporter.jsx","components/Wallet/TextExtendedPublicKeyImporter.jsx","components/CreateAddress/Conflict.jsx","components/Wallet/IndirectExtendedPublicKeyImporter.jsx","components/Coldcard/ColdcardExtendedPublicKeyImporter.jsx","components/Hermit/HermitExtendedPublicKeyImporter.jsx","components/Wallet/ExtendedPublicKeyImporter.jsx","components/Wallet/WalletActionsPanel.jsx","components/Wallet/index.jsx","actions/publicKeyImporterActions.js","components/CreateAddress/AddressGenerator.jsx","components/CreateAddress/TextPublicKeyImporter.jsx","components/CreateAddress/ExtendedPublicKeyPublicKeyImporter.jsx","components/CreateAddress/HermitPublicKeyImporter.jsx","components/CreateAddress/HardwareWalletPublicKeyImporter.jsx","components/CreateAddress/PublicKeyImporter.jsx","components/CreateAddress/index.jsx","actions/testSuiteRunActions.js","actions/keystoreActions.js","actions/testRunActions.js","components/TestSuiteRun/Note.jsx","components/TestSuiteRun/KeystorePicker.jsx","tests/Test.js","components/TestSuiteRun/TestSuiteRunSummary.jsx","components/TestSuiteRun/TestRun.jsx","components/TestSuiteRun/Seed.jsx","components/TestSuiteRun/index.jsx","components/ScriptExplorer/ScriptEntry.jsx","actions/ownershipActions.js","components/ScriptExplorer/ConfirmOwnership.jsx","components/ScriptExplorer/index.jsx","components/Navbar.jsx","components/Footer.jsx","components/ErrorBoundary.jsx","components/ErrorNotification.jsx","components/App.jsx","components/AppContainer.jsx","registerServiceWorker.js","reducers/utils.js","reducers/settingsReducer.js","reducers/clientReducer.js","reducers/braidReducer.js","reducers/quorumReducer.js","reducers/addressReducer.js","reducers/walletReducer.js","reducers/ownershipReducer.js","reducers/signatureImportersReducer.js","reducers/transactionReducer.js","reducers/keystoreReducer.js","tests/publicKeys.jsx","tests/extendedPublicKeys.jsx","tests/signing.jsx","tests/trezor.js","tests/ledger.js","tests/hermit.js","tests/coldcard.js","tests/index.js","reducers/testSuiteRunReducer.js","reducers/errorNotificationReducer.js","reducers/index.js","index.jsx","../../unchained-bitcoin/lib/p2sh_p2wsh.js","../../unchained-bitcoin/lib/p2wsh.js","../../unchained-bitcoin/lib/networks.js","../../unchained-bitcoin/lib/utils.js","../../unchained-bitcoin/lib/multisig.js","../../unchained-bitcoin/lib/p2sh.js","../../unchained-wallets/lib/interaction.js","../../unchained-bitcoin/lib/fees.js","components/Coldcard/ColdcardFileReader.module.scss","../../unchained-bitcoin/lib/paths.js","../../unchained-bitcoin/lib/index.js","../../unchained-bitcoin/lib/braid.js","../../unchained-bitcoin/lib/inputs.js","../../unchained-wallets/lib/index.js","../../unchained-bitcoin/lib/addresses.js","../../unchained-bitcoin/lib/keys.js","../../unchained-bitcoin/lib/outputs.js","../../unchained-bitcoin/lib/psbt.js","../../unchained-bitcoin/lib/script.js","../../unchained-bitcoin/lib/signatures.js","../../unchained-bitcoin/lib/transactions.js"],"names":["module","exports","Object","defineProperty","value","blockExplorerURL","blockExplorerAPIURL","path","network","concat","blockExplorerBaseURL","blockExplorerTransactionURL","txid","blockExplorerAddressURL","address","_networks","require","TESTNET","TEST_FIXTURES","ROOT_FINGERPRINT","obj","_TESTNET","_MAINNET","_RECEIVING_ADDRESSES","_TESTNET2","_MAINNET2","_CHANGE_ADDRESSES","_bignumber","__esModule","default","_multisig","_inputs","_p2sh","_p2sh_p2wsh","_p2wsh","_braid","_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","keys","length","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toConsumableArray","arr","Array","isArray","arr2","_arrayWithoutHoles","iter","Symbol","iterator","toString","from","_iterableToArray","TypeError","_nonIterableSpread","configurable","writable","RECEIVING_ADDRESSES","P2SH","P2SH_P2WSH","P2WSH","MAINNET","CHANGE_ADDRESSES","NODES","pub","xpub","tpub","zpub","ypub","Ypub","Zpub","upub","vpub","Upub","Jpub","chaincode","parentFingerprint","rootFingerprint","index","depth","extendedPublicKey","base58String","pubkey","version","open_source","unchained","BRAIDS","addressType","extendedPublicKeys","stringExtendedPublicKeys","requiredSigners","pubKeySets","0","1","48349","bip32Derivations","masterFingerprint","Buffer","MULTISIGS","type","bip32Path","publicKey","publicKeys","changePublicKeys","redeemScriptOps","redeemScriptHex","scriptOps","scriptHex","utxos","amountSats","transactionHex","transaction","outputs","bip32Derivation","redeemScript","hex","signature","changeBip32Derivation","braidDetails","changeBraidDetails","psbtNoChange","psbt","psbtPartiallySigned","witnessScriptOps","witnessScriptHex","witnessScript","map","test","multisig","generateMultisigFromPublicKeys","braidConfig","description","utxo","output","multisigScript","multisigRedeemScript","multisigWitnessScript","multisigScriptOps","multisigScriptHex","TRANSACTIONS","name","inputs","sortInputs","bip32Paths","segwit","format","derivation","slice","singleMultisigTransaction","bip39Phrase","nodes","reduce","openSourceNodes","node","_NODES$node","rest","unchainedNodes","braids","multisigs","transactions","ColdcardMultisigWalletConfig","ColdcardSignMultisigTransaction","ColdcardExportExtendedPublicKey","ColdcardExportPublicKey","ColdcardInteraction","COLDCARD_WALLET_CONFIG_VERSION","COLDCARD_BASE_BIP32_PATHS","COLDCARD","_unchainedBitcoin","_interaction","_typeof","constructor","_defineProperties","props","descriptor","_createClass","Constructor","protoProps","staticProps","_get","property","receiver","Reflect","get","base","hasOwnProperty","_getPrototypeOf","_superPropBase","desc","_classCallCheck","instance","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","replace","COLDCARD_BASE_CHROOTS","_IndirectKeystoreInte","this","IndirectKeystoreInteraction","ColdcardMultisigSettingsFileParser","_ColdcardInteraction","_ref","_this","find","net","Error","bip32ValidationErrorMessage","bip32ValidationError","validateColdcardBip32Path","messages","entries","state","PENDING","level","ERROR","code","text","INFO","chroot","startsWith","bip32PathError","validateBIP32Path","coldcardChroot","chrootForBIP32Path","relativePath","getRelativeBIP32Path","relativePathError","mode","unknownColdcardParentBip32PathError","file","data","JSON","parse","error","p2sh_deriv","p2sh","p2wsh_deriv","p2wsh","p2wsh_p2sh_deriv","p2wsh_p2sh","p2sh_p2wsh_deriv","p2sh_p2wsh","xpubClass","ExtendedPublicKey","fromBase58","xfp","xfpFromWithinXpub","fingerprintToFixedLengthHex","toLowerCase","result","knownColdcardChroot","includes","prefix","baseXpub","convertExtendedPublicKey","deriveChildExtendedPublicKey","_ColdcardMultisigSett","_ref2","xpubJSONFile","deriveDeeperXpubIfNecessary","_ColdcardMultisigSett2","_ref3","_ColdcardInteraction2","_ref4","_this2","unsignedMultisigPSBT","e","ACTIVE","psbtObject","signatures","parseSignaturesFromPSBT","_ref5","jsonConfig","uuid","quorum","totalSigners","every","isNaN","Number","repeat","join","CustomSignMultisigTransaction","CustomExportExtendedPublicKey","CustomInteraction","CUSTOM","_CustomInteraction","validationErrorMessages","undefined","pkLen","substring","validateRootFingerprint","message","numSlashes","split","bipDepth","_CustomInteraction2","parseHermitQRCodeData","encodeHermitQRCodeData","HermitSignTransaction","HermitExportExtendedPublicKey","HermitExportPublicKey","HermitDisplayer","HermitReader","HermitInteraction","HERMIT","_hiBase","_interopRequireDefault","_pako","encodedString","errorPrefix","compressedBytes","decode","asBytes","json","inflate","to","jsonString","stringify","deflate","gzip","encode","commandMessage","instructions","command","_HermitInteraction","reader","_HermitReader","displayer","_HermitReader2","_this3","bip32_path","deleteProperty","_HermitReader3","_this4","_HermitDisplayer","_this5","inputAddressType","inputsAreSupported","outputsAreSupported","match","input","multisigAddressType","MULTISIG_ADDRESS_TYPES","UNSUPPORTED","signatureRequestData","hermitInputsByRedeemScript","scriptToHex","amount","toNumber","values","inputSignature","LedgerSignMultisigTransaction","LedgerExportExtendedPublicKey","LedgerExportPublicKey","LedgerGetMetadata","LedgerBitcoinInteraction","LedgerDashboardInteraction","LedgerInteraction","LEDGER_BOTH_BUTTONS","LEDGER_RIGHT_BUTTON","LEDGER_LEFT_BUTTON","LEDGER","_splitTransaction","_serializeTransaction","_slicedToArray","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","next","done","err","_iterableToArrayLimit","_nonIterableRest","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","Promise","then","_asyncToGenerator","fn","args","TransportU2F","TransportWebUSB","LedgerBtc","_DirectKeystoreIntera","_withTransport","mark","_callee","callback","transport","_transport","wrap","_context","prev","environment","satisfies","firefox","sent","abrupt","t0","t1","stop","_x","withTransport","_callee2","app","_context2","_x2","_callee3","_context3","close","_x3","DirectKeystoreInteraction","_LedgerInteraction","_LedgerInteraction2","_LedgerDashboardInter","_run","_callee5","_context5","_callee4","rawResult","_context4","setScrambleKey","send","parseMetadata","finish","_x4","response","byteArray","targetId","readUIntBE","seVersionLength","seVersion","flagsLength","flags","mcuVersionLength","mcuVersion","allocUnsafeSlow","flag","_split2","Boolean","majorVersion","minorVersion","patchVersion","_split4","mcuMajorVersion","mcuMinorVersion","MODEL_RANGES","minTargetId","model","range","spec","major","minor","patch","string","console","LedgerExportHDNode","_LedgerBitcoinInterac","_ref6","indices","bip32PathToSequence","hardened0","hardenedBIP32Index","hardened44","hardened100","_getFingerprint","_callee6","root","fp","_args6","_context6","getMultisigRootPublicKey","getParentPublicKey","getFingerprintFromPublicKey","withApp","_ref7","_callee7","parentPath","_context7","getParentBIP32Path","getWalletPublicKey","_x5","_ref8","_callee8","_context8","_x6","_ref9","_callee9","_context9","_x7","_LedgerExportHDNode","_ref10","_ref10$includeXFP","includeXFP","_run2","_callee10","_context10","parsePublicKey","getFingerprint","compressPublicKey","_LedgerExportHDNode2","_ref11","_this6","_run3","_callee11","walletPublicKey","fingerprint","_context11","deriveExtendedPublicKey","chainCode","_LedgerBitcoinInterac2","_ref12","_this7","WARNING","preProcessingTime","postProcessingTime","anySegwitInputs","action","_this8","_ref13","_callee12","transactionSignature","_context12","setExchangeTimeout","signP2SHTransaction","ledgerInputs","associatedKeysets","ledgerKeysets","outputScriptHex","ledgerOutputScriptHex","lockTime","sigHashType","transactionVersion","_x8","_x9","signatureNoSighashType","inputTransaction","splitTransaction","scriptFn","_this9","ledgerBIP32Path","txHex","unsignedMultisigTransaction","toHex","splitTx","serializeTransactionOutputs","trezorCoin","TrezorConfirmMultisigAddress","TrezorSignMultisigTransaction","TrezorExportExtendedPublicKey","TrezorExportPublicKey","TrezorExportHDNode","TrezorGetMetadata","TrezorInteraction","TREZOR_PUSH_AND_HOLD_BUTTON","TREZOR_BOTH_BUTTONS","TREZOR_RIGHT_BUTTON","TREZOR_LEFT_BUTTON","TREZOR","_ADDRESS_SCRIPT_TYPES","_bitcoinjsLib","_index","TrezorConnect","ADDRESS_SCRIPT_TYPES","manifest","email","appUrl","_this$connectParams","_this$connectParams2","method","params","connectParams","success","payload","_TrezorInteraction","getFeatures","major_version","minor_version","patch_version","label","pin_protection","passphrase_protection","pin","passphrase","_TrezorInteraction2","keyMaterial","serializedPath","MULTISIG_ROOT","getPublicKey","bundle","coin","crossChain","_TrezorExportHDNode","_this$extractDetailsF","extractDetailsFromPayload","_TrezorExportHDNode2","_this$extractDetailsF2","_TrezorInteraction3","signTransaction","inputIndex","multisigRequiredSigners","multisigPublicKeys","script_type","m","pubkeys","trezorPublicKey","fill","prev_hash","prev_index","address_n","trezorInput","toFixed","trezorOutput","_TrezorInteraction4","getAddress","showOnTrezor","multisigAddress","scriptType","keyPair","ECPair","fromPublicKey","payments","p2pkh","networkData","child_num","chain_code","public_key","DUST_IN_BTC","satoshisToBitcoins","BigNumber","url","href","rel","downloadFile","body","filename","blob","Blob","window","navigator","msSaveOrOpenBlob","msSaveBlob","elem","document","createElement","URL","createObjectURL","download","appendChild","click","removeChild","naiveCoinSelection","options","changeRequired","slices","count","balance","balanceSats","plus","numInputs","walletBalance","outputTotal","total","selectedUtxos","inputTotal","spendAll","config","numOutputs","estimatedFees","estimateMultisigTransactionFee","isGreaterThan","minus","isLessThanOrEqualTo","isSpendAll","j","change","feesWithoutChange","feesWithChange","inputOutputDiff","isGreaterThanOrEqualTo","Disclaimer","Card","CardHeader","title","CardContent","Help","Box","mt","mb","Typography","variant","Grid","container","spacing","item","md","direction","alignItems","justify","xs","Button","data-cy","size","color","startIcon","AccountBalanceWallet","SportsVolleyball","List","ListItem","ListItemIcon","Description","ListItemText","externalLink","YouTube","GitHub","CardActions","BugReport","Speed","a","axios","utxosResult","all","transactionResult","confirmed","status","vout","time","block_time","addressesult","addressData","used","chain_stats","funded_txo_count","mempool_stats","feeEstimatesResult","feeEstimates","Math","ceil","post","broadcastResult","callBitcoind","auth","headers","Accept","jsonrpc","id","resp","catch","isWalletAddressNotFoundError","bitcoindParams","client","username","password","addresses","addressParam","promises","previousTransactions","mapindex","confirmations","bitcoinsToSatoshis","blocktime","bitcoindGetAddressStatus","warn","numBlocks","feeRate","feerate","log","bitcoindImportMulti","rescan","scriptPubKey","timestamp","fetchAddressUTXOsUnsorted","blockExplorerGetAddresesUTXOs","bitcoindListUnspent","fetchAddressUTXOs","updates","fetchedUTXOs","fetchUTXOsError","unsortedUTXOs","addressKnown","accumulator","currentValue","getAddressStatus","blockExplorerGetAddressStatus","fetchFeeEstimate","blockExplorerGetFeeEstimate","bitcoindEstimateSmartFee","broadcastTransaction","blockExplorerBroadcastTransaction","bitcoindSendRawTransaction","initSortDir","order","compareSlicesByPath","b","orderDir","aint","parseInt","reverse","bint","compareSlicesByBalance","isEqualTo","compareSlicesByUTXOCount","compareSlicesByTime","lastUsed","lastUsedTime","amax","max","bmax","isChange","prefixLength","DEFAULT_PREFIX","indexes","getDepositSlices","wallet","deposits","getWalletSlices","getTotalSigners","settings","extendedPublicKeyImporterBIP32Path","number","extendedPublicKeyImporter","extendedPublicKeyImporters","rootXfp","getTotalBalance","createSelector","getPendingBalance","currentSlice","getConfirmedBalance","totalBalance","pendingBalance","getSlicesWithLastUsed","addressUsed","maxtime","Date","toLocaleDateString","getSpendableSlices","getSpentSlices","getSlicesWithBalance","getZeroBalanceSlices","getUnknownAddressSlices","getUnknownAddresses","getDepositableSlices","getWalletDetailsText","common","walletName","extendedPublicKeyImporterBIP32Paths","startingAddressIndex","clientDetails","setRequiredSigners","setInputs","addOutput","setChangeOutputIndex","setOutputAddress","setOutputAmount","amountString","setChangeAddressAction","deleteOutput","setFeeRate","valueString","setFee","finalizeOutputs","finalized","setBalanceError","updateAutoSpendAction","setSigningKey","extendedPublicKeyImporterIndex","setSpendStep","SET_ERROR_NOTIFICATION","CLEAR_ERROR_NOTIFICATION","setErrorNotification","clearErrorNotification","WALLET_MODES","updateDepositSliceAction","updateChangeSliceAction","updateWalletNameAction","resetWalletView","resetWallet","fetchSliceData","dispatch","getState","sliceDataPromises","addressStatus","updater","updatedSlice","BitcoinIcon","SvgIcon","htmlColor","xmlns","aria-hidden","focusable","data-prefix","data-icon","className","role","viewBox","d","defaultProps","EditableName","componentDidMount","setState","newName","render","editing","TextField","autoFocus","onChange","handleChange","onFocus","event","setTimeout","select","bind","onKeyDown","submit","hasError","helperText","IconButton","onClick","disabled","Check","cancel","Clear","startEditing","Edit","style","cursor","preventDefault","setName","React","Component","useStyles","makeStyles","theme","height","fontSize","gutter","paddingLeft","paddingRight","paddingTop","WalletInfoCard","editable","classes","fontWeight","NETWORKS","setNetwork","setTotalSigners","setAddressType","setFrozen","NetworkPicker","handleNetworkChange","frozen","FormControl","component","RadioGroup","FormControlLabel","control","Radio","checked","FormHelperText","mapDispatchToProps","setNetworkAction","connect","QuorumPicker","renderIncrementRequiredSigners","handleIncrementRequiredSigners","AddCircle","renderDecrementRequiredSigners","handleDecrementRequiredSigners","RemoveCircle","renderIncrementTotalSigners","handleIncrementTotalSigners","renderDecrementTotalSigners","handleDecrementTotalSigners","setTotalSignersAction","setRequiredSignersAction","AddressTypePicker","handleTypeChange","setType","actionWrapper","wrappedActions","mapping","actionIndex","wrappedMapping","actionFunctionNames","actionFunctionName","actionType","numberedActionWrapper","wrappedNumberedActions","PrivateClientSettings","handleUrlChange","handleUsernameChange","handlePasswordChange","urlError","usernameError","passwordError","privateNotes","connectSuccess","connectError","testConnection","fullWidth","ClientPicker","setUrl","urlEdited","setUrlError","validateUrl","setUsername","setUsernameError","validateUsername","setPassword","setPasswordError","validatePassword","onSuccess","host","exec","StartingAddressIndexPicker","handleIndexChange","setStartingAddressIndex","validateBIP32Index","startingAddressIndexField","startingAddressIndexError","handleCustomIndexChange","customIndex","Tooltip","WalletConfirmation","Alert","severity","Table","TableHead","TableRow","TableCell","TableBody","renderConfirmationInfo","importer","bigNumberPropTypes","c","PropTypes","arrayOf","isRequired","s","bool","array","shape","copyText","Copyable","newline","children","showIcon","showText","otherProps","useState","copied","setCopied","timer","setTimer","enqueueSnackbar","useSnackbar","useEffect","clearTimeout","TextComponent","stopPropagation","onCopy","timerTimeout","shortenedText","preventDuplicate","showSnackbarMessage","fontStyle","overflowWrap","FileCopy","UTXOSet","renderInputs","confirmedStyle","styles","utxoTxid","unconfirmed","confirmedTitle","hover","OpenInNew","inputsTotalSats","TableFooter","colSpan","MultisigDetails","renderScript","script","ops","scriptToOps","sm","showAddress","maxWidth","align","Chip","networkLabel","multisigTotalSigners","tooltip","ImportAddressesButton","importCallback","imported","setImported","importError","setImportError","setRescanPreference","addressesError","setAddressesError","enableImport","setEnableImport","checkAddress","errorMessage","statusText","pluralOrSingularAddress","capitalize","responseError","successes","addr","rescanTooltip","ml","Switch","setSignatureImporterName","setSignatureImporterMethod","setSignatureImporterBIP32Path","setSignatureImporterPublicKeys","setSignatureImporterSignature","setSignatureImporterFinalized","setSignatureImporterComplete","TextSignatureImporter","signatureJSON","multiline","rows","finalize","setError","parseError","validateAndSetSignature","MessagesList","maxHeight","overflow","dense","renderMessage","messageIcon","renderMessageBodyAndSubmessages","renderMessageBody","image","src","mimeType","alt","Warning","VersionTabPanel","currentVersion","hidden","aria-labelledby","filteredMessages","InteractionMessages","versions","Paper","square","Tabs","aria-label","Tab","aria-controls","newValue","excludeCodes","excludeCode","DirectSignatureImporter","resetBIP32Path","interaction","signatureImporter","keystore","SignMultisigTransaction","isWallet","messageTextFor","handleBIP32PathChange","hasBIP32PathError","bip32PathIsDefault","renderAction","renderDeviceConfirmInfo","messagesFor","fee","renderTargets","signatureError","sign","hasMessagesFor","setBIP32PathError","validateAndSetBIP32Path","defaultBIP32Path","disableChangeMethod","enableChangeMethod","run","stateUpdate","isSupported","width","startText","messageFor","handleStart","delay","onError","handleError","onScan","handleScan","facingMode","handleStop","onStart","onClear","HermitSignatureImporter","request","import","clear","IndirectSignatureImporter","Signer","FormGroup","onReceive","onReceivePSBT","setActive","signatureData","signatureSetsKeys","errorType","ColdcardFileReaderBase","maxFileSize","validFileFormats","isTest","fileType","dropzoneDull","dropzone","onDrop","multiple","minSize","maxSize","accept","disableClick","uploadIcon","instruction","singleAcceptedFile","acceptedFiles","rejectedFiles","FileReader","onload","readAsText","ColdcardJSONReader","ColdcardPSBTReader","ColdcardSigningButtons","handlePSBTDownloadClick","handleWalletConfigDownloadClick","ColdcardSigner","toBase64","moment","walletDetailsText","reshapeConfig","walletDetails","walletConfig","ConfigAdapter","KEYSTORE","adapt","ColdcardSignatureImporter","SignatureImporter","titleRef","createRef","scrollToTitle","componentDidUpdate","getCurrent","current","scrollIntoView","behavior","renderImport","notMyTurn","labelId","InputLabel","Select","handleMethodChange","MenuItem","renderImportByMethod","signatureImporters","setMethod","reset","setSignature","setPublicKeys","setFinalized","multisigBIP32Root","multisigBIP32Path","setBIP32Path","errback","renderSignature","inputsSignatures","setComplete","numSignatureSets","finalizedSignatureImporters","inputNumber","validateHex","validateMultisigSignature","finalizedSignatureImporterNum","finalizedSignatureImporter","signaturesToCheck","filterKnownSignatures","signatureSetNumber","signatureSet","publicKeySet","knownSignatures","x","k","ref","setSigningKeyAction","ownProps","spend","ExtendedPublicKeySelector","signingKeys","updateKeySelection","selection","renderKeySelectorMenu","renderSignatureImporter","getAssociatedExtendedPublicKeyImporter","associatedExtendedPublicKeyImporter","handleKeyChange","renderKeySelectorMenuItems","extendedPublicKeyImporterNotUsed","derivedKey","deriveChildPublicKey","importerIndex","publicKeyIndex","extendedPublicKeyImporterNum","importMethod","initialInteractionState","keySelected","deviceType","hasInteraction","interactionState","interactionError","interactionMessage","interactionReducer","ConfirmAddress","useReducer","setInteraction","_event","fullBip32Path","ConfirmMultisigAddress","flexGrow","backgroundColor","palette","background","paper","createTab","tab","tooltipTab","a11yProps","arrow","TabPanel","other","display","SliceDetails","tabIndex","setTabIndex","tabs","panel","my","AppBar","position","newIndex","centered","boxShadow","grey","spent","textDecoration","SlicesTable","search","paging","detailPanelType","showTitle","emptyRowsWhenPaging","pageSize","pageSizeOptions","toolbar","columns","field","rowData","defaultSort","customSort","sorting","column","detailPanel","depositTimer","WalletDeposit","getNextDepositAddress","depositIndex","getDepositAddress","updateDepositSlice","depositableSlices","clearInterval","setInterval","resetDepositAddressIndex","handleAmountChange","decimal","amountError","qrString","InputProps","endAdornment","InputAdornment","anchor","resetWalletViewAction","withSnackbar","AddressExpander","defaultMode","addressContent","expandMode","showMenu","showMenuIcon","handleMenu","float","hasAdditionalOptions","aria-haspopup","Menu","anchorEl","keepMounted","open","onClose","handleClose","selected","canConfirm","panelExpand","expanded","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","expandContent","renderAddressConfirmation","confirmAddressDescription","confirmOnDevice","resetInteractionState","Node","generate","walletMode","spending","Checkbox","handleSpend","maxUtxoDate","renderAddress","braidNode","present","addNode","updateNode","updateAutoSpend","setInputsAction","setFeeRateAction","updateAutoSpendActionImport","braid","NodeSet","sortAddresses","orderBy","page","renderFilters","filterIncludeSpent","filterIncludeZeroBalance","row","FormLabel","mr","filterAddresses","getNodeSet","changeNodes","depositNodes","returnValue","nodeSet","sort","amin","min","bmin","nodesObject","currentNode","renderNodes","nodesPerPage","startingIndex","nodesRows","whichOne","nodeRow","handlePageChange","handleChangeRowsPerPage","pageCount","rowCount","tableLayout","TableSortLabel","active","TablePagination","rowsPerPage","backIconButtonProps","nextIconButtonProps","onChangePage","onChangeRowsPerPage","OutputEntry","displayBalanceAction","finalizedOutputs","autoSpend","hasBalanceError","isBalanceable","addChangeAddress","changeNode","setAddress","setChangeOutput","renderChangeAdornment","changeOutputIndex","disable","placement","handleAddressChange","hasAddressError","addressError","setAmount","hasAmountError","isNotBalanceable","feeError","newAmount","autoBalancedAmount","validateOutputAmount","balanceError","outputTotalSats","feeSats","balanceAction","handleBalance","handleDelete","remove","handleMaxSpend","setMaxSpend","gridSpacing","placeholder","outputsFormInput","startAdornment","maxSpend","Delete","outputIndex","spendableSlices","confirmedBalance","estimatedFee","n","feesPerByteInSatoshis","totalOutputValue","spendAllAmount","isLessThan","nextNode","OutputsForm","outputsTotal","initialOutputState","renderOutputs","inputsTotal","outputsAndFeeTotal","updatesComplete","hasFeeRateFetchError","feeRateFetchError","hasFeeRateError","feeRateError","hasFeeError","handleAddOutput","handleFeeRateChange","rate","parseFloat","handleFeeChange","handleFinalize","handleReset","resetOutputs","getFeeEstimate","feeEstimate","gatherSignaturesDisabled","inputProps","outputAmount","feeDisplay","outputsFormLabel","minimum","step","unitLabel","readOnly","disableUnderline","addOutputAction","setOutputAmountAction","setFeeAction","finalizeOutputsAction","Transaction","buildSignedTransaction","signedMultisigTransaction","handleBroadcast","setTxid","signedTransaction","broadcasting","transactionURL","signedTransactionHex","UnsignedTransaction","showUnsignedTransaction","unsignedTransaction","handleHideUnsignedTransaction","handleShowUnsignedTransaction","WalletSign","renderKeySelectors","keySelectors","keySelectorNum","signaturesFinalized","handleReturn","resetTransaction","handleCancel","changeSlice","updateTxSlices","retries","skipAddresses","Set","changeAddress","nextDepositSlice","depositSlices","changeSlices","fetchSliceStatus","sliceUpdates","addressSet","has","add","queriedSlices","utxoCount","setSpendStepAction","TransactionPreview","renderAddresses","addressWithUtxos","mapAddresses","renderOutputAddresses","mapped","mappedAddresses","editTransaction","handleSignTransaction","setChangeOutputMultisig","WalletSpend","outputsAmount","coinSelection","feeAmount","prevProps","showPreview","previewDisabled","showSignTransaction","handleShowPreview","autoSelectCoins","showCreate","resetNodesSpend","deleteChangeOutput","handleSpendMode","spendingStep","changeAmount","updateChangeSlice","setChangeAddress","SlicesTableContainer","setDisplaySlices","displaySlices","slicesWithBalance","newProps","zeroBalanceSlices","spentSlices","newDisplaySlices","PureComponent","WalletControl","scrollRef","handleModeChange","indicatorColor","textColor","addressesAreLoaded","renderModeComponent","progress","textAlign","marginBottom","CircularProgress","LinearProgress","trailingEmptyNodes","nodesLoaded","fetchUTXOsErrors","setMode","WalletConfigInteractionButtons","onClearFn","onDownloadFn","sessionStorage","removeItem","handleClearClick","setExtendedPublicKeyImporterName","resetExtendedPublicKeyImporterBIP32Path","setExtendedPublicKeyImporterBIP32Path","setExtendedPublicKeyImporterMethod","setExtendedPublicKeyImporterExtendedPublicKey","setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint","setExtendedPublicKeyImporterFinalized","setExtendedPublicKeyImporterVisible","WalletGenerator","extendedPublicKeyCount","cb","toggleImporters","setImportersVisible","configuring","initialLoadComplete","setGenerating","freeze","startingDepositBIP32Suffix","startingChangeBIP32Suffix","update","attemptToKeepGenerating","generateMultisig","multisigUpdates","generateRichExtendedPublicKeys","generateBraid","deriveMultisigByPath","fetchUTXOs","utxoUpdates","generateNextNodeIfNecessary","allBIP32Paths","p1","p2","p1Segments","p2Segments","pathSegments","maxIndex","nextBIP32Path","refreshNodes","resetNodesFetchErrors","allNodes","previousFetchErrors","unknownClient","debouncedTestConnection","debounce","trailing","leading","prevPassword","setIsWallet","setRootFingerprint","setBip32Path","addBase58String","downloadWalletDetails","generating","hasConflict","some","conflict","ConfirmWallet","defaultValue","onSubmit","handlePasswordEnter","fetchSliceDataAction","resetWalletAction","DirectExtendedPublicKeyImporter","ExportExtendedPublicKey","extendedPublicKeyError","validateAndSetExtendedPublicKey","validateAndSetRootFingerprint","TextExtendedPublicKeyImporter","Conflict","IndirectExtendedPublicKeyImporter","Reader","ColdcardExtendedPublicKeyImporter","COLDCARD_MULTISIG_BIP32_PATH","getColdcardBip32Path","coinPath","coldcardP2SHPath","resetColdcardBIP32Path","coldcardBIP32Path","HermitExtendedPublicKeyImporter","ExtendedPublicKeyImporter","setExtendedPublicKey","renderBIP32Path","renderExtendedPublicKey","conversionMessage","conversionAppend","networkError","validateExtendedPublicKey","actualExtendedPublicKey","validationError","setExtendedPublicKeyRootXfp","finalizedNetwork","conflictMessage","ExtendedPublicKeyImporterWithStyles","withStyles","lineHeight","card","flexDirection","cardContent","flex","pointerEvents","MuiButton","ButtonWithTooltip","tooltipText","adjustedButtonProps","WalletActionsPanel","handleRefresh","onClearConfig","onDownloadConfig","onImportAddresses","refreshing","walletActivated","ButtonGroup","RefreshOutlined","GetAppOutlined","ExitToAppOutlined","CreateWallet","handleImport","fileReader","files","configJson","setConfigJson","configError","refresh","generatorRefresh","resetErrorAndClearTargetValue","importDetails","setClientType","setClientUrl","setClientUsername","walletConfiguration","renderWalletImporter","htmlFor","marginTop","renderSettings","renderExtendedPublicKeyImporters","walletDetailsFilename","clearConfig","unknownAddresses","walletLoadError","afterImportAddresses","padding","properties","configObj","validProperties","validateProperties","String","clientProperties","validClient","validQuorum","validateExtendedPublicKeys","xpubs","tmpNetwork","xpubFields","pathError","seen","xpubIndex","keyIndex","valueError","getItem","validateConfig","setItem","_val","val","importedAddresses","unknownSlices","importedSlices","updateWalletNameActionImport","setAddressTypeAction","setExtendedPublicKeyImporterMethodAction","setExtendedPublicKeyImporterExtendedPublicKeyAction","setExtendedPublicKeyImporterBIP32PathAction","setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprintAction","setExtendedPublicKeyImporterNameAction","setExtendedPublicKeyImporterFinalizedAction","setExtendedPublicKeyImporterVisibleAction","setClientPassword","updateDepositNode","updateChangeNode","walletSelectors","setPublicKeyImporterName","resetPublicKeyImporterBIP32Path","setPublicKeyImporterBIP32Path","setPublicKeyImporterMethod","setPublicKeyImporterPublicKey","setPublicKeyImporterFinalized","movePublicKeyImporterUp","movePublicKeyImporterDown","AddressGenerator","isInConflict","publicKeyImporters","publicKeyCount","validatePublicKey","publicKeysAreCanonicallySorted","publicKeyImporter","sortedPublicKeys","canonicallySortPublicKeys","sortPublicKeyImporters","setMultisigAddress","publicKeyImporterNum","downloadAddressDetails","addressDetailsText","addressDetailsFilename","redeemScriptLine","witnessScriptLine","scriptsSpacer","publicKeyImporterBIP32Paths","publicKeyImporterBIP32Path","canonicallySorted","TextPublicKeyImporter","validateAndSetPublicKey","ExtendedPublicKeyPublicKeyImporter","setBIP32PathToDefault","handleExtendedPublicKeyChange","hasExtendedPublicKeyError","validateExtendedPublicKeyForNetwork","HermitPublicKeyImporter","ExportPublicKey","publicKeyError","HardwareWalletPublicKeyImporter","PublicKeyImporter","moveUp","ArrowUpward","moveDown","ArrowDownward","setPublicKey","renderPublicKey","publicKeyImporterIndex","CreateAddress","renderPublicKeyImporters","publicNotes","START_TEST_SUITE_RUN","SET_CURRENT_TEST_RUN","startTestSuiteRun","setCurrentTestRun","runIndex","SET_KEYSTORE","SET_KEYSTORE_NOTE","SET_KEYSTORE_STATUS","setKeystore","keystoreType","setKeystoreNote","setKeystoreStatus","START_TEST_RUN","END_TEST_RUN","RESET_TEST_RUN","SET_TEST_RUN_NOTE","startTestRun","testRunIndex","endTestRun","resetTestRun","setTestRunNote","note","NoteBase","setNote","newNote","mapDispatchToKeystoreNoteProps","mapDispatchToTestRunNoteProps","KeystoreNote","TestRunNote","testSuiteRun","currentTestRunIndex","testRuns","NO_VERSION_DETECTION","INDIRECT_KEYSTORES","KeystorePickerBase","detectVersion","GetMetadata","handleVersionChange","keystoreActions","setErrorNotificationAction","KeystorePicker","Test","thing","expected","actual","diffChars","diffArrays","diffJson","postprocess","sendToResolver","matches","diff","SUCCESS","FAILURE","TestSuiteRunSummaryBase","Bowser","getParser","userAgent","getOSName","getOSVersion","getBrowserName","getBrowserVersion","UNCHAINED_WALLETS_VERSION","keystoreName","subheader","renderTests","testRun","Divider","renderTestRun","button","testRunChooser","started","renderTestRunResult","duration","endedAt","startedAt","asSeconds","setCurrentTestRunAction","TestSuiteRunSummary","TestRunBase","addEventListener","handleKeyDown","componentWillUnmount","removeEventListener","isLastTest","nextTest","keyCode","tagName","start","handleDownloadPSBTClick","nameBits","handledDownloadWalletConfigClick","startParse","renderInteractionMessages","testComplete","renderResult","handleResult","runParse","formatMessage","formatOutput","formatDiffSegment","segment","diffSegmentClass","added","removed","testRunActions","errorNotificationActions","TestRun","SeedBase","renderSeedWord","word","Seed","TestSuiteRunBase","currentTestIsActive","isFirstTest","previousTest","tag","startDisabled","renderBody","renderSetup","ArrowBack","ArrowForward","testSuiteRunActions","TestSuiteRun","ScriptEntry","hasScriptError","scriptError","hasFetchUTXOsError","scriptName","scriptTitle","charAt","toUpperCase","handleScriptChange","newScriptHex","generateMultisigFromHex","renderDetails","chosePerformSpend","choseConfirmOwnership","buttonsDisabled","performSpend","confirmOwnership","choosePerformSpend","fetchUTXOsResult","chooseConfirmOwnership","setOwnershipMultisig","setFrozenAction","ownership","chosen","ConfirmOwnership","renderConfirmation","GreenListItemIcon","styled","selectLabelId","Spend","spendable","renderSignatureImporters","signatureImporterNum","addressFinalized","menuButton","marginRight","menuItem","paddingBottom","paddingX","menuLink","NavItem","Navbar","setAnchorEl","Toolbar","currentTarget","logo","Footer","now","getFullYear","ErrorBoundary","errorInfo","mx","whiteSpace","componentStack","clearErrorNotificationAction","ErrorNotification","errorNotification","Snackbar","anchorOrigin","vertical","horizontal","ContentProps","Close","App","CssBaseline","maxSnack","Container","ScriptExplorer","Wallet","AppContainer","history","createBrowserHistory","resetApp","unlisten","listen","isLocalhost","location","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","updateState","initialState","intialSliceState","spendingSats","updateSlice","newSlices","updatedState","currentNodeBalance","nodeFoundWithValue","otherNode","getNextNode","resetSpend","thisNode","updatedNodes","getTime","initialExtendedPublicKeyImporterState","bip32PathModified","createInitialState","importers","finalizedAddressType","setConflict","updateExtendedPublicKeyImporterState","extendedPublicKeyImporterChange","newState","sum","updateTotalSigners","finalizedCount","updateImporterPaths","updateNetwork","updateAddressType","updateFinalizedSettings","initialPublicKeyImporterState","abovePublicKeyImporter","belowPublicKeyImporter","sortedPublicKeyImporters","publicKeyImportersChange","updatePublicKeyImporterState","publicKeyImporterChange","stub","resetWalletViews","updateMultisig","initialSignatureImporterState","updateSignatureImporterState","signatureImporterChange","finalizeSignatureImporterState","y","updateInputs","setFeeForRate","feeRateString","nout","newOutputs","updateFeeRate","validateFeeRate","updateFee","feeString","validateFee","updateOutputAddress","validateAddress","updateOutputMultisig","updateOutputAmount","dp","unsignedTransactionPSBT","unsignedTransactionObjectFromPSBT","updateRequiredSigners","updateSigningKey","outputInitialStateForMode","resetTransactionState","validateTransaction","calcOutputTotalSats","absoluteValue","minFee","ExportPublicKeyTest","publicKeyTests","ExportExtendedPublicKeyTest","extendedPublicKeyTests","SignMultisigTransactionTest","outputAddress","outputAmountSats","changeOutputAddress","changeOutputAmountSats","unsignedTx","signingTests","fixture","SUITE","trezorTests","ledgerTests","hermitTests","coldcardTests","initialTestRunState","testRunsForKeystore","updatedTestRun","spendReducers","combineReducers","keyResetState","walletReducers","braidReducer","appReducer","rootReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","ReduxPromise","thunk","ReactDOM","getElementById","process","origin","fetch","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","estimateMultisigP2SH_P2WSHTransactionVSize","baseSize","witnessSize","getRedeemScriptSize","getWitnessSize","calculateBase","calculateTotalWitnessSize","estimateMultisigP2WSHTransactionVSize","txWeight","calculateVSize","_bufio","opDataBytes","signaturesSize","redeemScriptSize","encoding","sizeVarint","inputsCount","outputsCount","PREVHASH_BYTES","scriptPubkeySize","VAL_BYTES","scriptLengthBytes","txoutSize","networks","bitcoin","testnet","getNetworkFromPrefix","toHexString","byte","inputString","satoshis","integerValue","ROUND_DOWN","shiftedBy","btc","hash160","buf","crypto","ripemd160","sha256","ZERO","_len","_key","p2ms","generateMultisigFromRaw","redeem","_utils","multisigBraidDetails","estimateMultisigP2SHTransactionVSize","sigSize","UnsupportedInteraction","KeystoreInteraction","LEVELS","STATES","_bowser","_KeystoreInteraction","_KeystoreInteraction2","direct","_KeystoreInteraction3","indirect","feeRateSatsPerVbyte","fr","isFinite","MAX_FEE_RATE_SATS_PER_VBYTE","fs","its","MAX_FEE_SATS","estimateMultisigTransactionFeeRate","feesInSatoshis","dividedBy","estimateMultisigTransactionVSize","multipliedBy","HARDENING_OFFSET","pathString","splice","pathSegment","substr","bip32SequenceToPath","sequence","validated","parentBIP32Path","childBIP32Path","validatedParent","validatedChild","pow","BIP32_PATH_REGEX","BIP32_HARDENED_PATH_REGEX","BIP32_UNHARDENED_PATH_REGEX","BIP32_INDEX_REGEX","MAX_BIP32_HARDENED_NODE_INDEX","MAX_BIP32_NODE_INDEX","segmentStrings","validateBIP32PathSegments","indexString","numberString","hardened","_addresses","_block_explorer","_fees","_fixtures","_keys","_outputs","_paths","_psbt","_script","_signatures","_transactions","braidNetwork","braidAddressType","braidExtendedPublicKeys","braidRequiredSigners","braidIndex","validateBip32PathForBraid","generatePublicKeysAtPath","generatePublicKeysAtIndex","pathToDerive","generateBip32DerivationByPath","generateBip32DerivationByIndex","deriveMultisigByIndex","Braid","_assert","_Struct","_super","Derived","isNativeReflectConstruct","construct","sham","Proxy","Super","NewTarget","_createSuper","xpubValidationError","Struct","pathToCheck","pathSequence","derivePublicKeyObjectsAtPath","dataRichPubKeyObjects","actualPathSuffix","completePath","extendedPublicKeyRootFingerprint","generateBraidAwareMultisigFromPublicKeys","input1","input2","validateMultisigInputs","braidRequired","utxoIDs","validateMultisigInput","utxoID","validateTransactionID","validateTransactionIndex","_exportNames","VERSION","DIRECT_KEYSTORES","KEYSTORES","_ledger","_trezor","_coldcard","_hermit","_custom","_package","trim","magic_byte_regex","isBech32","BECH32_ADDRESS_MAGIC_BYTE_REGEX","address_regex","_bitcoinAddressValidation","validatePrefix","targetPrefix","sourcePrefix","extendedPublicKeyNoPrefix","_bs58check","extendedPublicKeyNewPrefix","EXTENDED_PUBLIC_KEY_VERSIONS","requiredPrefix","xpubString","notXpubError","child","bip32","derivePath","toBase58","isKeyCompressed","_pubkey","pubkeyBuffer","hash","cache","_getRequireWildcardCache","newObj","hasPropertyDescriptor","set","_interopRequireWildcard","WeakMap","Vpub","rootXfpError","pubKeyError","chaincodeError","extra","bw","writeString","writeU8","writeU32BE","br","readString","readU8","readU32BE","pubkeyHex","prefixBuffer","alloc","isBuffer","validateOutputs","validateOutput","DUST_LIMIT_SATS","psbtInputFormatter","witnessUtxo","fromHex","outs","getWitnessOutputScriptFromInput","nonWitnessUtxo","utxoToVerify","multisigScripts","psbtMultisigLock","getBip32Derivation","psbtInputDerivation","psbtOutputFormatter","psbtOutputDerivation","psbtFromFile","Psbt","fromBase64","partialSignatures","partialSig","numSigners","pubKey","PSBT_MAGIC_B64","PSBT_MAGIC_HEX","multisigLock","toASM","hashForWitnessV0","SIGHASH_ALL","hashForSignature","multisigSignatureHash","signatureBuffer","encodedSignerInputSignatureBuffer","decodedSignerInputSignatureBuffer","_bip","r","rToUse","byteLength","multisigSignatureBuffer","publicKeyBuffer","verify","multisigInputError","multisigOutputError","setVersion","psbtInputs","addInputs","psbtOutputs","addOutputs","txn","globalMap","tx","transactionSignatures","transactionSignatureIndex","_loop","inputSignatures","requiredSignatures","inputSignaturesByPublicKey","sortedSignatures","witness","multisigWitnessField","setWitness","_witness","scriptSig","ins","_scriptSig","signersInputSignatures","signatureOps","inputScript","inputScriptBuffer","fromASM","rawMultisig","multisigScriptSig","transactionBuilder","TransactionBuilder","addInput","buildIncomplete","wit"],"mappings":"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","file":"static/js/main.7126de32.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"feeMagicBtn\":\"styles_feeMagicBtn__QX0iX\",\"utxoTxid\":\"styles_utxoTxid__1p6kt\",\"outputsFormInput\":\"styles_outputsFormInput__3Osdm\",\"unconfirmed\":\"styles_unconfirmed__3KzJ4\",\"spent\":\"styles_spent__10i2F\",\"outputsFormLabel\":\"styles_outputsFormLabel__NZOnp\",\"maxSpend\":\"styles_maxSpend__32e8a\"};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.blockExplorerURL = blockExplorerURL;\nexports.blockExplorerAPIURL = blockExplorerAPIURL;\nexports.blockExplorerTransactionURL = blockExplorerTransactionURL;\nexports.blockExplorerAddressURL = blockExplorerAddressURL;\n\nvar _networks = require(\"./networks\");\n\n/**\n * This module provides functions for creating URLs for Blockstream's\n * [block explorer]{@link https://blockstream.info}.\n *\n * This module does NOT provide implementations of HTTP requests which\n * fetch data from these URLs.\n * \n * @module block_explorer\n */\nvar BASE_URL_MAINNET = 'https://blockstream.info';\nvar BASE_URL_TESTNET = 'https://blockstream.info/testnet';\n\nfunction blockExplorerBaseURL(network) {\n  return network === _networks.TESTNET ? BASE_URL_TESTNET : BASE_URL_MAINNET;\n}\n/**\n * Returns the block explorer URL for the given path and network.\n * \n * @param {string} path - the explorer path\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @returns {string} the block explorer url\n * @example\n * import {MAINNET, TESTNET, blockExplorerURL} from \"unchained-bitcoin\";\n * const path = \"/block/00000000000000000011341d69792271766e4683e29b3ea169eacc59bde10a57\";\n * console.log(blockExplorerURL(path, MAINNET)) // https://blockstream.info/block/00000000000000000011341d69792271766e4683e29b3ea169eacc59bde10a57\n * console.log(blockExplorerURL(path, TESTNET)) // https://blockstream.info/block/testnet/00000000000000000011341d69792271766e4683e29b3ea169eacc59bde10a57\n */\n\n\nfunction blockExplorerURL(path, network) {\n  return \"\".concat(blockExplorerBaseURL(network)).concat(path);\n}\n/**\n * Returns the block explorer API URL for the given path and network.\n * \n * @param {string} path - the API path\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @returns {string} the full block explorer url\n * @example\n * import {MAINNET, TESTNET, blockExplorerAPIURL} from \"unchained-bitcoin\";\n * const path = \"/tx/1814a10fb22e9551a17a94a1e68971e19b4f59eaf1689e0af85b97929b3b9ae0\";\n * console.log(blockExplorerAPIURL(path, MAINNET)); // https://blockstream.info/api/tx/1814a10fb22e9551a17a94a1e68971e19b4f59eaf1689e0af85b97929b3b9ae0\n * console.log(blockExplorerAPIURL(path, TESTNET)); // https://blockstream.info/testnet/api/tx/1814a10fb22e9551a17a94a1e68971e19b4f59eaf1689e0af85b97929b3b9ae0\n */\n\n\nfunction blockExplorerAPIURL(path, network) {\n  return \"\".concat(blockExplorerBaseURL(network), \"/api\").concat(path);\n}\n/**\n * Return the block explorer URL for the given transaction ID and network.\n * \n * @param {string} txid - the transaction id\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @returns {string} the full transaction URL\n * @example\n * import {MAINNET, TESTNET, blockExplorerTransactionURL} from \"unchained-bitcoin\";\n * const txid = \"1814a10fb22e9551a17a94a1e68971e19b4f59eaf1689e0af85b97929b3b9ae0\";\n * console.log(blockExplorerTransactionURL(txid, MAINNET)); // https://blockstream.info/tx/1814a10fb22e9551a17a94a1e68971e19b4f59eaf1689e0af85b97929b3b9ae0\n * console.log(blockExplorerTransactionURL(txid, TESTNET)); // https://blockstream.info/testnet/tx/1814a10fb22e9551a17a94a1e68971e19b4f59eaf1689e0af85b97929b3b9ae0\n */\n\n\nfunction blockExplorerTransactionURL(txid, network) {\n  return blockExplorerURL(\"/tx/\".concat(txid), network);\n}\n/**\n * Return the block explorer URL for the given address and network.\n * \n * @param {string} address - the address\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @returns {string} full URL for address lookup\n * @example\n * import {MAINNET, TESTNET, blockExplorerAddressURL} from \"unchained-bitcoin\";\n * const address = \"39YqNoLULDpbjmeCTdGJ42DQhrQLzRcMdX\";\n * console.log(blockExplorerAddressURL(address, MAINNET)); // https://blockstream.info/address/39YqNoLULDpbjmeCTdGJ42DQhrQLzRcMdX\n * console.log(blockExplorerAddressURL(address, TESTNET)); // https://blockstream.info/testnet/address/39YqNoLULDpbjmeCTdGJ42DQhrQLzRcMdX\n */\n\n\nfunction blockExplorerAddressURL(address, network) {\n  return blockExplorerURL(\"/address/\".concat(address), network);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TEST_FIXTURES = exports.ROOT_FINGERPRINT = void 0;\n\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.array.from\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nvar _bignumber = _interopRequireDefault(require(\"bignumber.js\"));\n\nvar _multisig = require(\"./multisig\");\n\nvar _inputs = require(\"./inputs\");\n\nvar _p2sh = require(\"./p2sh\");\n\nvar _p2sh_p2wsh = require(\"./p2sh_p2wsh\");\n\nvar _p2wsh = require(\"./p2wsh\");\n\nvar _networks = require(\"./networks\");\n\nvar _braid = require(\"./braid\");\n\nvar _TESTNET, _MAINNET, _RECEIVING_ADDRESSES, _TESTNET2, _MAINNET2, _CHANGE_ADDRESSES;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar RECEIVING_ADDRESSES = (_RECEIVING_ADDRESSES = {}, _defineProperty(_RECEIVING_ADDRESSES, _networks.TESTNET, (_TESTNET = {}, _defineProperty(_TESTNET, _p2sh.P2SH, \"2NE1LH35XT4YrdnEebk5oKMmRpGiYcUvpNR\"), _defineProperty(_TESTNET, _p2sh_p2wsh.P2SH_P2WSH, \"2NE1LH35XT4YrdnEebk5oKMmRpGiYcUvpNR\"), _defineProperty(_TESTNET, _p2wsh.P2WSH, \"tb1q9hj5j7mh9f7t6cwdvz34nj6pyzva5ftj2ecarcdqph5wc3n49hyqchh3cg\"), _TESTNET)), _defineProperty(_RECEIVING_ADDRESSES, _networks.MAINNET, (_MAINNET = {}, _defineProperty(_MAINNET, _p2sh.P2SH, \"3DRVz9YUhoXSMgBngvv2JkNReBHvkeJwLs\"), _defineProperty(_MAINNET, _p2sh_p2wsh.P2SH_P2WSH, \"3DRVz9YUhoXSMgBngvv2JkNReBHvkeJwLs\"), _defineProperty(_MAINNET, _p2wsh.P2WSH, \"bc1qxkl8fcuas3fv6mk79tk7d0nsug0909qcgvpjuj2asgltnafp46nsn4jnrh\"), _MAINNET)), _RECEIVING_ADDRESSES);\nvar CHANGE_ADDRESSES = (_CHANGE_ADDRESSES = {}, _defineProperty(_CHANGE_ADDRESSES, _networks.TESTNET, (_TESTNET2 = {}, _defineProperty(_TESTNET2, _p2sh.P2SH, \"2NB3tTnpcUanDenNhWbXxymTJhheWtj5Mu1\"), _defineProperty(_TESTNET2, _p2sh_p2wsh.P2SH_P2WSH, \"2MyCBSwFWSXpagqKtrnckNtNQBnKdUZRhKc\"), _defineProperty(_TESTNET2, _p2wsh.P2WSH, \"tb1qhjtyry0qwm5l6v5v7y27hc6m60vm0d8exlr3cswdrxsgaygqvd2q5zsl0n\"), _TESTNET2)), _defineProperty(_CHANGE_ADDRESSES, _networks.MAINNET, (_MAINNET2 = {}, _defineProperty(_MAINNET2, _p2sh.P2SH, \"36NMegVbRPbMv9RC4Ge2aKLUQHYXKbyooZ\"), _defineProperty(_MAINNET2, _p2sh_p2wsh.P2SH_P2WSH, \"32M6VKsKw1X2EXFawpcHosMEhSxswLHRwX\"), _defineProperty(_MAINNET2, _p2wsh.P2WSH, \"bc1qnzky4hcwcutvktfstp0u3kmtgxkjvscl25snvg45xu3ausv2lapqrvmkeh\"), _MAINNET2)), _CHANGE_ADDRESSES);\nvar BIP39_PHRASE = [\"merge\", \"alley\", \"lucky\", \"axis\", \"penalty\", \"manage\", \"latin\", \"gasp\", \"virus\", \"captain\", \"wheel\", \"deal\", \"chase\", \"fragile\", \"chapter\", \"boss\", \"zero\", \"dirt\", \"stadium\", \"tooth\", \"physical\", \"valve\", \"kid\", \"plunge\"];\nvar ROOT_FINGERPRINT = 'f57ec65d';\nexports.ROOT_FINGERPRINT = ROOT_FINGERPRINT;\nvar NODES = {\n  \"m/45'/0'/0'\": {\n    pub: \"0387cb4929c287665fbda011b1afbebb0e691a5ee11ee9a561fcd6adba266afe03\",\n    xpub: \"xpub6CCHViYn5VzKFqrKjAzSSqP8XXSU5fEC6ZYSncX5pvSKoRLrPDcF8cEaZkrQvvnuwRUXeKVjoGmAqvbwVkNBFLaRiqcdVhWPyuShUrbcZsv\",\n    tpub: \"tpubDCZv1xNTnmwmXe3BBMyXekiVreY853jFeC8k9AaEAqCDYi1ZTSTLH3uQonwCTRk9jL1SFu1cLNbDY76YtcDR8n2inSMwBEAdZs37EpYS9px\",\n    zpub: \"zpub6qrp73tcNs5GxSEZPtZgs1a8sTjMxuDBvnatMQJrawC5ucyJtXwNNjYrcAmavk6kkhi99GgribUGcVq4w9CCqowdTX1UfX9NXMZzG2XWQdj\",\n    ypub: \"ypub6X2YoPDhEBXo793SZXn4evUdhVav2HDh1g4fa1QyCvpCrXA5dsmokftiaxozvqSqM4bLPo6JFw7ijDDWDSnC3aG2bBK45cKtFdWLsUKgtyo\",\n    Ypub: \"Ypub6hvdvcx8o96AXiCpWCF3UzpSRHdBEduHKwiLVGgWahecUhizQHA5qnkePfmUVGfjaXfKGP6R99WDrNqGWfw9C4NhReRTV1nt9MnDTNALmuh\",\n    Zpub: \"Zpub72kuEHd3wpdeP1PwLZ2fh5uwbFmdBFtnF4EZGfaPxi2VXoYDewKeTrQnQsj4VBKezAn81rgybormjfSqENM9zJ4JHz7t4vcNR5qrqv8qja7\",\n    upub: \"upub5DhVaiY2dTMshxGyE6dZpa6d1d18FoFhMDynSRqRguJge7uAdF7ZGRGAW8yewCq9iW87Pti4RHhXC4mFLf88rdXd7pXMjy3wAjFmK6jyHiX\",\n    vpub: \"vpub5YXktPCwn8uMZFU64TRC2fC8Bb9aCRFCGLW1DpjK4ugZhDiPsuH7tUvJXLwEw7V589Ev9NJcsx455MNp4MY9esDDzADnKssRSTKQhgCrtoZ\",\n    Upub: \"Upub5QbahxGUCQvF8XSMAm6YeeSRjR3PU9wHfVdTMh6y4g96GJU5PeVqMY86Jqw8Ve43wyC6GUiBJW62KEP1dtH617eHxHdm9NWw4TXdu1aWzdx\",\n    Jpub: \"Vpub5jRr1cwPM6TiypdU17tArjXvuPBqQmvnac9g95zrSgWyKQHJeJfPybnEL3tiVYhyMcJu1xJjmASaCWzaMah6oMKtpdLBjHLRLBbHHcy3jDH\",\n    chaincode: \"470bb034dbc8e7b5f5c0b19f747e3e768f0cc9ff298361b2741e1b7fd70d376d\",\n    parentFingerprint: 1240308660,\n    rootFingerprint: ROOT_FINGERPRINT,\n    index: 2147483648,\n    depth: 3\n  },\n  \"m/45'/0'/0'/0\": {\n    pub: \"03b32dc780fba98db25b4b72cf2b69da228f5e10ca6aa8f46eabe7f9fe22c994ee\",\n    xpub: \"xpub6EW9kGJQLjEGWpuKjViLuEw3pkNX5k2DzXhM3ctfHawh12aLXnrzYuRcvwTfv2VD2a8uzFCDJfLnrrD9Z46NbLyPHUQbbb4QyxKjf6c1gh4\",\n    tpub: \"tpubDEsnGW8641Bind6BBghS7AGR9sUB58XHYAHeQAwodVhakKF3c1i5hM6TAyYTSXSSpUfpbpi5qmAqZ2hkwuwcUnRgM59uH7ieZuv9RAEJ5Rp\",\n    chaincode: \"4522d0dc37c97548c43adc8fbbe285eea27921e8437562574d13c013e85c0fd3\",\n    parentFingerprint: 2213579839,\n    rootFingerprint: ROOT_FINGERPRINT\n  },\n  \"m/45'/0'/0'/0/0\": {\n    pub: \"03102f0df5e34ffa1178a5310952221b8e26b3e761a9e328832c750a2de252f21a\",\n    xpub: \"xpub6FjSpitFpSJB9BpSVwp3eJzhpaQFLbLefD1f3qaGRmok2Z2FDeSNsy5CL9TLwM3HpcV2kAyTNf2W1uUXs1jbeXGWjdWnsaqnUQ9PyWAYVhQ\",\n    tpub: \"tpubDG75LxhwXiFdQz1Hx8o8rEL59hVuKyqiCqbxQPdQmgZdmqgxHsHU2Qk2aBY8TqzXcX1wMkVKukrYi5y9FsaqXxiooEG6Z7W24MjojRNcVtA\",\n    chaincode: \"4522d0dc37c97548c43adc8fbbe285eea27921e8437562574d13c013e85c0fd3\",\n    parentFingerprint: 724365675,\n    rootFingerprint: ROOT_FINGERPRINT\n  },\n  \"m/45'/1/0/0\": {\n    xpub: \"tpubDE5K7wy1Mf254iUPx3CgMfzhx6EcaFCvYDiJb5DZxeod2tTgKsgNX89YVQ6uD9TkMgP6KbAHueWqgcCYUTdZXqTXuF9Vnha45Y26gCfno2G\",\n    extendedPublicKey: {\n      base58String: \"tpubDE5K7wy1Mf254iUPx3CgMfzhx6EcaFCvYDiJb5DZxeod2tTgKsgNX89YVQ6uD9TkMgP6KbAHueWqgcCYUTdZXqTXuF9Vnha45Y26gCfno2G\",\n      chaincode: \"da92ac213968ea1a2c26dde7d83e556939519e5195c84120f3b803630c45194a\",\n      depth: 4,\n      index: 0,\n      parentFingerprint: 384854823,\n      path: \"m/45'/1/0/0\",\n      pubkey: \"0226a8fce14d91bd85b2b61bdc994e75975c9b443d02a0428a7c9755228f35cba9\",\n      rootFingerprint: ROOT_FINGERPRINT,\n      version: \"043587cf\"\n    }\n  },\n  \"m/45'/1/1/0\": {\n    xpub: \"tpubDF1iV6MkK9BUvumPzq1MHxVGPNy2fFo1pEpcgnkriBdiE9EVrkndpmsg8QQ12T9cwn82Kg8wRburB8Avnvo1AyBijcWrDS9SHHkyRXfxcSQ\",\n    extendedPublicKey: {\n      base58String: \"tpubDF1iV6MkK9BUvumPzq1MHxVGPNy2fFo1pEpcgnkriBdiE9EVrkndpmsg8QQ12T9cwn82Kg8wRburB8Avnvo1AyBijcWrDS9SHHkyRXfxcSQ\",\n      chaincode: \"ff6e55a2ae1b0b14824a08130fc3029d3d193ee0c1eb922696d3658f641a0e2b\",\n      depth: 4,\n      index: 0,\n      parentFingerprint: 2525848640,\n      path: \"m/45'/1/1/0\",\n      pubkey: \"02ca80ff7fdc10be77b65da0b82cada1646f0c113e6cc10a5feb0dfb5d0487793e\",\n      rootFingerprint: ROOT_FINGERPRINT,\n      version: \"043587cf\"\n    }\n  },\n  \"m/45'\": {\n    pub: '03c060f4c111a276807fc3a88966cc1d3a683eef9226a034ee2cd6982b478fa8e2',\n    xpub: \"xpub69h9wvon4GzP2S3cLmiBsNdznt29YXBk2TSyQueZsacKZyzMqMR1Fj5JwSiKu8agDRiLWPfw9gSChLW2Yfgpe4tzuhLUD2vFfGsfbtTA3r7\",\n    tpub: \"tpubDA4nUAdTmYwqJEETnxhH5HyN817oXugoa63GmThiDVNDKGf4uaG6QAk9BUo7RdXv1LFF7yBognGFPWzdwXY4XWMHyJ5mtZaVFEU5MtMfj7H\",\n    rootFingerprint: \"f57ec65d\"\n  },\n  \"m/45'/0\": {\n    pub: \"02b04ac39b566b7353b5bf8e164be83bf90b090e7516170e88a8cb6c88a860f0a3\",\n    tpub: \"tpubDBAj15fFkLimiBmDqapikSS4qkmvAS8LijMey9S9fAyjq65ERgjuzaa6GonVQXugcrBzfpEoH6SPBzevfowZgYJ3apWcHbMPaNJnBRkbsRY\",\n    rootFingerprint: ROOT_FINGERPRINT\n  },\n  \"m/45'/0/0\": {\n    xpub: \"xpub6CsGPeBifUqr2szHmpFuNZ7Yd2ZnJtr95kPKu13LT96ZvTUthRsZbunhdyRp4HkQ93Gqr78mC9KEMVmGxcG6bFR4xT3GKpkdtgpr8T85JXP\",\n    rootFingerprint: ROOT_FINGERPRINT\n  },\n  \"m/45'/1/0\": {\n    pub: \"036b5cfe4b7f29cb36e5261ad74f8a4f8602f77628e8d9d120f5580d3ccafaef74\",\n    tpub: \"tpubDDhFRuipvJKBgPBDFooShZNtnkLwMkGDZXA1KBUd8xruQ8AA4QdZaiQYWj1hDpDW8r7va9D7GHeEp5ZzMsj5uDRX4s3hk4eQgJm8jMAqkLC\",\n    rootFingerprint: ROOT_FINGERPRINT\n  },\n  \"m/45'/0'/4'/99'/2147483647/3/1\": {\n    pub: \"0211aa5c03e290dc0110103c3d3f817500e76061d35ea89072286cb6f7962eda81\",\n    xpub: \"xpub6LCRwXBN9moqsJKhToW6K5qfBfTguMXuZw67q1BUuaWRyYD56P1zhqbyXsHqoo4WPsjUfeiJPu4JXnhtUz6cHbYgX6AFfDhUnPfCvbZD3JZ\",\n    tpub: \"tpubDLa4Tm13s3mJ96WYuzVBX1B2WnZLtk2y7ZgRBZEdFVGKipsnAbs5rHGomuNdLJ1kBnGPHEEAvztMDyCVsqwrB2zyaguZLkMiNMFcgX4e2rG\",\n    rootFingerprint: ROOT_FINGERPRINT\n  },\n  \"m/45'/1'/0'/0/0\": {\n    pub: \"037226e92491b2cf9691152fc2e9a0a7cff8f9ab7ad1b24b6f6506d7c8bf18911b\",\n    rootFingerprint: ROOT_FINGERPRINT\n  },\n  \"m/48'/0'/0'/1'/0/0\": {\n    pub: \"02c63c7ae511c9902e885da3e2fbb4a8f227eefc7f53eda3cad4d8f9389331b5be\",\n    rootFingerprint: ROOT_FINGERPRINT\n  },\n  \"m/48'/1'/0'/1'/0/0\": {\n    pub: \"03ff8a79f5016243a3959e2216e51cf90034cf510b379a34e6fdf565b19852baa2\",\n    rootFingerprint: ROOT_FINGERPRINT,\n    Upub: 'Upub5T4XUooQzDXL58NCHk8ZCw9BsRSLCtnyHeZEExAq1XdnBFXiXVrHFuvvmh3TnCR7XmKHxkwqdACv68z7QKT1vwru9L1SZSsw8B2fuBvtSa6',\n    tpub: 'tpubDKSvECbEtm6ZgXE7kmn2Sbr81JzJhDGVzz2Arnn86R5a3i42w2mxNoPHcA9MRPtS36zy5d4m7FWWiCrVY1fXJ9YvSjNMB4DJ2tRDifqJQmp'\n  },\n  \"m/48'/0'/0'/2'/0/0\": {\n    pub: \"032817ba5e2b76f6e2fab1d985224516f2b77a9c181e210def81ec2be8e17007c9\",\n    rootFingerprint: ROOT_FINGERPRINT\n  },\n  \"m/48'/1'/0'/2'/0/0\": {\n    pub: \"03ecf349ecf63fcd0ece9de7eb1abfb8f8b243fecc443bd62ef47744f0f6b7eef6\",\n    rootFingerprint: ROOT_FINGERPRINT\n  },\n  \"m/45'/1'/0'\": {\n    xpub: \"tpubDDQubdBx9cbs16zUhpiM135EpvjSbVz7SGJyGg4rvRVEYdncZy3Kzjg6NjuFWcShiCyNqviWTBiZPb25p4WcaLppVmAuiPMrkR1kahNoioL\",\n    rootFingerprint: ROOT_FINGERPRINT\n  },\n  // P2SH-TESTNET\n  \"m/45'/1'/100'\": {\n    xpub: \"tpubDDQubdBx9cbwQtdcRTisKF7wVCwHgHewhU7wh77VzCi62Q9q81qyQeLoZjKWZ62FnQbWU8k7CuKo2A21pAWaFtPGDHP9WuhtAx4smcCxqn1\",\n    rootFingerprint: ROOT_FINGERPRINT,\n    open_source: {\n      base58String: \"tpubDDQubdBx9cbwQtdcRTisKF7wVCwHgHewhU7wh77VzCi62Q9q81qyQeLoZjKWZ62FnQbWU8k7CuKo2A21pAWaFtPGDHP9WuhtAx4smcCxqn1\",\n      chaincode: \"eabe09a77940dd3e125be81bc25fcf04c611544f431967531bea80b12f2e72d2\",\n      depth: 3,\n      index: 2147483748,\n      parentFingerprint: 3168392141,\n      path: \"m/45'/1'/100'\",\n      pubkey: \"02d419c2e37078468af97e07e240343a7e8691ef5dcca9fe59a7c774db9e6c4e62\",\n      rootFingerprint: ROOT_FINGERPRINT,\n      version: \"043587cf\"\n    },\n    unchained: {\n      base58String: \"tpubDDinbKDXyddTUKcX6mv936Ux5utCJteq5S6EEKhfpM8CqN2rMAcccv6GecsB3cPt8eGL4e4K2eaZ9Jis9TGf7mbwBsRTN7ngnFR7yJZxBKC\",\n      chaincode: \"1ade7f9d6099898d9851af05b488b94ad3ad4fcabab3970b8ee975fb0e33c517\",\n      depth: 3,\n      index: 2147483748,\n      parentFingerprint: 3872018966,\n      path: \"m/45'/1'/100'\",\n      pubkey: \"03b30cf103f4775c366cdc9394dc42b9cfa9d05eb02fd07a2f98a8b1b22d867fec\",\n      rootFingerprint: \"00000001\",\n      version: \"043587cf\"\n    }\n  },\n  // P2SH_P2WSH-TESTNET\n  \"m/48'/1'/100'/1'\": {\n    xpub: \"tpubDFc9Mm4tw6EkdXuk24MnQYRrDsdKEFh498vFffqa2KJmxytpcHbWrcFYwTKAdLxkSWpadzb5M5VVZ7PDAUjDjymvUmQ7pBbRecz2FM952Am\",\n    rootFingerprint: ROOT_FINGERPRINT,\n    open_source: {\n      base58String: \"tpubDFc9Mm4tw6EkdXuk24MnQYRrDsdKEFh498vFffqa2KJmxytpcHbWrcFYwTKAdLxkSWpadzb5M5VVZ7PDAUjDjymvUmQ7pBbRecz2FM952Am\",\n      chaincode: \"8f60b5470713d119000eb9f20716eaa21e4c7c96b1d8a605790e2a9621874b7b\",\n      depth: 4,\n      index: 2147483649,\n      parentFingerprint: 3880777331,\n      path: \"m/48'/1'/100'/1'\",\n      pubkey: \"0374d98c47224e55e6244cfb407638d77ff1127f02c895983b5fe2d9174f37cd0c\",\n      rootFingerprint: \"f57ec65d\",\n      version: \"043587cf\"\n    },\n    unchained: {\n      base58String: \"tpubDErWN5qfdLwY9ZJo9HWpxjcuEFuEBVHSbQbPqF35LQr3etWNGirKcgAa93DZ4DmtHm36p2gTf4aj6KybLqHaS3UePM5LtPqtb3d3dYVDs2F\",\n      chaincode: \"0683fed20bd4e656ef5d6cb91dac510a80f1e425976dcc8b92060cca5a8fe0a9\",\n      depth: 4,\n      index: 2147483649,\n      parentFingerprint: 2163434281,\n      path: \"m/48'/1'/100'/1'\",\n      pubkey: \"02fe3c640406f273d9acdd63ce45282cb9017c91e07b4b0118451823df95fd7821\",\n      rootFingerprint: \"00000002\",\n      version: \"043587cf\"\n    }\n  },\n  // P2WSH-TESTNET\n  \"m/48'/1'/100'/2'\": {\n    xpub: \"tpubDFc9Mm4tw6EkgR4YTC1GrU6CGEd9yw7KSBnSssL4LXAXh89D4uMZigRyv3csdXbeU3BhLQc4vWKTLewboA1Pt8Fu6fbHKu81MZ6VGdc32eM\",\n    rootFingerprint: ROOT_FINGERPRINT,\n    open_source: {\n      base58String: \"tpubDFc9Mm4tw6EkgR4YTC1GrU6CGEd9yw7KSBnSssL4LXAXh89D4uMZigRyv3csdXbeU3BhLQc4vWKTLewboA1Pt8Fu6fbHKu81MZ6VGdc32eM\",\n      chaincode: \"b0d7d9283b766e79259dc38263ce06b474eeaefb3fab5f53946aaec6cd525f13\",\n      depth: 4,\n      index: 2147483650,\n      parentFingerprint: 3880777331,\n      path: \"m/48'/1'/100'/2'\",\n      pubkey: \"0277d88e9d1395e980debe59476a17f202ba27c866d3637877e84958f2c65458ff\",\n      rootFingerprint: \"f57ec65d\",\n      version: \"043587cf\"\n    },\n    unchained: {\n      base58String: \"tpubDErWN5qfdLwYE94mh12oWr4uURDDNKCjKVhCEcAgZ7jKnnAwq5tcTF2iEk3VuznkJuk2G8SCHft9gS6aKbBd18ptYWPqKLRSTRQY7e2rrDj\",\n      chaincode: \"d2be31d3de92e6183d5a4bb918048fdf960ba9438d391afb5f7ac69a1c24caf1\",\n      depth: 4,\n      index: 2147483650,\n      parentFingerprint: 2163434281,\n      path: \"m/48'/1'/100'/2'\",\n      pubkey: \"03a602ec9955461233f89560337ff7af353b838471d7f1625768b4e290544a154f\",\n      rootFingerprint: \"00000003\",\n      version: \"043587cf\"\n    }\n  },\n  // P2SH-MAINNET\n  \"m/45'/0'/100'\": {\n    xpub: \"xpub6CCHViYn5VzPfSR7baop9FtGcbm3UnqHwa54Z2eNvJnRFCJCdo9HtCYoLJKZCoATMLUowDDA1BMGfQGauY3fDYU3HyMzX4NDkoLYCSkLpbH\",\n    rootFingerprint: ROOT_FINGERPRINT,\n    open_source: {\n      base58String: \"xpub6CCHViYn5VzPfSR7baop9FtGcbm3UnqHwa54Z2eNvJnRFCJCdo9HtCYoLJKZCoATMLUowDDA1BMGfQGauY3fDYU3HyMzX4NDkoLYCSkLpbH\",\n      chaincode: \"8f8521ebe6ac7fd6d6c468aa25cad78e34e9a4c02211a00bf2c6069ffdb11722\",\n      depth: 3,\n      index: 2147483748,\n      parentFingerprint: 1240308660,\n      path: \"m/45'/0'/100'\",\n      pubkey: \"028257b519520e4a611b0fbf062bef41e815145b85e621887d267c695f2c508259\",\n      rootFingerprint: \"f57ec65d\",\n      version: \"0488b21e\"\n    },\n    unchained: {\n      base58String: \"xpub6Ca5CwTgRASgkXbXE5TeddTP9mPCbYHreCpmGt9dhz9y6femstHGCoFESHHKKRcm414xMKnuLjP9LDS7TwaJC9n5gxua6XB1rwPcC6hqDub\",\n      chaincode: \"17f7729ba7f11cc95c201d023c0a7f8315101ef1ee5bd6fc8193f440eef4483f\",\n      depth: 3,\n      index: 2147483748,\n      parentFingerprint: 2097768017,\n      path: \"m/45'/0'/100'\",\n      pubkey: \"03540225fdc5f92c686f3ffa3fe7a912c66e94f7988bd6db92d466d7917ff7447c\",\n      rootFingerprint: \"00000004\",\n      version: \"0488b21e\"\n    }\n  },\n  // P2SH_P2WSH-MAINNET\n  \"m/48'/0'/100'/1'\": {\n    xpub: \"xpub6DcqYQxnbefzEBJF6osEuT5yXoHVZu1YCCsS5YkATvqD2h7tdMBgdBrUXk26FrJwawDGX6fHKPvhhZxKc5b8dPAPb8uANDhsjAPMJqTFDjH\",\n    rootFingerprint: ROOT_FINGERPRINT,\n    open_source: {\n      base58String: \"xpub6DcqYQxnbefzEBJF6osEuT5yXoHVZu1YCCsS5YkATvqD2h7tdMBgdBrUXk26FrJwawDGX6fHKPvhhZxKc5b8dPAPb8uANDhsjAPMJqTFDjH\",\n      chaincode: \"cd1a105c93ed7c2bc01e99445f81e8674bcea6042405cb4244af2c598ab995b4\",\n      depth: 4,\n      index: 2147483649,\n      parentFingerprint: 194150729,\n      path: \"m/48'/0'/100'/1'\",\n      pubkey: \"030d7b4de2784978a3352adaacf3182c737de75f1c07778019aad15b0b99b640a4\",\n      rootFingerprint: \"f57ec65d\",\n      version: \"0488b21e\"\n    },\n    unchained: {\n      base58String: \"xpub6EwJjKaiocGvo9f7XSGXGwzo1GLB1URxSZ5Ccp1wqdxNkhrSoqNQkC2CeMsU675urdmFJLHSX62xz56HGcnn6u21wRy6uipovmzaE65PfBp\",\n      chaincode: \"a4b98329bb145e79fa7485653f2b9dc4d8ca9519ee0f00093809dc1d3d8b3cd2\",\n      depth: 4,\n      index: 2147483649,\n      parentFingerprint: 3203536812,\n      path: \"m/48'/0'/100'/1'\",\n      pubkey: \"0366e35ecc712f790e698e502ba2b3ed00645c6994b59c8884aded1eb29af87ef2\",\n      rootFingerprint: \"00000005\",\n      version: \"0488b21e\"\n    }\n  },\n  // P2WSH-MAINNET\n  \"m/48'/0'/100'/2'\": {\n    xpub: \"xpub6DcqYQxnbefzFkaRBK63FSE2GzNuNnNhFGw1xV9RioVG7av6r3JDf1aELqBSq5gt5487CtNxvVtaiJjQU2HQWzgG5NzLyTPbYav6otW8qEc\",\n    rootFingerprint: ROOT_FINGERPRINT,\n    open_source: {\n      base58String: \"xpub6DcqYQxnbefzFkaRBK63FSE2GzNuNnNhFGw1xV9RioVG7av6r3JDf1aELqBSq5gt5487CtNxvVtaiJjQU2HQWzgG5NzLyTPbYav6otW8qEc\",\n      chaincode: \"6b2c97052334fd0333464fd7d7b6ed9b7bae25f9bcabfa54f15e041ac22971fc\",\n      depth: 4,\n      index: 2147483650,\n      parentFingerprint: 194150729,\n      path: \"m/48'/0'/100'/2'\",\n      pubkey: \"038fce535133ea87f989ca0908f7e8de0fa965d0a6649b71bf5c74244ece64d490\",\n      rootFingerprint: \"f57ec65d\",\n      version: \"0488b21e\"\n    },\n    unchained: {\n      base58String: \"xpub6EwJjKaiocGvqSuM2jRZSuQ9HEddiFUFu9RdjE47zG7kXVNDQpJ3GyvskwYiLmvU4SBTNZyv8UH53QcmFEE23YwozE61V3dwzZJEFQr6H2b\",\n      chaincode: \"8b7900c703cdd0f752b13b7a95ee9cb0d5a0df7fb9bfe4678b074edd3dc59a11\",\n      depth: 4,\n      index: 2147483650,\n      parentFingerprint: 3203536812,\n      path: \"m/48'/0'/100'/2'\",\n      pubkey: \"030a3dd68cd8d3a896209c9eee0a6b8ec28783458882ce1a7362d8b60b34de3097\",\n      rootFingerprint: \"00000006\",\n      version: \"0488b21e\"\n    }\n  }\n};\nvar BRAIDS = [{\n  network: _networks.TESTNET,\n  addressType: _p2sh.P2SH,\n  extendedPublicKeys: [NODES[\"m/45'/1'/100'\"].open_source, NODES[\"m/45'/1'/100'\"].unchained],\n  stringExtendedPublicKeys: [NODES[\"m/45'/1'/100'\"].open_source.base58String, NODES[\"m/45'/1'/100'\"].unchained.base58String],\n  requiredSigners: 2,\n  index: '0',\n  pubKeySets: {\n    'index': {\n      0: [\"02a8513d9931896d5d3afc8063148db75d8851fd1fc41b1098ba2a6a766db563d4\", \"03938dd09bf3dd29ddf41f264858accfa40b330c98e0ed27caf77734fac00139ba\"],\n      1: [\"0221ee4400a394e44b78592463eb07c9bae0cc9c2b11081be97df15cd561124e19\", \"03f31364b009d8019be56fa2569f336362e3e2b6a809623d87ffbef634ca6e1f27\"],\n      48349: [\"0308e27264d2b28b2e56104b36e562f69414027574998a53674b5db28a649f0f38\", \"037a911b48783ca769ae273ebe71d3a14d7af2301063c25564155e8764fa77c981\"]\n    },\n    'path': {\n      \"0/0\": [\"02a8513d9931896d5d3afc8063148db75d8851fd1fc41b1098ba2a6a766db563d4\", \"03938dd09bf3dd29ddf41f264858accfa40b330c98e0ed27caf77734fac00139ba\"]\n    }\n  },\n  bip32Derivations: {\n    'index': {\n      0: [{\n        masterFingerprint: Buffer.from('f57ec65d', 'hex'),\n        path: \"m/45'/1'/100'/0/0\",\n        pubkey: Buffer.from('02a8513d9931896d5d3afc8063148db75d8851fd1fc41b1098ba2a6a766db563d4', 'hex')\n      }, {\n        masterFingerprint: Buffer.from('00000001', 'hex'),\n        path: \"m/45'/1'/100'/0/0\",\n        pubkey: Buffer.from('03938dd09bf3dd29ddf41f264858accfa40b330c98e0ed27caf77734fac00139ba', 'hex')\n      }],\n      1: [{\n        masterFingerprint: Buffer.from('f57ec65d', 'hex'),\n        path: \"m/45'/1'/100'/0/1\",\n        pubkey: Buffer.from('0221ee4400a394e44b78592463eb07c9bae0cc9c2b11081be97df15cd561124e19', 'hex')\n      }, {\n        masterFingerprint: Buffer.from('00000001', 'hex'),\n        path: \"m/45'/1'/100'/0/1\",\n        pubkey: Buffer.from('03f31364b009d8019be56fa2569f336362e3e2b6a809623d87ffbef634ca6e1f27', 'hex')\n      }],\n      48349: [{\n        masterFingerprint: Buffer.from('f57ec65d', 'hex'),\n        path: \"m/45'/1'/100'/0/48349\",\n        pubkey: Buffer.from('0308e27264d2b28b2e56104b36e562f69414027574998a53674b5db28a649f0f38', 'hex')\n      }, {\n        masterFingerprint: Buffer.from('00000001', 'hex'),\n        path: \"m/45'/1'/100'/0/48349\",\n        pubkey: Buffer.from('037a911b48783ca769ae273ebe71d3a14d7af2301063c25564155e8764fa77c981', 'hex')\n      }]\n    },\n    'path': {\n      \"0/0\": [{\n        masterFingerprint: Buffer.from('f57ec65d', 'hex'),\n        path: \"m/45'/1'/100'/0/0\",\n        pubkey: Buffer.from('02a8513d9931896d5d3afc8063148db75d8851fd1fc41b1098ba2a6a766db563d4', 'hex')\n      }, {\n        masterFingerprint: Buffer.from('00000001', 'hex'),\n        path: \"m/45'/1'/100'/0/0\",\n        pubkey: Buffer.from('03938dd09bf3dd29ddf41f264858accfa40b330c98e0ed27caf77734fac00139ba', 'hex')\n      }]\n    }\n  }\n}];\nvar MULTISIGS_BASE = [{\n  network: _networks.TESTNET,\n  type: _p2sh.P2SH,\n  bip32Path: \"m/45'/1'/100'/0/0\",\n  publicKey: \"02a8513d9931896d5d3afc8063148db75d8851fd1fc41b1098ba2a6a766db563d4\",\n  publicKeys: [\"02a8513d9931896d5d3afc8063148db75d8851fd1fc41b1098ba2a6a766db563d4\", \"03938dd09bf3dd29ddf41f264858accfa40b330c98e0ed27caf77734fac00139ba\"],\n  changePublicKeys: [\"021a049747120345fa9017fb42d8ff3d4fb1d2ef4c80546872c5da513babd51585\", \"03a00095df48367ed21e5c6edd50af4352311bf060eb100425cb7af4331aa1aad0\"],\n  redeemScriptOps: \"OP_2 02a8513d9931896d5d3afc8063148db75d8851fd1fc41b1098ba2a6a766db563d4 03938dd09bf3dd29ddf41f264858accfa40b330c98e0ed27caf77734fac00139ba OP_2 OP_CHECKMULTISIG\",\n  redeemScriptHex: \"522102a8513d9931896d5d3afc8063148db75d8851fd1fc41b1098ba2a6a766db563d42103938dd09bf3dd29ddf41f264858accfa40b330c98e0ed27caf77734fac00139ba52ae\",\n  scriptOps: \"OP_HASH160 8479072d5a550ee0900b5af7e70af575527a879d OP_EQUAL\",\n  scriptHex: \"a9148479072d5a550ee0900b5af7e70af575527a879d87\",\n  address: \"2N5KgAnFFpmk5TRMiCicRZDQS8FFNCKqKf1\",\n  utxos: [{\n    txid: \"65e7ef764030dabfb46e3ae1c357b0666d0dda722c9809fb73245d6d68665284\",\n    index: 1,\n    amountSats: \"100000\",\n    // 0.001 BTC\n    transactionHex: \"0200000000010149c912d0e5e46f6ef933038c7fb7e1d665db9ae56b67fa57fe4c3476a95cf954000000001716001400e2f78f987a5a4493cf062994dbde49d040a922feffffff02631418000000000017a914c7ab6d103180a48181847d35732e93e0ce9ab07387a08601000000000017a9148479072d5a550ee0900b5af7e70af575527a879d870247304402202f538752e408b4817e7751ef243eee67d2242ca2061e8e6c9f22873247f10a8d02205b4622314efd733f12fc6557bc2f323ff2cbc1604ad97a351807e1be80875bc8012102e92335f6ecb1862f0eea0b99297f21bdb9beb9a1e8f41113788f5add306ca9fcee9b1800\"\n  }, {\n    txid: \"ae9e1aa8312e102e806fa11d8e65965a624f88459e6bb5bcf48156a0c53e022a\",\n    index: 1,\n    amountSats: \"100000\",\n    // 0.001 BTC\n    transactionHex: \"0200000000010101745e1daa28c1705dbf73edd183e5ef91ad0918d97ad3e2ec2c69b548086f4d00000000171600142b0b522ba87db1646898118860449fcb2c69dae3feffffff02329642000000000017a9140f894f7e3b70b8741f830e066b6ef508a9f7479d87a08601000000000017a9148479072d5a550ee0900b5af7e70af575527a879d870247304402202dc887e5d623bd974968285e9c8165cfa9facd943caf0f8472e7acef632fb94302205c60434061e6a4e45360d3b3c901a9c1dd148b38dd6c9623cd8fa2677587e632012102366538692ffb9622e75a05dc2004d85efa0ebc27b99961e694d88f9ede2b57cae49b1800\"\n  }, {\n    txid: \"f243c1fbb85dd49da91477b89c76636202721be9c7df5ee6eee0c6a10861ae44\",\n    index: 0,\n    amountSats: \"100000\",\n    // 0.001 BTC\n    transactionHex: \"02000000000101e5d6a0ffc5f8387a90c463bf614ae53609b72988c44afc6a577f22666bc971a7000000001716001428386489d15b1cddfd245b506b8ff2d909b18d36feffffff02a08601000000000017a9148479072d5a550ee0900b5af7e70af575527a879d8786ce18050000000017a914d2fb0a8958e55d4c6c3ff58f970fdbba3006ec078702473044022007a7186e6afb93de749b3a905d1c7437f470f97095ea410538b6ac33d15a947802205a66118c7dc2e14d7325a122eb0021f54e1dbd5dfb8fd56b253fa3782716af3d012103f5951ccccf00964d54eefa78280ae083e0f0f0cc6382fd27b3fbfdfeda8dd2c7b29b1800\"\n  }],\n  transaction: {\n    outputs: [{\n      address: RECEIVING_ADDRESSES[_networks.TESTNET][_p2sh.P2SH],\n      amountSats: \"291590\"\n    }, {\n      address: CHANGE_ADDRESSES[_networks.TESTNET][_p2sh.P2SH],\n      amountSats: \"7535\",\n      value: 7535,\n      bip32Derivation: [{\n        masterFingerprint: Buffer.from('f57ec65d', 'hex'),\n        path: \"m/45'/1'/100'/1/0\",\n        pubkey: Buffer.from('03a00095df48367ed21e5c6edd50af4352311bf060eb100425cb7af4331aa1aad0', 'hex')\n      }, {\n        masterFingerprint: Buffer.from('00000001', 'hex'),\n        path: \"m/45'/1'/100'/1/0\",\n        pubkey: Buffer.from('021a049747120345fa9017fb42d8ff3d4fb1d2ef4c80546872c5da513babd51585', 'hex')\n      }],\n      redeemScript: Buffer.from(\"5221021a049747120345fa9017fb42d8ff3d4fb1d2ef4c80546872c5da513babd515852103a00095df48367ed21e5c6edd50af4352311bf060eb100425cb7af4331aa1aad052ae\", 'hex')\n    }],\n    hex: \"0100000003845266686d5d2473fb09982c72da0d6d66b057c3e13a6eb4bfda304076efe7650100000000ffffffff2a023ec5a05681f4bcb56b9e45884f625a96658e1da16f802e102e31a81a9eae0100000000ffffffff44ae6108a1c6e0eee65edfc7e91b72026263769cb87714a99dd45db8fbc143f20000000000ffffffff02067304000000000017a914e3ba1151b75effbf7adc4673c83c8feec3ddc367876f1d00000000000017a914c34d63a6720866070490a8cb244c6bdc7ce2fa138700000000\",\n    signature: [\"3045022100c82920c7d99e0a4055a8459c53362d15f5f8ce275322be8fd2045b43a5ae7f8d0220478b3856327a4b7809a1f858159bd437e4d93ca480e35bbe21c5cd914b6d722a01\", \"304402200464b13a701b9ac16eea29d1604a73d82ba5b3aed1435a8c2c3d4f940a2499ce02206be000a5cc605b284ab6c40039d56d49b7af304fea53079ec9ac838732b8765d01\", \"30450221008af4884f2bfbd4565e58c1e7d0f4cb36f8ebc210466d165c48311ddc40df7dc8022017196f4355f66621de0fed97002cfbd6ef7163c882a709f04e5dd0bbe960bcbd01\"]\n  },\n  bip32Derivation: [{\n    masterFingerprint: Buffer.from('f57ec65d', 'hex'),\n    path: \"m/45'/1'/100'/0/0\",\n    pubkey: Buffer.from('02a8513d9931896d5d3afc8063148db75d8851fd1fc41b1098ba2a6a766db563d4', 'hex')\n  }, {\n    masterFingerprint: Buffer.from('00000001', 'hex'),\n    path: \"m/45'/1'/100'/0/0\",\n    pubkey: Buffer.from('03938dd09bf3dd29ddf41f264858accfa40b330c98e0ed27caf77734fac00139ba', 'hex')\n  }],\n  changeBip32Derivation: [{\n    masterFingerprint: Buffer.from('f57ec65d', 'hex'),\n    path: \"m/45'/1'/100'/1/0\",\n    pubkey: Buffer.from('03a00095df48367ed21e5c6edd50af4352311bf060eb100425cb7af4331aa1aad0', 'hex')\n  }, {\n    masterFingerprint: Buffer.from('00000001', 'hex'),\n    path: \"m/45'/1'/100'/1/0\",\n    pubkey: Buffer.from('021a049747120345fa9017fb42d8ff3d4fb1d2ef4c80546872c5da513babd51585', 'hex')\n  }],\n  braidDetails: {\n    network: _networks.TESTNET,\n    addressType: _p2sh.P2SH,\n    extendedPublicKeys: [NODES[\"m/45'/1'/100'\"].open_source, NODES[\"m/45'/1'/100'\"].unchained],\n    requiredSigners: 2,\n    index: '0'\n  },\n  changeBraidDetails: {\n    network: _networks.TESTNET,\n    addressType: _p2sh.P2SH,\n    extendedPublicKeys: [NODES[\"m/45'/1'/100'\"].open_source, NODES[\"m/45'/1'/100'\"].unchained],\n    requiredSigners: 2,\n    index: '1'\n  },\n  psbtNoChange: \"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\",\n  psbt: \"cHNidP8BAMUBAAAAA4RSZmhtXSRz+wmYLHLaDW1msFfD4TputL/aMEB27+dlAQAAAAD/////KgI+xaBWgfS8tWueRYhPYlqWZY4doW+ALhAuMaganq4BAAAAAP////9ErmEIocbg7uZe38fpG3ICYmN2nLh3FKmd1F24+8FD8gAAAAAA/////wIGcwQAAAAAABepFOO6EVG3Xv+/etxGc8g8j+7D3cNnh28dAAAAAAAAF6kUw01jpnIIZgcEkKjLJExr3Hzi+hOHAAAAAAABAPcCAAAAAAEBSckS0OXkb275MwOMf7fh1mXbmuVrZ/pX/kw0dqlc+VQAAAAAFxYAFADi94+YelpEk88GKZTb3knQQKki/v///wJjFBgAAAAAABepFMerbRAxgKSBgYR9NXMuk+DOmrBzh6CGAQAAAAAAF6kUhHkHLVpVDuCQC1r35wr1dVJ6h52HAkcwRAIgL1OHUuQItIF+d1HvJD7uZ9IkLKIGHo5snyKHMkfxCo0CIFtGIjFO/XM/EvxlV7wvMj/yy8FgStl6NRgH4b6Ah1vIASEC6SM19uyxhi8O6guZKX8hvbm+uaHo9BETeI9a3TBsqfzumxgAAQRHUiECqFE9mTGJbV06/IBjFI23XYhR/R/EGxCYuipqdm21Y9QhA5ON0Jvz3Snd9B8mSFisz6QLMwyY4O0nyvd3NPrAATm6Uq4iBgKoUT2ZMYltXTr8gGMUjbddiFH9H8QbEJi6Kmp2bbVj1Bj1fsZdLQAAgAEAAIBkAACAAAAAAAAAAAAiBgOTjdCb890p3fQfJkhYrM+kCzMMmODtJ8r3dzT6wAE5uhgAAAABLQAAgAEAAIBkAACAAAAAAAAAAAAAAQD3AgAAAAABAQF0Xh2qKMFwXb9z7dGD5e+RrQkY2XrT4uwsabVICG9NAAAAABcWABQrC1IrqH2xZGiYEYhgRJ/LLGna4/7///8CMpZCAAAAAAAXqRQPiU9+O3C4dB+DDgZrbvUIqfdHnYeghgEAAAAAABepFIR5By1aVQ7gkAta9+cK9XVSeoedhwJHMEQCIC3Ih+XWI72XSWgoXpyBZc+p+s2UPK8PhHLnrO9jL7lDAiBcYENAYeak5FNg07PJAanB3RSLON1sliPNj6JndYfmMgEhAjZlOGkv+5Yi51oF3CAE2F76DrwnuZlh5pTYj57eK1fK5JsYAAEER1IhAqhRPZkxiW1dOvyAYxSNt12IUf0fxBsQmLoqanZttWPUIQOTjdCb890p3fQfJkhYrM+kCzMMmODtJ8r3dzT6wAE5ulKuIgYCqFE9mTGJbV06/IBjFI23XYhR/R/EGxCYuipqdm21Y9QY9X7GXS0AAIABAACAZAAAgAAAAAAAAAAAIgYDk43Qm/PdKd30HyZIWKzPpAszDJjg7SfK93c0+sABOboYAAAAAS0AAIABAACAZAAAgAAAAAAAAAAAAAEA9wIAAAAAAQHl1qD/xfg4epDEY79hSuU2CbcpiMRK/GpXfyJma8lxpwAAAAAXFgAUKDhkidFbHN39JFtQa4/y2QmxjTb+////AqCGAQAAAAAAF6kUhHkHLVpVDuCQC1r35wr1dVJ6h52Hhs4YBQAAAAAXqRTS+wqJWOVdTGw/9Y+XD9u6MAbsB4cCRzBEAiAHpxhuavuT3nSbOpBdHHQ39HD5cJXqQQU4tqwz0VqUeAIgWmYRjH3C4U1zJaEi6wAh9U4dvV37j9VrJT+jeCcWrz0BIQP1lRzMzwCWTVTu+ngoCuCD4PDwzGOC/Sez+/3+2o3Sx7KbGAABBEdSIQKoUT2ZMYltXTr8gGMUjbddiFH9H8QbEJi6Kmp2bbVj1CEDk43Qm/PdKd30HyZIWKzPpAszDJjg7SfK93c0+sABObpSriIGAqhRPZkxiW1dOvyAYxSNt12IUf0fxBsQmLoqanZttWPUGPV+xl0tAACAAQAAgGQAAIAAAAAAAAAAACIGA5ON0Jvz3Snd9B8mSFisz6QLMwyY4O0nyvd3NPrAATm6GAAAAAEtAACAAQAAgGQAAIAAAAAAAAAAAAAAAQBHUiECGgSXRxIDRfqQF/tC2P89T7HS70yAVGhyxdpRO6vVFYUhA6AAld9INn7SHlxu3VCvQ1IxG/Bg6xAEJct69DMaoarQUq4iAgIaBJdHEgNF+pAX+0LY/z1PsdLvTIBUaHLF2lE7q9UVhRgAAAABLQAAgAEAAIBkAACAAQAAAAAAAAAiAgOgAJXfSDZ+0h5cbt1Qr0NSMRvwYOsQBCXLevQzGqGq0Bj1fsZdLQAAgAEAAIBkAACAAQAAAAAAAAAA\",\n  psbtPartiallySigned: \"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\"\n}, {\n  network: _networks.TESTNET,\n  type: _p2sh_p2wsh.P2SH_P2WSH,\n  bip32Path: \"m/48'/1'/100'/1'/0/0\",\n  publicKey: \"026aaa7c4697ff439bfd6c7a70abf66253b4e329654b41ee2ad21d68b854e4a422\",\n  publicKeys: [\"025566585b3a8066b7d0bba4d2b24c3c59a5f527d62c100bbb7073a7cb2565418c\", \"026aaa7c4697ff439bfd6c7a70abf66253b4e329654b41ee2ad21d68b854e4a422\"],\n  witnessScriptOps: \"OP_2 025566585b3a8066b7d0bba4d2b24c3c59a5f527d62c100bbb7073a7cb2565418c 026aaa7c4697ff439bfd6c7a70abf66253b4e329654b41ee2ad21d68b854e4a422 OP_2 OP_CHECKMULTISIG\",\n  witnessScriptHex: \"5221025566585b3a8066b7d0bba4d2b24c3c59a5f527d62c100bbb7073a7cb2565418c21026aaa7c4697ff439bfd6c7a70abf66253b4e329654b41ee2ad21d68b854e4a42252ae\",\n  redeemScriptOps: \"OP_0 deeb888c0a0a1871a3da4c2e75ffab5eb17e9d27fccd41bc3d683a2674f93aa1\",\n  redeemScriptHex: \"0020deeb888c0a0a1871a3da4c2e75ffab5eb17e9d27fccd41bc3d683a2674f93aa1\",\n  scriptOps: \"OP_HASH160 dac0270cbf87a65c0cf4fd2295eb44c756b288ec OP_EQUAL\",\n  scriptHex: \"a914dac0270cbf87a65c0cf4fd2295eb44c756b288ec87\",\n  address: \"2NDBsV6VBe4d2Ukp2XB644dg2xZ2SuWGkyG\",\n  utxos: [{\n    txid: \"429da41d05db69d7c006e91b15031e6d47faab15adba3c97059eeea093c36a23\",\n    index: 0,\n    amountSats: \"100000\",\n    // 0.001 BTC\n    transactionHex: \"02000000000101845266686d5d2473fb09982c72da0d6d66b057c3e13a6eb4bfda304076efe7650000000017160014a89baf1e6b16698bf34927d4a1f71270a57972d6feffffff02a08601000000000017a914dac0270cbf87a65c0cf4fd2295eb44c756b288ec871d8d16000000000017a91471e39bcec3aead7b1d45ad04aea8ad231be756768702473044022067dbe8b2623bd3948bfca811f934c1b512d7add1a09ff70a5b0e083edccbee780220325924a596ce2b567797b53eaa7eec3f6a989427829479ea5619ed72aaeffea40121023251e686167dbea8774b3510a78caa67550d566bd078c1285aa69ec0c561f767ee9b1800\"\n  }, {\n    txid: \"d8edcd3ef4293a2554a147f048442d735fb54b901c1e39ffdb59448c1abae812\",\n    index: 0,\n    amountSats: \"100000\",\n    // 0.001 BTC\n    transactionHex: \"02000000000101236ac393a0ee9e05973cbaad15abfa476d1e03151be906c0d769db051da49d4201000000171600149df8fa8c17c034dd0e4f96c1eb0110113037ff71feffffff02a08601000000000017a914dac0270cbf87a65c0cf4fd2295eb44c756b288ec87d70515000000000017a9144b1d195a2cf70e3233aaf8e229d9d2a2da1b7845870247304402205c2e3d2cb7c8aa461aabb5c74210f795ec018db703910c9556f8b222012bb3ad02200f8c63fd859b575a6a762df0019f18ad917cf9de1e128e33bc540c4e5356b9ea012103280eb7fdde76317c63664c46bfe7602f6ff64a0dc22695c7e7093f34b40c5536ee9b1800\"\n  }, {\n    txid: \"ff43f4cc8473341ce9effb91d715a4deb4e8a8cb669dd1d119a3a30552a829d1\",\n    index: 0,\n    amountSats: \"100000\",\n    // 0.001 BTC\n    transactionHex: \"02000000000101eef67cc41c10722be710952296866ea13ed1608acdf15e453e8d874e6a15c6d50000000017160014a989c1c6a3dbbf44d508d5f36df2d08c97e9fca4feffffff02a08601000000000017a914dac0270cbf87a65c0cf4fd2295eb44c756b288ec87a5b90d000000000017a914d0324b98895786d859ae3ee3df0c384249f1a4ab870247304402200621a08b242b807a0c39b6e0bf302e503b9a2596acdd218b176cb62afba31824022027bb2cc91b5ae57500a2e3c440d4d45cc42617f4db665a1b25974122b3789ddd01210209bb437e2e4658c6eb92c20a1ef459a2d1da50757dfba0c49a19dd3dbd621d87e09b1800\"\n  }],\n  transaction: {\n    outputs: [{\n      address: RECEIVING_ADDRESSES[_networks.TESTNET][_p2sh_p2wsh.P2SH_P2WSH],\n      amountSats: \"291590\"\n    }, {\n      address: CHANGE_ADDRESSES[_networks.TESTNET][_p2sh_p2wsh.P2SH_P2WSH],\n      amountSats: \"7922\",\n      value: 7922,\n      bip32Derivation: [{\n        masterFingerprint: Buffer.from('f57ec65d', 'hex'),\n        path: \"m/48'/1'/100'/1'/1/0\",\n        pubkey: Buffer.from('02ade44fc6568a4a334b1797140534707a5dd60c247a59523c577ad9eb59d798ba', 'hex')\n      }, {\n        masterFingerprint: Buffer.from('00000002', 'hex'),\n        path: \"m/48'/1'/100'/1'/1/0\",\n        pubkey: Buffer.from('02489bfaa3dc33e5d2325295d9d1367f35a45fce09c96db6456fc712938dc2c0c7', 'hex')\n      }],\n      redeemScript: Buffer.from('0020d6a0f404c62823b51ca0468c3d58e8a210d8afb377372060a58e0ad1471466e0', 'hex'),\n      witnessScript: Buffer.from('522102489bfaa3dc33e5d2325295d9d1367f35a45fce09c96db6456fc712938dc2c0c72102ade44fc6568a4a334b1797140534707a5dd60c247a59523c577ad9eb59d798ba52ae', 'hex')\n    }],\n    hex: \"0100000003236ac393a0ee9e05973cbaad15abfa476d1e03151be906c0d769db051da49d420000000000ffffffff12e8ba1a8c4459dbff391e1c904bb55f732d4448f047a154253a29f43ecdedd80000000000ffffffffd129a85205a3a319d1d19d66cba8e8b4dea415d791fbefe91c347384ccf443ff0000000000ffffffff02067304000000000017a914e3ba1151b75effbf7adc4673c83c8feec3ddc36787f21e00000000000017a914413d62d98e2bbbf3f8f35f1d00cff58ee25eea178700000000\",\n    signature: [\"3044022014672c552254e724b1677849ed4e973f9b60d2d5ae343772b6f2b2220ce1187002206f54a595bc1bc0c430936d27a5ccbd72c8d96aa5fe1fb9ef51778caabeb820dc01\", \"3045022100d23276b4de50e1fa41140e03d295551e868fb51bdf6cca303087be2bb2bf15b30220399b2f7678879eda4e59124cd7f3137b8ef9c2c1770119a2b5124503decc4b0501\", \"3045022100af3b112d039fb101483a87639b96439fa32d654a971d060afafa7a2ee08f3abc0220513fd7823d06d89c3cb58107ea9e94042cffe57ae5e6a7fe9c965cc3e961677401\"]\n  },\n  braidDetails: {\n    network: _networks.TESTNET,\n    addressType: _p2sh_p2wsh.P2SH_P2WSH,\n    extendedPublicKeys: [NODES[\"m/48'/1'/100'/1'\"].open_source, NODES[\"m/48'/1'/100'/1'\"].unchained],\n    requiredSigners: 2,\n    index: '0'\n  },\n  psbtNoChange: \"cHNidP8BAKUBAAAAAyNqw5Og7p4Flzy6rRWr+kdtHgMVG+kGwNdp2wUdpJ1CAAAAAAD/////Eui6GoxEWdv/OR4ckEu1X3MtREjwR6FUJTop9D7N7dgAAAAAAP/////RKahSBaOjGdHRnWbLqOi03qQV15H77+kcNHOEzPRD/wAAAAAA/////wEGcwQAAAAAABepFOO6EVG3Xv+/etxGc8g8j+7D3cNnhwAAAAAAAQEgoIYBAAAAAAAXqRTawCcMv4emXAz0/SKV60THVrKI7IcBBCIAIN7riIwKChhxo9pMLnX/q16xfp0n/M1BvD1oOiZ0+TqhAQVHUiECVWZYWzqAZrfQu6TSskw8WaX1J9YsEAu7cHOnyyVlQYwhAmqqfEaX/0Ob/Wx6cKv2YlO04yllS0HuKtIdaLhU5KQiUq4iBgJVZlhbOoBmt9C7pNKyTDxZpfUn1iwQC7twc6fLJWVBjBzvpdkWMAAAgAEAAIBkAACAAQAAgAAAAAAAAAAAIgYCaqp8Rpf/Q5v9bHpwq/ZiU7TjKWVLQe4q0h1ouFTkpCIc9X7GXTAAAIABAACAZAAAgAEAAIAAAAAAAAAAAAABASCghgEAAAAAABepFNrAJwy/h6ZcDPT9IpXrRMdWsojshwEEIgAg3uuIjAoKGHGj2kwudf+rXrF+nSf8zUG8PWg6JnT5OqEBBUdSIQJVZlhbOoBmt9C7pNKyTDxZpfUn1iwQC7twc6fLJWVBjCECaqp8Rpf/Q5v9bHpwq/ZiU7TjKWVLQe4q0h1ouFTkpCJSriIGAlVmWFs6gGa30Luk0rJMPFml9SfWLBALu3Bzp8slZUGMHO+l2RYwAACAAQAAgGQAAIABAACAAAAAAAAAAAAiBgJqqnxGl/9Dm/1senCr9mJTtOMpZUtB7irSHWi4VOSkIhz1fsZdMAAAgAEAAIBkAACAAQAAgAAAAAAAAAAAAAEBIKCGAQAAAAAAF6kU2sAnDL+HplwM9P0iletEx1ayiOyHAQQiACDe64iMCgoYcaPaTC51/6tesX6dJ/zNQbw9aDomdPk6oQEFR1IhAlVmWFs6gGa30Luk0rJMPFml9SfWLBALu3Bzp8slZUGMIQJqqnxGl/9Dm/1senCr9mJTtOMpZUtB7irSHWi4VOSkIlKuIgYCVWZYWzqAZrfQu6TSskw8WaX1J9YsEAu7cHOnyyVlQYwc76XZFjAAAIABAACAZAAAgAEAAIAAAAAAAAAAACIGAmqqfEaX/0Ob/Wx6cKv2YlO04yllS0HuKtIdaLhU5KQiHPV+xl0wAACAAQAAgGQAAIABAACAAAAAAAAAAAAAAA==\",\n  psbt: \"cHNidP8BAMUBAAAAAyNqw5Og7p4Flzy6rRWr+kdtHgMVG+kGwNdp2wUdpJ1CAAAAAAD/////Eui6GoxEWdv/OR4ckEu1X3MtREjwR6FUJTop9D7N7dgAAAAAAP/////RKahSBaOjGdHRnWbLqOi03qQV15H77+kcNHOEzPRD/wAAAAAA/////wIGcwQAAAAAABepFOO6EVG3Xv+/etxGc8g8j+7D3cNnh/IeAAAAAAAAF6kUQT1i2Y4ru/P4818dAM/1juJe6heHAAAAAAABASCghgEAAAAAABepFNrAJwy/h6ZcDPT9IpXrRMdWsojshwEEIgAg3uuIjAoKGHGj2kwudf+rXrF+nSf8zUG8PWg6JnT5OqEBBUdSIQJVZlhbOoBmt9C7pNKyTDxZpfUn1iwQC7twc6fLJWVBjCECaqp8Rpf/Q5v9bHpwq/ZiU7TjKWVLQe4q0h1ouFTkpCJSriIGAlVmWFs6gGa30Luk0rJMPFml9SfWLBALu3Bzp8slZUGMHAAAAAIwAACAAQAAgGQAAIABAACAAAAAAAAAAAAiBgJqqnxGl/9Dm/1senCr9mJTtOMpZUtB7irSHWi4VOSkIhz1fsZdMAAAgAEAAIBkAACAAQAAgAAAAAAAAAAAAAEBIKCGAQAAAAAAF6kU2sAnDL+HplwM9P0iletEx1ayiOyHAQQiACDe64iMCgoYcaPaTC51/6tesX6dJ/zNQbw9aDomdPk6oQEFR1IhAlVmWFs6gGa30Luk0rJMPFml9SfWLBALu3Bzp8slZUGMIQJqqnxGl/9Dm/1senCr9mJTtOMpZUtB7irSHWi4VOSkIlKuIgYCVWZYWzqAZrfQu6TSskw8WaX1J9YsEAu7cHOnyyVlQYwcAAAAAjAAAIABAACAZAAAgAEAAIAAAAAAAAAAACIGAmqqfEaX/0Ob/Wx6cKv2YlO04yllS0HuKtIdaLhU5KQiHPV+xl0wAACAAQAAgGQAAIABAACAAAAAAAAAAAAAAQEgoIYBAAAAAAAXqRTawCcMv4emXAz0/SKV60THVrKI7IcBBCIAIN7riIwKChhxo9pMLnX/q16xfp0n/M1BvD1oOiZ0+TqhAQVHUiECVWZYWzqAZrfQu6TSskw8WaX1J9YsEAu7cHOnyyVlQYwhAmqqfEaX/0Ob/Wx6cKv2YlO04yllS0HuKtIdaLhU5KQiUq4iBgJVZlhbOoBmt9C7pNKyTDxZpfUn1iwQC7twc6fLJWVBjBwAAAACMAAAgAEAAIBkAACAAQAAgAAAAAAAAAAAIgYCaqp8Rpf/Q5v9bHpwq/ZiU7TjKWVLQe4q0h1ouFTkpCIc9X7GXTAAAIABAACAZAAAgAEAAIAAAAAAAAAAAAAAAQAiACDWoPQExigjtRygRow9WOiiENivs3c3IGCljgrRRxRm4AEBR1IhAkib+qPcM+XSMlKV2dE2fzWkX84JyW22RW/HEpONwsDHIQKt5E/GVopKM0sXlxQFNHB6XdYMJHpZUjxXetnrWdeYulKuIgICSJv6o9wz5dIyUpXZ0TZ/NaRfzgnJbbZFb8cSk43CwMccAAAAAjAAAIABAACAZAAAgAEAAIABAAAAAAAAACICAq3kT8ZWikozSxeXFAU0cHpd1gwkellSPFd62etZ15i6HPV+xl0wAACAAQAAgGQAAIABAACAAQAAAAAAAAAA\",\n  psbtPartiallySigned: \"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\"\n}, {\n  network: _networks.TESTNET,\n  type: _p2wsh.P2WSH,\n  bip32Path: \"m/48'/1'/100'/2'/0/0\",\n  publicKey: \"03bc34c50cf768f802290269c2ddabd086c73514c880cecb6db3f67676a4b72469\",\n  publicKeys: [\"035a763e0480f858ef626b649fa0efe9eb647abbf77db54f3af904d2de50c4342d\", \"03bc34c50cf768f802290269c2ddabd086c73514c880cecb6db3f67676a4b72469\"],\n  witnessScriptOps: \"OP_2 035a763e0480f858ef626b649fa0efe9eb647abbf77db54f3af904d2de50c4342d 03bc34c50cf768f802290269c2ddabd086c73514c880cecb6db3f67676a4b72469 OP_2 OP_CHECKMULTISIG\",\n  witnessScriptHex: \"5221035a763e0480f858ef626b649fa0efe9eb647abbf77db54f3af904d2de50c4342d2103bc34c50cf768f802290269c2ddabd086c73514c880cecb6db3f67676a4b7246952ae\",\n  scriptOps: \"OP_0 ba2514cdd3a3c202eb4394e550a0fc116cb834f34662a019be8a52c62351d068\",\n  scriptHex: \"0020ba2514cdd3a3c202eb4394e550a0fc116cb834f34662a019be8a52c62351d068\",\n  address: \"tb1qhgj3fnwn50pq966rjnj4pg8uz9ktsd8nge32qxd73ffvvg636p5q54g7m0\",\n  utxos: [{\n    txid: \"84df8dcc9b86e8c7bb39ce0ba9f577ec750f0b64df97a5c9559cf39243a1f501\",\n    index: 0,\n    amountSats: \"100000\",\n    // 0.001 BTC\n    transactionHex: \"020000000001018342873aa48ba6b2e5a796f34b7431bb56f9c569a6bd8f7e539cb3147a86b3f80000000000feffffff02a086010000000000220020ba2514cdd3a3c202eb4394e550a0fc116cb834f34662a019be8a52c62351d068a9873f0000000000160014208e4178e48f2d270a06475ad8caeb2e01f55ae80247304402205369dedb14963e0bfa22748a546e03e47fcf994c85944ae0d6b507d15ebba57d022073cdd6c8af057aabac652ec438de7fc7e201d6a3b8619e54a2db5c1b509865e9012103ba504ae1099d8f38163c90540fa10e09cac4fa2df95b8b91bc2aba01571c27d9ee9b1800\"\n  }, {\n    txid: \"f010998e033355636c2ba34af753cd6d5f198889a379bc30625bb38f646f3d72\",\n    index: 0,\n    amountSats: \"100000\",\n    // 0.001 BTC\n    transactionHex: \"0200000000010144ae6108a1c6e0eee65edfc7e91b72026263769cb87714a99dd45db8fbc143f201000000171600142ff3a6303add9138957b880c73a331cf718a418ffeffffff02a086010000000000220020ba2514cdd3a3c202eb4394e550a0fc116cb834f34662a019be8a52c62351d068364717050000000016001403f4d726aec3c06aa8a31b230e9997288faea72a02473044022032368bd2b2441840850b62f86bfa4434854b5e83da1e5cac43cd613a88f91839022042b2f9f7ea20c97d889a89b0f7cb649b8bb3acc20c4207b5665e235b340766a101210216bb0c99eb498379d5c7b7ad0f3afb9ff3eec9be622fffe821c5456003f22c02ee9b1800\"\n  }, {\n    txid: \"f8b3867a14b39c537e8fbda669c5f956bb31744bf396a7e5b2a68ba43a874283\",\n    index: 1,\n    amountSats: \"100000\",\n    // 0.001 BTC\n    transactionHex: \"020000000001012a023ec5a05681f4bcb56b9e45884f625a96658e1da16f802e102e31a81a9eae0000000017160014c4733d80022a7a3dde9a7e3112b39e390500713cfeffffff02e20e410000000000160014060213b00b3d902d2bd7e90c4b7e9e34830d2f9da086010000000000220020ba2514cdd3a3c202eb4394e550a0fc116cb834f34662a019be8a52c62351d0680247304402201504b1dbf14cf216c7de1fa78dd649a319b2274361034aaa9bc82473632650d1022013da0cb0bb740a95010821e451e7fc699bb2489e71c20093d8d3cd3f4e8c2efc012102db49c46b1a64061d15d0faa234e8da59defe0f4164009e73be9be540265cf0caee9b1800\"\n  }],\n  transaction: {\n    outputs: [{\n      address: RECEIVING_ADDRESSES[_networks.TESTNET][_p2wsh.P2WSH],\n      amountSats: \"291590\"\n    }, {\n      address: CHANGE_ADDRESSES[_networks.TESTNET][_p2wsh.P2WSH],\n      amountSats: \"8023\",\n      value: 8023,\n      bip32Derivation: [{\n        masterFingerprint: Buffer.from('f57ec65d', 'hex'),\n        path: \"m/48'/1'/100'/2'/1/0\",\n        pubkey: Buffer.from('02f45fa86e1ac4e69c0f183c769db9157740586c78b24c495be0404c1e6ae029e5', 'hex')\n      }, {\n        masterFingerprint: Buffer.from('00000003', 'hex'),\n        path: \"m/48'/1'/100'/2'/1/0\",\n        pubkey: Buffer.from('03610bec03e459c7fa28c9a36c4c9db6e2c4bc2ae4e2764aa3d035599c7052e33f', 'hex')\n      }],\n      witnessScript: Buffer.from('522102f45fa86e1ac4e69c0f183c769db9157740586c78b24c495be0404c1e6ae029e52103610bec03e459c7fa28c9a36c4c9db6e2c4bc2ae4e2764aa3d035599c7052e33f52ae', 'hex')\n    }],\n    hex: \"010000000301f5a14392f39c55c9a597df640b0f75ec77f5a90bce39bbc7e8869bcc8ddf840000000000ffffffff723d6f648fb35b6230bc79a38988195f6dcd53f74aa32b6c635533038e9910f00000000000ffffffff8342873aa48ba6b2e5a796f34b7431bb56f9c569a6bd8f7e539cb3147a86b3f80100000000ffffffff0206730400000000002200202de5497b772a7cbd61cd60a359cb412099da25725671d1e1a00de8ec46752dc8571f000000000000220020bc964191e076e9fd328cf115ebe35bd3d9b7b4f937c71c41cd19a08e9100635400000000\",\n    signature: [\"304402202269a8c0bd3baa357cb0bad6dc8c1808bdf1b9f4ded6ad321f25dfb3b9f8fe1002206cad4a70c21531032c586f6e2016c657dbd8c69a01c806e3382465269876b5db01\", \"304402205a414f8c1c55ee8d3d05cc6e3b5accc413297baa3d061c570c44af3ccbd01b7902205d99aad28720be4c4f80afc64870c3edbb9f28e8ddf5ac6a0d1ab149699c61b501\", \"30440220019a8b7a875af9429305a89b63d919aeae3bf87354e4043958b51fa1f5525df902200723f42838800a698a5c97bdffc53a80e6901346cc8e6000e52a92180f41462f01\"]\n  },\n  braidDetails: {\n    network: _networks.TESTNET,\n    addressType: _p2wsh.P2WSH,\n    extendedPublicKeys: [NODES[\"m/48'/1'/100'/2'\"].open_source, NODES[\"m/48'/1'/100'/2'\"].unchained],\n    requiredSigners: 2,\n    index: '0'\n  },\n  psbtNoChange: \"cHNidP8BALABAAAAAwH1oUOS85xVyaWX32QLD3Xsd/WpC845u8fohpvMjd+EAAAAAAD/////cj1vZI+zW2IwvHmjiYgZX23NU/dKoytsY1UzA46ZEPAAAAAAAP////+DQoc6pIumsuWnlvNLdDG7VvnFaaa9j35TnLMUeoaz+AEAAAAA/////wEGcwQAAAAAACIAIC3lSXt3Kny9Yc1go1nLQSCZ2iVyVnHR4aAN6OxGdS3IAAAAAAABASughgEAAAAAACIAILolFM3To8IC60OU5VCg/BFsuDTzRmKgGb6KUsYjUdBoAQVHUiEDWnY+BID4WO9ia2SfoO/p62R6u/d9tU86+QTS3lDENC0hA7w0xQz3aPgCKQJpwt2r0IbHNRTIgM7LbbP2dnaktyRpUq4iBgNadj4EgPhY72JrZJ+g7+nrZHq79321Tzr5BNLeUMQ0LRzvpdkWMAAAgAEAAIBkAACAAgAAgAAAAAAAAAAAIgYDvDTFDPdo+AIpAmnC3avQhsc1FMiAzstts/Z2dqS3JGkc9X7GXTAAAIABAACAZAAAgAIAAIAAAAAAAAAAAAABASughgEAAAAAACIAILolFM3To8IC60OU5VCg/BFsuDTzRmKgGb6KUsYjUdBoAQVHUiEDWnY+BID4WO9ia2SfoO/p62R6u/d9tU86+QTS3lDENC0hA7w0xQz3aPgCKQJpwt2r0IbHNRTIgM7LbbP2dnaktyRpUq4iBgNadj4EgPhY72JrZJ+g7+nrZHq79321Tzr5BNLeUMQ0LRzvpdkWMAAAgAEAAIBkAACAAgAAgAAAAAAAAAAAIgYDvDTFDPdo+AIpAmnC3avQhsc1FMiAzstts/Z2dqS3JGkc9X7GXTAAAIABAACAZAAAgAIAAIAAAAAAAAAAAAABASughgEAAAAAACIAILolFM3To8IC60OU5VCg/BFsuDTzRmKgGb6KUsYjUdBoAQVHUiEDWnY+BID4WO9ia2SfoO/p62R6u/d9tU86+QTS3lDENC0hA7w0xQz3aPgCKQJpwt2r0IbHNRTIgM7LbbP2dnaktyRpUq4iBgNadj4EgPhY72JrZJ+g7+nrZHq79321Tzr5BNLeUMQ0LRzvpdkWMAAAgAEAAIBkAACAAgAAgAAAAAAAAAAAIgYDvDTFDPdo+AIpAmnC3avQhsc1FMiAzstts/Z2dqS3JGkc9X7GXTAAAIABAACAZAAAgAIAAIAAAAAAAAAAAAAA\",\n  psbt: \"cHNidP8BANsBAAAAAwH1oUOS85xVyaWX32QLD3Xsd/WpC845u8fohpvMjd+EAAAAAAD/////cj1vZI+zW2IwvHmjiYgZX23NU/dKoytsY1UzA46ZEPAAAAAAAP////+DQoc6pIumsuWnlvNLdDG7VvnFaaa9j35TnLMUeoaz+AEAAAAA/////wIGcwQAAAAAACIAIC3lSXt3Kny9Yc1go1nLQSCZ2iVyVnHR4aAN6OxGdS3IVx8AAAAAAAAiACC8lkGR4Hbp/TKM8RXr41vT2be0+TfHHEHNGaCOkQBjVAAAAAAAAQEroIYBAAAAAAAiACC6JRTN06PCAutDlOVQoPwRbLg080ZioBm+ilLGI1HQaAEFR1IhA1p2PgSA+FjvYmtkn6Dv6etkerv3fbVPOvkE0t5QxDQtIQO8NMUM92j4AikCacLdq9CGxzUUyIDOy22z9nZ2pLckaVKuIgYDWnY+BID4WO9ia2SfoO/p62R6u/d9tU86+QTS3lDENC0cAAAAAzAAAIABAACAZAAAgAIAAIAAAAAAAAAAACIGA7w0xQz3aPgCKQJpwt2r0IbHNRTIgM7LbbP2dnaktyRpHPV+xl0wAACAAQAAgGQAAIACAACAAAAAAAAAAAAAAQEroIYBAAAAAAAiACC6JRTN06PCAutDlOVQoPwRbLg080ZioBm+ilLGI1HQaAEFR1IhA1p2PgSA+FjvYmtkn6Dv6etkerv3fbVPOvkE0t5QxDQtIQO8NMUM92j4AikCacLdq9CGxzUUyIDOy22z9nZ2pLckaVKuIgYDWnY+BID4WO9ia2SfoO/p62R6u/d9tU86+QTS3lDENC0cAAAAAzAAAIABAACAZAAAgAIAAIAAAAAAAAAAACIGA7w0xQz3aPgCKQJpwt2r0IbHNRTIgM7LbbP2dnaktyRpHPV+xl0wAACAAQAAgGQAAIACAACAAAAAAAAAAAAAAQEroIYBAAAAAAAiACC6JRTN06PCAutDlOVQoPwRbLg080ZioBm+ilLGI1HQaAEFR1IhA1p2PgSA+FjvYmtkn6Dv6etkerv3fbVPOvkE0t5QxDQtIQO8NMUM92j4AikCacLdq9CGxzUUyIDOy22z9nZ2pLckaVKuIgYDWnY+BID4WO9ia2SfoO/p62R6u/d9tU86+QTS3lDENC0cAAAAAzAAAIABAACAZAAAgAIAAIAAAAAAAAAAACIGA7w0xQz3aPgCKQJpwt2r0IbHNRTIgM7LbbP2dnaktyRpHPV+xl0wAACAAQAAgGQAAIACAACAAAAAAAAAAAAAAAEBR1IhAvRfqG4axOacDxg8dp25FXdAWGx4skxJW+BATB5q4CnlIQNhC+wD5FnH+ijJo2xMnbbixLwq5OJ2SqPQNVmccFLjP1KuIgIC9F+obhrE5pwPGDx2nbkVd0BYbHiyTElb4EBMHmrgKeUc9X7GXTAAAIABAACAZAAAgAIAAIABAAAAAAAAACICA2EL7APkWcf6KMmjbEydtuLEvCrk4nZKo9A1WZxwUuM/HAAAAAMwAACAAQAAgGQAAIACAACAAQAAAAAAAAAA\",\n  psbtPartiallySigned: \"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\"\n}, {\n  network: _networks.MAINNET,\n  type: _p2sh.P2SH,\n  bip32Path: \"m/45'/0'/100'/0/0\",\n  publicKey: \"02583c4776b51691f4e036c8e0eb160f3464a2de9ae4c6818b7945c78fc6bace79\",\n  publicKeys: [\"02583c4776b51691f4e036c8e0eb160f3464a2de9ae4c6818b7945c78fc6bace79\", \"02b024e76d6c2d8c22d9550467e97ced251ead5592529f9c813c1d818f7e89a35a\"],\n  redeemScriptOps: \"OP_2 02583c4776b51691f4e036c8e0eb160f3464a2de9ae4c6818b7945c78fc6bace79 02b024e76d6c2d8c22d9550467e97ced251ead5592529f9c813c1d818f7e89a35a OP_2 OP_CHECKMULTISIG\",\n  redeemScriptHex: \"522102583c4776b51691f4e036c8e0eb160f3464a2de9ae4c6818b7945c78fc6bace792102b024e76d6c2d8c22d9550467e97ced251ead5592529f9c813c1d818f7e89a35a52ae\",\n  scriptOps: \"OP_HASH160 f18bcbf45f7805fe663339d838d5c8a086d79e53 OP_EQUAL\",\n  scriptHex: \"a914f18bcbf45f7805fe663339d838d5c8a086d79e5387\",\n  address: \"3PiCF26aq57Wo5DJEbFNTVwD1bLCUEpAYZ\",\n  utxos: [{\n    txid: \"456813be8389d17e945c0b91b5112938a7268bb7c6721147bce6521eeabde7b0\",\n    index: 0,\n    amountSats: \"10000\",\n    // 0.0001 BTC\n    transactionHex: \"0200000000010216ac0943cd43bb8168c591016a0a5439b3124427bf5df0582f68f2ae52fc86560000000017160014f827ea2db54a62d5027b411ff9d2d6e9234796a8feffffffd9bde17e907b90631edc22f83a4f849d9527e4a3d3b3096fdfc8131eeb8c4c8201000000171600141aabdcba4979e2772ad5da60e757f6d992c09d41feffffff02102700000000000017a914f18bcbf45f7805fe663339d838d5c8a086d79e5387ac0700000000000017a914df0aa2a92361822c637c0e44fb1cae2f1a22f0df870247304402204f91360c63c8ce6c98ebec06a6710e5f016cac8d8733c3855401f821f437c5650220611c87d76c2e72accb892cff110f0837d6d60942fdaea2edf86098af355016570121033c5f5b6c028649dedbe089033d6736788199041567b510d88448d0d1bcd5675d024730440220296ce4c551c6945176d8f057c9d05d7a21aa7ccb4c1d8d692c8937b00e3a9be4022024a514a72e4c52ee9c7bcf5c60dd7fb8ee4e83059d0869d85a6659e4d6737535012103c86c2e648f8e34be880b5f12d33bfd712c552ebf68fe01a1daebf2a24a44cbfa99490900\"\n  }, {\n    txid: \"5bbf64e036e46bf93dadc770f0415f6566453b9ae2d932df00fd5b5e49bdbbd5\",\n    index: 1,\n    amountSats: \"10000\",\n    // 0.0001 BTC\n    transactionHex: \"0200000000010133f0ca4e94d7ad6673a3777ed56fbcf0d2ebc5f6578578746c989ba2ec20cfaa0300000017160014c530831acb421c9ac89d1a83113acf4b46b3a2affeffffff02f00602000000000017a914939b4923002a1f44854a671be64cf55846d4f5f887102700000000000017a914f18bcbf45f7805fe663339d838d5c8a086d79e5387024730440220044dac81ef05b655fb6e72a21423f2db9fd4fc938243ba8293f7f0f24c7e56e202201fa946e11c0be1eeae81fe2418a8d30bf39048fc110e6aaf253149ef47dc8d28012103fb20014d5c613fc2d5a588cf6ea9292afa843a8e5f14dfe9d4e18e5cb158ecee99490900\"\n  }, {\n    txid: \"74c11de1a3f1a5daa06441d78d7fb45609b3415721466c6256bffd881451cda5\",\n    index: 0,\n    amountSats: \"10000\",\n    // 0.0001 BTC\n    transactionHex: \"02000000000101d748779bd254dce3523c691a9ce1bf8836d524ba97d26cc24127e3367a2027f600000000171600141aabdcba4979e2772ad5da60e757f6d992c09d41feffffff02102700000000000017a914f18bcbf45f7805fe663339d838d5c8a086d79e5387025b00000000000017a9145d0e078b76ff5e990bf628bf28f593d217caaeb9870247304402206b99e2475b2424db1e47fdb9689036fa44d5c9dea3e5419f26759eed86920c91022011c38e5e69280e62353088d5bf28ecf15a3ff348edcad8c31e441f9f57da172a012103c86c2e648f8e34be880b5f12d33bfd712c552ebf68fe01a1daebf2a24a44cbfa99490900\"\n  }],\n  transaction: {\n    outputs: [{\n      address: RECEIVING_ADDRESSES[_networks.MAINNET][_p2sh.P2SH],\n      amountSats: \"21590\"\n    }, {\n      address: CHANGE_ADDRESSES[_networks.MAINNET][_p2sh.P2SH],\n      amountSats: \"7535\",\n      value: 7535,\n      bip32Derivation: [{\n        masterFingerprint: Buffer.from('f57ec65d', 'hex'),\n        path: \"m/45'/0'/100'/1/0\",\n        pubkey: Buffer.from('0360fc2c3410b3700822c31d4901640cf763714f30ff45f887e86bee8733509ebe', 'hex')\n      }, {\n        masterFingerprint: Buffer.from('00000004', 'hex'),\n        path: \"m/45'/0'/100'/1/0\",\n        pubkey: Buffer.from('039c064999a7c238c31ee018b1b7983fb657edfdf23f4d46bde919817a39cbcbb3', 'hex')\n      }],\n      redeemScript: Buffer.from(\"52210360fc2c3410b3700822c31d4901640cf763714f30ff45f887e86bee8733509ebe21039c064999a7c238c31ee018b1b7983fb657edfdf23f4d46bde919817a39cbcbb352ae\", 'hex')\n    }],\n    hex: \"0100000003b0e7bdea1e52e6bc471172c6b78b26a7382911b5910b5c947ed18983be1368450000000000ffffffffd5bbbd495e5bfd00df32d9e29a3b4566655f41f070c7ad3df96be436e064bf5b0100000000ffffffffa5cd511488fdbf56626c46215741b30956b47f8dd74164a0daa5f1a3e11dc1740000000000ffffffff02565400000000000017a91480b2477411a78b2a939d7da08bfa1939a871a4b9876f1d00000000000017a914335131487569e42724cb7fe4818a348aa6bc7afa8700000000\",\n    signature: [\"30440220518d201f915aa1379e4dfd986b6f6bf083e07f9d132ecf1e29d79e292f4c610402207df5c8ff1b0e5958d60b45b5475f3a88065ab64d5f3e6f56162d4f32c423b52c01\", \"3045022100f401617786808a938b0ae8a954ea32a0466eb6f49ae0b196fc0ae50ff43036f002200f72df0f6bb0710eeb61999a96d005f9853183ecbdad7bc5fb65f1169796f49d01\", \"3044022077baef2ae7425a978d67356ea033274909bbd787076f9b5567268e1c1548db76022022367961eea5cb177ccf974e6df1091aa4ee7ea9451afb157541a71078ecd97d01\"]\n  },\n  braidDetails: {\n    network: _networks.MAINNET,\n    addressType: _p2sh.P2SH,\n    extendedPublicKeys: [NODES[\"m/45'/0'/100'\"].open_source, NODES[\"m/45'/0'/100'\"].unchained],\n    requiredSigners: 2,\n    index: '0'\n  },\n  psbtNoChange: \"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\",\n  psbt: \"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\",\n  psbtPartiallySigned: \"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\"\n}, {\n  network: _networks.MAINNET,\n  type: _p2sh_p2wsh.P2SH_P2WSH,\n  bip32Path: \"m/48'/0'/100'/1'/0/0\",\n  publicKey: \"0342997f6fcd7fa4a3c7e290c8867148992e6194742120985c664d9e214461af7c\",\n  publicKeys: [\"0328b57c2f65c98ed7cde4bca54cc3a13afa4d47117fd9dae06663a4169e05ef86\", \"0342997f6fcd7fa4a3c7e290c8867148992e6194742120985c664d9e214461af7c\"],\n  witnessScriptOps: \"OP_2 0328b57c2f65c98ed7cde4bca54cc3a13afa4d47117fd9dae06663a4169e05ef86 0342997f6fcd7fa4a3c7e290c8867148992e6194742120985c664d9e214461af7c OP_2 OP_CHECKMULTISIG\",\n  witnessScriptHex: \"52210328b57c2f65c98ed7cde4bca54cc3a13afa4d47117fd9dae06663a4169e05ef86210342997f6fcd7fa4a3c7e290c8867148992e6194742120985c664d9e214461af7c52ae\",\n  redeemScriptOps: \"OP_0 049d6e945074525b03e0487759368ff663f10bb88976017bdd9d3cce849085e5\",\n  redeemScriptHex: \"0020049d6e945074525b03e0487759368ff663f10bb88976017bdd9d3cce849085e5\",\n  scriptOps: \"OP_HASH160 1abcf8cea321ca874de4beb4f975077fe864a54a OP_EQUAL\",\n  scriptHex: \"a9141abcf8cea321ca874de4beb4f975077fe864a54a87\",\n  address: \"348PsXezZAHcW7RjmCoMJ8PHWx1QBTXJvm\",\n  utxos: [{\n    txid: \"2062282a8c6644740d4a5c85a74ad21c6a0fda8d753e8a4bdfba09a26d20eb40\",\n    index: 1,\n    amountSats: \"10000\",\n    // 0.0001 BTC\n    transactionHex: \"02000000000104e7f99e90ef69f7bf577cc34c695469d1ef2e021320f4f5d312a439fa5119214c010000001716001458ff1cdc218f9baaf9a5ac278206e8f8cc2d55a2feffffffb0e7bdea1e52e6bc471172c6b78b26a7382911b5910b5c947ed18983be13684501000000171600144245d8387278181e8f5d61e35427fa055f891ccefeffffffb68f87f28f11710b7005426340c4c4d9795c331f027549bd383b6f179d709a280000000000feffffff79d037447d0706083212ec168a5b3e24f97bd7a9e0099b105b042781853780810000000017160014ec62a1ca200abdc755c8b34faae78202b6dd3fc3feffffff02920500000000000017a91449e9133aaffa9192d802655f2db8fa1db9eec00887102700000000000017a9141abcf8cea321ca874de4beb4f975077fe864a54a8702473044022069c0985164d17c746fb818179f969740e39d6569ec5a144a83c72de2473b6b8002204f62217bbb2b34efedda454c85dfa960788d4c7f538c7fdf22c5074f5a2c78bb012103e74f757ceb0288ac7c051b7db87fb059a19eac05a480c65c913068a6f80d23b80247304402200f827b64e5feb6071f5d4278e4fa3643e164316ab897f53df0482658e753110202201143f4348812122322876aa29a7285cc8ea51a3e32fb0392fd2e6422d63793f501210350de53693c9da7f849cab9479304ee2b2af317f28ee00ed1e112cd95bc200bd2024730440220025e0eff09b09817e8d595c01bfd2fdba6082e2c4f8f286545f9a2a2e9f148ba02205725704e14c2969a1afcf0084dd29bdbc5136b75438158ecf76992e3c24b561f012102e24e7df260cb56ffbcdb52bea6f8c8bc267d849f5799cf919e32574568ed85d602473044022011bbd9ec6338f174fa0a386acb1fb4dfe348343b2eed5017b11e96151ad214ca02207e7bb5443f34d33147f28fafb4cd661dccc7c6993ad7c58ed47197c85b48c849012102587990c5f71d9e4c894069589845c5f2649b83006160b9d1b8f31bab54133a9399490900\"\n  }, {\n    txid: \"4c211951fa39a412d3f5f42013022eefd16954694cc37c57bff769ef909ef9e7\",\n    index: 0,\n    amountSats: \"10000\",\n    // 0.0001 BTC\n    transactionHex: \"02000000000101a5cd511488fdbf56626c46215741b30956b47f8dd74164a0daa5f1a3e11dc1740100000017160014eeeff0e10da2973449331a9e48f246b18488e965feffffff02102700000000000017a9141abcf8cea321ca874de4beb4f975077fe864a54a87bd2a00000000000017a91445a77947cf42db7fec41cec25c28af0b73becf2e8702473044022044858a87117fd8af2fa92db123935019d76ee9157fb9a48a9cd97ee085b128f90220572b799eae6f3f8cf6aa287450ff46b21588840dabeeb63e57c6f3f320f49eea0121025abd982f0c9ebbb7238900326af437c393eb2c5e875f5bd63152ddd756e5049a99490900\"\n  }, {\n    txid: \"c5d0e548e2332450057ce5bd2a6fb720b2c8bd6f595ed11fdba71488b1bf7b31\",\n    index: 1,\n    amountSats: \"10000\",\n    // 0.0001 BTC\n    transactionHex: \"02000000000101d5bbbd495e5bfd00df32d9e29a3b4566655f41f070c7ad3df96be436e064bf5b00000000171600140e021c1c3313ef991acd0c5d9f63ca12ce110005feffffff02abd601000000000017a9145d27db58f13d4851260174d9dc9eacdf62074a4e87102700000000000017a9141abcf8cea321ca874de4beb4f975077fe864a54a8702473044022077b4f0f2d1480443f8b29ed68a29b606b83a3ebbda4349bf813c33330b7f4aa902202061823fd25330b6c0adb68afce4546ada193eb63982f28a7562bc605ea6b0e5012102930a7b8a6fd51a8ce36039bacf160239cfb7dbc72dc1a051aaac333bc7f8e7924e490900\"\n  }],\n  transaction: {\n    outputs: [{\n      address: RECEIVING_ADDRESSES[_networks.MAINNET][_p2sh_p2wsh.P2SH_P2WSH],\n      amountSats: \"21590\"\n    }, {\n      address: CHANGE_ADDRESSES[_networks.MAINNET][_p2sh_p2wsh.P2SH_P2WSH],\n      amountSats: \"7922\",\n      value: 7922,\n      bip32Derivation: [{\n        masterFingerprint: Buffer.from('f57ec65d', 'hex'),\n        path: \"m/48'/0'/100'/1'/1/0\",\n        pubkey: Buffer.from('029997f9c7094881d241b13b14d8567cdedcaccd411844c55fe09b0b8ca1b254b1', 'hex')\n      }, {\n        masterFingerprint: Buffer.from('00000005', 'hex'),\n        path: \"m/48'/0'/100'/1'/1/0\",\n        pubkey: Buffer.from('0272834f652444910e1cc157b99f52fd6052826a11f9099879a55490f6b8190be7', 'hex')\n      }],\n      redeemScript: Buffer.from('0020581e9806610ac1c8249dc3446e01f8365ecfc506462379d6948baa0d128c519a', 'hex'),\n      witnessScript: Buffer.from('52210272834f652444910e1cc157b99f52fd6052826a11f9099879a55490f6b8190be721029997f9c7094881d241b13b14d8567cdedcaccd411844c55fe09b0b8ca1b254b152ae', 'hex')\n    }],\n    hex: \"010000000340eb206da209badf4b8a3e758dda0f6a1cd24aa7855c4a0d7444668c2a2862200100000000ffffffffe7f99e90ef69f7bf577cc34c695469d1ef2e021320f4f5d312a439fa5119214c0000000000ffffffff317bbfb18814a7db1fd15e596fbdc8b220b76f2abde57c05502433e248e5d0c50100000000ffffffff02565400000000000017a91480b2477411a78b2a939d7da08bfa1939a871a4b987f21e00000000000017a91407339e0dab9b912f9972f96e7d6c6d09e38b7c828700000000\",\n    signature: [\"3045022100e218d80acbbf41b2ad630d7c4b7eb345934466cf205ac119bd41ce2bd3ab0daa022048a1238dc01d06ed57cf5715d5e74397fcb433001b1e39a6821d653ea0ac683601\", \"3045022100bdfd743229bafc6ff66524413528ac920d8bc5ba002f5112d24a6c19f2035247022073b55186e98329c3d0790d701107491d8a06ccc593f87b00df511bf41fe4d5c101\", \"30440220342d08c89ee1fa13f855eddb253855f94b17ca80390893c832615d35cccdac1102205b9381e2021ed174aff66adcd83a6baa9af0ad98de5f8c66aad1c75f030e275b01\"]\n  },\n  braidDetails: {\n    network: _networks.MAINNET,\n    addressType: _p2sh_p2wsh.P2SH_P2WSH,\n    extendedPublicKeys: [NODES[\"m/48'/0'/100'/1'\"].open_source, NODES[\"m/48'/0'/100'/1'\"].unchained],\n    requiredSigners: 2,\n    index: '0'\n  },\n  psbtNoChange: \"cHNidP8BAKUBAAAAA0DrIG2iCbrfS4o+dY3aD2oc0kqnhVxKDXREZowqKGIgAQAAAAD/////5/mekO9p979XfMNMaVRp0e8uAhMg9PXTEqQ5+lEZIUwAAAAAAP////8xe7+xiBSn2x/RXllvvciyILdvKr3lfAVQJDPiSOXQxQEAAAAA/////wFWVAAAAAAAABepFICyR3QRp4sqk519oIv6GTmocaS5hwAAAAAAAQEgECcAAAAAAAAXqRQavPjOoyHKh03kvrT5dQd/6GSlSocBBCIAIASdbpRQdFJbA+BId1k2j/Zj8Qu4iXYBe92dPM6EkIXlAQVHUiEDKLV8L2XJjtfN5LylTMOhOvpNRxF/2drgZmOkFp4F74YhA0KZf2/Nf6Sjx+KQyIZxSJkuYZR0ISCYXGZNniFEYa98Uq4iBgMotXwvZcmO183kvKVMw6E6+k1HEX/Z2uBmY6QWngXvhhzvpdkWMAAAgAAAAIBkAACAAQAAgAAAAAAAAAAAIgYDQpl/b81/pKPH4pDIhnFImS5hlHQhIJhcZk2eIURhr3wc9X7GXTAAAIAAAACAZAAAgAEAAIAAAAAAAAAAAAABASAQJwAAAAAAABepFBq8+M6jIcqHTeS+tPl1B3/oZKVKhwEEIgAgBJ1ulFB0UlsD4Eh3WTaP9mPxC7iJdgF73Z08zoSQheUBBUdSIQMotXwvZcmO183kvKVMw6E6+k1HEX/Z2uBmY6QWngXvhiEDQpl/b81/pKPH4pDIhnFImS5hlHQhIJhcZk2eIURhr3xSriIGAyi1fC9lyY7XzeS8pUzDoTr6TUcRf9na4GZjpBaeBe+GHO+l2RYwAACAAAAAgGQAAIABAACAAAAAAAAAAAAiBgNCmX9vzX+ko8fikMiGcUiZLmGUdCEgmFxmTZ4hRGGvfBz1fsZdMAAAgAAAAIBkAACAAQAAgAAAAAAAAAAAAAEBIBAnAAAAAAAAF6kUGrz4zqMhyodN5L60+XUHf+hkpUqHAQQiACAEnW6UUHRSWwPgSHdZNo/2Y/ELuIl2AXvdnTzOhJCF5QEFR1IhAyi1fC9lyY7XzeS8pUzDoTr6TUcRf9na4GZjpBaeBe+GIQNCmX9vzX+ko8fikMiGcUiZLmGUdCEgmFxmTZ4hRGGvfFKuIgYDKLV8L2XJjtfN5LylTMOhOvpNRxF/2drgZmOkFp4F74Yc76XZFjAAAIAAAACAZAAAgAEAAIAAAAAAAAAAACIGA0KZf2/Nf6Sjx+KQyIZxSJkuYZR0ISCYXGZNniFEYa98HPV+xl0wAACAAAAAgGQAAIABAACAAAAAAAAAAAAAAA==\",\n  psbt: \"cHNidP8BAMUBAAAAA0DrIG2iCbrfS4o+dY3aD2oc0kqnhVxKDXREZowqKGIgAQAAAAD/////5/mekO9p979XfMNMaVRp0e8uAhMg9PXTEqQ5+lEZIUwAAAAAAP////8xe7+xiBSn2x/RXllvvciyILdvKr3lfAVQJDPiSOXQxQEAAAAA/////wJWVAAAAAAAABepFICyR3QRp4sqk519oIv6GTmocaS5h/IeAAAAAAAAF6kUBzOeDaubkS+ZcvlufWxtCeOLfIKHAAAAAAABASAQJwAAAAAAABepFBq8+M6jIcqHTeS+tPl1B3/oZKVKhwEEIgAgBJ1ulFB0UlsD4Eh3WTaP9mPxC7iJdgF73Z08zoSQheUBBUdSIQMotXwvZcmO183kvKVMw6E6+k1HEX/Z2uBmY6QWngXvhiEDQpl/b81/pKPH4pDIhnFImS5hlHQhIJhcZk2eIURhr3xSriIGAyi1fC9lyY7XzeS8pUzDoTr6TUcRf9na4GZjpBaeBe+GHAAAAAUwAACAAAAAgGQAAIABAACAAAAAAAAAAAAiBgNCmX9vzX+ko8fikMiGcUiZLmGUdCEgmFxmTZ4hRGGvfBz1fsZdMAAAgAAAAIBkAACAAQAAgAAAAAAAAAAAAAEBIBAnAAAAAAAAF6kUGrz4zqMhyodN5L60+XUHf+hkpUqHAQQiACAEnW6UUHRSWwPgSHdZNo/2Y/ELuIl2AXvdnTzOhJCF5QEFR1IhAyi1fC9lyY7XzeS8pUzDoTr6TUcRf9na4GZjpBaeBe+GIQNCmX9vzX+ko8fikMiGcUiZLmGUdCEgmFxmTZ4hRGGvfFKuIgYDKLV8L2XJjtfN5LylTMOhOvpNRxF/2drgZmOkFp4F74YcAAAABTAAAIAAAACAZAAAgAEAAIAAAAAAAAAAACIGA0KZf2/Nf6Sjx+KQyIZxSJkuYZR0ISCYXGZNniFEYa98HPV+xl0wAACAAAAAgGQAAIABAACAAAAAAAAAAAAAAQEgECcAAAAAAAAXqRQavPjOoyHKh03kvrT5dQd/6GSlSocBBCIAIASdbpRQdFJbA+BId1k2j/Zj8Qu4iXYBe92dPM6EkIXlAQVHUiEDKLV8L2XJjtfN5LylTMOhOvpNRxF/2drgZmOkFp4F74YhA0KZf2/Nf6Sjx+KQyIZxSJkuYZR0ISCYXGZNniFEYa98Uq4iBgMotXwvZcmO183kvKVMw6E6+k1HEX/Z2uBmY6QWngXvhhwAAAAFMAAAgAAAAIBkAACAAQAAgAAAAAAAAAAAIgYDQpl/b81/pKPH4pDIhnFImS5hlHQhIJhcZk2eIURhr3wc9X7GXTAAAIAAAACAZAAAgAEAAIAAAAAAAAAAAAAAAQAiACBYHpgGYQrByCSdw0RuAfg2Xs/FBkYjedaUi6oNEoxRmgEBR1IhAnKDT2UkRJEOHMFXuZ9S/WBSgmoR+QmYeaVUkPa4GQvnIQKZl/nHCUiB0kGxOxTYVnze3KzNQRhExV/gmwuMobJUsVKuIgICcoNPZSREkQ4cwVe5n1L9YFKCahH5CZh5pVSQ9rgZC+ccAAAABTAAAIAAAACAZAAAgAEAAIABAAAAAAAAACICApmX+ccJSIHSQbE7FNhWfN7crM1BGETFX+CbC4yhslSxHPV+xl0wAACAAAAAgGQAAIABAACAAQAAAAAAAAAA\",\n  psbtPartiallySigned: \"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\"\n}, {\n  network: _networks.MAINNET,\n  type: _p2wsh.P2WSH,\n  bip32Path: \"m/48'/0'/100'/2'/0/0\",\n  publicKey: \"0369e74fc954355b6f7acf9bbec5b861c186852b759a85f92558e420a0202047f4\",\n  publicKeys: [\"02e21b7318cfbd482bdbb66441420b9018e5b440bf9b0cdedd427626d81f32605b\", \"0369e74fc954355b6f7acf9bbec5b861c186852b759a85f92558e420a0202047f4\"],\n  witnessScriptOps: \"OP_2 02e21b7318cfbd482bdbb66441420b9018e5b440bf9b0cdedd427626d81f32605b 0369e74fc954355b6f7acf9bbec5b861c186852b759a85f92558e420a0202047f4 OP_2 OP_CHECKMULTISIG\",\n  witnessScriptHex: \"522102e21b7318cfbd482bdbb66441420b9018e5b440bf9b0cdedd427626d81f32605b210369e74fc954355b6f7acf9bbec5b861c186852b759a85f92558e420a0202047f452ae\",\n  scriptOps: \"OP_0 497b026c3d3547a30e6d8006e385e0366af5eca2b5b455d8783875941e5c7fa9\",\n  scriptHex: \"0020497b026c3d3547a30e6d8006e385e0366af5eca2b5b455d8783875941e5c7fa9\",\n  address: \"bc1qf9asympax4r6xrndsqrw8p0qxe40tm9zkk69tkrc8p6eg8ju075sjeekkt\",\n  utxos: [{\n    txid: \"4ab356fef8b8205a3b96b4924e8e94f18c4b8ecdefa0bb1ee28ce19f091c3f58\",\n    index: 0,\n    amountSats: \"10000\",\n    // 0.0001 BTC\n    transactionHex: \"020000000001011aa35769284e2822b65a98ac46472bb5c455831927da993dbe9ad1959c296eaf0100000000feffffff021027000000000000220020497b026c3d3547a30e6d8006e385e0366af5eca2b5b455d8783875941e5c7fa94c76010000000000160014553e9be0af92386ae6b4065262dc97fdee9979170247304402206407b5c1fa2fd49b92e6f1802a0eed9e75f55c3db1ea179f077072d0c6e9031602205823ba8d01a6b96db9334affcb9b1e7dfb434cfdc1389287016d6b68c5c2cf0c0121029de99c2fec6fad0a90fb5a7792775477b8d82fa4f213903a2f67d3e2c1d802eb99490900\"\n  }, {\n    txid: \"a21b384dc72b9ef2559339cecd5ad2652171589b1e479497817b617734859d90\",\n    index: 1,\n    amountSats: \"10000\",\n    // 0.0001 BTC\n    transactionHex: \"02000000000101583f1c099fe18ce21ebba0efcd8e4b8cf1948e4e92b4963b5a20b8f8fe56b34a0100000000feffffff02c04601000000000016001416d8412d77ae6d6280c60091a7197a3f98546c911027000000000000220020497b026c3d3547a30e6d8006e385e0366af5eca2b5b455d8783875941e5c7fa90247304402204fada6ffa61f578f647ace8c8d02b678ff95ed0feca83b3a4750a97c5aa3ddca02203dc438b53e7aef6bd4f9152e37d6cbce4e64306932cc27f7e2072d764990cb530121020b500126d56d6f17b28e90f254b4b38c260ecd8e941b65c557b8af6c767027dd99490900\"\n  }, {\n    txid: \"af6e299c95d19abe3d99da27198355c4b52b4746ac985ab622284e286957a31a\",\n    index: 0,\n    amountSats: \"10000\",\n    // 0.0001 BTC\n    transactionHex: \"02000000000101317bbfb18814a7db1fd15e596fbdc8b220b76f2abde57c05502433e248e5d0c500000000171600147e88fb2bc740d5efffef8b6f53d5eb68b83317b6feffffff021027000000000000220020497b026c3d3547a30e6d8006e385e0366af5eca2b5b455d8783875941e5c7fa9d8a50100000000001600144ddfedfd823ee5dc953f4792a855b262a85ed77c0247304402202fc8347a8801fbbd13db5bd2694cdabb2c3428b6cfa6edda02ff16bc6cacb6b8022054604d07510ede500197deefe9d39abe277fb97a837ae40ea815b6aa38f0329701210247348c03f596b52730429ea89df4b3d75b219fd3c30cbcb66dae04779e0de6d236490900\"\n  }],\n  transaction: {\n    outputs: [{\n      address: RECEIVING_ADDRESSES[_networks.MAINNET][_p2wsh.P2WSH],\n      amountSats: \"21590\"\n    }, {\n      address: CHANGE_ADDRESSES[_networks.MAINNET][_p2wsh.P2WSH],\n      amountSats: \"8023\",\n      value: 8023,\n      bip32Derivation: [{\n        masterFingerprint: Buffer.from('f57ec65d', 'hex'),\n        path: \"m/48'/0'/100'/2'/1/0\",\n        pubkey: Buffer.from('038b5e295f14f6a848f55b7d62efddef4679dc361ecda5f6cd074cc24ae2174510', 'hex')\n      }, {\n        masterFingerprint: Buffer.from('00000006', 'hex'),\n        path: \"m/48'/0'/100'/2'/1/0\",\n        pubkey: Buffer.from('0318a60afc9aa7e3191f9e49051c70764f7688d9a567b327c095e5a3f75f8847e7', 'hex')\n      }],\n      witnessScript: Buffer.from('52210318a60afc9aa7e3191f9e49051c70764f7688d9a567b327c095e5a3f75f8847e721038b5e295f14f6a848f55b7d62efddef4679dc361ecda5f6cd074cc24ae217451052ae', 'hex')\n    }],\n    hex: \"0100000003583f1c099fe18ce21ebba0efcd8e4b8cf1948e4e92b4963b5a20b8f8fe56b34a0000000000ffffffff909d853477617b819794471e9b58712165d25acdce399355f29e2bc74d381ba20100000000ffffffff1aa35769284e2822b65a98ac46472bb5c455831927da993dbe9ad1959c296eaf0000000000ffffffff02565400000000000022002035be74e39d8452cd6ede2aede6be70e21e57941843032e495d823eb9f521aea7571f00000000000022002098ac4adf0ec716cb2d30585fc8db6b41ad26431f55213622b43723de418aff4200000000\",\n    signature: [\"304402207eddd9d5b7335468c5166e9d76f88d5538bf0ff531680765f813e95edf8a13a502205a6b33c0cd780b4e036e2e35777e888ec33658777cece1b494b7aadb421c35cb01\", \"304402207d2809f871f60d5c6d44e41decdfc856f08c69bb4471ec4652ee295c21becd6d022033ac79f8baa9c663e3aa8ffa2aab5cae27524537dd762d2f6cb1f5879375cae201\", \"3045022100ce3fea96bde970eab9aab5a3d8a00e1be5515cdd534db0d7c8a1755408c2c9c402204842d008cbacd7ce5df38035d55682ee03036751563d7b20253966bdb131a44801\"]\n  },\n  braidDetails: {\n    network: _networks.MAINNET,\n    addressType: _p2wsh.P2WSH,\n    extendedPublicKeys: [NODES[\"m/48'/0'/100'/2'\"].open_source, NODES[\"m/48'/0'/100'/2'\"].unchained],\n    requiredSigners: 2,\n    index: '0'\n  },\n  psbtNoChange: \"cHNidP8BAKUBAAAAA1g/HAmf4YziHrug782OS4zxlI5OkrSWO1oguPj+VrNKAAAAAAD/////kJ2FNHdhe4GXlEcem1hxIWXSWs3OOZNV8p4rx004G6IBAAAAAP////8ao1dpKE4oIrZamKxGRyu1xFWDGSfamT2+mtGVnClurwAAAAAA/////wFWVAAAAAAAABepFICyR3QRp4sqk519oIv6GTmocaS5hwAAAAAAAQErECcAAAAAAAAiACBJewJsPTVHow5tgAbjheA2avXsorW0Vdh4OHWUHlx/qQEFR1IhAuIbcxjPvUgr27ZkQUILkBjltEC/mwze3UJ2JtgfMmBbIQNp50/JVDVbb3rPm77FuGHBhoUrdZqF+SVY5CCgICBH9FKuIgYC4htzGM+9SCvbtmRBQguQGOW0QL+bDN7dQnYm2B8yYFsc76XZFjAAAIAAAACAZAAAgAIAAIAAAAAAAAAAACIGA2nnT8lUNVtves+bvsW4YcGGhSt1moX5JVjkIKAgIEf0HPV+xl0wAACAAAAAgGQAAIACAACAAAAAAAAAAAAAAQErECcAAAAAAAAiACBJewJsPTVHow5tgAbjheA2avXsorW0Vdh4OHWUHlx/qQEFR1IhAuIbcxjPvUgr27ZkQUILkBjltEC/mwze3UJ2JtgfMmBbIQNp50/JVDVbb3rPm77FuGHBhoUrdZqF+SVY5CCgICBH9FKuIgYC4htzGM+9SCvbtmRBQguQGOW0QL+bDN7dQnYm2B8yYFsc76XZFjAAAIAAAACAZAAAgAIAAIAAAAAAAAAAACIGA2nnT8lUNVtves+bvsW4YcGGhSt1moX5JVjkIKAgIEf0HPV+xl0wAACAAAAAgGQAAIACAACAAAAAAAAAAAAAAQErECcAAAAAAAAiACBJewJsPTVHow5tgAbjheA2avXsorW0Vdh4OHWUHlx/qQEFR1IhAuIbcxjPvUgr27ZkQUILkBjltEC/mwze3UJ2JtgfMmBbIQNp50/JVDVbb3rPm77FuGHBhoUrdZqF+SVY5CCgICBH9FKuIgYC4htzGM+9SCvbtmRBQguQGOW0QL+bDN7dQnYm2B8yYFsc76XZFjAAAIAAAACAZAAAgAIAAIAAAAAAAAAAACIGA2nnT8lUNVtves+bvsW4YcGGhSt1moX5JVjkIKAgIEf0HPV+xl0wAACAAAAAgGQAAIACAACAAAAAAAAAAAAAAA==\",\n  psbt: \"cHNidP8BANsBAAAAA1g/HAmf4YziHrug782OS4zxlI5OkrSWO1oguPj+VrNKAAAAAAD/////kJ2FNHdhe4GXlEcem1hxIWXSWs3OOZNV8p4rx004G6IBAAAAAP////8ao1dpKE4oIrZamKxGRyu1xFWDGSfamT2+mtGVnClurwAAAAAA/////wJWVAAAAAAAACIAIDW+dOOdhFLNbt4q7ea+cOIeV5QYQwMuSV2CPrn1Ia6nVx8AAAAAAAAiACCYrErfDscWyy0wWF/I22tBrSZDH1UhNiK0NyPeQYr/QgAAAAAAAQErECcAAAAAAAAiACBJewJsPTVHow5tgAbjheA2avXsorW0Vdh4OHWUHlx/qQEFR1IhAuIbcxjPvUgr27ZkQUILkBjltEC/mwze3UJ2JtgfMmBbIQNp50/JVDVbb3rPm77FuGHBhoUrdZqF+SVY5CCgICBH9FKuIgYC4htzGM+9SCvbtmRBQguQGOW0QL+bDN7dQnYm2B8yYFscAAAABjAAAIAAAACAZAAAgAIAAIAAAAAAAAAAACIGA2nnT8lUNVtves+bvsW4YcGGhSt1moX5JVjkIKAgIEf0HPV+xl0wAACAAAAAgGQAAIACAACAAAAAAAAAAAAAAQErECcAAAAAAAAiACBJewJsPTVHow5tgAbjheA2avXsorW0Vdh4OHWUHlx/qQEFR1IhAuIbcxjPvUgr27ZkQUILkBjltEC/mwze3UJ2JtgfMmBbIQNp50/JVDVbb3rPm77FuGHBhoUrdZqF+SVY5CCgICBH9FKuIgYC4htzGM+9SCvbtmRBQguQGOW0QL+bDN7dQnYm2B8yYFscAAAABjAAAIAAAACAZAAAgAIAAIAAAAAAAAAAACIGA2nnT8lUNVtves+bvsW4YcGGhSt1moX5JVjkIKAgIEf0HPV+xl0wAACAAAAAgGQAAIACAACAAAAAAAAAAAAAAQErECcAAAAAAAAiACBJewJsPTVHow5tgAbjheA2avXsorW0Vdh4OHWUHlx/qQEFR1IhAuIbcxjPvUgr27ZkQUILkBjltEC/mwze3UJ2JtgfMmBbIQNp50/JVDVbb3rPm77FuGHBhoUrdZqF+SVY5CCgICBH9FKuIgYC4htzGM+9SCvbtmRBQguQGOW0QL+bDN7dQnYm2B8yYFscAAAABjAAAIAAAACAZAAAgAIAAIAAAAAAAAAAACIGA2nnT8lUNVtves+bvsW4YcGGhSt1moX5JVjkIKAgIEf0HPV+xl0wAACAAAAAgGQAAIACAACAAAAAAAAAAAAAAAEBR1IhAximCvyap+MZH55JBRxwdk92iNmlZ7MnwJXlo/dfiEfnIQOLXilfFPaoSPVbfWLv3e9Gedw2Hs2l9s0HTMJK4hdFEFKuIgIDGKYK/Jqn4xkfnkkFHHB2T3aI2aVnsyfAleWj91+IR+ccAAAABjAAAIAAAACAZAAAgAIAAIABAAAAAAAAACICA4teKV8U9qhI9Vt9Yu/d70Z53DYezaX2zQdMwkriF0UQHPV+xl0wAACAAAAAgGQAAIACAACAAQAAAAAAAAAA\",\n  psbtPartiallySigned: \"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\"\n}];\nvar MULTISIGS = MULTISIGS_BASE.map(function (test) {\n  var multisig = _multisig.generateMultisigFromPublicKeys.apply(void 0, [test.network, test.type, 2].concat(_toConsumableArray(test.publicKeys)));\n\n  multisig.braidDetails = (0, _braid.braidConfig)(test.braidDetails);\n  multisig.bip32Derivation = test.bip32Derivation;\n  return _objectSpread(_objectSpread({}, test), {\n    description: \"\".concat(test.network, \" \").concat(test.type, \" 2-of-2 multisig address\"),\n    utxos: test.utxos.map(function (utxo) {\n      return _objectSpread(_objectSpread(_objectSpread({}, utxo), {\n        amountSats: (0, _bignumber.default)(utxo.amountSats),\n        multisig: multisig\n      }), {}, {\n        bip32Path: test.bip32Path // this only works because all of these fixtures are single address.\n\n      });\n    }),\n    transaction: _objectSpread(_objectSpread({}, test.transaction), {\n      outputs: test.transaction.outputs.map(function (output) {\n        return _objectSpread(_objectSpread({}, output), {\n          amountSats: (0, _bignumber.default)(output.amountSats)\n        });\n      })\n    }),\n    multisig: multisig,\n    multisigScript: test.type === _p2sh.P2SH ? (0, _multisig.multisigRedeemScript)(multisig) : (0, _multisig.multisigWitnessScript)(multisig),\n    multisigScriptOps: test.type === _p2sh.P2SH ? test.redeemScriptOps : test.witnessScriptOps,\n    multisigScriptHex: test.type === _p2sh.P2SH ? test.redeemScriptHex : test.witnessScriptHex\n  });\n}); // function selectFirstUTXOFromEach(tests) {\n//   let unsortedUTXOs = [];\n//   let unsortedBIP32Paths = [];\n//   let unsortedPublicKeys = [];\n//   tests.forEach((test) => {\n//     unsortedUTXOs.push(test.utxos[0]);\n//     unsortedBIP32Paths.push(test.bip32Path);\n//     unsortedPublicKeys.push(test.publicKey);\n//   });\n//   const sortedUTXOs = sortInputs(unsortedUTXOs);\n//   const sortedBIP32Paths = [];\n//   const sortedPublicKeys = [];\n//   sortedUTXOs.forEach((utxo) => {\n//     const unsortedIndex = unsortedUTXOs.findIndex((otherUTXO) => (otherUTXO.txid === utxo.txid && otherUTXO.index === utxo.index));\n//     sortedBIP32Paths.push(unsortedBIP32Paths[unsortedIndex]);\n//     sortedPublicKeys.push(unsortedPublicKeys[unsortedIndex]);\n//   });\n//   return {\n//     inputs: sortedUTXOs,\n//     bip32Paths: sortedBIP32Paths,\n//     publicKeys: sortedPublicKeys,\n//   };\n// }\n\nfunction singleMultisigTransaction(test) {\n  return _objectSpread(_objectSpread({}, {\n    name: \"Sign \".concat(test.description),\n    description: \"spends multiple UTXOs from a single \".concat(test.description),\n    network: test.network,\n    inputs: (0, _inputs.sortInputs)(test.utxos),\n    bip32Paths: test.utxos.map(function () {\n      return test.bip32Path;\n    }),\n    publicKeys: test.utxos.map(function () {\n      return test.publicKey;\n    }),\n    segwit: test.type !== _p2sh.P2SH,\n    psbt: test.psbt,\n    format: test.type,\n    derivation: test.bip32Path.slice(0, -4),\n    extendedPublicKeys: test.braidDetails.extendedPublicKeys\n  }), test.transaction);\n}\n\nvar TRANSACTIONS = MULTISIGS.map(function (test) {\n  return singleMultisigTransaction(test);\n}).concat([// {\n  //   ...selectFirstUTXOFromEach(MULTISIGS.filter((test) => test.network === TESTNET)),\n  //   ...{\n  //     name: `Sign across ${TESTNET} 2-of-2 multisig address types`,\n  //     description: `spends a UTXO from each ${TESTNET} 2-of-2 address type`,\n  //     network: TESTNET,\n  //     segwit: true,\n  //     outputs: [\n  //       {\n  //         address: RECEIVING_ADDRESSES[TESTNET],\n  //         amountSats: BigNumber('291590'),\n  //       }\n  //     ],\n  //   },\n  //   hex: \"0100000003236ac393a0ee9e05973cbaad15abfa476d1e03151be906c0d769db051da49d420000000000ffffffff845266686d5d2473fb09982c72da0d6d66b057c3e13a6eb4bfda304076efe7650100000000ffffffff01f5a14392f39c55c9a597df640b0f75ec77f5a90bce39bbc7e8869bcc8ddf840000000000ffffffff01067304000000000017a914e3ba1151b75effbf7adc4673c83c8feec3ddc3678700000000\",\n  //   signature: [\"30440220583a0f9f0dec594d16cee927dc10d10e99b075c2cbdaad75daf1adf1a9f34900022058311ae12f952a4707f8c4966a50ed96b21e049ef35afc91e77c9a1b991f93b801\",\"304502210084f12880a76b33e4bbf7bc896e76ccd726f59e24876261d1f9c999a2203d10c70220327e7daf28cf6dca83ff24c2b1dbded308e71f11941c14fa2b3bb1623d240b7201\",\"3045022100aeeaa8c07be892ff1dcbbcf76ab6f202fa3f6b3f41e0476294f8df2d0afb457f02206d7eecc49e1ff32f1f25b7649a127e4334c0f9272aa92051364f5094b3d796ad01\"],\n  // },\n  // {\n  //   ...selectFirstUTXOFromEach(MULTISIGS.filter((test) => test.network === MAINNET)),\n  //   ...{\n  //     name: `Sign across ${MAINNET} 2-of-2 multisig address types`,\n  //     description: `spends a UTXO from each ${MAINNET} 2-of-2 address type`,\n  //     network: MAINNET,\n  //     segwit: true,\n  //     outputs: [\n  //       {\n  //         address: RECEIVING_ADDRESSES[MAINNET],\n  //         amountSats: BigNumber('21590'),\n  //       }\n  //     ],\n  //     hex: \"010000000340eb206da209badf4b8a3e758dda0f6a1cd24aa7855c4a0d7444668c2a2862200100000000ffffffffb0e7bdea1e52e6bc471172c6b78b26a7382911b5910b5c947ed18983be1368450000000000ffffffff583f1c099fe18ce21ebba0efcd8e4b8cf1948e4e92b4963b5a20b8f8fe56b34a0000000000ffffffff01565400000000000017a91480b2477411a78b2a939d7da08bfa1939a871a4b98700000000\",\n  //     signature: [\"304502210088188fe088e22872e06ddad13c2586f6abb5d8040b2bb919bf00f6a855e3788902202517f77ae39ac37c0522864dfb996dc86272f328ee4d7b614cad17899f5bbc3a01\",\"3044022078e151ce21dab691a35f8aa2a080478cd15369653bc8ecd250019e62f2d1557102204349f260f9233558b8a71c9e2dc9888b6666451de97ea12b890ee7526f9f404001\",\"3044022005e44b81d321ce6cc27e7d64cf482844e0dd30220a776c62199d2fac33c6a41502201beacca9c4d4f00d31c797b9441222e67ada8d4e0706d1cd29805af363de615c01\"],\n  //   }\n  // },\n]);\n/**\n * A set of test fixtures mostly built from the same [BIP39 seed phrase]{@link https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki}.\n *\n * Initializing your keystore with this seed phrase will allow you to replicate many of the unit (and integration)\n * tests in this library on your hardware/software.  This is also useful for functional testing.\n *\n * Includes the following properties:\n * - `keys` - given the multisig nature of these fixtures, they involve keys from multiple sources\n * -   `open_source` - open source fixtures\n * -     `bip39Phrase` -- the BIP39 seed phrase used for all other fixtures\n * -     `nodes` -- an object mapping BIP32 paths to the corresponding [HD node]{@link module:fixtures.HDNode} derived from the BIP39 seed phrase above.\n * -   `unchained` - unchained fixtures\n * -     `nodes` -- an object mapping BIP32 paths to the corresponding [HD node]{@link module:fixtures.HDNode} derived from unchained seed phrase (not shared).\n * - `multisigs` -- an array of [multisig addresses]{@link module:fixtures.MultisigAddress} derived from the HD nodes above.\n * - `braids` -- an array of [braids]{@link module:fixtures.Braid} derived from the open_source + unchained HD nodes above.\n * - `transactions` -- an array of [transactions]{@link module:fixtures.MultisigTransaction} from the multisig address above.\n *\n * @example\n * import {TEST_FIXTURES} from \"unchained-bitcoin\";\n * console.log(TEST_FIXTURES.keys.open_source.bip39Phrase);\n * // merge alley lucky axis penalty manage latin gasp virus captain wheel deal chase fragile chapter boss zero dirt stadium tooth physical valve kid plunge\n *\n */\n\nvar TEST_FIXTURES = {\n  keys: {\n    open_source: {\n      bip39Phrase: BIP39_PHRASE,\n      nodes: Object.keys(NODES).reduce(function (openSourceNodes, node) {\n        var _NODES$node = NODES[node],\n            unchained = _NODES$node.unchained,\n            rest = _objectWithoutProperties(_NODES$node, [\"unchained\"]);\n\n        if (!unchained) {\n          openSourceNodes[node] = NODES[node];\n        } else {\n          // keep the node but drop the unchained part\n          openSourceNodes[node] = rest;\n        }\n\n        return openSourceNodes;\n      }, {})\n    },\n    unchained: {\n      nodes: Object.keys(NODES).reduce(function (unchainedNodes, node) {\n        var unchained = NODES[node].unchained;\n        if (unchained) unchainedNodes[node] = unchained;\n        return unchainedNodes;\n      }, {})\n    }\n  },\n  braids: BRAIDS,\n  multisigs: MULTISIGS,\n  transactions: TRANSACTIONS\n};\n/**\n * An HD node fixture derived from the BIP39 seed phrase fixture.\n *\n * Not all HD node fixtures have all properties below.\n *\n * @typedef module:fixtures.HDNode\n * @type {Object}\n * @property {string} pub - the (compressed) public key in hex\n * @property {string} xpub - the extended public key formatted for mainnet\n * @property {string} tpub - the extended public key formatted for testnet\n */\n\n/**\n * A braid fixture including details to build the P2SH transaction\n *\n * The particular braid included has some additional fixtures for unit tests\n *\n * @typedef module:fixtures.Braid\n * @type {Object}\n * @property {string} options.network = mainnet - mainnet or testnet\n * @property {string} options.addressType P2SH, P2SH-P2WSH, P2WSH\n * @property {ExtendedPublicKey[]} options.extendedPublicKeys ExtendedPublicKeys that make up this braid\n * @property {number} requiredSigners - how many required signers in this braid\n * @property {string} options.index - One value, relative, to add on to all xpub absolute bip32paths (0=deposit, 1=change)\n */\n\n/**\n * A multisig address fixture.  At least one of the public\n * keys in the redeem/witness script for each address is derived from\n * the BIP39 seed phrase fixture.\n *\n * @typedef module:fixtures.MultisigAddress\n * @type {Object}\n * @property {module:networks.NETWORKS} network - bitcoin network\n * @property {module:multisig.MULTISIG_ADDRESS_TYPES} type - multisig address type\n * @property {string} description - describes the multisig address\n * @property {string} bip32Path - BIP32 derivation path to the public key used in this address from the BIP39 seed phrase fixture\n * @property {string} publicKey - (compressed) public key (in hex) corresponding to BIP32 path\n * @property {string[]} publicKeys - (compressed) public keys (in hex) (order matters)\n * @property {string} multisigScriptHex - multisig script in hex (redeem/witneess script as appropriate)\n * @property {string} multisigScriptOps - multisig script in opcodes (redeem/witneess script as appropriate)\n * @property {string} redeemScriptHex - redeem script in hex (missing for P2WSH)\n * @property {string} redeemScriptOps - redeem script in opcodes (missing for P2WSH)\n * @property {string} witnessScriptHex - witness script in hex (missing for P2SH)\n * @property {string} witnessScriptOps - witness script in opcodes (missing for P2SH)\n * @property {string} address - bitcoin address\n * @property {string} scriptHex - script in hex\n * @property {string} scriptOps - script in opcodes\n * @property {module:multisig.Multisig} multisig - `Multisig` object for address\n * @property {module:transactions.UTXO[]} utxos - UTXOs at this address\n * @property {module:fixtures.Braid} braidDetails - details to construct the braid where this Multisig address resides\n * @property {module:fixtures.Braid} changeBraidDetails - details to construct the change braid where the Change Multisig address resides (if needed)\n * @property {string} psbt - unsigned psbt of the Transaction\n * @property {string} psbtPartiallySigned - psbt that has a single set of signatures inside for the open source words\n *\n */\n\n/**\n * A transaction fixture with inputs from one or more multisig\n * addresses.\n *\n * Each address contains at least one public key derived from the\n * BIP39 seed phrase fixture.\n *\n * The signatures in these transaction fixtures can therefore be\n * created by any keystore which loads this seed phrase.\n *\n * The inputs to these transactions should survive as the other\n * signature(s) required to spend them cannot be produced publicly\n * (their private keys are held by Unchained Capital).\n *\n * @typedef module:fixtures.MultisigTransaction\n * @type {Object}\n * @property {string} description - describes the transaction\n * @property {module:networks.NETWORKS} network - bitcoin network\n * @property {boolean} segwit - does the transaction have segwit inputs?\n * @property {string[]} bip32Paths - BIP32 paths to the public key derived from the BIP39 seed phrase fixture, one per input\n * @property {string[]} publicKeys - (compressed) public keys  (in hex) corresponding to each BIP32 path, one per input\n * @property {module:transactions.UTXO[]} inputs - transaction inputs\n * @property {module:transactions.TransactionOutput[]} outputs - transaction outputs\n * @property {string} hex - unsigned transaction in hex\n * @property {string[]} signature - one signature for the transaction (consisting of one signature per input)\n *\n */\n\nexports.TEST_FIXTURES = TEST_FIXTURES;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ColdcardMultisigWalletConfig = exports.ColdcardSignMultisigTransaction = exports.ColdcardExportExtendedPublicKey = exports.ColdcardExportPublicKey = exports.ColdcardInteraction = exports.COLDCARD_WALLET_CONFIG_VERSION = exports.COLDCARD_BASE_BIP32_PATHS = exports.COLDCARD = void 0;\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.string.repeat\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es6.reflect.get\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.string.starts-with\");\n\nrequire(\"core-js/modules/es7.object.entries\");\n\nrequire(\"core-js/modules/es6.array.find\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nvar _unchainedBitcoin = require(\"unchained-bitcoin\");\n\nvar _interaction = require(\"./interaction\");\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar COLDCARD = \"coldcard\"; // Our constants use 'P2SH-P2WSH', their file uses 'P2SH_P2WSH' :\\\n\nexports.COLDCARD = COLDCARD;\nvar COLDCARD_BASE_BIP32_PATHS = {\n  \"m/45'\": _unchainedBitcoin.P2SH,\n  \"m/48'/0'/0'/1'\": _unchainedBitcoin.P2SH_P2WSH.replace(\"-\", \"_\"),\n  \"m/48'/0'/0'/2'\": _unchainedBitcoin.P2WSH,\n  \"m/48'/1'/0'/1'\": _unchainedBitcoin.P2SH_P2WSH.replace(\"-\", \"_\"),\n  \"m/48'/1'/0'/2'\": _unchainedBitcoin.P2WSH\n};\nexports.COLDCARD_BASE_BIP32_PATHS = COLDCARD_BASE_BIP32_PATHS;\nvar COLDCARD_BASE_CHROOTS = Object.keys(COLDCARD_BASE_BIP32_PATHS);\nvar COLDCARD_WALLET_CONFIG_VERSION = \"1.0.0\";\n/**\n * Base class for interactions with Coldcard\n *\n * @extends {module:interaction.IndirectKeystoreInteraction}\n */\n\nexports.COLDCARD_WALLET_CONFIG_VERSION = COLDCARD_WALLET_CONFIG_VERSION;\n\nvar ColdcardInteraction =\n/*#__PURE__*/\nfunction (_IndirectKeystoreInte) {\n  _inherits(ColdcardInteraction, _IndirectKeystoreInte);\n\n  function ColdcardInteraction() {\n    _classCallCheck(this, ColdcardInteraction);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ColdcardInteraction).apply(this, arguments));\n  }\n\n  return ColdcardInteraction;\n}(_interaction.IndirectKeystoreInteraction);\n/**\n * Base class for JSON Multisig file-based interactions with Coldcard\n * This class handles the file that comes from the `Export XPUB` menu item.\n *\n * @extends {module:coldcard.ColdcardInteraction}\n */\n\n\nexports.ColdcardInteraction = ColdcardInteraction;\n\nvar ColdcardMultisigSettingsFileParser =\n/*#__PURE__*/\nfunction (_ColdcardInteraction) {\n  _inherits(ColdcardMultisigSettingsFileParser, _ColdcardInteraction);\n\n  /**\n   * @param {object} options - options argument\n   * @param {string} options.network - bitcoin network (needed for derivations)\n   * @param {string} options.bip32Path - bip32Path to interrogate\n   */\n  function ColdcardMultisigSettingsFileParser(_ref) {\n    var _this;\n\n    var network = _ref.network,\n        bip32Path = _ref.bip32Path;\n\n    _classCallCheck(this, ColdcardMultisigSettingsFileParser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ColdcardMultisigSettingsFileParser).call(this));\n\n    if ([_unchainedBitcoin.MAINNET, _unchainedBitcoin.TESTNET].find(function (net) {\n      return net === network;\n    })) {\n      _this.network = network;\n    } else {\n      throw new Error(\"Unknown network.\");\n    }\n\n    _this.bip32Path = bip32Path;\n    _this.bip32ValidationErrorMessage = {};\n    _this.bip32ValidationError = _this.validateColdcardBip32Path(bip32Path);\n    return _this;\n  }\n\n  _createClass(ColdcardMultisigSettingsFileParser, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return !this.bip32ValidationError.length;\n    } // TODO make these messages more robust\n    //   (e.g use `menuchoices` as an array of `menuchoicemessages`)\n\n  }, {\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(ColdcardMultisigSettingsFileParser.prototype), \"messages\", this).call(this);\n\n      if (Object.entries(this.bip32ValidationErrorMessage).length) {\n        messages.push({\n          state: _interaction.PENDING,\n          level: _interaction.ERROR,\n          code: this.bip32ValidationErrorMessage.code,\n          text: this.bip32ValidationErrorMessage.text\n        });\n      }\n\n      messages.push({\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        code: \"coldcard.export_xpub\",\n        text: \"Go to Settings > Multisig Wallets > Export XPUB\"\n      });\n      messages.push({\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        code: \"coldcard.select_account\",\n        text: \"Enter 0 for account\"\n      });\n      messages.push({\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        code: \"coldcard.upload_key\",\n        text: \"Upload the JSON file from your Coldcard.\"\n      });\n      return messages;\n    }\n  }, {\n    key: \"chrootForBIP32Path\",\n    value: function chrootForBIP32Path(bip32Path) {\n      for (var i = 0; i < COLDCARD_BASE_CHROOTS.length; i++) {\n        var chroot = COLDCARD_BASE_CHROOTS[i];\n\n        if (bip32Path.startsWith(chroot)) {\n          return chroot;\n        }\n      }\n\n      return null;\n    }\n    /**\n     * This validates three things for an incoming Coldcard bip32Path\n     *\n     * 1. Is the bip32path valid syntactically?\n     * 2. Does the bip32path start with one of the known Coldcard chroots?\n     * 3. Are there any hardened indices in the relative path below the chroot?\n     *\n     * @param {string} bip32Path - bip32Path to validate against Coldcard chroots\n     * @return {string} empty or with the appropriate error message\n     */\n\n  }, {\n    key: \"validateColdcardBip32Path\",\n    value: function validateColdcardBip32Path(bip32Path) {\n      var bip32PathError = (0, _unchainedBitcoin.validateBIP32Path)(bip32Path);\n\n      if (bip32PathError.length) {\n        this.bip32ValidationErrorMessage = {\n          text: bip32PathError,\n          code: \"coldcard.bip32_path.path_error\"\n        };\n        return bip32PathError;\n      }\n\n      var coldcardChroot = this.chrootForBIP32Path(bip32Path);\n\n      if (coldcardChroot) {\n        if (coldcardChroot === bip32Path) {\n          // asking for known base path, no deeper derivation\n          return \"\";\n        }\n\n        var relativePath = (0, _unchainedBitcoin.getRelativeBIP32Path)(coldcardChroot, bip32Path);\n        var relativePathError = (0, _unchainedBitcoin.validateBIP32Path)(relativePath, {\n          mode: \"unhardened\"\n        });\n\n        if (relativePathError) {\n          this.bip32ValidationErrorMessage = {\n            text: relativePathError,\n            code: \"coldcard.bip32_path.no_hardened_relative_path_error\"\n          };\n          return relativePathError;\n        }\n\n        return \"\";\n      }\n\n      var unknownColdcardParentBip32PathError = \"The bip32Path must begin with one of the known Coldcard paths: \".concat(COLDCARD_BASE_CHROOTS);\n      this.bip32ValidationErrorMessage = {\n        text: unknownColdcardParentBip32PathError,\n        code: \"coldcard.bip32_path.unknown_chroot_error\"\n      };\n      return unknownColdcardParentBip32PathError;\n    }\n    /**\n     * Parse the Coldcard JSON file and do some basic error checking\n     * add a field for rootFingerprint (it can sometimes be calculated\n     * if not explicitly included)\n     *\n     * @param {Object} file JSON file exported from Coldcard\n     * @returns {Object} the parsed response\n     *\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse(file) {\n      //In the case of keys (json), the file will look like:\n      //\n      //{\n      //   \"p2sh_deriv\": \"m/45'\",\n      //   \"p2sh\": \"tpubDA4nUAdTmY...MmtZaVFEU5MtMfj7H\",\n      //   \"p2wsh_p2sh_deriv\": \"m/48'/1'/0'/1'\",          // originally they had this backwards\n      //   \"p2wsh_p2sh\": \"Upub5THcs...Qh27gWiL2wDoVwaW\",  // originally they had this backwards\n      //   \"p2sh_p2wsh_deriv\": \"m/48'/1'/0'/1'\",          // now it's right\n      //   \"p2sh_p2wsh\": \"Upub5THcs...Qh27gWiL2wDoVwaW\",  // now it's right\n      //   \"p2wsh_deriv\": \"m/48'/1'/0'/2'\",\n      //   \"p2wsh\": \"Vpub5n7tBWyvv...2hTzyeSKtZ5PQ1MRN\",\n      //   \"xfp\": \"12abcdef\"\n      // }\n      //\n      // For now, we will derive unhardened from `p2sh_deriv`\n      // FIXME: assume we will gain the ability to ask Coldcard for an arbitrary path\n      //   (or at least a p2sh hardened path deeper than m/45')\n      var data;\n\n      if (_typeof(file) === \"object\") {\n        data = file;\n      } else if (typeof file === \"string\") {\n        try {\n          data = JSON.parse(file);\n        } catch (error) {\n          throw new Error(\"Unable to parse JSON.\");\n        }\n      } else {\n        throw new Error(\"Not valid JSON.\");\n      }\n\n      if (Object.keys(data).length === 0) {\n        throw new Error(\"Empty JSON file.\");\n      } // Coldcard changed the format of keys in the exported file to match\n      // the convention of p2sh-p2wsh instead of what they had before\n      // which was p2wsh-p2sh ... so one of these sets needs to be\n      // in the file.\n\n\n      if (!data.p2sh_deriv || !data.p2sh || !data.p2wsh_deriv || !data.p2wsh || (!data.p2wsh_p2sh_deriv || !data.p2wsh_p2sh) && (!data.p2sh_p2wsh_deriv || !data.p2sh_p2wsh)) {\n        throw new Error(\"Missing required params. Was this file exported from a Coldcard?  If you are using firmware version 4.1.0 please upgrade to 4.1.1 or later.\");\n      }\n\n      var xpubClass = _unchainedBitcoin.ExtendedPublicKey.fromBase58(data.p2sh);\n\n      if (!data.xfp && xpubClass.depth !== 1) {\n        throw new Error(\"No xfp in JSON file.\");\n      } // We can only find the fingerprint in the xpub if the depth is one\n      // because the xpub includes its parent's fingerprint.\n\n\n      var xfpFromWithinXpub = xpubClass.depth === 1 ? (0, _unchainedBitcoin.fingerprintToFixedLengthHex)(xpubClass.parentFingerprint) : null; // Sanity check if you send in a depth one xpub, we should get the same fingerprint\n\n      if (xfpFromWithinXpub && data.xfp && xfpFromWithinXpub !== data.xfp.toLowerCase()) {\n        throw new Error(\"Computed fingerprint does not match the one in the file.\");\n      }\n\n      var rootFingerprint = data.xfp ? data.xfp : xfpFromWithinXpub;\n      data.rootFingerprint = rootFingerprint.toLowerCase();\n      return data;\n    }\n    /**\n     * This method will take the result from the Coldcard JSON and:\n     *\n     * 1. determine which t/U/V/x/Y/Zpub to use\n     * 2. derive deeper if necessary (and able) using functionality\n     *    from unchained-bitcoin\n     *\n     * @param {Object} result - parsed data from ColdcardJSON\n     * @returns {Object} the desired xpub (if possible)\n     *\n     */\n\n  }, {\n    key: \"deriveDeeperXpubIfNecessary\",\n    value: function deriveDeeperXpubIfNecessary(result) {\n      var knownColdcardChroot = this.chrootForBIP32Path(this.bip32Path);\n      var relativePath = (0, _unchainedBitcoin.getRelativeBIP32Path)(knownColdcardChroot, this.bip32Path);\n      var addressType = COLDCARD_BASE_BIP32_PATHS[knownColdcardChroot]; // result could have p2wsh_p2sh or p2sh_p2wsh based on firmware version. Blah!\n\n      if (addressType.includes(\"_\") && !result[addressType.toLowerCase()]) {\n        // Firmware < v3.2.0\n        addressType = \"p2wsh_p2sh\";\n      }\n\n      var prefix = this.network === _unchainedBitcoin.TESTNET ? \"tpub\" : \"xpub\"; // If the addressType is segwit, the imported key will not be in the xpub/tpub format,\n      // so convert it.\n\n      var baseXpub = addressType.toLowerCase().includes(\"w\") ? (0, _unchainedBitcoin.convertExtendedPublicKey)(result[addressType.toLowerCase()], prefix) : result[addressType.toLowerCase()];\n      return relativePath.length ? (0, _unchainedBitcoin.deriveChildExtendedPublicKey)(baseXpub, relativePath, this.network) : baseXpub;\n    }\n  }]);\n\n  return ColdcardMultisigSettingsFileParser;\n}(ColdcardInteraction);\n/**\n * Reads a public key and (optionally) derives deeper from data in an\n * exported JSON file uploaded from the Coldcard.\n *\n * @extends {ColdcardMultisigSettingsFileParser}\n * @example\n * const interaction = new ColdcardExportPublicKey();\n * const reader = new FileReader(); // application dependent\n * const jsonFile = reader.readAsText('ccxp-0F056943.json'); // application dependent\n * const {publicKey, rootFingerprint, bip32Path} = interaction.parse(jsonFile);\n * console.log(publicKey);\n * // \"026942...\"\n * console.log(rootFingerprint);\n * // \"0f056943\"\n * console.log(bip32Path);\n * // \"m/45'/0/0\"\n */\n\n\nvar ColdcardExportPublicKey =\n/*#__PURE__*/\nfunction (_ColdcardMultisigSett) {\n  _inherits(ColdcardExportPublicKey, _ColdcardMultisigSett);\n\n  /**\n   *\n   * @param {object} options - options argument\n   * @param {string} options.network - bitcoin network (needed for derivations)\n   * @param {string} options.bip32Path - BIP32 path\n   */\n  function ColdcardExportPublicKey(_ref2) {\n    var network = _ref2.network,\n        bip32Path = _ref2.bip32Path;\n\n    _classCallCheck(this, ColdcardExportPublicKey);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ColdcardExportPublicKey).call(this, {\n      network: network,\n      bip32Path: bip32Path\n    }));\n  }\n\n  _createClass(ColdcardExportPublicKey, [{\n    key: \"messages\",\n    value: function messages() {\n      return _get(_getPrototypeOf(ColdcardExportPublicKey.prototype), \"messages\", this).call(this);\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(xpubJSONFile) {\n      var result = _get(_getPrototypeOf(ColdcardExportPublicKey.prototype), \"parse\", this).call(this, xpubJSONFile);\n\n      var xpub = this.deriveDeeperXpubIfNecessary(result);\n      return {\n        publicKey: _unchainedBitcoin.ExtendedPublicKey.fromBase58(xpub).pubkey,\n        rootFingerprint: result.rootFingerprint,\n        bip32Path: this.bip32Path\n      };\n    }\n  }]);\n\n  return ColdcardExportPublicKey;\n}(ColdcardMultisigSettingsFileParser);\n/**\n * Reads an extended public key and (optionally) derives deeper from data in an\n * exported JSON file uploaded from the Coldcard.\n *\n * @extends {ColdcardMultisigSettingsFileParser}\n * @example\n * const interaction = new ColdcardExportExtendedPublicKey({network: MAINNET, bip32Path: 'm/45'/0/0'});\n * const reader = new FileReader(); // application dependent\n * const jsonFile = reader.readAsText('ccxp-0F056943.json'); // application dependent\n * const {xpub, rootFingerprint, bip32Path} = interaction.parse(jsonFile);\n * console.log(xpub);\n * // \"xpub...\"\n * console.log(rootFingerprint);\n * // \"0f056943\"\n * console.log(bip32Path);\n * // \"m/45'/0/0\"\n */\n\n\nexports.ColdcardExportPublicKey = ColdcardExportPublicKey;\n\nvar ColdcardExportExtendedPublicKey =\n/*#__PURE__*/\nfunction (_ColdcardMultisigSett2) {\n  _inherits(ColdcardExportExtendedPublicKey, _ColdcardMultisigSett2);\n\n  /**\n   *\n   * @param {object} options - options argument\n   * @param {string} options.network - bitcoin network (needed for derivations)\n   * @param {string} options.bip32Path - BIP32 paths\n   */\n  function ColdcardExportExtendedPublicKey(_ref3) {\n    var network = _ref3.network,\n        bip32Path = _ref3.bip32Path;\n\n    _classCallCheck(this, ColdcardExportExtendedPublicKey);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ColdcardExportExtendedPublicKey).call(this, {\n      network: network,\n      bip32Path: bip32Path\n    }));\n  }\n\n  _createClass(ColdcardExportExtendedPublicKey, [{\n    key: \"messages\",\n    value: function messages() {\n      return _get(_getPrototypeOf(ColdcardExportExtendedPublicKey.prototype), \"messages\", this).call(this);\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(xpubJSONFile) {\n      var result = _get(_getPrototypeOf(ColdcardExportExtendedPublicKey.prototype), \"parse\", this).call(this, xpubJSONFile);\n\n      var xpub = this.deriveDeeperXpubIfNecessary(result);\n      return {\n        xpub: xpub,\n        rootFingerprint: result.rootFingerprint,\n        bip32Path: this.bip32Path\n      };\n    }\n  }]);\n\n  return ColdcardExportExtendedPublicKey;\n}(ColdcardMultisigSettingsFileParser);\n/**\n * Returns signature request data via a PSBT for a Coldcard to sign and\n * accepts a PSBT for parsing signatures from a Coldcard device\n *\n * @extends {module:coldcard.ColdcardInteraction}\n * @example\n * const interaction = new ColdcardSignMultisigTransaction({network, inputs, outputs, bip32paths, psbt});\n * console.log(interaction.request());\n * // \"cHNidP8BA...\"\n *\n * // Parse signatures from a signed PSBT\n * const signatures = interaction.parse(psbt);\n * console.log(signatures);\n * // {'029e866...': ['3045...01', ...]}\n *\n */\n\n\nexports.ColdcardExportExtendedPublicKey = ColdcardExportExtendedPublicKey;\n\nvar ColdcardSignMultisigTransaction =\n/*#__PURE__*/\nfunction (_ColdcardInteraction2) {\n  _inherits(ColdcardSignMultisigTransaction, _ColdcardInteraction2);\n\n  /**\n   *\n   * @param {object} options - options argument\n   * @param {string} options.network - bitcoin network\n   * @param {array<object>} options.inputs - inputs for the transaction\n   * @param {array<object>} options.outputs - outputs for the transaction\n   * @param {array<string>} options.bip32Paths - BIP32 paths\n   * @param {object} [options.psbt] - PSBT of the transaction to sign, include it or we will generate it\n   */\n  function ColdcardSignMultisigTransaction(_ref4) {\n    var _this2;\n\n    var network = _ref4.network,\n        inputs = _ref4.inputs,\n        outputs = _ref4.outputs,\n        bip32Paths = _ref4.bip32Paths,\n        psbt = _ref4.psbt;\n\n    _classCallCheck(this, ColdcardSignMultisigTransaction);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ColdcardSignMultisigTransaction).call(this));\n    _this2.network = network;\n    _this2.inputs = inputs;\n    _this2.outputs = outputs;\n    _this2.bip32Paths = bip32Paths;\n\n    if (psbt) {\n      _this2.psbt = psbt;\n    } else {\n      try {\n        _this2.psbt = (0, _unchainedBitcoin.unsignedMultisigPSBT)(network, inputs, outputs);\n      } catch (e) {\n        throw new Error(\"Unable to build the PSBT from the provided parameters.\");\n      }\n    }\n\n    return _this2;\n  }\n\n  _createClass(ColdcardSignMultisigTransaction, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(ColdcardSignMultisigTransaction.prototype), \"messages\", this).call(this);\n\n      messages.push({\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        code: \"coldcard.install_multisig_config\",\n        text: \"Ensure your Coldcard has the multisig wallet installed.\"\n      });\n      messages.push({\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        code: \"coldcard.download_psbt\",\n        text: \"Download and save this PSBT file to your SD card.\"\n      });\n      messages.push({\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        code: \"coldcard.transfer_psbt\",\n        text: \"Transfer the PSBT file to your Coldcard.\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        code: \"coldcard.transfer_psbt\",\n        text: \"Transfer the PSBT file to your Coldcard.\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        code: \"coldcard.select_psbt\",\n        text: \"Choose 'Ready To Sign' and select the PSBT.\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        code: \"coldcard.sign_psbt\",\n        text: \"Verify the transaction details and sign.\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        code: \"coldcard.upload_signed_psbt\",\n        text: \"Upload the signed PSBT below.\"\n      });\n      return messages;\n    }\n    /**\n     * Request for the PSBT data that needs to be signed.\n     *\n     * NOTE: the application may be expecting the PSBT in some format\n     * other than the direct Object.\n     *\n     * E.g. PSBT in Base64 is interaction().request().toBase64()\n     *\n     * @returns {Object} Returns the local unsigned PSBT from transaction details\n     */\n\n  }, {\n    key: \"request\",\n    value: function request() {\n      return this.psbt;\n    }\n    /**\n     *\n     * @param {Object} psbtObject - the PSBT\n     * @returns {Object} signatures - This calls a function in unchained-bitcoin which parses\n     * PSBT files for sigantures and then returns an object with the format\n     * {\n     *   pubkey1 : [sig1, sig2, ...],\n     *   pubkey2 : [sig1, sig2, ...]\n     * }\n     * This format may change in the future or there may be additional options for return type.\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse(psbtObject) {\n      var signatures = (0, _unchainedBitcoin.parseSignaturesFromPSBT)(psbtObject);\n\n      if (!signatures || signatures.length === 0) {\n        throw new Error(\"No signatures found in the PSBT. Did you upload the right one?\");\n      }\n\n      return signatures;\n    }\n  }]);\n\n  return ColdcardSignMultisigTransaction;\n}(ColdcardInteraction);\n/**\n * Returns a valid multisig wallet config text file to send over to a Coldcard\n *\n * NOTE: technically only the root xfp of the signing device is required to be\n * correct, but we recommend only setting up the multisig wallet on the Coldcard\n * with complete xfp information. Here we actually turn this recommendation into a\n * requirement so as to minimize the number of wallet-config installations.\n *\n * This will likely move to its own generic class soon, and we'll only leave\n * the specifics of `adapt()` behind.\n *\n * This is an example Coldcard config file from\n * https://coldcardwallet.com/docs/multisig\n *\n * # Coldcard Multisig setup file (exported from 4369050F)\n * #\n * Name: MeMyself\n * Policy: 2 of 4\n * Derivation: m/45'\n * Format: P2WSH\n *\n * D0CFA66B: tpubD9429UXFGCTKJ9NdiNK4rC5...DdP9\n * 8E697B74: tpubD97nVL37v5tWyMf9ofh5rzn...XgSc\n * BE26B07B: tpubD9ArfXowvGHnuECKdGXVKDM...FxPa\n * 4369050F: tpubD8NXmKsmWp3a3DXhbihAYbY...9C8n\n *\n */\n\n\nexports.ColdcardSignMultisigTransaction = ColdcardSignMultisigTransaction;\n\nvar ColdcardMultisigWalletConfig =\n/*#__PURE__*/\nfunction () {\n  function ColdcardMultisigWalletConfig(_ref5) {\n    var jsonConfig = _ref5.jsonConfig;\n\n    _classCallCheck(this, ColdcardMultisigWalletConfig);\n\n    if (_typeof(jsonConfig) === \"object\") {\n      this.jsonConfig = jsonConfig;\n    } else if (typeof jsonConfig === \"string\") {\n      try {\n        this.jsonConfig = JSON.parse(jsonConfig);\n      } catch (error) {\n        throw new Error(\"Unable to parse JSON.\");\n      }\n    } else {\n      throw new Error(\"Not valid JSON.\");\n    }\n\n    if (this.jsonConfig.uuid || this.jsonConfig.name) {\n      this.name = this.jsonConfig.uuid || this.jsonConfig.name;\n    } else {\n      throw new Error(\"Configuration file needs a UUID or a name.\");\n    }\n\n    if (this.jsonConfig.quorum.requiredSigners && this.jsonConfig.quorum.totalSigners) {\n      this.requiredSigners = this.jsonConfig.quorum.requiredSigners;\n      this.totalSigners = this.jsonConfig.quorum.totalSigners;\n    } else {\n      throw new Error(\"Configuration file needs quorum.requiredSigners and quorum.totalSigners.\");\n    }\n\n    if (this.jsonConfig.addressType) {\n      this.addressType = jsonConfig.addressType;\n    } else {\n      throw new Error(\"Configuration file needs addressType.\");\n    }\n\n    if (this.jsonConfig.extendedPublicKeys && this.jsonConfig.extendedPublicKeys.every(function (xpub) {\n      // For each xpub, check that xfp exists, the length is 8, type is string, and valid hex\n      if (!xpub.xfp || xpub.xfp === \"Unknown\") {\n        throw new Error(\"ExtendedPublicKeys missing at least one xfp.\");\n      }\n\n      if (typeof xpub.xfp !== \"string\") {\n        throw new Error(\"XFP not a string\");\n      }\n\n      if (xpub.xfp.length !== 8) {\n        throw new Error(\"XFP not length 8\");\n      }\n\n      if (isNaN(Number(\"0x\".concat(xpub.xfp)))) {\n        throw new Error(\"XFP is invalid hex\");\n      }\n\n      return true;\n    })) {\n      this.extendedPublicKeys = this.jsonConfig.extendedPublicKeys;\n    } else {\n      throw new Error(\"Configuration file needs extendedPublicKeys.\");\n    }\n  }\n  /**\n   * @returns {string} output to be written to a text file and uploaded to Coldcard.\n   */\n\n\n  _createClass(ColdcardMultisigWalletConfig, [{\n    key: \"adapt\",\n    value: function adapt() {\n      var output = \"# Coldcard Multisig setup file (exported from unchained-wallets)\\n# https://github.com/unchained-capital/unchained-wallets\\n# v\".concat(COLDCARD_WALLET_CONFIG_VERSION, \"\\n# \\nName: \").concat(this.name, \"\\nPolicy: \").concat(this.requiredSigners, \" of \").concat(this.totalSigners, \"\\nFormat: \").concat(this.addressType, \"\\n\\n\"); // We need to loop over xpubs and output `Derivation: bip32path` and `xfp: xpub` for each\n\n      var xpubs = this.extendedPublicKeys.map(function (xpub) {\n        // Mask the derivation to the appropriate depth if it is not known\n        var unknownBip32 = xpub.bip32Path.toLowerCase().includes(\"unknown\");\n        var derivation = unknownBip32 ? \"m\".concat(\"/0\".repeat(_unchainedBitcoin.ExtendedPublicKey.fromBase58(xpub.xpub).depth)) : xpub.bip32Path;\n        return \"Derivation: \".concat(derivation, \"\\n\").concat(xpub.xfp, \": \").concat(xpub.xpub);\n      });\n      output += xpubs.join(\"\\n\");\n      output += \"\\n\";\n      return output;\n    }\n  }]);\n\n  return ColdcardMultisigWalletConfig;\n}();\n\nexports.ColdcardMultisigWalletConfig = ColdcardMultisigWalletConfig;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CustomSignMultisigTransaction = exports.CustomExportExtendedPublicKey = exports.CustomInteraction = exports.CUSTOM = void 0;\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es6.reflect.get\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.string.starts-with\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.find\");\n\nvar _unchainedBitcoin = require(\"unchained-bitcoin\");\n\nvar _interaction = require(\"./interaction\");\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar CUSTOM = \"custom\";\n/**\n * Base class for interactions with Custom \"devices\"\n *\n * @extends {module:interaction.IndirectKeystoreInteraction}\n */\n\nexports.CUSTOM = CUSTOM;\n\nvar CustomInteraction =\n/*#__PURE__*/\nfunction (_IndirectKeystoreInte) {\n  _inherits(CustomInteraction, _IndirectKeystoreInte);\n\n  function CustomInteraction() {\n    _classCallCheck(this, CustomInteraction);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CustomInteraction).apply(this, arguments));\n  }\n\n  return CustomInteraction;\n}(_interaction.IndirectKeystoreInteraction);\n/**\n * Base class for text-based (or clipboard pasted) ExtendedPublicKey\n * This class handles parsing/validating the xpub and relevant\n * derivation properties. If no root fingerprint is provided, one will\n * be deterministically assigned.\n *\n * @extends {module:custom.CustomInteraction}\n * @example\n * const interaction = new CustomExportExtendedPublicKey({network: MAINNET, bip32Path: \"m/45'/0'/0'\"});\n * const {xpub, rootFingerprint, bip32Path} = interaction.parse({xpub: xpub..., rootFingerprint: 0f056943});\n * console.log(xpub);\n * // \"xpub...\"\n * console.log(rootFingerprint);\n * // \"0f056943\"\n * console.log(bip32Path);\n * // \"m/45'/0'/0'\"\n * ** OR **\n * * const {xpub, rootFingerprint, bip32Path} = interaction.parse({xpub: xpub...});\n * console.log(xpub);\n * // \"xpub...\"\n * console.log(rootFingerprint);\n * // \"096aed5e\"\n * console.log(bip32Path);\n * // \"m/45'/0'/0'\"\n */\n\n\nexports.CustomInteraction = CustomInteraction;\n\nvar CustomExportExtendedPublicKey =\n/*#__PURE__*/\nfunction (_CustomInteraction) {\n  _inherits(CustomExportExtendedPublicKey, _CustomInteraction);\n\n  /**\n   * @param {object} options - options argument\n   * @param {string} options.network - bitcoin network (needed for derivations)\n   * @param {string} options.bip32Path - bip32Path to interrogate\n   */\n  function CustomExportExtendedPublicKey(_ref) {\n    var _this;\n\n    var network = _ref.network,\n        bip32Path = _ref.bip32Path;\n\n    _classCallCheck(this, CustomExportExtendedPublicKey);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CustomExportExtendedPublicKey).call(this));\n\n    if ([_unchainedBitcoin.MAINNET, _unchainedBitcoin.TESTNET].find(function (net) {\n      return net === network;\n    })) {\n      _this.network = network;\n    } else {\n      throw new Error(\"Unknown network.\");\n    }\n\n    _this.validationErrorMessages = [];\n    _this.bip32Path = bip32Path;\n    var bip32PathError = (0, _unchainedBitcoin.validateBIP32Path)(bip32Path);\n\n    if (bip32PathError.length) {\n      _this.validationErrorMessages.push({\n        code: \"custom.bip32_path.path_error\",\n        text: bip32PathError\n      });\n    }\n\n    return _this;\n  }\n\n  _createClass(CustomExportExtendedPublicKey, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return this.validationErrorMessages.length === 0;\n    }\n  }, {\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(CustomExportExtendedPublicKey.prototype), \"messages\", this).call(this);\n\n      if (this.validationErrorMessages.length) {\n        this.validationErrorMessages.forEach(function (e) {\n          messages.push({\n            state: _interaction.PENDING,\n            level: _interaction.ERROR,\n            code: e.code,\n            text: e.text\n          });\n        });\n      }\n\n      messages.push({\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        code: \"custom.import_xpub\",\n        text: \"Type or paste the extended public key here.\"\n      });\n      return messages;\n    }\n    /**\n     * Parse the provided JSON and do some basic error checking\n     *\n     * @param {Object} data - JSON object with incoming data to be parsed (read: reformatted)\n     * @returns {Object} Object - ExtendedPublicKeyDerivation {xpub, bip32path, rootFingerprint}\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse(data) {\n      // build ExtendedPublicKey struct (validation happens in constructor)\n      var xpubClass;\n      var rootFingerprint;\n\n      try {\n        xpubClass = _unchainedBitcoin.ExtendedPublicKey.fromBase58(data.xpub);\n      } catch (e) {\n        throw new Error(\"Not a valid ExtendedPublicKey.\");\n      }\n\n      try {\n        if (data.rootFingerprint === \"\" || data.rootFingerprint === undefined) {\n          var pkLen = xpubClass.pubkey.length; // If no fingerprint is provided, we will assign one deterministically\n\n          rootFingerprint = xpubClass.pubkey.substring(pkLen - 8);\n        } else {\n          (0, _unchainedBitcoin.validateRootFingerprint)(data.rootFingerprint);\n          rootFingerprint = data.rootFingerprint;\n        }\n      } catch (e) {\n        throw new Error(\"Root fingerprint validation error: \".concat(e.message.toLowerCase(), \".\"));\n      }\n\n      var numSlashes = this.bip32Path.split(\"/\").length;\n      var bipDepth = this.bip32Path.startsWith(\"m/\") ? numSlashes - 1 : numSlashes;\n\n      if (xpubClass.depth !== bipDepth) {\n        throw new Error(\"Depth of ExtendedPublicKey (\".concat(xpubClass.depth, \") does not match depth of BIP32 path (\").concat(bipDepth, \").\"));\n      }\n\n      return {\n        xpub: xpubClass.base58String,\n        rootFingerprint: rootFingerprint,\n        bip32Path: this.bip32Path\n      };\n    }\n  }]);\n\n  return CustomExportExtendedPublicKey;\n}(CustomInteraction);\n/**\n * Returns signature request data via a PSBT for a Custom \"device\" to sign and\n * accepts a PSBT for parsing signatures from a Custom \"device\"\n *\n * @extends {module:custom.CustomInteraction}\n * @example\n * const interaction = new CustomSignMultisigTransaction({network, inputs, outputs, bip32paths, psbt});\n * console.log(interaction.request());\n * // \"cHNidP8BA...\"\n *\n * // Parse signatures from a signed PSBT\n * const signatures = interaction.parse(psbt);\n * console.log(signatures);\n * // {'029e866...': ['3045...01', ...]}\n *\n */\n\n\nexports.CustomExportExtendedPublicKey = CustomExportExtendedPublicKey;\n\nvar CustomSignMultisigTransaction =\n/*#__PURE__*/\nfunction (_CustomInteraction2) {\n  _inherits(CustomSignMultisigTransaction, _CustomInteraction2);\n\n  /**\n   * @param {object} options - options argument\n   * @param {string} options.network - bitcoin network\n   * @param {array<object>} options.inputs - inputs for the transaction\n   * @param {array<object>} options.outputs - outputs for the transaction\n   * @param {array<string>} options.bip32Paths - BIP32 paths\n   * @param {object} [options.psbt] - PSBT of the transaction to sign, included or generated from the other options\n   */\n  function CustomSignMultisigTransaction(_ref2) {\n    var _this2;\n\n    var network = _ref2.network,\n        inputs = _ref2.inputs,\n        outputs = _ref2.outputs,\n        bip32Paths = _ref2.bip32Paths,\n        psbt = _ref2.psbt;\n\n    _classCallCheck(this, CustomSignMultisigTransaction);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(CustomSignMultisigTransaction).call(this));\n    _this2.network = network;\n    _this2.inputs = inputs;\n    _this2.outputs = outputs;\n    _this2.bip32Paths = bip32Paths;\n\n    if (psbt) {\n      _this2.psbt = psbt;\n    } else {\n      try {\n        _this2.psbt = (0, _unchainedBitcoin.unsignedMultisigPSBT)(network, inputs, outputs);\n      } catch (e) {\n        throw new Error(\"Unable to build the PSBT from the provided parameters.\");\n      }\n    }\n\n    return _this2;\n  }\n\n  _createClass(CustomSignMultisigTransaction, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(CustomSignMultisigTransaction.prototype), \"messages\", this).call(this);\n\n      messages.push({\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        code: \"custom.download_psbt\",\n        text: \"Download and save this PSBT file.\"\n      });\n      messages.push({\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        code: \"custom.sign_psbt\",\n        text: \"Add your signature to the PSBT.\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        code: \"custom.sign_psbt\",\n        text: \"Verify the transaction details and sign.\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        code: \"custom.upload_signed_psbt\",\n        text: \"Upload the signed PSBT.\"\n      });\n      return messages;\n    }\n    /**\n     * Request for the PSBT data that needs to be signed.\n     *\n     * NOTE: the application may be expecting the PSBT in some format\n     * other than the direct Object.\n     *\n     * E.g. PSBT in Base64 is interaction().request().toBase64()\n     *\n     * @returns {Object} Returns the local unsigned PSBT from transaction details\n     */\n\n  }, {\n    key: \"request\",\n    value: function request() {\n      return this.psbt;\n    }\n    /**\n     *\n     * @param {Object} psbtObject - the PSBT\n     * @returns {Object} signatures - This calls a function in unchained-bitcoin which parses\n     * PSBT files for sigantures and then returns an object with the format\n     * {\n     *   pubkey1 : [sig1, sig2, ...],\n     *   pubkey2 : [sig1, sig2, ...]\n     * }\n     * This format may change in the future or there may be additional options for return type.\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse(psbtObject) {\n      var signatures = (0, _unchainedBitcoin.parseSignaturesFromPSBT)(psbtObject);\n\n      if (!signatures || signatures.length === 0) {\n        throw new Error(\"No signatures found in the PSBT. Did you upload the right one?\");\n      }\n\n      return signatures;\n    }\n  }]);\n\n  return CustomSignMultisigTransaction;\n}(CustomInteraction);\n\nexports.CustomSignMultisigTransaction = CustomSignMultisigTransaction;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseHermitQRCodeData = parseHermitQRCodeData;\nexports.encodeHermitQRCodeData = encodeHermitQRCodeData;\nexports.HermitSignTransaction = exports.HermitExportExtendedPublicKey = exports.HermitExportPublicKey = exports.HermitDisplayer = exports.HermitReader = exports.HermitInteraction = exports.HERMIT = void 0;\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.reflect.get\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.object.define-properties\");\n\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es7.object.values\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.reflect.delete-property\");\n\nrequire(\"core-js/modules/es6.string.starts-with\");\n\nvar _hiBase = _interopRequireDefault(require(\"hi-base32\"));\n\nvar _pako = _interopRequireDefault(require(\"pako\"));\n\nvar _bignumber = _interopRequireDefault(require(\"bignumber.js\"));\n\nvar _unchainedBitcoin = require(\"unchained-bitcoin\");\n\nvar _interaction = require(\"./interaction\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar HERMIT = 'hermit';\n/**\n * Parse the data from a Hermit-created QR-code.\n *\n * @param {string} encodedString - base32-encoded, gzipped, JSON data\n * @returns {object} the parsed data\n */\n\nexports.HERMIT = HERMIT;\n\nfunction parseHermitQRCodeData(encodedString) {\n  var errorPrefix = \"Unable to parse QR code\";\n\n  try {\n    var compressedBytes = _hiBase[\"default\"].decode.asBytes(encodedString);\n\n    try {\n      var json = _pako[\"default\"].inflate(compressedBytes, {\n        to: 'string'\n      });\n\n      try {\n        return JSON.parse(json);\n      } catch (e) {\n        throw new Error(\"\".concat(errorPrefix, \" (JSON parse error)\"));\n      }\n    } catch (e) {\n      if (e.message && e.message.startsWith(errorPrefix)) {\n        throw e;\n      } else {\n        throw new Error(\"\".concat(errorPrefix, \" (gzip decompression error)\"));\n      }\n    }\n  } catch (e) {\n    if (e.message && e.message.startsWith(errorPrefix)) {\n      throw e;\n    } else {\n      throw new Error(\"\".concat(errorPrefix, \" (Base32 decode error)\"));\n    }\n  }\n}\n/**\n * Encode the given `data` as a string to be put into a\n * Hermit-readable QR code.\n *\n * @param {object} data plain JavaScript object to encode\n * @returns {string} base32-encoded, gzipped, JSON data\n */\n\n\nfunction encodeHermitQRCodeData(data) {\n  var errorPrefix = \"Unable to create QR code\";\n\n  try {\n    var jsonString = JSON.stringify(data);\n\n    try {\n      var compressedBytes = _pako[\"default\"].deflate(jsonString, {\n        gzip: true\n      });\n\n      try {\n        return _hiBase[\"default\"].encode(compressedBytes);\n      } catch (e) {\n        throw new Error(\"\".concat(errorPrefix, \" (Base32 encode error)\"));\n      }\n    } catch (e) {\n      if (e.message && e.message.startsWith(errorPrefix)) {\n        throw e;\n      } else {\n        throw new Error(\"\".concat(errorPrefix, \" (gzip compression error)\"));\n      }\n    }\n  } catch (e) {\n    if (e.message && e.message.startsWith(errorPrefix)) {\n      throw e;\n    } else {\n      throw new Error(\"\".concat(errorPrefix, \" (JSON encode error)\"));\n    }\n  }\n}\n\nfunction commandMessage(data) {\n  return _objectSpread({}, {\n    state: _interaction.PENDING,\n    level: _interaction.INFO,\n    code: \"hermit.command\",\n    mode: \"wallet\"\n  }, {}, {\n    text: \"\".concat(data.instructions, \" '\").concat(data.command, \"'\")\n  }, {}, data);\n}\n/**\n * Base class for interactions with Hermit.\n *\n * @extends {module:interaction.IndirectKeystoreInteraction}\n */\n\n\nvar HermitInteraction =\n/*#__PURE__*/\nfunction (_IndirectKeystoreInte) {\n  _inherits(HermitInteraction, _IndirectKeystoreInte);\n\n  function HermitInteraction() {\n    _classCallCheck(this, HermitInteraction);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(HermitInteraction).apply(this, arguments));\n  }\n\n  return HermitInteraction;\n}(_interaction.IndirectKeystoreInteraction);\n/**\n * Base class for interactions which read a QR code displayed by a\n * Hermit command.\n *\n * @extends {module:hermit.HermitInteraction}\n */\n\n\nexports.HermitInteraction = HermitInteraction;\n\nvar HermitReader =\n/*#__PURE__*/\nfunction (_HermitInteraction) {\n  _inherits(HermitReader, _HermitInteraction);\n\n  function HermitReader() {\n    var _this;\n\n    _classCallCheck(this, HermitReader);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HermitReader).call(this));\n    _this.reader = true;\n    return _this;\n  }\n\n  _createClass(HermitReader, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(HermitReader.prototype), \"messages\", this).call(this);\n\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        code: \"hermit.scanning\",\n        text: \"Scan Hermit QR code now.\"\n      });\n      return messages;\n    }\n  }]);\n\n  return HermitReader;\n}(HermitInteraction);\n/**\n * Base class for interactions which display data as a QR code for\n * Hermit to read and then read the QR code Hermit displays in\n * response.\n *\n * @extends {module:hermit.HermitInteraction}\n */\n\n\nexports.HermitReader = HermitReader;\n\nvar HermitDisplayer =\n/*#__PURE__*/\nfunction (_HermitReader) {\n  _inherits(HermitDisplayer, _HermitReader);\n\n  function HermitDisplayer() {\n    var _this2;\n\n    _classCallCheck(this, HermitDisplayer);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(HermitDisplayer).call(this));\n    _this2.displayer = true;\n    return _this2;\n  }\n\n  return HermitDisplayer;\n}(HermitReader);\n/**\n * Reads a public key from data in a Hermit QR code.\n *\n * @extends {module:hermit.HermitReader}\n * @example\n * const interaction = new HermitExportPublicKey();\n * const encodedString = readHermitQRCode(); // application dependent\n * const {pubkey, bip32Path} = interaction.parse(encoodedString);\n * console.log(pubkey);\n * // \"03...\"\n * console.log(bip32Path);\n * // \"m/45'/0'/0'/0/0\"\n */\n\n\nexports.HermitDisplayer = HermitDisplayer;\n\nvar HermitExportPublicKey =\n/*#__PURE__*/\nfunction (_HermitReader2) {\n  _inherits(HermitExportPublicKey, _HermitReader2);\n\n  function HermitExportPublicKey(_ref) {\n    var _this3;\n\n    var bip32Path = _ref.bip32Path;\n\n    _classCallCheck(this, HermitExportPublicKey);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(HermitExportPublicKey).call(this));\n    _this3.bip32Path = bip32Path;\n    return _this3;\n  }\n\n  _createClass(HermitExportPublicKey, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(HermitExportPublicKey.prototype), \"messages\", this).call(this);\n\n      messages.push(commandMessage({\n        instructions: \"Run the following Hermit command, replacing the BIP32 path if you need to:\",\n        command: \"export-pub \".concat(this.bip32Path)\n      }));\n      return messages;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(encodedString) {\n      var result = parseHermitQRCodeData(encodedString);\n      var xpub = result.xpub,\n          pubkey = result.pubkey;\n      var bip32Path = result.bip32_path;\n\n      if (!pubkey) {\n        if (xpub) {\n          throw new Error(\"Make sure you export a plain public key and NOT an extended public key.\");\n        } else {\n          throw new Error(\"No public key in QR code.\");\n        }\n      }\n\n      if (!bip32Path) {\n        throw new Error(\"No BIP32 path in QR code.\");\n      }\n\n      result.bip32Path = bip32Path;\n      Reflect.deleteProperty(result, \"bip32_path\");\n      return result;\n    }\n  }]);\n\n  return HermitExportPublicKey;\n}(HermitReader);\n/**\n * Reads an extended public key from data in a Hermit QR code.\n *\n * @extends {module:hermit.HermitReader}\n * @example\n * const interaction = new HermitExportExtendedPublicKey();\n * const encodedString = readHermitQRCode(); // application dependent\n * const {xpub, bip32Path} = interaction.parse(encoodedString);\n * console.log(xpub);\n * // \"xpub...\"\n * console.log(bip32Path);\n * // \"m/45'/0'/0'\"\n */\n\n\nexports.HermitExportPublicKey = HermitExportPublicKey;\n\nvar HermitExportExtendedPublicKey =\n/*#__PURE__*/\nfunction (_HermitReader3) {\n  _inherits(HermitExportExtendedPublicKey, _HermitReader3);\n\n  function HermitExportExtendedPublicKey(_ref2) {\n    var _this4;\n\n    var bip32Path = _ref2.bip32Path;\n\n    _classCallCheck(this, HermitExportExtendedPublicKey);\n\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(HermitExportExtendedPublicKey).call(this));\n    _this4.bip32Path = bip32Path;\n    return _this4;\n  }\n\n  _createClass(HermitExportExtendedPublicKey, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(HermitExportExtendedPublicKey.prototype), \"messages\", this).call(this);\n\n      messages.push(commandMessage({\n        instructions: \"Run the following Hermit command, replacing the BIP32 path if you need to:\",\n        command: \"export-xpub \".concat(this.bip32Path)\n      }));\n      return messages;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(encodedString) {\n      var result = parseHermitQRCodeData(encodedString);\n      var xpub = result.xpub,\n          pubkey = result.pubkey;\n      var bip32Path = result.bip32_path;\n\n      if (!xpub) {\n        if (pubkey) {\n          throw new Error(\"Make sure you export an extended public key and NOT a plain public key.\");\n        } else {\n          throw new Error(\"No extended public key in QR code.\");\n        }\n      }\n\n      if (!bip32Path) {\n        throw new Error(\"No BIP32 path in QR code.\");\n      }\n\n      result.bip32Path = bip32Path;\n      Reflect.deleteProperty(result, \"bip32_path\");\n      return result;\n    }\n  }]);\n\n  return HermitExportExtendedPublicKey;\n}(HermitReader);\n/**\n * Returns signature request data to display in a QR code for Hermit\n * and reads the signature data passed back by Hermit in another QR\n * code.\n *\n * NOTE: Transactions with inputs & outputs to non-P2SH addresses are not supported by Hermit.\n *\n * @extends {module:hermit.HermitDisplayer}\n * @example\n * const interaction = new HermitSignTransaction({inputs, outputs, bip32Paths});\n * console.log(interaction.request());\n * // \"IJQXGZI...\"\n *\n * // Display a QR code containing the above data to Hermit running\n * // `sign-bitcoin` and it will return another QR code which needs\n * // parsed.\n * const encodedString = readHermitQRCode(); // application dependent\n * const signatures = interaction.parse(encoodedString);\n * console.log(signatures);\n * // [\"ababa...01\", ... ]\n *\n */\n\n\nexports.HermitExportExtendedPublicKey = HermitExportExtendedPublicKey;\n\nvar HermitSignTransaction =\n/*#__PURE__*/\nfunction (_HermitDisplayer) {\n  _inherits(HermitSignTransaction, _HermitDisplayer);\n\n  /**\n   *\n   * @param {object} options - options argument\n   * @param {array<object>} options.inputs - inputs for the transaction\n   * @param {array<object>} options.outputs - outputs for the transaction\n   * @param {array<string>} options.bip32Paths - BIP32 paths\n   */\n  function HermitSignTransaction(_ref3) {\n    var _this5;\n\n    var inputs = _ref3.inputs,\n        outputs = _ref3.outputs,\n        bip32Paths = _ref3.bip32Paths;\n\n    _classCallCheck(this, HermitSignTransaction);\n\n    _this5 = _possibleConstructorReturn(this, _getPrototypeOf(HermitSignTransaction).call(this));\n    _this5.inputs = inputs;\n    _this5.outputs = outputs;\n    _this5.bip32Paths = bip32Paths;\n    _this5.inputAddressType = '';\n    return _this5;\n  }\n\n  _createClass(HermitSignTransaction, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return this.inputsAreSupported() && this.outputsAreSupported();\n    }\n  }, {\n    key: \"outputsAreSupported\",\n    value: function outputsAreSupported() {\n      if (this.outputs && this.outputs.length) {\n        for (var i = 0; i < this.outputs.length; i++) {\n          var output = this.outputs[i];\n\n          if (output.address.match(/^(tb|bc)/)) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"inputsAreSupported\",\n    value: function inputsAreSupported() {\n      if (this.inputs && this.inputs.length) {\n        for (var i = 0; i < this.inputs.length; i++) {\n          var input = this.inputs[i];\n          var inputAddressType = (0, _unchainedBitcoin.multisigAddressType)(input.multisig);\n\n          if (inputAddressType !== _unchainedBitcoin.MULTISIG_ADDRESS_TYPES.P2SH) {\n            this.inputAddressType = inputAddressType;\n            return false;\n          }\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(HermitSignTransaction.prototype), \"messages\", this).call(this);\n\n      if (!this.inputsAreSupported()) {\n        messages.push({\n          state: _interaction.UNSUPPORTED,\n          level: _interaction.ERROR,\n          code: \"hermit.unsupported.inputaddress\",\n          text: \"Unsupported input address type \".concat(this.inputAddressType, \", must be P2SH.\")\n        });\n      }\n\n      if (!this.outputsAreSupported()) {\n        messages.push({\n          state: _interaction.UNSUPPORTED,\n          level: _interaction.ERROR,\n          code: \"hermit.unsupported.outputaddress\",\n          text: \"Unsupported output address type. bech32 addresses are unsupported.\"\n        });\n      }\n\n      if (!this.inputsAreSupported() || !this.outputsAreSupported()) return messages;\n      messages.push(commandMessage({\n        instructions: \"Scan this QR code into Hermit by running the following command:\",\n        command: \"sign-bitcoin\"\n      }));\n      return messages;\n    }\n  }, {\n    key: \"request\",\n    value: function request() {\n      var data = this.signatureRequestData();\n      return encodeHermitQRCodeData(data);\n    }\n  }, {\n    key: \"signatureRequestData\",\n    value: function signatureRequestData() {\n      var hermitInputsByRedeemScript = {};\n\n      for (var i = 0; i < this.inputs.length; i++) {\n        var input = this.inputs[i];\n        var bip32Path = this.bip32Paths[i];\n        var redeemScriptHex = (0, _unchainedBitcoin.scriptToHex)((0, _unchainedBitcoin.multisigRedeemScript)(input.multisig));\n\n        if (!hermitInputsByRedeemScript[redeemScriptHex]) {\n          hermitInputsByRedeemScript[redeemScriptHex] = [redeemScriptHex, bip32Path];\n        }\n\n        hermitInputsByRedeemScript[redeemScriptHex].push({\n          txid: input.txid,\n          index: input.index,\n          amount: new _bignumber[\"default\"](input.amountSats).toNumber()\n        });\n      }\n\n      return {\n        inputs: Object.values(hermitInputsByRedeemScript),\n        outputs: this.outputs.map(function (output) {\n          return {\n            address: output.address,\n            amount: new _bignumber[\"default\"](output.amountSats).toNumber()\n          };\n        })\n      };\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(encodedString) {\n      var result = parseHermitQRCodeData(encodedString);\n      var signatures = result.signatures;\n\n      if (!signatures || signatures.length === 0) {\n        throw new Error(\"No signatures in QR code.\");\n      }\n\n      return (signatures || []).map(function (inputSignature) {\n        return \"\".concat(inputSignature, \"01\");\n      });\n    }\n  }]);\n\n  return HermitSignTransaction;\n}(HermitDisplayer);\n\nexports.HermitSignTransaction = HermitSignTransaction;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LedgerSignMultisigTransaction = exports.LedgerExportExtendedPublicKey = exports.LedgerExportPublicKey = exports.LedgerGetMetadata = exports.LedgerBitcoinInteraction = exports.LedgerDashboardInteraction = exports.LedgerInteraction = exports.LEDGER_BOTH_BUTTONS = exports.LEDGER_RIGHT_BUTTON = exports.LEDGER_LEFT_BUTTON = exports.LEDGER = void 0;\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.array.from\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es6.reflect.get\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es7.object.entries\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _unchainedBitcoin = require(\"unchained-bitcoin\");\n\nvar _interaction = require(\"./interaction\");\n\nvar _splitTransaction = require(\"@ledgerhq/hw-app-btc/lib/splitTransaction\");\n\nvar _serializeTransaction = require(\"@ledgerhq/hw-app-btc/lib/serializeTransaction\");\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/**\n * Constant defining Ledger interactions.\n *\n * @type {string}\n * @default ledger\n */\nvar LEDGER = 'ledger';\nexports.LEDGER = LEDGER;\n\nvar TransportU2F = require(\"@ledgerhq/hw-transport-u2f\")[\"default\"];\n\nvar TransportWebUSB = require(\"@ledgerhq/hw-transport-webusb\")[\"default\"];\n\nvar LedgerBtc = require(\"@ledgerhq/hw-app-btc\")[\"default\"];\n/**\n * Constant representing the action of pushing the left button on a\n * Ledger device.\n *\n * @type {string}\n * @default 'ledger_left_button'\n */\n\n\nvar LEDGER_LEFT_BUTTON = 'ledger_left_button';\n/**\n * Constant representing the action of pushing the right button on a\n * Ledger device.\n *\n * @type {string}\n * @default 'ledger_right_button'\n */\n\nexports.LEDGER_LEFT_BUTTON = LEDGER_LEFT_BUTTON;\nvar LEDGER_RIGHT_BUTTON = 'ledger_right_button';\n/**\n * Constant representing the action of pushing both buttons on a\n * Ledger device.\n *\n * @type {string}\n * @default 'ledger_both_buttons'\n */\n\nexports.LEDGER_RIGHT_BUTTON = LEDGER_RIGHT_BUTTON;\nvar LEDGER_BOTH_BUTTONS = 'ledger_both_buttons';\n/**\n * Base class for interactions with Ledger hardware wallets.\n *\n * Subclasses must implement their own `run()` method.  They may use\n * the `withTransport` and `withApp` methods to connect to the Ledger\n * API's transport or app layers, respectively.\n *\n * Errors are not caught, so users of this class (and its subclasses)\n * should use `try...catch` as always.\n *\n * @extends {module:interaction.DirectKeystoreInteraction}\n * @example\n * import {LedgerInteraction} from \"unchained-wallets\";\n * // Simple subclass\n *\n * class SimpleLedgerInteraction extends LedgerInteraction {\n *\n *   constructor({param}) {\n *     super({});\n *     this.param =  param;\n *   }\n *\n *   async run() {\n *     return await this.withApp(async (app, transport) => {\n *       return app.doSomething(this.param); // Not a real Ledger API call\n *     });\n *   }\n * \n * }\n *\n * // usage\n * const interaction = new SimpleLedgerInteraction({param: \"foo\"});\n * const result = await interaction.run();\n * console.log(result); // whatever value `app.doSomething(...)` returns\n *\n */\n\nexports.LEDGER_BOTH_BUTTONS = LEDGER_BOTH_BUTTONS;\n\nvar LedgerInteraction =\n/*#__PURE__*/\nfunction (_DirectKeystoreIntera) {\n  _inherits(LedgerInteraction, _DirectKeystoreIntera);\n\n  function LedgerInteraction() {\n    _classCallCheck(this, LedgerInteraction);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LedgerInteraction).apply(this, arguments));\n  }\n\n  _createClass(LedgerInteraction, [{\n    key: \"messages\",\n\n    /**\n     * Adds `pending` messages at the `info` level about ensuring the\n     * device is plugged in (`device.connect`) and unlocked\n     * (`device.unlock`).  Adds an `active` message at the `info` level\n     * when communicating with the device (`device.active`).\n     *\n     * @return {module:interaction.Message[]} messages for ths interaction\n     */\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(LedgerInteraction.prototype), \"messages\", this).call(this);\n\n      messages.push({\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        text: \"Please plug in and unlock your Ledger.\",\n        code: \"device.setup\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        text: \"Communicating with Ledger...\",\n        code: \"device.active\"\n      });\n      return messages;\n    }\n    /**\n     * Can be called by a subclass during its `run()` method.\n     *\n     * Creates a transport layer connection and passes control to the\n     * `callback` function, with the transport API as the first argument\n     * to the function.\n     *\n     * See the [Ledger API]{@link https://github.com/LedgerHQ/ledgerjs} for general information or a [specific transport API]{@link https://github.com/LedgerHQ/ledgerjs/tree/master/packages/hw-transport-u2f} for examples of API calls.\n     *\n     * @param {function} callback -- asynchronous function accepting a single parameter `transport`\n     * @returns {Promise} does the work of setting up a transport connection\n     * @example\n     * async run() {\n     *   return await this.withTransport(async (transport) => {\n     *     return transport.doSomething(); // Not a real Ledger transport API call\n     *   });\n     * }\n     */\n\n  }, {\n    key: \"withTransport\",\n    value: function () {\n      var _withTransport = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(callback) {\n        var useU2F, transport, _transport;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                useU2F = this.environment.satisfies({\n                  firefox: \">70\"\n                });\n\n                if (!useU2F) {\n                  _context.next = 12;\n                  break;\n                }\n\n                _context.prev = 2;\n                _context.next = 5;\n                return TransportU2F.create();\n\n              case 5:\n                transport = _context.sent;\n                return _context.abrupt(\"return\", callback(transport));\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](2);\n                throw new Error(_context.t0.message);\n\n              case 12:\n                _context.prev = 12;\n                _context.next = 15;\n                return TransportWebUSB.create();\n\n              case 15:\n                _transport = _context.sent;\n                return _context.abrupt(\"return\", callback(_transport));\n\n              case 19:\n                _context.prev = 19;\n                _context.t1 = _context[\"catch\"](12);\n\n                if (_context.t1.message) {\n                  if (_context.t1.message === 'No device selected.') {\n                    _context.t1.message = \"Select your device in the WebUSB dialog box. Make sure it's plugged in, unlocked, and has the Bitcoin app open.\";\n                  }\n\n                  if (_context.t1.message === 'undefined is not an object (evaluating \\'navigator.usb.getDevices\\')') {\n                    _context.t1.message = \"Safari is not a supported browser.\";\n                  }\n                }\n\n                throw new Error(_context.t1.message);\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 9], [12, 19]]);\n      }));\n\n      function withTransport(_x) {\n        return _withTransport.apply(this, arguments);\n      }\n\n      return withTransport;\n    }()\n    /**\n     * Can be called by a subclass during its `run()` method.\n     *\n     * Creates a transport layer connection, initializes a bitcoin app\n     * object, and passes control to the `callback` function, with the\n     * app API as the first argument to the function and the transport\n     * API as the second.\n     *\n     * See the [Ledger API]{@link https://github.com/LedgerHQ/ledgerjs} for general information or the [bitcoin app API]{@link https://github.com/LedgerHQ/ledgerjs/tree/master/packages/hw-app-btc} for examples of API calls.\n     *\n     * @param {function} callback -- accepts two parameters, `app` and `transport`, which are the Ledger APIs for the bitcoin app and the transport layer, respectively.\n     * @returns {Promise} does the work of setting up an app instance (and transport connection)\n     * @example\n     * async run() {\n     *   return await this.withApp(async (app, transport) => {\n     *     return app.doSomething(); // Not a real Ledger bitcoin app API call\n     *   });\n     * }\n     */\n\n  }, {\n    key: \"withApp\",\n    value: function withApp(callback) {\n      return this.withTransport(\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee2(transport) {\n          var app;\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  app = new LedgerBtc(transport);\n                  return _context2.abrupt(\"return\", callback(app, transport));\n\n                case 2:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x2) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n    /**\n     * Close the Transport to free the interface (E.g. could be used in another tab\n     * now that the interaction is over)\n     *\n     * The way the pubkey/xpub/fingerprints are grabbed makes this a little tricky.\n     * Instead of re-writing how that works, let's just add a way to explicitly\n     * close the transport.\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"closeTransport\",\n    value: function closeTransport() {\n      return this.withTransport(\n      /*#__PURE__*/\n      function () {\n        var _ref2 = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee3(transport) {\n          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.next = 2;\n                  return transport.close();\n\n                case 2:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        }));\n\n        return function (_x3) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    }\n  }]);\n\n  return LedgerInteraction;\n}(_interaction.DirectKeystoreInteraction);\n/**\n * Base class for interactions which must occur when the Ledger device\n * is not in any app but in the dashboard.\n *\n * @extends {module:ledger.LedgerInteraction}\n *\n */\n\n\nexports.LedgerInteraction = LedgerInteraction;\n\nvar LedgerDashboardInteraction =\n/*#__PURE__*/\nfunction (_LedgerInteraction) {\n  _inherits(LedgerDashboardInteraction, _LedgerInteraction);\n\n  function LedgerDashboardInteraction() {\n    _classCallCheck(this, LedgerDashboardInteraction);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LedgerDashboardInteraction).apply(this, arguments));\n  }\n\n  _createClass(LedgerDashboardInteraction, [{\n    key: \"messages\",\n\n    /**\n     * Adds `pending` and `active` messages at the `info` level urging\n     * the user to be in the Ledger dashboard, not the bitcoin app\n     * (`ledger.app.dashboard`).\n     *\n     * @return {module:interaction.Message[]} messages for this interaction\n     */\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(LedgerDashboardInteraction.prototype), \"messages\", this).call(this);\n\n      messages.push({\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        text: \"Make sure you have the main Ledger dashboard open, NOT the Bitcoin app.\",\n        code: \"ledger.app.dashboard\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        text: \"Make sure you have the main Ledger dashboard open, NOT the Bitcoin app.\",\n        code: \"ledger.app.dashboard\"\n      });\n      return messages;\n    }\n  }]);\n\n  return LedgerDashboardInteraction;\n}(LedgerInteraction);\n/**\n * Base class for interactions which must occur when the Ledger device\n * is open to the bitcoin app.\n *\n * @extends {module:ledger.LedgerInteraction}\n */\n\n\nexports.LedgerDashboardInteraction = LedgerDashboardInteraction;\n\nvar LedgerBitcoinInteraction =\n/*#__PURE__*/\nfunction (_LedgerInteraction2) {\n  _inherits(LedgerBitcoinInteraction, _LedgerInteraction2);\n\n  function LedgerBitcoinInteraction() {\n    _classCallCheck(this, LedgerBitcoinInteraction);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LedgerBitcoinInteraction).apply(this, arguments));\n  }\n\n  _createClass(LedgerBitcoinInteraction, [{\n    key: \"messages\",\n\n    /**\n     * Adds `pending` and `active` messages at the `info` level urging\n     * the user to be in the bitcoin app (`ledger.app.bitcoin`).\n     *\n     * @return {module:interaction.Message[]} messages for this interaction\n     */\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(LedgerBitcoinInteraction.prototype), \"messages\", this).call(this);\n\n      messages.push({\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        text: \"Then open the Bitcoin app.\",\n        code: \"ledger.app.bitcoin\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        text: \"Make sure you have opened the Bitcoin app.\",\n        code: \"ledger.app.bitcoin\"\n      });\n      return messages;\n    }\n  }]);\n\n  return LedgerBitcoinInteraction;\n}(LedgerInteraction);\n/**\n * Returns metadata about Ledger device.\n *\n * Includes model name, firmware & MCU versions.\n *\n * @extends {module:ledger.LedgerDashboardInteraction}\n * @example\n * import {LedgerGetMetadata} from \"unchained-wallets\";\n * const interaction = new LedgerGetMetadata();\n * const result = await interaction.run();\n * console.log(result);\n * {\n *   spec: \"Nano S v1.4.2 (MCU v1.7)\",\n *   model: \"Nano S\",\n *   version: {\n *     major: \"1\",\n *     minor: \"4\",\n *     patch: \"2\",\n *     string: \"1.4.2\",\n *   },\n *   mcuVersion: {\n *     major: \"1\",\n *     minor: \"7\",\n *     string: \"1.7\",\n *   }\n * }\n *\n */\n\n\nexports.LedgerBitcoinInteraction = LedgerBitcoinInteraction;\n\nvar LedgerGetMetadata =\n/*#__PURE__*/\nfunction (_LedgerDashboardInter) {\n  _inherits(LedgerGetMetadata, _LedgerDashboardInter);\n\n  function LedgerGetMetadata() {\n    _classCallCheck(this, LedgerGetMetadata);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LedgerGetMetadata).apply(this, arguments));\n  }\n\n  _createClass(LedgerGetMetadata, [{\n    key: \"run\",\n    // FIXME entire implementation here is rickety AF.\n    value: function () {\n      var _run = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                return _context5.abrupt(\"return\", this.withTransport(\n                /*#__PURE__*/\n                function () {\n                  var _ref3 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  regeneratorRuntime.mark(function _callee4(transport) {\n                    var rawResult;\n                    return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            _context4.prev = 0;\n                            transport.setScrambleKey('B0L0S');\n                            _context4.next = 4;\n                            return transport.send(0xe0, 0x01, 0x00, 0x00);\n\n                          case 4:\n                            rawResult = _context4.sent;\n                            return _context4.abrupt(\"return\", _this.parseMetadata(rawResult));\n\n                          case 6:\n                            _context4.prev = 6;\n                            _context4.next = 9;\n                            return _get(_getPrototypeOf(LedgerGetMetadata.prototype), \"closeTransport\", _this).call(_this);\n\n                          case 9:\n                            return _context4.finish(6);\n\n                          case 10:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4, null, [[0,, 6, 10]]);\n                  }));\n\n                  return function (_x4) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }()));\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function run() {\n        return _run.apply(this, arguments);\n      }\n\n      return run;\n    }()\n    /**\n     * Parses the binary data returned from the Ledger API call into a\n     * metadata object.\n     *\n     * @param {ByteArray} response - binary response data\n     * @returns {Object} - device metadata\n     */\n\n  }, {\n    key: \"parseMetadata\",\n    value: function parseMetadata(response) {\n      try {\n        // From\n        //\n        //   https://github.com/LedgerHQ/ledger-live-common/blob/master/src/hw/getVersion.js\n        //   https://github.com/LedgerHQ/ledger-live-common/blob/master/src/hw/getDeviceInfo.js\n        //   https://git.xmr.pm/LedgerHQ/ledger-live-common/commit/9ffc75acfc7f1e9aa9101a32b3e7481770fb3b89\n        var PROVIDERS = {\n          \"\": 1,\n          das: 2,\n          club: 3,\n          shitcoins: 4,\n          ee: 5\n        };\n        var ManagerAllowedFlag = 0x08;\n        var PinValidatedFlag = 0x80;\n\n        var byteArray = _toConsumableArray(response);\n\n        var data = byteArray.slice(0, byteArray.length - 2);\n        var targetIdStr = Buffer.from(data.slice(0, 4));\n        var targetId = targetIdStr.readUIntBE(0, 4);\n        var seVersionLength = data[4];\n        var seVersion = Buffer.from(data.slice(5, 5 + seVersionLength)).toString();\n        var flagsLength = data[5 + seVersionLength];\n        var flags = Buffer.from(data.slice(5 + seVersionLength + 1, 5 + seVersionLength + 1 + flagsLength));\n        var mcuVersionLength = data[5 + seVersionLength + 1 + flagsLength];\n        var mcuVersion = Buffer.from(data.slice(7 + seVersionLength + flagsLength, 7 + seVersionLength + flagsLength + mcuVersionLength));\n\n        if (mcuVersion[mcuVersion.length - 1] === 0) {\n          mcuVersion = mcuVersion.slice(0, mcuVersion.length - 1);\n        }\n\n        mcuVersion = mcuVersion.toString();\n\n        if (!seVersionLength) {\n          seVersion = \"0.0.0\";\n          flags = Buffer.allocUnsafeSlow(0);\n          mcuVersion = \"\";\n        }\n        /* eslint-disable no-unused-vars, no-bitwise */\n\n\n        var isOSU = seVersion.includes(\"-osu\");\n        var version = seVersion.replace(\"-osu\", \"\");\n        var m = seVersion.match(/([0-9]+.[0-9]+)(.[0-9]+)?(-(.*))?/);\n\n        var _ref4 = m || [],\n            _ref5 = _slicedToArray(_ref4, 5),\n            majMin = _ref5[1],\n            providerName = _ref5[4];\n\n        var providerId = PROVIDERS[providerName] || 1;\n        var isBootloader = (targetId & 0xf0000000) !== 0x30000000;\n        var flag = flags.length > 0 ? flags[0] : 0;\n        var managerAllowed = Boolean(flag & ManagerAllowedFlag);\n        var pin = Boolean(flag & PinValidatedFlag);\n        /* eslint-enable */\n\n        var _split = (version || '').split('.'),\n            _split2 = _slicedToArray(_split, 3),\n            majorVersion = _split2[0],\n            minorVersion = _split2[1],\n            patchVersion = _split2[2];\n\n        var _split3 = (mcuVersion || '').split('.'),\n            _split4 = _slicedToArray(_split3, 2),\n            mcuMajorVersion = _split4[0],\n            mcuMinorVersion = _split4[1]; // https://gist.github.com/TamtamHero/b7651ffe6f1e485e3886bf4aba673348\n        // +-----------------+------------+\n        // |    FirmWare     | Target ID  |\n        // +-----------------+------------+\n        // | Nano S <= 1.3.1 | 0x31100002 |\n        // | Nano S 1.4.x    | 0x31100003 |\n        // | Nano S 1.5.x    | 0x31100004 |\n        // |                 |            |\n        // | Blue 2.0.x      | 0x31000002 |\n        // | Blue 2.1.x      | 0x31000004 |\n        // | Blue 2.1.x V2   | 0x31010004 |\n        // |                 |            |\n        // | Nano X          | 0x33000004 |\n        // |                 |            |\n        // | MCU,any version | 0x01000001 |\n        // +-----------------+------------+\n        //\n        //  Order matters -- high to low minTargetId\n\n\n        var MODEL_RANGES = [{\n          minTargetId: 0x33000004,\n          model: \"Nano X\"\n        }, {\n          minTargetId: 0x31100002,\n          model: \"Nano S\"\n        }, {\n          minTargetId: 0x31100002,\n          model: \"Blue\"\n        }, {\n          minTargetId: 0x01000001,\n          model: \"MCU\"\n        }];\n        var model = 'Unknown';\n\n        if (targetId) {\n          for (var i = 0; i < MODEL_RANGES.length; i++) {\n            var range = MODEL_RANGES[i];\n\n            if (targetId >= range.minTargetId) {\n              model = range.model;\n              break;\n            }\n          }\n        }\n\n        var spec = \"\".concat(model, \" v\").concat(version, \" (MCU v\").concat(mcuVersion, \")\"); // if (pin) {\n        //   spec += \" w/PIN\";\n        // }\n\n        return {\n          spec: spec,\n          model: model,\n          version: {\n            major: majorVersion,\n            minor: minorVersion,\n            patch: patchVersion,\n            string: version\n          },\n          mcuVersion: {\n            major: mcuMajorVersion,\n            minor: mcuMinorVersion,\n            string: mcuVersion\n          } // pin,\n\n        };\n      } catch (e) {\n        console.error(e);\n        throw new Error(\"Unable to parse metadata from Ledger device.\");\n      }\n    }\n  }]);\n\n  return LedgerGetMetadata;\n}(LedgerDashboardInteraction);\n/**\n * Base class for interactions exporting information about an HD node\n * at a given BIP32 path.\n *\n * You may want to use `LedgerExportPublicKey` or\n * `LedgerExportExtendedPublicKey` directly.\n *\n * @extends {module:ledger.LedgerBitcoinInteraction}\n * @example\n * import {MAINNET} from \"unchained-bitcoin\";\n * import {LedgerExportHDNode} from \"unchained-wallets\";\n * const interaction = new LedgerExportHDNode({network: MAINNET, bip32Path: \"m/48'/0'/0'/2'/0\"});\n * const node = await interaction.run();\n * console.log(node);\n */\n\n\nexports.LedgerGetMetadata = LedgerGetMetadata;\n\nvar LedgerExportHDNode =\n/*#__PURE__*/\nfunction (_LedgerBitcoinInterac) {\n  _inherits(LedgerExportHDNode, _LedgerBitcoinInterac);\n\n  /**\n   * Requires a valid BIP32 path to the node to export.\n   *\n   * @param {object} options - options argument\n   * @param {string} bip32Path - the BIP32 path for the HD node\n   */\n  function LedgerExportHDNode(_ref6) {\n    var _this2;\n\n    var bip32Path = _ref6.bip32Path;\n\n    _classCallCheck(this, LedgerExportHDNode);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(LedgerExportHDNode).call(this));\n    _this2.bip32Path = bip32Path;\n    _this2.bip32ValidationErrorMessage = {};\n    var bip32PathError = (0, _unchainedBitcoin.validateBIP32Path)(bip32Path);\n\n    if (bip32PathError.length) {\n      _this2.bip32ValidationErrorMessage = {\n        text: bip32PathError,\n        code: 'ledger.bip32_path.path_error'\n      };\n    }\n\n    return _this2;\n  }\n  /**\n   * Adds messages related to the warnings Ledger devices produce on various BIP32 paths.\n   *\n   * @returns {module:interaction.Message[]} messages for this interaction\n   */\n\n\n  _createClass(LedgerExportHDNode, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(LedgerExportHDNode.prototype), \"messages\", this).call(this);\n\n      if (Object.entries(this.bip32ValidationErrorMessage).length) {\n        messages.push({\n          state: _interaction.PENDING,\n          level: _interaction.ERROR,\n          code: this.bip32ValidationErrorMessage.code,\n          text: this.bip32ValidationErrorMessage.text\n        });\n      }\n\n      return messages;\n    }\n    /**\n     * Returns whether or not the Ledger device will display a warning\n     * to the user about an unusual BIP32 path.\n     *\n     * A \"usual\" BIP32 path is exactly 5 segments long.  The segments\n     * have the following constraints:\n     *\n     * - Segment 1: Must be equal to `44'`\n     * - Segment 2: Can have any value\n     * - Segment 3: Must be between `0'` and `100'`\n     * - Segment 4: Must be equal to `0`\n     * - Segment 5: Must be between `0 and 50000`\n     *\n     * Any other kind of path is considered unusual and will trigger the\n     * warning.\n     *\n     * @returns {boolean} whether a BIP32 path warning will be displayed\n     */\n\n  }, {\n    key: \"hasBIP32PathWarning\",\n    value: function hasBIP32PathWarning() {\n      // 0 -> 44'\n      // 1 -> anything\n      // 2 -> 0' - 100'\n      // 3 -> 0\n      // 4 -> 0 - 50000\n      var indices = (0, _unchainedBitcoin.bip32PathToSequence)(this.bip32Path);\n      var hardened0 = (0, _unchainedBitcoin.hardenedBIP32Index)(0);\n      var hardened44 = (0, _unchainedBitcoin.hardenedBIP32Index)(44);\n      var hardened100 = (0, _unchainedBitcoin.hardenedBIP32Index)(100);\n\n      if (indices.length !== 5) {\n        return true;\n      }\n\n      if (indices[0] !== hardened44) {\n        return true;\n      }\n\n      if (indices[2] < hardened0 || indices[2] > hardened100) {\n        return true;\n      }\n\n      if (indices[3] !== 0) {\n        return true;\n      }\n\n      return indices[4] < 0 || indices[4] > 50000;\n    }\n    /**\n     * Get fingerprint from parent pubkey. This is useful for generating xpubs\n     * which need the fingerprint of the parent pubkey\n     *\n     * Optionally get root fingerprint for device. This is useful for keychecks and necessary\n     * for PSBTs\n     *\n     * @param {boolean} root fingerprint or not\n     * @returns {string} fingerprint\n     */\n\n  }, {\n    key: \"getFingerprint\",\n    value: function () {\n      var _getFingerprint = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee6() {\n        var root,\n            pubkey,\n            fp,\n            _args6 = arguments;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                root = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : false;\n\n                if (!root) {\n                  _context6.next = 7;\n                  break;\n                }\n\n                _context6.next = 4;\n                return this.getMultisigRootPublicKey();\n\n              case 4:\n                _context6.t0 = _context6.sent;\n                _context6.next = 10;\n                break;\n\n              case 7:\n                _context6.next = 9;\n                return this.getParentPublicKey();\n\n              case 9:\n                _context6.t0 = _context6.sent;\n\n              case 10:\n                pubkey = _context6.t0;\n                fp = (0, _unchainedBitcoin.getFingerprintFromPublicKey)(pubkey); // If asked for a root XFP, zero pad it to length of 8.\n\n                return _context6.abrupt(\"return\", root ? (0, _unchainedBitcoin.fingerprintToFixedLengthHex)(fp) : fp);\n\n              case 13:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function getFingerprint() {\n        return _getFingerprint.apply(this, arguments);\n      }\n\n      return getFingerprint;\n    }()\n  }, {\n    key: \"getParentPublicKey\",\n    value: function getParentPublicKey() {\n      var _this3 = this;\n\n      return this.withApp(\n      /*#__PURE__*/\n      function () {\n        var _ref7 = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee7(app) {\n          var parentPath;\n          return regeneratorRuntime.wrap(function _callee7$(_context7) {\n            while (1) {\n              switch (_context7.prev = _context7.next) {\n                case 0:\n                  parentPath = (0, _unchainedBitcoin.getParentBIP32Path)(_this3.bip32Path);\n                  _context7.next = 3;\n                  return app.getWalletPublicKey(parentPath);\n\n                case 3:\n                  return _context7.abrupt(\"return\", _context7.sent.publicKey);\n\n                case 4:\n                case \"end\":\n                  return _context7.stop();\n              }\n            }\n          }, _callee7);\n        }));\n\n        return function (_x5) {\n          return _ref7.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"getMultisigRootPublicKey\",\n    value: function getMultisigRootPublicKey() {\n      return this.withApp(\n      /*#__PURE__*/\n      function () {\n        var _ref8 = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee8(app) {\n          return regeneratorRuntime.wrap(function _callee8$(_context8) {\n            while (1) {\n              switch (_context8.prev = _context8.next) {\n                case 0:\n                  _context8.next = 2;\n                  return app.getWalletPublicKey();\n\n                case 2:\n                  return _context8.abrupt(\"return\", _context8.sent.publicKey);\n\n                case 3:\n                case \"end\":\n                  return _context8.stop();\n              }\n            }\n          }, _callee8);\n        }));\n\n        return function (_x6) {\n          return _ref8.apply(this, arguments);\n        };\n      }());\n    }\n    /**\n     * See {@link https://github.com/LedgerHQ/ledgerjs/tree/master/packages/hw-app-btc#getwalletpublickey}.\n     *\n     * @returns {object} the HD node object.\n     */\n\n  }, {\n    key: \"run\",\n    value: function run() {\n      var _this4 = this;\n\n      return this.withApp(\n      /*#__PURE__*/\n      function () {\n        var _ref9 = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee9(app) {\n          return regeneratorRuntime.wrap(function _callee9$(_context9) {\n            while (1) {\n              switch (_context9.prev = _context9.next) {\n                case 0:\n                  return _context9.abrupt(\"return\", app.getWalletPublicKey(_this4.bip32Path));\n\n                case 1:\n                case \"end\":\n                  return _context9.stop();\n              }\n            }\n          }, _callee9);\n        }));\n\n        return function (_x7) {\n          return _ref9.apply(this, arguments);\n        };\n      }());\n    }\n  }]);\n\n  return LedgerExportHDNode;\n}(LedgerBitcoinInteraction);\n/**\n * Returns the public key at a given BIP32 path.\n *\n * @extends {module:ledger.LedgerExportHDNode}\n * @example\n * import {LedgerExportPublicKey} from \"unchained-wallets\";\n * const interaction = new LedgerExportPublicKey({bip32Path: \"m/48'/0'/0'/2'/0\"});\n * const publicKey = await interaction.run();\n * console.log(publicKey);\n * // \"03...\"\n */\n\n\nvar LedgerExportPublicKey =\n/*#__PURE__*/\nfunction (_LedgerExportHDNode) {\n  _inherits(LedgerExportPublicKey, _LedgerExportHDNode);\n\n  /**\n   * @param {string} bip32Path - the BIP32 path for the HD node\n   * @param {boolean} includeXFP - return xpub with root fingerprint concatenated\n   */\n  function LedgerExportPublicKey(_ref10) {\n    var _this5;\n\n    var bip32Path = _ref10.bip32Path,\n        _ref10$includeXFP = _ref10.includeXFP,\n        includeXFP = _ref10$includeXFP === void 0 ? false : _ref10$includeXFP;\n\n    _classCallCheck(this, LedgerExportPublicKey);\n\n    _this5 = _possibleConstructorReturn(this, _getPrototypeOf(LedgerExportPublicKey).call(this, {\n      bip32Path: bip32Path\n    }));\n    _this5.includeXFP = includeXFP;\n    return _this5;\n  }\n  /**\n   * Parses out and compresses the public key from the response of\n   * `LedgerExportHDNode`.\n   *\n   * @returns {string|Object} (compressed) public key in hex (returns object if asked to include root fingerprint)\n   */\n\n\n  _createClass(LedgerExportPublicKey, [{\n    key: \"run\",\n    value: function () {\n      var _run2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee10() {\n        var result, publicKey, rootFingerprint;\n        return regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.prev = 0;\n                _context10.next = 3;\n                return _get(_getPrototypeOf(LedgerExportPublicKey.prototype), \"run\", this).call(this);\n\n              case 3:\n                result = _context10.sent;\n                publicKey = this.parsePublicKey((result || {}).publicKey);\n\n                if (!this.includeXFP) {\n                  _context10.next = 10;\n                  break;\n                }\n\n                _context10.next = 8;\n                return this.getFingerprint(true);\n\n              case 8:\n                rootFingerprint = _context10.sent;\n                return _context10.abrupt(\"return\", {\n                  rootFingerprint: rootFingerprint,\n                  publicKey: publicKey\n                });\n\n              case 10:\n                return _context10.abrupt(\"return\", publicKey);\n\n              case 11:\n                _context10.prev = 11;\n                _context10.next = 14;\n                return _get(_getPrototypeOf(LedgerExportPublicKey.prototype), \"closeTransport\", this).call(this);\n\n              case 14:\n                return _context10.finish(11);\n\n              case 15:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this, [[0,, 11, 15]]);\n      }));\n\n      function run() {\n        return _run2.apply(this, arguments);\n      }\n\n      return run;\n    }()\n    /**\n     * Compress the given public key.\n     *\n     * @param {string} publicKey - the uncompressed public key in hex\n     * @returns {string} - the compressed public key in hex\n     *\n     */\n\n  }, {\n    key: \"parsePublicKey\",\n    value: function parsePublicKey(publicKey) {\n      if (publicKey) {\n        try {\n          return (0, _unchainedBitcoin.compressPublicKey)(publicKey);\n        } catch (e) {\n          console.error(e);\n          throw new Error(\"Unable to compress public key from Ledger device.\");\n        }\n      } else {\n        throw new Error(\"Received no public key from Ledger device.\");\n      }\n    }\n  }]);\n\n  return LedgerExportPublicKey;\n}(LedgerExportHDNode);\n/**\n * Class for wallet extended public key (xpub) interaction at a given BIP32 path.\n * @extends {module:ledger.LedgerExportHDNode}\n */\n\n\nexports.LedgerExportPublicKey = LedgerExportPublicKey;\n\nvar LedgerExportExtendedPublicKey =\n/*#__PURE__*/\nfunction (_LedgerExportHDNode2) {\n  _inherits(LedgerExportExtendedPublicKey, _LedgerExportHDNode2);\n\n  /**\n   * @param {string} bip32Path path\n   * @param {string} network bitcoin network\n   * @param {boolean} includeXFP - return xpub with root fingerprint concatenated\n   */\n  function LedgerExportExtendedPublicKey(_ref11) {\n    var _this6;\n\n    var bip32Path = _ref11.bip32Path,\n        network = _ref11.network,\n        includeXFP = _ref11.includeXFP;\n\n    _classCallCheck(this, LedgerExportExtendedPublicKey);\n\n    _this6 = _possibleConstructorReturn(this, _getPrototypeOf(LedgerExportExtendedPublicKey).call(this, {\n      bip32Path: bip32Path\n    }));\n    _this6.network = network;\n    _this6.includeXFP = includeXFP;\n    return _this6;\n  }\n\n  _createClass(LedgerExportExtendedPublicKey, [{\n    key: \"messages\",\n    value: function messages() {\n      return _get(_getPrototypeOf(LedgerExportExtendedPublicKey.prototype), \"messages\", this).call(this);\n    }\n    /**\n     * Retrieve extended public key (xpub) from Ledger device for a given BIP32 path\n     * @example\n     * import {LedgerExportExtendedPublicKey} from \"unchained-wallets\";\n     * const interaction = new LedgerExportExtendedPublicKey({network, bip32Path});\n     * const xpub = await interaction.run();\n     * console.log(xpub);\n     *\n     * @returns {string|Object} the extended public key (returns object if asked to include root fingerprint)\n     */\n\n  }, {\n    key: \"run\",\n    value: function () {\n      var _run3 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee11() {\n        var walletPublicKey, fingerprint, xpub, rootFingerprint;\n        return regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.prev = 0;\n                _context11.next = 3;\n                return _get(_getPrototypeOf(LedgerExportExtendedPublicKey.prototype), \"run\", this).call(this);\n\n              case 3:\n                walletPublicKey = _context11.sent;\n                _context11.next = 6;\n                return this.getFingerprint();\n\n              case 6:\n                fingerprint = _context11.sent;\n                xpub = (0, _unchainedBitcoin.deriveExtendedPublicKey)(this.bip32Path, walletPublicKey.publicKey, walletPublicKey.chainCode, fingerprint, this.network);\n\n                if (!this.includeXFP) {\n                  _context11.next = 13;\n                  break;\n                }\n\n                _context11.next = 11;\n                return this.getFingerprint(true);\n\n              case 11:\n                rootFingerprint = _context11.sent;\n                return _context11.abrupt(\"return\", {\n                  rootFingerprint: rootFingerprint,\n                  xpub: xpub\n                });\n\n              case 13:\n                return _context11.abrupt(\"return\", xpub);\n\n              case 14:\n                _context11.prev = 14;\n                _context11.next = 17;\n                return _get(_getPrototypeOf(LedgerExportExtendedPublicKey.prototype), \"closeTransport\", this).call(this);\n\n              case 17:\n                return _context11.finish(14);\n\n              case 18:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this, [[0,, 14, 18]]);\n      }));\n\n      function run() {\n        return _run3.apply(this, arguments);\n      }\n\n      return run;\n    }()\n  }]);\n\n  return LedgerExportExtendedPublicKey;\n}(LedgerExportHDNode);\n/**\n * Returns a signature for a bitcoin transaction with inputs from one\n * or many multisig addresses.\n *\n * - `inputs` is an array of `UTXO` objects from `unchained-bitcoin`\n * - `outputs` is an array of `TransactionOutput` objects from `unchained-bitcoin`\n * - `bip32Paths` is an array of (`string`) BIP32 paths, one for each input, identifying the path on this device to sign that input with\n *\n * @extends {module:ledger.LedgerBitcoinInteraction}\n * @example\n * import {\n *   generateMultisigFromHex, TESTNET, P2SH,\n * } from \"unchained-bitcoin\";\n * import {LedgerSignMultisigTransaction} from \"unchained-wallets\";\n * const redeemScript = \"5...ae\";\n * const inputs = [\n *   {\n *     txid: \"8d276c76b3550b145e44d35c5833bae175e0351b4a5c57dc1740387e78f57b11\",\n *     index: 1,\n *     multisig: generateMultisigFromHex(TESTNET, P2SH, redeemScript),\n *     amountSats: '1234000'\n *   },\n *   // other inputs...\n * ];\n * const outputs = [\n *   {\n *     amountSats: '1299659',\n *     address: \"2NGHod7V2TAAXC1iUdNmc6R8UUd4TVTuBmp\"\n *   },\n *   // other outputs...\n * ];\n * const interaction = new LedgerSignMultisigTransaction({\n *   network: TESTNET,\n *   inputs,\n *   outputs,\n *   bip32Paths: [\"m/45'/0'/0'/0\", // add more, 1 per input],\n * });\n * const signature = await interaction.run();\n * console.log(signatures);\n * // [\"ababab...\", // 1 per input]\n */\n\n\nexports.LedgerExportExtendedPublicKey = LedgerExportExtendedPublicKey;\n\nvar LedgerSignMultisigTransaction =\n/*#__PURE__*/\nfunction (_LedgerBitcoinInterac2) {\n  _inherits(LedgerSignMultisigTransaction, _LedgerBitcoinInterac2);\n\n  /**\n   * @param {object} options - options argument\n   * @param {string} options.network - bitcoin network\n   * @param {array<object>} options.inputs - inputs for the transaction\n   * @param {array<object>} options.outputs - outputs for the transaction\n   * @param {array<string>} options.bip32Paths - BIP32 paths\n   */\n  function LedgerSignMultisigTransaction(_ref12) {\n    var _this7;\n\n    var network = _ref12.network,\n        inputs = _ref12.inputs,\n        outputs = _ref12.outputs,\n        bip32Paths = _ref12.bip32Paths;\n\n    _classCallCheck(this, LedgerSignMultisigTransaction);\n\n    _this7 = _possibleConstructorReturn(this, _getPrototypeOf(LedgerSignMultisigTransaction).call(this));\n    _this7.network = network;\n    _this7.inputs = inputs;\n    _this7.outputs = outputs;\n    _this7.bip32Paths = bip32Paths;\n    return _this7;\n  }\n  /**\n   * Adds messages describing the signing flow.\n   *\n   * @returns {module:interaction.Message[]} messages for this interaction\n   */\n\n\n  _createClass(LedgerSignMultisigTransaction, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(LedgerSignMultisigTransaction.prototype), \"messages\", this).call(this);\n\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.WARNING,\n        code: \"ledger.sign.delay\",\n        text: \"Your Ledger device may take up to several minutes to process a transaction with many inputs.\",\n        preProcessingTime: this.preProcessingTime(),\n        postProcessingTime: this.postProcessingTime()\n      });\n\n      if (this.anySegwitInputs()) {\n        messages.push({\n          state: _interaction.ACTIVE,\n          level: _interaction.INFO,\n          code: \"ledger.sign\",\n          version: \"<1.6.0\",\n          text: \"Your Ledger will ask you to \\\"Confirm transaction\\\" and display each output amount and address followed by the the fee amount.\",\n          action: LEDGER_RIGHT_BUTTON\n        });\n        messages.push({\n          state: _interaction.ACTIVE,\n          level: _interaction.INFO,\n          code: \"ledger.sign\",\n          version: \">=1.6.0\",\n          text: \"Confirm each output on your Ledger device and approve the transaction.\",\n          messages: [{\n            text: \"Your Ledger will ask you to \\\"Review transaction\\\".\",\n            action: LEDGER_RIGHT_BUTTON\n          }, {\n            text: \"For each output, your Ledger device will display the output amount...\",\n            action: LEDGER_RIGHT_BUTTON\n          }, {\n            text: \"...followed by the output address in several parts\",\n            action: LEDGER_RIGHT_BUTTON\n          }, {\n            text: \"Your Ledger will display the transaction fees.\",\n            action: LEDGER_RIGHT_BUTTON\n          }, {\n            text: \"Your Ledger will ask you to \\\"Accept and send\\\".\",\n            action: LEDGER_BOTH_BUTTONS\n          }]\n        });\n      } else {\n        messages.push({\n          state: _interaction.ACTIVE,\n          level: _interaction.INFO,\n          code: \"ledger.sign\",\n          version: \"<1.6.0\",\n          text: \"Confirm each output on your Ledger device and approve the transaction.\",\n          messages: [{\n            text: \"For each output, your Ledger will display the output amount and address for you to confirm.\",\n            action: LEDGER_RIGHT_BUTTON\n          }, {\n            text: \"Your Ledger will ask if you want to \\\"Confirm the transaction\\\".  Due to a bug in the Ledger software, your device may display the transaction fee as \\\"UNKNOWN\\\".\",\n            action: LEDGER_RIGHT_BUTTON\n          }]\n        });\n        messages.push({\n          state: _interaction.ACTIVE,\n          level: _interaction.INFO,\n          code: \"ledger.sign\",\n          version: \">=1.6.0\",\n          text: \"Confirm each output on your Ledger device and approve the transaction.\",\n          messages: [{\n            text: \"For each output, your Ledger will ask you to \\\"Review output\\\".\",\n            action: LEDGER_RIGHT_BUTTON\n          }, {\n            text: \"Your Ledger will display the output amount.\",\n            action: LEDGER_RIGHT_BUTTON\n          }, {\n            text: \"Your Ledger will display the output address in several parts.\",\n            action: LEDGER_RIGHT_BUTTON\n          }, {\n            text: \"Your Ledger will ask if you want to \\\"Accept\\\" the output.\",\n            action: LEDGER_BOTH_BUTTONS\n          }, {\n            text: \"Your Ledger will ask if you want to \\\"Confirm the transaction\\\".\",\n            action: LEDGER_RIGHT_BUTTON\n          }, {\n            text: \"Due to a bug in the Ledger software, your device will display the transaction fee as \\\"UNKNOWN\\\".\",\n            action: LEDGER_RIGHT_BUTTON\n          }, {\n            text: \"Your Ledger will ask you to \\\"Accept and send\\\".\",\n            action: LEDGER_BOTH_BUTTONS\n          }]\n        });\n      }\n\n      return messages;\n    }\n  }, {\n    key: \"preProcessingTime\",\n    value: function preProcessingTime() {\n      // FIXME\n      return 10;\n    }\n  }, {\n    key: \"postProcessingTime\",\n    value: function postProcessingTime() {\n      // FIXME\n      return 10;\n    }\n    /**\n     * See {@link https://github.com/LedgerHQ/ledgerjs/tree/master/packages/hw-app-btc#signp2shtransaction}.\n     *\n     * Input signatures produced will always have a trailing `...01`\n     * {@link https://bitcoin.org/en/glossary/sighash-all SIGHASH_ALL}\n     * byte.\n     *\n     * @returns {string[]} array of input signatures, one per input\n     */\n\n  }, {\n    key: \"run\",\n    value: function run() {\n      var _this8 = this;\n\n      return this.withApp(\n      /*#__PURE__*/\n      function () {\n        var _ref13 = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee12(app, transport) {\n          var transactionSignature;\n          return regeneratorRuntime.wrap(function _callee12$(_context12) {\n            while (1) {\n              switch (_context12.prev = _context12.next) {\n                case 0:\n                  _context12.prev = 0;\n                  // FIXME: Explain the rationale behind this choice.\n                  transport.setExchangeTimeout(20000 * _this8.outputs.length);\n                  _context12.next = 4;\n                  return app.signP2SHTransaction({\n                    inputs: _this8.ledgerInputs(),\n                    associatedKeysets: _this8.ledgerKeysets(),\n                    outputScriptHex: _this8.ledgerOutputScriptHex(),\n                    lockTime: 0,\n                    // locktime, 0 is no locktime\n                    sigHashType: 1,\n                    // sighash type, 1 is SIGHASH_ALL\n                    segwit: _this8.anySegwitInputs(),\n                    transactionVersion: 1 // tx version\n\n                  });\n\n                case 4:\n                  transactionSignature = _context12.sent;\n                  return _context12.abrupt(\"return\", _this8.parse(transactionSignature));\n\n                case 6:\n                  _context12.prev = 6;\n                  transport.close();\n                  return _context12.finish(6);\n\n                case 9:\n                case \"end\":\n                  return _context12.stop();\n              }\n            }\n          }, _callee12, null, [[0,, 6, 9]]);\n        }));\n\n        return function (_x8, _x9) {\n          return _ref13.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(transactionSignature) {\n      // Ledger signatures include the SIGHASH byte (0x01) if signing for P2SH-P2WSH or P2WSH ...\n      // but NOT for P2SH ... This function should always return the signature with SIGHASH byte appended.\n      return (transactionSignature || []).map(function (inputSignature) {\n        return \"\".concat((0, _unchainedBitcoin.signatureNoSighashType)(inputSignature), \"01\");\n      });\n    }\n  }, {\n    key: \"ledgerInputs\",\n    value: function ledgerInputs() {\n      return this.inputs.map(function (input) {\n        var addressType = (0, _unchainedBitcoin.multisigAddressType)(input.multisig);\n        var inputTransaction = (0, _splitTransaction.splitTransaction)(input.transactionHex, true); // FIXME: should the 2nd parameter here always be true?\n\n        var scriptFn = addressType === _unchainedBitcoin.P2SH ? _unchainedBitcoin.multisigRedeemScript : _unchainedBitcoin.multisigWitnessScript;\n        var scriptHex = (0, _unchainedBitcoin.scriptToHex)(scriptFn(input.multisig));\n        return [inputTransaction, input.index, scriptHex]; // can add sequence number for RBF as an additional element\n      });\n    }\n  }, {\n    key: \"ledgerKeysets\",\n    value: function ledgerKeysets() {\n      var _this9 = this;\n\n      return this.bip32Paths.map(function (bip32Path) {\n        return _this9.ledgerBIP32Path(bip32Path);\n      });\n    }\n  }, {\n    key: \"ledgerOutputScriptHex\",\n    value: function ledgerOutputScriptHex() {\n      var txHex = (0, _unchainedBitcoin.unsignedMultisigTransaction)(this.network, this.inputs, this.outputs).toHex();\n      var splitTx = (0, _splitTransaction.splitTransaction)(txHex, this.anySegwitInputs());\n      return (0, _serializeTransaction.serializeTransactionOutputs)(splitTx).toString('hex');\n    }\n  }, {\n    key: \"ledgerBIP32Path\",\n    value: function ledgerBIP32Path(bip32Path) {\n      return bip32Path.split(\"/\").slice(1).join(\"/\");\n    }\n  }, {\n    key: \"anySegwitInputs\",\n    value: function anySegwitInputs() {\n      for (var i = 0; i < this.inputs.length; i++) {\n        var input = this.inputs[i];\n        var addressType = (0, _unchainedBitcoin.multisigAddressType)(input.multisig);\n\n        if (addressType === _unchainedBitcoin.P2SH_P2WSH || addressType === _unchainedBitcoin.P2WSH) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }]);\n\n  return LedgerSignMultisigTransaction;\n}(LedgerBitcoinInteraction);\n\nexports.LedgerSignMultisigTransaction = LedgerSignMultisigTransaction;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.trezorCoin = trezorCoin;\nexports.TrezorConfirmMultisigAddress = exports.TrezorSignMultisigTransaction = exports.TrezorExportExtendedPublicKey = exports.TrezorExportPublicKey = exports.TrezorExportHDNode = exports.TrezorGetMetadata = exports.TrezorInteraction = exports.TREZOR_PUSH_AND_HOLD_BUTTON = exports.TREZOR_BOTH_BUTTONS = exports.TREZOR_RIGHT_BUTTON = exports.TREZOR_LEFT_BUTTON = exports.TREZOR = void 0;\n\nrequire(\"core-js/modules/es6.object.define-properties\");\n\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.reflect.get\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es6.string.repeat\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es7.object.entries\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _bignumber = _interopRequireDefault(require(\"bignumber.js\"));\n\nvar _unchainedBitcoin = require(\"unchained-bitcoin\");\n\nvar _bitcoinjsLib = _interopRequireDefault(require(\"bitcoinjs-lib\"));\n\nvar _interaction = require(\"./interaction\");\n\nvar _index = require(\"./index\");\n\nvar _ADDRESS_SCRIPT_TYPES;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Constant defining Trezor interactions.\n *\n * @type {string}\n * @default trezor\n */\nvar TREZOR = 'trezor';\nexports.TREZOR = TREZOR;\n\nvar TrezorConnect = require(\"trezor-connect\")[\"default\"];\n\nvar ADDRESS_SCRIPT_TYPES = (_ADDRESS_SCRIPT_TYPES = {}, _defineProperty(_ADDRESS_SCRIPT_TYPES, _unchainedBitcoin.P2SH, 'SPENDMULTISIG'), _defineProperty(_ADDRESS_SCRIPT_TYPES, _unchainedBitcoin.P2SH_P2WSH, 'SPENDP2SHWITNESS'), _defineProperty(_ADDRESS_SCRIPT_TYPES, _unchainedBitcoin.P2WSH, 'SPENDWITNESS'), _ADDRESS_SCRIPT_TYPES);\n/**\n * Constant representing the action of pushing the left button on a\n * Trezor device.\n *\n * @type {string}\n * @default 'trezor_left_button'\n */\n\nvar TREZOR_LEFT_BUTTON = 'trezor_left_button';\n/**\n * Constant representing the action of pushing the right button on a\n * Trezor device.\n *\n * @type {string}\n * @default 'trezor_right_button'\n */\n\nexports.TREZOR_LEFT_BUTTON = TREZOR_LEFT_BUTTON;\nvar TREZOR_RIGHT_BUTTON = 'trezor_right_button';\n/**\n * Constant representing the action of pushing both buttons on a\n * Trezor device.\n *\n * @type {string}\n * @default 'trezor_both_buttons'\n */\n\nexports.TREZOR_RIGHT_BUTTON = TREZOR_RIGHT_BUTTON;\nvar TREZOR_BOTH_BUTTONS = 'trezor_both_buttons';\n/**\n * Constant representing the action of pushing and holding the Confirm\n * button on a Trezor model T device.\n *\n * @type {string}\n * @default 'trezor_push_and_hold_button'\n */\n\nexports.TREZOR_BOTH_BUTTONS = TREZOR_BOTH_BUTTONS;\nvar TREZOR_PUSH_AND_HOLD_BUTTON = 'trezor_push_and_hold_button'; // eslint-disable-next-line no-process-env\n\nexports.TREZOR_PUSH_AND_HOLD_BUTTON = TREZOR_PUSH_AND_HOLD_BUTTON;\nvar TREZOR_DEV = undefined;\n\ntry {\n  if (TREZOR_DEV) TrezorConnect.init({\n    connectSrc: 'https://localhost:8088/',\n    lazyLoad: true,\n    manifest: {\n      email: \"help@unchained-capital.com\",\n      appUrl: \"https://github.com/unchained-capital/unchained-wallets\"\n    }\n  });else TrezorConnect.manifest({\n    email: \"help@unchained-capital.com\",\n    appUrl: \"https://github.com/unchained-capital/unchained-wallets\"\n  });\n} catch (e) {\n  // We hit this if we run this code outside of a browser, for example\n  // during unit testing.\n\n  /* eslint-disable no-process-env */\n  if (undefined !== 'test') {\n    /* eslint-enable */\n    console.error(\"Unable to call TrezorConnect.manifest.\");\n  }\n}\n/**\n * Base class for interactions with Trezor hardware wallets.\n *\n * Assumes we are using TrezorConnect to talk to the device.\n *\n * Subclasses *must* implement a method `this.connectParams` which\n * returns a 2-element array.  The first element of this array should\n * be a `TrezorConnect` method to use (e.g. -\n * `TrezorConnect.getAddress`).  The second element of this array\n * should be the parameters to pass to the given `TrezorConnect`\n * method.\n *\n * Errors thrown when calling TrezorConnect are not caught, so users\n * of this class (and its subclasses) should use `try...catch` as\n * always.\n *\n * Unsuccessful responses (the request succeeded but the Trezor device\n * returned an error message) are intercepted and thrown as errors.\n * This allows upstream `try...catch` blocks to intercept errors &\n * failures uniformly.\n *\n * Subclasses *may* implement the `parse(payload)` method which\n * accepts the response payload object and returns the relevant data.\n *\n * Subclasses will also want to implement a `messages()` method to\n * manipulate the messages returned to the user for each interaction.\n *\n * @extends {module:interaction.DirectKeystoreInteraction}\n * @example\n * import {TrezorInteraction} from \"unchained-wallets\";\n * // Simple subclass\n *\n * class SimpleTrezorInteraction extends TrezorInteraction {\n *\n *   constructor({network, param}) {\n *     super({network});\n *     this.param =  param;\n *   }\n *\n *   connectParams() {\n *     return [\n *       TrezorConnect.doSomething, // Not a real TrezorConnect function...\n *       {\n *         // Many Trezor methods require the `coin` parameter.  The\n *         // value of `this.trezorCoin` is set appropriately based on the\n *         // `network` provided in the constructor.\n *         coin: this.trezorCoin,\n *\n *         // Pass whatever arguments are required\n *         // by the TrezorConnect function being called.\n *         param: this.param,\n *         // ...\n *       }\n *     ];\n *   }\n *\n *   parse(payload) {\n *     return payload.someValue;\n *   }\n *\n * }\n * // usage\n * import {MAINNET} from \"unchained-bitcoin\";\n * const interaction = new SimpleTrezorInteraction({network: MAINNET, param: \"foo\"});\n * const result = await interaction.run();\n * console.log(result); // someValue from payload\n */\n\n\nvar TrezorInteraction =\n/*#__PURE__*/\nfunction (_DirectKeystoreIntera) {\n  _inherits(TrezorInteraction, _DirectKeystoreIntera);\n\n  /**\n   * Trezor interactions require knowing the bitcoin network they are\n   * for.\n   *\n   * @param {object} options - options argument\n   * @param {string} options.network - bitcoin network\n   */\n  function TrezorInteraction(_ref) {\n    var _this;\n\n    var network = _ref.network;\n\n    _classCallCheck(this, TrezorInteraction);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TrezorInteraction).call(this));\n    _this.network = network;\n    _this.trezorCoin = trezorCoin(network);\n    return _this;\n  }\n  /**\n   * Default messages are added asking the user to plug in their\n   * Trezor device (`device.connect`) and about the TrezorConnect\n   * popups (`trezor.connect.generic`).\n   *\n   * Subclasses should override this method and add their own messages\n   * (don't forget to call `super()`).\n   *\n   * @returns {module:interaction.Message[]} messages for this interaction\n   */\n\n\n  _createClass(TrezorInteraction, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(TrezorInteraction.prototype), \"messages\", this).call(this);\n\n      messages.push({\n        version: \"One\",\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        text: \"Make sure your Trezor device is plugged in.\",\n        code: \"device.connect\"\n      });\n      messages.push({\n        version: \"T\",\n        state: _interaction.PENDING,\n        level: _interaction.INFO,\n        text: \"Make sure your Trezor device is plugged in and unlocked.\",\n        code: \"device.connect\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        text: \"Your browser should now open a new window to Trezor Connect. Ensure you have enabled popups for this site.\",\n        code: \"trezor.connect.generic\"\n      });\n      return messages;\n    }\n    /**\n     * Awaits the call of `this.method`, passing in the output of\n     * `this.params()`.\n     *\n     * If the call returns but is unsuccessful (`result.success`) is\n     * false, will throw the returned error message.  If some other\n     * error is thrown, it will not be caught.\n     *\n     * Otherwise it returns the result of passing `result.payload` to\n     * `this.parse`.\n     *\n     * @returns {Promise} handles the work of calling TrezorConnect\n     */\n\n  }, {\n    key: \"run\",\n    value: function () {\n      var _run = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this$connectParams, _this$connectParams2, method, params, result;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$connectParams = this.connectParams(), _this$connectParams2 = _slicedToArray(_this$connectParams, 2), method = _this$connectParams2[0], params = _this$connectParams2[1];\n                _context.next = 3;\n                return method(params);\n\n              case 3:\n                result = _context.sent;\n\n                if (result.success) {\n                  _context.next = 6;\n                  break;\n                }\n\n                throw new Error(result.payload.error);\n\n              case 6:\n                return _context.abrupt(\"return\", this.parse(result.payload));\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function run() {\n        return _run.apply(this, arguments);\n      }\n\n      return run;\n    }()\n    /**\n     * Override this method in a subclass to return a 2-element array.\n     *\n     * The first element should be a functin to call, typically a\n     * `TrezorConnect` method, e.g. `TrezorConnect.getAddress`.\n     *\n     * The second element should be the parameters to pass to this\n     * function.\n     *\n     * By default, the function passed just throws an error.\n     *\n     * @returns {Array<function,Object>} the TrezorConnect parameters\n     */\n\n  }, {\n    key: \"connectParams\",\n    value: function connectParams() {\n      return [function () {\n        throw new Error(\"Override the `connectParams` method on a subclass of TrezorInteraction.\");\n      }, {}];\n    }\n    /**\n     * Override this method in a subclass to parse the payload of a\n     * successful response from the device.\n     *\n     * By default, the entire payload is returned.\n     *\n     * @param {Object} payload - the raw payload from the device response\n     * @returns {Object} - relevant or formatted data built from the raw payload\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse(payload) {\n      return payload;\n    }\n  }]);\n\n  return TrezorInteraction;\n}(_interaction.DirectKeystoreInteraction);\n/**\n * Returns metadata about Trezor device.\n *\n * Includes model name, device label, firmware version, &\n * PIN/passphrase enablement.\n *\n * @extends {module:trezor.TrezorInteraction}\n * @example\n * import {TrezorGetMetadata} from \"unchained-wallets\";\n * const interaction = new TrezorGetMetadata();\n * const result = await interaction.run();\n * console.log(result);\n * {\n *   spec: \"Model 1 v1.8.3 w/PIN\",\n *   model: \"Model 1\",\n *   version: {\n *     major: 1,\n *     minor: 8,\n *     patch: 3,\n *     string: \"1.8.3\",\n *   },\n *   label: \"My Trezor\",\n *   pin: true,\n *   passphrase: false,\n * }\n */\n\n\nexports.TrezorInteraction = TrezorInteraction;\n\nvar TrezorGetMetadata =\n/*#__PURE__*/\nfunction (_TrezorInteraction) {\n  _inherits(TrezorGetMetadata, _TrezorInteraction);\n\n  /**\n   * This class doesn't actually require a `network`.\n   *\n   * @constructor\n   */\n  function TrezorGetMetadata() {\n    _classCallCheck(this, TrezorGetMetadata);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TrezorGetMetadata).call(this, {}));\n  }\n  /**\n   * It is underdocumented, but TrezorConnect does support the\n   * `getFeatures` API call.\n   *\n   * See {@link https://github.com/trezor/connect/blob/v8/src/js/core/methods/GetFeatures.js}.\n   *\n   * @returns {Array<function, Object>} TrezorConnect parameters\n   */\n\n\n  _createClass(TrezorGetMetadata, [{\n    key: \"connectParams\",\n    value: function connectParams() {\n      return [TrezorConnect.getFeatures, {}];\n    }\n    /**\n     * Parses Trezor device featuress into an appropriate metadata\n     * shape.\n     *\n     * @param {Object} payload - the original payload from the device response\n     * @returns {Object} device metadata & features\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse(payload) {\n      // Example result:\n      //\n      // {\n      //   bootloader_hash: \"5112...846e9\"\n      //   bootloader_mode: null\n      //   device_id: \"BDF9...F198\"\n      //   firmware_present: null\n      //   flags: 0\n      //   fw_major: null\n      //   fw_minor: null\n      //   fw_patch: null\n      //   fw_vendor: null\n      //   fw_vendor_keys: null\n      //   imported: false\n      //   initialized: true\n      //   label: \"My Trezor\"\n      //   language: null\n      //   major_version: 1\n      //   minor_version: 6\n      //   model: \"1\"\n      //   needs_backup: false\n      //   no_backup: null\n      //   passphrase_cached: false\n      //   passphrase_protection: false\n      //   patch_version: 3\n      //   pin_cached: true\n      //   pin_protection: true\n      //   revision: \"ef8...862d7\"\n      //   unfinished_backup: null\n      //   vendor: \"bitcointrezor.com\"\n      // }\n      var major_version = payload.major_version,\n          minor_version = payload.minor_version,\n          patch_version = payload.patch_version,\n          label = payload.label,\n          model = payload.model,\n          pin_protection = payload.pin_protection,\n          passphrase_protection = payload.passphrase_protection;\n      var spec = \"Model \".concat(model, \" v.\").concat(major_version, \".\").concat(minor_version, \".\").concat(patch_version);\n\n      if (pin_protection) {\n        spec += \" w/PIN\";\n      }\n\n      if (passphrase_protection) {\n        spec += \" w/PASS\";\n      }\n\n      return {\n        spec: spec,\n        model: \"Model \".concat(model),\n        version: {\n          major: major_version,\n          minor: minor_version,\n          patch: patch_version,\n          string: \"\".concat(major_version, \".\").concat(minor_version, \".\").concat(patch_version)\n        },\n        label: label,\n        pin: pin_protection,\n        passphrase: passphrase_protection\n      };\n    }\n  }]);\n\n  return TrezorGetMetadata;\n}(TrezorInteraction);\n/**\n * Base class for interactions exporting information about an HD node\n * at a given BIP32 path.\n *\n * You may want to use `TrezorExportPublicKey` or\n * `TrezorExportExtendedPublicKey` directly.\n *\n * @extends {module:trezor.TrezorInteraction}\n * @example\n * import {MAINNET} from \"unchained-bitcoin\";\n * import {TrezorExportHDNode} from \"unchained-wallets\";\n * const interaction = new TrezorExportHDNode({network: MAINNET, bip32Path: \"m/48'/0'/0'/2'/0\"});\n * const node = await interaction.run();\n * console.log(node); // {publicKey: \"\", xpub: \"\", ...}\n *\n */\n\n\nexports.TrezorGetMetadata = TrezorGetMetadata;\n\nvar TrezorExportHDNode =\n/*#__PURE__*/\nfunction (_TrezorInteraction2) {\n  _inherits(TrezorExportHDNode, _TrezorInteraction2);\n\n  /**\n   * Requires a BIP32 path to the node to export as well as which network.\n   *\n   * @param {object} options - options argument\n   * @param {string} options.network - bitcoin network\n   * @param {string} bip32Path - the BIP32 path for the HD node\n   * @param {boolean} includeXFP - return xpub with root fingerprint concatenated\n   */\n  function TrezorExportHDNode(_ref2) {\n    var _this2;\n\n    var network = _ref2.network,\n        bip32Path = _ref2.bip32Path,\n        includeXFP = _ref2.includeXFP;\n\n    _classCallCheck(this, TrezorExportHDNode);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(TrezorExportHDNode).call(this, {\n      network: network\n    }));\n    _this2.bip32Path = bip32Path;\n    _this2.includeXFP = includeXFP;\n    _this2.bip32ValidationErrorMessage = {};\n    var bip32PathError = (0, _unchainedBitcoin.validateBIP32Path)(bip32Path);\n\n    if (bip32PathError.length) {\n      _this2.bip32ValidationErrorMessage = {\n        text: bip32PathError,\n        code: 'trezor.bip32_path.path_error'\n      };\n    }\n\n    return _this2;\n  }\n  /**\n   * Adds messages related to warnings Trezor devices make depending\n   * on the BIP32 path passed.\n   *\n   * @returns {module:interaction.Message[]} messages for this interaction\n   */\n\n\n  _createClass(TrezorExportHDNode, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(TrezorExportHDNode.prototype), \"messages\", this).call(this);\n\n      var bip32PathSegments = (this.bip32Path || '').split('/');\n\n      if (bip32PathSegments.length < 4) {\n        // m, 45', 0', 0', ...\n        messages.push({\n          state: _interaction.PENDING,\n          level: _interaction.ERROR,\n          text: \"BIP32 path must be at least depth 3.\",\n          code: \"trezor.bip32_path.minimum\"\n        });\n      }\n\n      if (Object.entries(this.bip32ValidationErrorMessage).length) {\n        messages.push({\n          state: _interaction.PENDING,\n          level: _interaction.ERROR,\n          code: this.bip32ValidationErrorMessage.code,\n          text: this.bip32ValidationErrorMessage.text\n        });\n      }\n\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        text: \"Confirm in the Trezor Connect window that you want to 'Export public key'. You may be prompted to enter your PIN.\",\n        code: \"trezor.connect.export_hdnode\"\n      });\n      return messages;\n    }\n  }, {\n    key: \"extractDetailsFromPayload\",\n    value: function extractDetailsFromPayload(_ref3) {\n      var payload = _ref3.payload,\n          pubkey = _ref3.pubkey;\n\n      if (payload.length !== 2) {\n        throw new Error(\"Payload does not have two responses.\");\n      }\n\n      var keyMaterial = '';\n      var rootFingerprint = null;\n\n      for (var i = 0; i < payload.length; i++) {\n        // Find the payload with bip32 = MULTISIG_ROOT to get xfp\n        if (payload[i].serializedPath === _index.MULTISIG_ROOT) {\n          var fp = payload[i].fingerprint;\n          rootFingerprint = (0, _unchainedBitcoin.fingerprintToFixedLengthHex)(fp);\n        } else {\n          keyMaterial = pubkey ? payload[i].publicKey : payload[i].xpub;\n        }\n      }\n\n      return {\n        rootFingerprint: rootFingerprint,\n        keyMaterial: keyMaterial\n      };\n    }\n    /**\n     * See {@link https://github.com/trezor/connect/blob/v8/docs/methods/getPublicKey.md}.\n     *\n     * @returns {Array<function,Object>} TrezorConnect parameters\n     */\n\n  }, {\n    key: \"connectParams\",\n    value: function connectParams() {\n      if (this.includeXFP) {\n        return [TrezorConnect.getPublicKey, {\n          bundle: [{\n            path: this.bip32Path\n          }, {\n            path: _index.MULTISIG_ROOT\n          }],\n          coin: this.trezorCoin,\n          crossChain: true\n        }];\n      }\n\n      return [TrezorConnect.getPublicKey, {\n        path: this.bip32Path,\n        coin: this.trezorCoin,\n        crossChain: true\n      }];\n    }\n  }]);\n\n  return TrezorExportHDNode;\n}(TrezorInteraction);\n/**\n * Returns the public key at a given BIP32 path.\n *\n * @extends {module:trezor.TrezorExportHDNode}\n * @example\n * import {MAINNET} from \"unchained-bitcoin\";\n * import {TrezorExportPublicKey} from \"unchained-wallets\";\n * const interaction = new TrezorExportPublicKey({network: MAINNET, bip32Path: \"m/48'/0'/0'/2'/0\"});\n * const publicKey = await interaction.run();\n * console.log(publicKey);\n * // \"03...\"\n */\n\n\nexports.TrezorExportHDNode = TrezorExportHDNode;\n\nvar TrezorExportPublicKey =\n/*#__PURE__*/\nfunction (_TrezorExportHDNode) {\n  _inherits(TrezorExportPublicKey, _TrezorExportHDNode);\n\n  function TrezorExportPublicKey(_ref4) {\n    var _this3;\n\n    var network = _ref4.network,\n        bip32Path = _ref4.bip32Path,\n        includeXFP = _ref4.includeXFP;\n\n    _classCallCheck(this, TrezorExportPublicKey);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(TrezorExportPublicKey).call(this, {\n      network: network,\n      bip32Path: bip32Path,\n      includeXFP: includeXFP\n    }));\n    _this3.includeXFP = includeXFP;\n    return _this3;\n  }\n  /**\n   * Parses the public key from the HD node response.\n   *\n   * @param {object} payload - the original payload from the device response\n   * @returns {string|Object} the (compressed) public key in hex or Object if root fingerprint requested\n   */\n\n\n  _createClass(TrezorExportPublicKey, [{\n    key: \"parse\",\n    value: function parse(payload) {\n      if (this.includeXFP) {\n        var _this$extractDetailsF = this.extractDetailsFromPayload({\n          payload: payload,\n          pubkey: true\n        }),\n            rootFingerprint = _this$extractDetailsF.rootFingerprint,\n            keyMaterial = _this$extractDetailsF.keyMaterial;\n\n        return {\n          rootFingerprint: rootFingerprint,\n          publicKey: keyMaterial\n        };\n      }\n\n      return payload.publicKey;\n    }\n  }]);\n\n  return TrezorExportPublicKey;\n}(TrezorExportHDNode);\n/**\n * Returns the extended public key at a given BIP32 path.\n *\n * @extends {module:trezor.TrezorExportHDNode}\n * @example\n * import {MAINNET} from \"unchained-bitcoin\";\n * import {TrezorExportExtendedPublicKey} from \"unchained-wallets\";\n * const interaction = new TrezorExportExtendedPublicKey({network: MAINNET, bip32Path: \"m/48'/0'/0'\"});\n * const xpub = await interaction.run();\n * console.log(xpub);\n * // \"xpub...\"\n */\n\n\nexports.TrezorExportPublicKey = TrezorExportPublicKey;\n\nvar TrezorExportExtendedPublicKey =\n/*#__PURE__*/\nfunction (_TrezorExportHDNode2) {\n  _inherits(TrezorExportExtendedPublicKey, _TrezorExportHDNode2);\n\n  function TrezorExportExtendedPublicKey(_ref5) {\n    var _this4;\n\n    var network = _ref5.network,\n        bip32Path = _ref5.bip32Path,\n        includeXFP = _ref5.includeXFP;\n\n    _classCallCheck(this, TrezorExportExtendedPublicKey);\n\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(TrezorExportExtendedPublicKey).call(this, {\n      network: network,\n      bip32Path: bip32Path,\n      includeXFP: includeXFP\n    }));\n    _this4.includeXFP = includeXFP;\n    return _this4;\n  }\n  /**\n   * Parses the extended public key from the HD node response.\n   *\n   * If asking for XFP, return object with xpub and the root fingerprint.\n   *\n   * @param {object} payload the original payload from the device response\n   * @returns {string|Object} the extended public key (returns object if asked to include root fingerprint)\n   */\n\n\n  _createClass(TrezorExportExtendedPublicKey, [{\n    key: \"parse\",\n    value: function parse(payload) {\n      if (this.includeXFP) {\n        var _this$extractDetailsF2 = this.extractDetailsFromPayload({\n          payload: payload,\n          pubkey: false\n        }),\n            rootFingerprint = _this$extractDetailsF2.rootFingerprint,\n            keyMaterial = _this$extractDetailsF2.keyMaterial;\n\n        return {\n          rootFingerprint: rootFingerprint,\n          xpub: keyMaterial\n        };\n      }\n\n      return payload.xpub;\n    }\n  }]);\n\n  return TrezorExportExtendedPublicKey;\n}(TrezorExportHDNode);\n/**\n * Returns a signature for a bitcoin transaction with inputs from one\n * or many multisig addresses.\n *\n * - `inputs` is an array of `UTXO` objects from `unchained-bitcoin`\n * - `outputs` is an array of `TransactionOutput` objects from `unchained-bitcoin`\n * - `bip32Paths` is an array of (`string`) BIP32 paths, one for each input, identifying the path on this device to sign that input with\n *\n * @example\n * import {\n *   generateMultisigFromHex, TESTNET, P2SH,\n * } from \"unchained-bitcoin\";\n * import {TrezorSignMultisigTransaction} from \"unchained-wallets\";\n * const redeemScript = \"5...ae\";\n * const inputs = [\n *   {\n *     txid: \"8d276c76b3550b145e44d35c5833bae175e0351b4a5c57dc1740387e78f57b11\",\n *     index: 1,\n *     multisig: generateMultisigFromHex(TESTNET, P2SH, redeemScript),\n *     amountSats: '1234000'\n *   },\n *   // other inputs...\n * ];\n * const outputs = [\n *   {\n *     amountSats: '1299659',\n *     address: \"2NGHod7V2TAAXC1iUdNmc6R8UUd4TVTuBmp\"\n *   },\n *   // other outputs...\n * ];\n * const interaction = new TrezorSignMultisigTransaction({\n *   network: TESTNET,\n *   inputs,\n *   outputs,\n *   bip32Paths: [\"m/45'/0'/0'/0\", // add more, 1 per input],\n * });\n * const signature = await interaction.run();\n * console.log(signatures);\n * // [\"ababab...\", // 1 per input]\n * @extends {module:trezor.TrezorInteraction}\n */\n\n\nexports.TrezorExportExtendedPublicKey = TrezorExportExtendedPublicKey;\n\nvar TrezorSignMultisigTransaction =\n/*#__PURE__*/\nfunction (_TrezorInteraction3) {\n  _inherits(TrezorSignMultisigTransaction, _TrezorInteraction3);\n\n  /**\n   * @param {object} options - options argument\n   * @param {string} options.network - bitcoin network\n   * @param {UTXO[]} options.inputs - inputs for the transaction\n   * @param {TransactionOutput[]} options.outputs - outputs for the transaction\n   * @param {string[]} options.bip32Paths - BIP32 paths on this device to sign with, one per each input\n   */\n  function TrezorSignMultisigTransaction(_ref6) {\n    var _this5;\n\n    var network = _ref6.network,\n        inputs = _ref6.inputs,\n        outputs = _ref6.outputs,\n        bip32Paths = _ref6.bip32Paths;\n\n    _classCallCheck(this, TrezorSignMultisigTransaction);\n\n    _this5 = _possibleConstructorReturn(this, _getPrototypeOf(TrezorSignMultisigTransaction).call(this, {\n      network: network\n    }));\n    _this5.inputs = inputs;\n    _this5.outputs = outputs;\n    _this5.bip32Paths = bip32Paths;\n    return _this5;\n  }\n  /**\n   * Adds messages describing the signing flow.\n   *\n   * @returns {module:interaction.Message[]} messages for this interaction\n   */\n\n\n  _createClass(TrezorSignMultisigTransaction, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(TrezorSignMultisigTransaction.prototype), \"messages\", this).call(this);\n\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        text: \"Confirm in the Trezor Connect window that you want to 'Sign \".concat(this.network, \" transaction'.  You may be prompted to enter your PIN.\"),\n        code: \"trezor.connect.sign\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        version: \"One\",\n        text: \"Confirm each output on your Trezor device and approve the transaction.\",\n        messages: [{\n          text: \"For each output, your Trezor device will display the output amount and address.\",\n          action: TREZOR_RIGHT_BUTTON\n        }, {\n          text: \"Your Trezor device will display the total output amounts and fee amount.\",\n          action: TREZOR_RIGHT_BUTTON\n        }],\n        code: \"trezor.sign\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        version: \"T\",\n        text: \"Confirm each output on your Trezor device and approve the transaction.\",\n        messages: [{\n          text: \"For each input, your Trezor device will display a \\\"Confirm path\\\" dialogue displaying the input BIP32 path.  It is safe to continue\",\n          action: TREZOR_RIGHT_BUTTON\n        }, {\n          text: \"For each output, your Trezor device will display a \\\"Confirm sending\\\" dialogue displaying the output amount and address.\",\n          action: TREZOR_RIGHT_BUTTON\n        }, {\n          text: \"Your Trezor device will display the \\\"Confirm transaction\\\" dialogue displaying the total output amount and fee amount.\",\n          action: TREZOR_PUSH_AND_HOLD_BUTTON\n        }],\n        code: \"trezor.sign\"\n      });\n      return messages;\n    }\n    /**\n     * See {@link https://github.com/trezor/connect/blob/v8/docs/methods/signTransaction.md}.\n     *\n     * @returns {Array<function, Object>} TrezorConnect parameters\n     */\n\n  }, {\n    key: \"connectParams\",\n    value: function connectParams() {\n      var _this6 = this;\n\n      return [TrezorConnect.signTransaction, {\n        inputs: this.inputs.map(function (input, inputIndex) {\n          return trezorInput(input, _this6.bip32Paths[inputIndex]);\n        }),\n        outputs: this.outputs.map(function (output) {\n          return trezorOutput(output);\n        }),\n        coin: this.trezorCoin\n      }];\n    }\n    /**\n     * Parses the signature out of the response payload.\n     *\n     * Ensures each input's signature hasa a trailing `...01` {@link https://bitcoin.org/en/glossary/sighash-all SIGHASH_ALL} byte.\n     *\n     * @param {Object} payload - the original payload from the device response\n     * @returns {string[]} array of input signatures, one per input\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse(payload) {\n      // While we don't anticipate Trezor making firmware changes to include SIGHASH bytes with signatures,\n      // let's go ahead and make sure that we're not double adding the SIGHASH byte in case they do in the future.\n      return (payload.signatures || []).map(function (inputSignature) {\n        return \"\".concat((0, _unchainedBitcoin.signatureNoSighashType)(inputSignature), \"01\");\n      });\n    }\n  }]);\n\n  return TrezorSignMultisigTransaction;\n}(TrezorInteraction);\n/**\n * Shows a multisig address on the device and prompts the user to\n * confirm it.\n * If the optional publicKey parameter is used, the public key at\n * the given BIP32 path is checked, returning an error if they don't match.\n *\n * Without the publicKey parameter, this function simply checks that the\n * public key at the given BIP32 path is in the redeemscript (with\n * validation on-device.\n *\n * @extends {module:trezor.TrezorInteraction}\n * @example\n * import {\n *   generateMultisigFromPublicKeys, MAINNET, P2SH,\n * } from \"unchained-bitcoin\";\n * import {TrezorConfirmMultisigAddress} from \"unchained-wallets\";\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2SH, 2, \"03a...\", \"03b...\");\n * const interaction = new TrezorConfirmMultisigAddress({network: MAINNET, bip32Path: \"m/45'/0'/0'/0/0\", multisig});\n * await interaction.run();\n */\n\n\nexports.TrezorSignMultisigTransaction = TrezorSignMultisigTransaction;\n\nvar TrezorConfirmMultisigAddress =\n/*#__PURE__*/\nfunction (_TrezorInteraction4) {\n  _inherits(TrezorConfirmMultisigAddress, _TrezorInteraction4);\n\n  /**\n   * Most of the information required to confirm a multisig address\n   * lives in the `Multisig` object from `unchained-bitcoin`.\n   *\n   * @param {object} options - options argument\n   * @param {string} options.network - bitcoin network\n   * @param {string} options.bip32Path - BIP32 path to the public key on this device used in the multisig address\n   * @param {Multisig} options.multisig - multisig object\n   * @param {string} options.publicKey - optional public key to confirm\n   */\n  function TrezorConfirmMultisigAddress(_ref7) {\n    var _this7;\n\n    var network = _ref7.network,\n        bip32Path = _ref7.bip32Path,\n        multisig = _ref7.multisig,\n        publicKey = _ref7.publicKey;\n\n    _classCallCheck(this, TrezorConfirmMultisigAddress);\n\n    _this7 = _possibleConstructorReturn(this, _getPrototypeOf(TrezorConfirmMultisigAddress).call(this, {\n      network: network\n    }));\n    _this7.bip32Path = bip32Path;\n    _this7.multisig = multisig;\n    _this7.publicKey = publicKey;\n    return _this7;\n  }\n  /**\n   * Adds messages about BIP32 path warnings.\n   *\n   * @returns {module:interaction.Message[]} messages for this interaction\n   *\n   */\n\n\n  _createClass(TrezorConfirmMultisigAddress, [{\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(TrezorConfirmMultisigAddress.prototype), \"messages\", this).call(this);\n\n      if (this.publicKey) {\n        messages.push({\n          state: _interaction.ACTIVE,\n          level: _interaction.INFO,\n          text: \"Confirm in the Trezor Connect window that you want to \\u2018Export multiple \".concat(this.trezorCoin, \" addresses\\u2019. You may be prompted to enter your PIN. You may also receive a warning about your selected BIP32 path.\"),\n          code: \"trezor.connect.confirm_address\"\n        });\n      } else {\n        messages.push({\n          state: _interaction.ACTIVE,\n          level: _interaction.INFO,\n          text: \"Confirm in the Trezor Connect window that you want to 'Export \".concat(this.trezorCoin, \" address'.  You may be prompted to enter your PIN.\"),\n          code: \"trezor.connect.confirm_address\"\n        });\n      }\n\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        version: \"One\",\n        text: \"It is safe to continue and confirm the address on your Trezor device.\",\n        messages: [// FIXME this only shows up on P2SH?\n        {\n          text: \"Your Trezor device may display a warning \\\"Wrong address path for selected coin\\\".  It is safe to continue\",\n          action: TREZOR_RIGHT_BUTTON\n        }, {\n          text: \"Your Trezor device will display the multisig address and BIP32 path.\",\n          action: TREZOR_RIGHT_BUTTON\n        }],\n        code: \"trezor.confirm_address\"\n      });\n      messages.push({\n        state: _interaction.ACTIVE,\n        level: _interaction.INFO,\n        version: \"T\",\n        text: \"Confirm the addresss on your Trezor device.\",\n        messages: [{\n          text: \"For each signer in your quorum, your Trezor device will display a \\\"Confirm path\\\" dialogue displaying the signer's BIP32 path.  It is safe to continue\",\n          action: TREZOR_RIGHT_BUTTON\n        }, {\n          text: \"Your Trezor device will display the multisig address.\",\n          action: TREZOR_RIGHT_BUTTON\n        }],\n        code: \"trezor.confirm_address\"\n      });\n      return messages;\n    }\n    /**\n     * See {@link https://github.com/trezor/connect/blob/v8/docs/methods/getAddress.md}.\n     *\n     * @returns {Array<function, Object>} TrezorConnect parameters\n     */\n\n  }, {\n    key: \"connectParams\",\n    value: function connectParams() {\n      if (this.publicKey) {\n        return [TrezorConnect.getAddress, {\n          bundle: [{\n            path: this.bip32Path,\n            showOnTrezor: false,\n            coin: this.trezorCoin,\n            crossChain: true\n          }, {\n            path: this.bip32Path,\n            address: (0, _unchainedBitcoin.multisigAddress)(this.multisig),\n            showOnTrezor: true,\n            coin: this.trezorCoin,\n            crossChain: true,\n            multisig: {\n              m: (0, _unchainedBitcoin.multisigRequiredSigners)(this.multisig),\n              pubkeys: (0, _unchainedBitcoin.multisigPublicKeys)(this.multisig).map(function (publicKey) {\n                return trezorPublicKey(publicKey);\n              })\n            },\n            scriptType: ADDRESS_SCRIPT_TYPES[(0, _unchainedBitcoin.multisigAddressType)(this.multisig)]\n          }]\n        }];\n      } else {\n        return [TrezorConnect.getAddress, {\n          path: this.bip32Path,\n          address: (0, _unchainedBitcoin.multisigAddress)(this.multisig),\n          showOnTrezor: true,\n          coin: this.trezorCoin,\n          crossChain: true,\n          multisig: {\n            m: (0, _unchainedBitcoin.multisigRequiredSigners)(this.multisig),\n            pubkeys: (0, _unchainedBitcoin.multisigPublicKeys)(this.multisig).map(function (publicKey) {\n              return trezorPublicKey(publicKey);\n            })\n          },\n          scriptType: ADDRESS_SCRIPT_TYPES[(0, _unchainedBitcoin.multisigAddressType)(this.multisig)]\n        }];\n      }\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(payload) {\n      if (!this.publicKey) {\n        return payload;\n      }\n\n      var keyPair = _bitcoinjsLib[\"default\"].ECPair.fromPublicKey(Buffer.from(this.publicKey, 'hex'));\n\n      var _bitcoin$payments$p2p = _bitcoinjsLib[\"default\"].payments.p2pkh({\n        pubkey: keyPair.publicKey,\n        network: (0, _unchainedBitcoin.networkData)(this.network)\n      }),\n          address = _bitcoin$payments$p2p.address;\n\n      if (address !== payload[0].address && address !== payload[1].address) {\n        throw new Error(\"Wrong public key specified\");\n      }\n\n      return payload;\n    }\n  }]);\n\n  return TrezorConfirmMultisigAddress;\n}(TrezorInteraction);\n/**\n * Returns the Trezor API version of the given network.\n *\n * @param {string} network - bitcoin network\n * @returns {string} Trezor API spelling for this network\n */\n\n\nexports.TrezorConfirmMultisigAddress = TrezorConfirmMultisigAddress;\n\nfunction trezorCoin(network) {\n  return network === _unchainedBitcoin.MAINNET ? \"Bitcoin\" : \"Testnet\";\n}\n\nfunction trezorInput(input, bip32Path) {\n  var requiredSigners = (0, _unchainedBitcoin.multisigRequiredSigners)(input.multisig);\n  var publicKeys = (0, _unchainedBitcoin.multisigPublicKeys)(input.multisig);\n  var addressType = (0, _unchainedBitcoin.multisigAddressType)(input.multisig);\n  var spendType = ADDRESS_SCRIPT_TYPES[addressType];\n  return _objectSpread({\n    script_type: spendType,\n    multisig: {\n      m: requiredSigners,\n      pubkeys: publicKeys.map(function (publicKey) {\n        return trezorPublicKey(publicKey);\n      }),\n      signatures: Array(publicKeys.length).fill('')\n    },\n    prev_hash: input.txid,\n    prev_index: input.index,\n    address_n: (0, _unchainedBitcoin.bip32PathToSequence)(bip32Path)\n  }, input.amountSats && {\n    amount: (0, _bignumber[\"default\"])(input.amountSats).toString()\n  });\n}\n\nfunction trezorPublicKey(publicKey) {\n  return {\n    address_n: [],\n    node: {\n      // FIXME are all these 0's OK?\n      depth: 0,\n      child_num: 0,\n      fingerprint: 0,\n      chain_code: '0'.repeat(64),\n      public_key: publicKey\n    }\n  };\n}\n\nfunction trezorOutput(output) {\n  return {\n    amount: (0, _bignumber[\"default\"])(output.amountSats).toFixed(0),\n    address: output.address,\n    script_type: 'PAYTOADDRESS'\n  };\n}","module.exports = \"data:image/png;base64,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\"","import BigNumber from \"bignumber.js\";\nimport { satoshisToBitcoins } from \"unchained-bitcoin\";\n\nexport const DUST_IN_SATOSHIS = 546;\nexport const DUST_IN_BTC = satoshisToBitcoins(BigNumber(DUST_IN_SATOSHIS));\nexport const DEFAULT_PREFIX = \"m\";\nexport const CHANGE_INDEX = \"/1\";\nexport const DEFAULT_CHANGE_PREFIX = DEFAULT_PREFIX + CHANGE_INDEX;\n","import React from \"react\";\n\nexport default (url, text) => (\n  <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n    {text}\n  </a>\n);\n","import BigNumber from \"bignumber.js\";\nimport { estimateMultisigTransactionFee } from \"unchained-bitcoin/lib/fees\";\n\nimport { DUST_IN_SATOSHIS } from \"./constants\";\n\nexport { default as externalLink } from \"./ExternalLink\";\nexport { default as wrapText } from \"./WrapText\";\n\nexport function validatePositiveInteger(numberString) {\n  if (\n    numberString === null ||\n    numberString === undefined ||\n    numberString === \"\"\n  ) {\n    return \"Cannot be blank.\";\n  }\n  const number = parseInt(numberString, 10);\n  if (\n    Number.isNaN(number) ||\n    number.toString().length !== numberString.length ||\n    number <= 0\n  ) {\n    return \"Must be a positive whole number.\";\n  }\n\n  return \"\";\n}\n\nexport function downloadFile(body, filename) {\n  const blob = new Blob([body], { type: \"text/plain\" });\n  if (window.navigator.msSaveOrOpenBlob) {\n    window.navigator.msSaveBlob(blob, filename);\n  } else {\n    const elem = window.document.createElement(\"a\");\n    elem.href = window.URL.createObjectURL(blob);\n    elem.download = filename;\n    document.body.appendChild(elem);\n    elem.click();\n    document.body.removeChild(elem);\n  }\n}\n\n/**\n * @description A utility function to determine if a spend is a valid\n * \"spend all\" transaction,\n * @param {Object} options - set of options used to determine if is spend all\n * @param {Object[]} options.outputs\n * @param {string} options.outputs[].amountSats\n * @param {string} options.walletBalance\n * @param {string} options.feesPerByteInSatoshis\n * @param {number} options.numInputs\n * @param {string} options.addressType\n * @param {number} options.m\n * @param {number} options.n\n * @returns {boolean} whether or not conditions are met to be \"spendAll\"\n */\nexport function isSpendAll(options) {\n  const config = {\n    ...options,\n    numOutputs: options.outputs.length,\n  };\n  const estimatedFees = estimateMultisigTransactionFee(config).toNumber();\n  const outputTotal = config.outputs.reduce((balance, output) => {\n    return balance.plus(output.amountSats);\n  }, new BigNumber(0));\n\n  if (outputTotal.plus(estimatedFees).isGreaterThan(options.walletBalance))\n    throw new Error(\"Wallet balance is insufficient to fund transaction\");\n\n  // if the difference between walletBalance minus fees\n  // and the output total is less than or equal to dust\n  // then this is a spend all.\n  return new BigNumber(options.walletBalance)\n    .minus(estimatedFees)\n    .minus(outputTotal)\n    .isLessThanOrEqualTo(DUST_IN_SATOSHIS);\n}\n\n/**\n * @description a naive coin selection algorithm that goes through available,\n * spendable slices, adding them together to sufficiently fund a tx with a\n * given set of outputs and address/wallet type.\n * **IMPORTANT**: this assumes no change output in the set of outputs given.\n * and it will indicate if the returned set of utxos sufficiently cover the output\n * and fees w/o need of change.\n * @param {Object} options - set of options used to determine if is spend all\n * @param {Object[]} options.outputs\n * @param {string} options.feesPerByteInSatoshis\n * @param {number} options.slices - spendable slices to select utxos from\n * @param {string} options.addressType\n * @param {number} options.m\n * @param {number} options.n\n * @returns {Array.<Object[]|boolean>} a tuple where the first index is the list of\n * inputs and the second index is a bool representing whether a change address is needed\n */\nexport function naiveCoinSelection(options) {\n  const { slices, outputs } = options;\n  const { count: numInputs, balance: walletBalance } = slices.reduce(\n    ({ count, balance }, slice) => {\n      return {\n        count: count + slice.utxos.length,\n        balance: slice.balanceSats.plus(balance),\n      };\n    },\n    {\n      count: 0,\n      balance: new BigNumber(0),\n    }\n  );\n\n  const outputTotal = outputs.reduce(\n    (total, output) => total.plus(output.amountSats),\n    new BigNumber(0)\n  );\n\n  const selectedUtxos = [];\n  let changeRequired;\n  let inputTotal = new BigNumber(0);\n\n  // checking if is a spendall to confirm that change is not required\n  const spendAll = isSpendAll({\n    ...options,\n    walletBalance,\n    numInputs,\n  });\n\n  if (spendAll) changeRequired = false;\n\n  // loop through each slice\n  for (let i = 0; i < slices.length; i += 1) {\n    const slice = slices[i];\n    const { utxos } = slice;\n    // add each utxo from the slice to the inputs array\n    for (let j = 0; j < utxos.length; j += 1) {\n      selectedUtxos.push({\n        ...utxos[j],\n        multisig: slice.multisig,\n        bip32Path: slice.bip32Path,\n        change: slice.change,\n      });\n    }\n    // add slice's balance to the inputs total\n    inputTotal = inputTotal.plus(slice.balanceSats);\n\n    // we can skip the following checks if it is a spend all tx\n    if (!spendAll) {\n      // calculate fees with a change address and without\n      // to evaluate if we need to keep going or not\n      const feesWithoutChange = estimateMultisigTransactionFee({\n        ...options,\n        numInputs: selectedUtxos.length,\n        numOutputs: outputs.length,\n      });\n      const feesWithChange = estimateMultisigTransactionFee({\n        ...options,\n        numInputs: selectedUtxos.length,\n        numOutputs: outputs.length + 1,\n      });\n\n      const inputOutputDiff = inputTotal.minus(outputTotal);\n      if (\n        inputOutputDiff\n          .minus(feesWithoutChange)\n          .isLessThanOrEqualTo(DUST_IN_SATOSHIS) &&\n        inputOutputDiff.minus(feesWithoutChange).isGreaterThanOrEqualTo(0)\n      ) {\n        // if value of inputs covers outputs and fees w/o change output and\n        // has only dust left over, then no change is required and we're done\n        changeRequired = false;\n        break;\n      } else if (inputOutputDiff.isGreaterThan(feesWithChange)) {\n        // value of current inputs covers outputs and fees w/ change output\n        // so our tx is funded but needs change.\n        changeRequired = true;\n        break;\n      }\n      // if inputs don't cover outputs plus change output and fees,\n      // then the loop will continue to add more inputs\n    }\n  }\n  return [selectedUtxos, changeRequired];\n}\n","import React from \"react\";\n\n// Components\nimport { Card, CardHeader, CardContent } from \"@material-ui/core\";\n\nconst Disclaimer = () => (\n  <Card>\n    <CardHeader title=\"Disclaimer\" />\n    <CardContent>\n      <small>\n        This application is in alpha state and is presented for evaluation and\n        testing only. It is provided as is, and any express or implied\n        warranties, including but not limited to the implied warranties of\n        merchantability and fitness for a particular purpose, are disclaimed. By\n        using this application, you accept all risks of such use, including full\n        responsibility for any direct or indirect loss of any kind resulting\n        from the use of this application, which may involve complete loss of any\n        Bitcoin or other coins associated with addresses used with this\n        application. In no event shall Unchained Capital, Inc., its employees\n        and affiliates, or developers of this application be liable for any\n        direct, indirect, incidental, special, exemplary, or consequential\n        damages (including, but not limited to, procurement of substitute goods\n        or services; loss of use, data, or profits; or business interruption)\n        however caused and on any theory of liability, whether in contract,\n        strict liability, or tort (including negligence or otherwise) arising in\n        any way out of the use of this application, even if advised of the\n        possibility of such damage.\n      </small>\n    </CardContent>\n  </Card>\n);\n\nexport default Disclaimer;\n","import React from \"react\";\n\n// Components\nimport {\n  Box,\n  Typography,\n  CardHeader,\n  CardContent,\n  Grid,\n  Card,\n  Button,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  CardActions,\n} from \"@material-ui/core\";\nimport {\n  Description,\n  GitHub,\n  YouTube,\n  BugReport,\n  Speed,\n  AccountBalanceWallet,\n  SportsVolleyball,\n} from \"@material-ui/icons\";\nimport { externalLink } from \"../utils\";\nimport Disclaimer from \"./Disclaimer\";\n\nconst Help = () => (\n  <div>\n    <Box mt={4} mb={2}>\n      <Typography variant=\"h2\">Welcome to Caravan!</Typography>\n    </Box>\n\n    <Grid container spacing={3}>\n      <Grid container item md={8} spacing={2} direction=\"column\">\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Get Started\" />\n            <CardContent>\n              <Box mb={3}>\n                <Typography>\n                  Start using caravan by choosing to either make a multisig\n                  wallet or fully stateless address.\n                </Typography>\n              </Box>\n              <Grid container alignItems=\"center\" justify=\"center\" spacing={3}>\n                <Grid item xs={10} md={4}>\n                  <Button\n                    variant=\"contained\"\n                    data-cy=\"setup-wallet-button\"\n                    size=\"large\"\n                    color=\"primary\"\n                    href=\"#/wallet\"\n                    startIcon={<AccountBalanceWallet />}\n                  >\n                    Wallet\n                  </Button>\n                </Grid>\n                <Grid item xs={10} md={4}>\n                  <Button\n                    variant=\"contained\"\n                    data-cy=\"setup-address-button\"\n                    size=\"large\"\n                    color=\"default\"\n                    href=\"#/address\"\n                    startIcon={<SportsVolleyball />}\n                  >\n                    Address\n                  </Button>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n        </Grid>\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Stateless Multisig Coordinator\" />\n\n            <CardContent>\n              <p>\n                Caravan makes bitcoin multisig custody easier and safer through\n                transparency and standards.\n              </p>\n\n              <p>\n                Caravan is a <strong>coordination software</strong> for multisig\n                addresses and wallets. Caravan can be used to build a multisig\n                wallet derived from xpubs, or individual multisig addresses\n                derived from pubkeys. In both cases, in order to transact from\n                the wallet or address, you must also have your private keys and\n                BIP32 paths.\n              </p>\n\n              <p>\n                Caravan is <strong>stateless</strong>. It does not itself store\n                any data outside your current browser session. You must safekeep\n                the wallet details (xpubs, BIP32 paths) and addresses (redeem\n                scripts, BIP32 paths) that you create.\n              </p>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Keys\" />\n            <CardContent>\n              <p>All bitcoin is ultimately protected by private keys.</p>\n\n              <p>\n                Your private key may live on a piece of paper, a hardware\n                wallet, some software on a laptop, or even just in your mind.\n                Caravan, being stateless, does not store or ask for your private\n                key but it can talk to hardware devices or software applications\n                which do.\n              </p>\n\n              <p>\n                Caravan supports entering public keys and signatures via text,\n                so any wallet which can export such data can be made compatible\n                with Caravan.\n              </p>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Consensus\" />\n            <CardContent>\n              <p>\n                In order to look up wallet addresses and their balances, and\n                broadcast transactions, Caravan requires knowledge of the\n                constantly changing bitcoin network.\n              </p>\n\n              <p>\n                Running a full bitcoin node is the most private way to determine\n                the current state of the bitcoin network. Caravan can be easily\n                configured to use your own node for consensus information and\n                broadcasting transactions.\n              </p>\n\n              <p>\n                If you don&apos;t want to or cannot run your own full node,\n                Caravan defaults to using the freely available API at\n                <code> blockstream.info</code>.\n              </p>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      <Grid container item md={4} spacing={4} direction=\"column\">\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Learn More\" />\n            <CardContent>\n              <List>\n                <ListItem>\n                  <ListItemIcon>\n                    <Description />\n                  </ListItemIcon>\n                  <ListItemText>\n                    {externalLink(\n                      \"https://unchained-capital.com/blog/gearing-up-the-caravan/\",\n                      \"Blog Post\"\n                    )}\n                  </ListItemText>\n                </ListItem>\n\n                <ListItem>\n                  <ListItemIcon>\n                    <YouTube />\n                  </ListItemIcon>\n                  <ListItemText>\n                    {externalLink(\n                      \"https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH\",\n                      \"Video Tutorials\"\n                    )}\n                  </ListItemText>\n                </ListItem>\n\n                <ListItem>\n                  <ListItemIcon>\n                    <GitHub />\n                  </ListItemIcon>\n                  <ListItemText>\n                    {externalLink(\n                      \"https://github.com/unchained-capital/caravan\",\n                      \"Source Code\"\n                    )}\n                  </ListItemText>\n                </ListItem>\n              </List>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Supported Devices\" />\n            <CardContent>\n              Caravan has been <a href=\"#/test\">tested</a> with the following\n              hardware wallets:\n              <ul>\n                <li>\n                  {externalLink(\n                    \"https://shop.trezor.io/product/trezor-one-white\",\n                    \"Trezor One\"\n                  )}\n                </li>\n                <li>\n                  {externalLink(\n                    \"https://shop.trezor.io/product/trezor-model-t\",\n                    \"Trezor Model T\"\n                  )}\n                </li>\n                <li>\n                  {externalLink(\n                    \"https://www.ledger.com/products/ledger-nano-s\",\n                    \"Ledger Nano S\"\n                  )}\n                </li>\n                <li>\n                  {externalLink(\n                    \"https://www.ledger.com/products/ledger-nano-x\",\n                    \"Ledger Nano X\"\n                  )}\n                </li>\n                <li>\n                  {externalLink(\n                    \"https://coldcardwallet.com\",\n                    \"Coldcard Mk2 & Mk3\"\n                  )}\n                </li>\n              </ul>\n              And web browsers:\n              <ul>\n                <li>\n                  {externalLink(\"https://www.google.com/chrome/\", \"Chrome\")}\n                </li>\n                <li>\n                  {externalLink(\n                    \"https://www.mozilla.org/en-US/firefox/new/\",\n                    \"Firefox\"\n                  )}\n                </li>\n              </ul>\n              Seeing a bug or need a feature?\n            </CardContent>\n            <CardActions>\n              <Button href=\"https://github.com/unchained-capital/caravan/issues\">\n                <BugReport /> &nbsp; Report Issue\n              </Button>\n              <Button data-cy=\"run-tests-button\" href=\"#/test\">\n                <Speed /> &nbsp; Run Tests\n              </Button>\n            </CardActions>\n          </Card>\n        </Grid>\n      </Grid>\n    </Grid>\n\n    <Box mt={2}>\n      <Disclaimer />\n    </Box>\n  </div>\n);\n\nexport default Help;\n","import axios from \"axios\";\nimport BigNumber from \"bignumber.js\";\nimport { satoshisToBitcoins, blockExplorerAPIURL } from \"unchained-bitcoin\";\n\n/**\n * Fetch information for signing transactions from block explorer API\n * @param {string} address - The address from which to obtain the information\n * @param {string} network - The network for the transaction to sign (mainnet|testnet)\n * @returns {multisig.UTXO} object for signing transaction inputs\n */\nexport async function blockExplorerGetAddresesUTXOs(address, network) {\n  try {\n    const utxosResult = await axios.get(\n      blockExplorerAPIURL(`/address/${address}/utxo`, network)\n    );\n    const utxos = utxosResult.data;\n    return await Promise.all(\n      utxos.map(async (utxo) => {\n        // FIXME: inefficient, need to cache here by utxo.txid\n        const transactionResult = await axios.get(\n          blockExplorerAPIURL(`/tx/${utxo.txid}/hex`, network)\n        );\n        const transactionHex = transactionResult.data;\n        const amount = new BigNumber(utxo.value);\n        return {\n          confirmed: utxo.status.confirmed,\n          txid: utxo.txid,\n          index: utxo.vout,\n          amount: satoshisToBitcoins(amount).toFixed(8),\n          amountSats: amount,\n          transactionHex,\n          time: utxo.status.block_time,\n        };\n      })\n    );\n  } catch (e) {\n    throw (e.response && e.response.data) || e;\n  }\n}\n\nexport async function blockExplorerGetAddressStatus(address, network) {\n  try {\n    const addressesult = await axios.get(\n      blockExplorerAPIURL(`/address/${address}`, network)\n    );\n    const addressData = addressesult.data;\n    return {\n      used:\n        addressData.chain_stats.funded_txo_count > 0 ||\n        addressData.mempool_stats.funded_txo_count > 0,\n    };\n  } catch (e) {\n    throw (e.response && e.response.data) || e;\n  }\n}\n\nexport async function blockExplorerGetFeeEstimate(network) {\n  try {\n    const feeEstimatesResult = await axios.get(\n      blockExplorerAPIURL(\"/fee-estimates\", network)\n    );\n    const feeEstimates = feeEstimatesResult.data;\n    return Math.ceil(feeEstimates[2]);\n  } catch (e) {\n    throw (e.response && e.response.data) || e;\n  }\n}\n\nexport async function blockExplorerBroadcastTransaction(\n  transactionHex,\n  network\n) {\n  try {\n    const broadcastResult = await axios.post(\n      blockExplorerAPIURL(\"/tx\", network),\n      transactionHex\n    );\n    return broadcastResult.data;\n  } catch (e) {\n    throw (e.response && e.response.data) || e;\n  }\n}\n\n/**\n * @module block_explorer\n */\n","import axios from \"axios\";\nimport BigNumber from \"bignumber.js\";\nimport { bitcoinsToSatoshis } from \"unchained-bitcoin\";\n\nasync function callBitcoind(url, auth, method, params = []) {\n  // FIXME\n  // eslint-disable-next-line no-async-promise-executor\n  return new Promise(async (resolve, reject) => {\n    axios(url, {\n      method: \"post\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      auth,\n      data: {\n        jsonrpc: \"2.0\",\n        id: 0,\n        method: `${method}`,\n        params,\n      },\n    })\n      .then((resp) => resolve(resp.data))\n      .catch(reject);\n  });\n}\n\n/**\n * check if error from bitcoind is address not found in wallet\n * this allows client side interpretation of the error\n * @param {Error} e - the error object to check\n * @returns {boolean} true if the desired error\n */\nexport function isWalletAddressNotFoundError(e) {\n  return (\n    e.response &&\n    e.response.data &&\n    e.response.data.error &&\n    e.response.data.error.code === -4\n  );\n}\n\nexport function bitcoindParams(client) {\n  const { url, username, password } = client;\n  const auth = { username, password };\n  return { url, auth };\n}\n\n/**\n * Fetch unspent outputs for a single or set of addresses\n * @param {Object} options - what is needed to communicate with the RPC\n * @param {string} options.url - where to connect\n * @param {AxiosBasicCredentials} options.auth - username and password\n * @param {string} options.address - The address from which to obtain the information\n * @returns {UTXO} object for signing transaction inputs\n */\nexport async function bitcoindListUnspent({ url, auth, address, addresses }) {\n  try {\n    const addressParam = addresses || [address];\n    const resp = await callBitcoind(url, auth, \"listunspent\", [\n      0,\n      9999999,\n      addressParam,\n    ]);\n    const promises = [];\n    resp.result.forEach((utxo) => {\n      promises.push(callBitcoind(url, auth, \"gettransaction\", [utxo.txid]));\n    });\n    const previousTransactions = await Promise.all(promises);\n    return resp.result.map((utxo, mapindex) => {\n      const amount = new BigNumber(utxo.amount);\n      return {\n        confirmed: (utxo.confirmations || 0) > 0,\n        txid: utxo.txid,\n        index: utxo.vout,\n        amount: amount.toFixed(8),\n        amountSats: bitcoinsToSatoshis(amount),\n        transactionHex: previousTransactions[mapindex].result.hex,\n        time: previousTransactions[mapindex].result.blocktime,\n      };\n    });\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error(\"There was a problem:\", e.message);\n    throw e;\n  }\n}\n\nexport async function bitcoindGetAddressStatus({ url, auth, address }) {\n  try {\n    const resp = await callBitcoind(url, auth, \"getreceivedbyaddress\", [\n      address,\n    ]);\n    if (typeof resp.result === \"undefined\") {\n      throw new Error(`Error: invalid response from ${url}`);\n    }\n    return {\n      used: resp.result > 0,\n    };\n  } catch (e) {\n    if (isWalletAddressNotFoundError(e))\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Address ${address} not found in bitcoind's wallet. Query failed.`\n      );\n    else console.error(e.message); // eslint-disable-line no-console\n    return e;\n  }\n}\n\nexport async function bitcoindEstimateSmartFee({ url, auth, numBlocks = 2 }) {\n  const resp = await callBitcoind(url, auth, \"estimatesmartfee\", [numBlocks]);\n  const feeRate = resp.result.feerate;\n  return Math.ceil(feeRate * 100000);\n}\n\nexport async function bitcoindSendRawTransaction({ url, auth, hex }) {\n  try {\n    const resp = await callBitcoind(url, auth, \"sendrawtransaction\", [hex]);\n    return resp.result;\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.log(\"send tx error\", e);\n    throw (e.response && e.response.data.error.message) || e;\n  }\n}\n\nexport function bitcoindImportMulti({ url, auth, addresses, label, rescan }) {\n  const imports = addresses.map((address) => {\n    return {\n      scriptPubKey: {\n        address,\n      },\n      label,\n      timestamp: 0, // TODO: better option to ensure address history is picked up?\n    };\n  });\n  const params = [url, auth, \"importmulti\", [imports, { rescan }]];\n  if (rescan) {\n    callBitcoind(...params); // TODO: what to do on catch?\n    return new Promise((resolve) => resolve({ result: [] }));\n  }\n  return callBitcoind(...params);\n}\n","import { sortInputs } from \"unchained-bitcoin\";\nimport BigNumber from \"bignumber.js\";\nimport {\n  blockExplorerGetAddresesUTXOs,\n  blockExplorerGetFeeEstimate,\n  blockExplorerBroadcastTransaction,\n  blockExplorerGetAddressStatus,\n} from \"./block_explorer\";\nimport {\n  bitcoindListUnspent,\n  bitcoindEstimateSmartFee,\n  bitcoindSendRawTransaction,\n  bitcoindParams,\n  bitcoindGetAddressStatus,\n  isWalletAddressNotFoundError,\n} from \"./bitcoind\";\n\nexport const BLOCK_EXPLORER = \"public\";\nexport const BITCOIND = \"private\";\n\nfunction fetchAddressUTXOsUnsorted(address, network, client) {\n  if (client.type === BLOCK_EXPLORER) {\n    return blockExplorerGetAddresesUTXOs(address, network);\n  }\n  return bitcoindListUnspent({\n    ...bitcoindParams(client),\n    ...{ address },\n  });\n}\n\n/**\n * Fetch utxos for an address, calculate total balances\n * and return an object describing the addresses state\n * @param {string} address\n * @param {string} network\n * @param {object} client\n * @returns {object} slice object with information gathered for that address\n */\nexport async function fetchAddressUTXOs(address, network, client) {\n  let unsortedUTXOs;\n\n  let updates = {\n    utxos: [],\n    balanceSats: BigNumber(0),\n    fetchedUTXOs: false,\n    fetchUTXOsError: \"\",\n  };\n  try {\n    unsortedUTXOs = await fetchAddressUTXOsUnsorted(address, network, client);\n  } catch (e) {\n    if (client.type === \"private\" && isWalletAddressNotFoundError(e)) {\n      updates = {\n        utxos: [],\n        balanceSats: BigNumber(0),\n        addressKnown: false,\n        fetchedUTXOs: true,\n        fetchUTXOsError: \"\",\n      };\n    } else {\n      updates = { fetchUTXOsError: e.toString() };\n    }\n  }\n\n  // if no utxos then return updates object as is\n  if (!unsortedUTXOs) return updates;\n\n  // sort utxos\n  const utxos = sortInputs(unsortedUTXOs);\n\n  // calculate the total balance from all utxos\n  const balanceSats = utxos\n    .map((utxo) => utxo.amountSats)\n    .reduce(\n      (accumulator, currentValue) => accumulator.plus(currentValue),\n      new BigNumber(0)\n    );\n\n  return {\n    ...updates,\n    balanceSats,\n    utxos,\n    fetchedUTXOs: true,\n    fetchUTXOsError: \"\",\n  };\n}\n\nexport function getAddressStatus(address, network, client) {\n  if (client.type === BLOCK_EXPLORER) {\n    return blockExplorerGetAddressStatus(address, network);\n  }\n  return bitcoindGetAddressStatus({\n    ...bitcoindParams(client),\n    ...{ address },\n  });\n}\n\nexport function fetchFeeEstimate(network, client) {\n  if (client.type === BLOCK_EXPLORER) {\n    return blockExplorerGetFeeEstimate(network);\n  }\n  return bitcoindEstimateSmartFee({\n    ...bitcoindParams(client),\n    ...{ numBlocks: 1 },\n  });\n}\n\nexport function broadcastTransaction(transactionHex, network, client) {\n  if (client.type === BLOCK_EXPLORER) {\n    return blockExplorerBroadcastTransaction(transactionHex, network);\n  }\n  return bitcoindSendRawTransaction({\n    ...bitcoindParams(client),\n    ...{ hex: transactionHex },\n  });\n}\n","import { DEFAULT_CHANGE_PREFIX, CHANGE_INDEX } from \"./constants\";\n\nconst initSortDir = (order) => (order === \"asc\" ? -1 : 1);\n\n/**\n * Function to compare two slices and determine sort\n * order by BIP32 path\n * @param {object} a - slice a for comparison\n * @param {object} b - slice b for comparison\n * @param {string} [orderDir = \"asc\"] - direction for ordering (desc or asc)\n */\nexport function compareSlicesByPath(a, b, orderDir = \"asc\") {\n  if (!a.bip32Path && !b.bip32Path)\n    throw new Error(\"Mising BIP32 path for comparing slices.\");\n\n  const direction = initSortDir(orderDir);\n\n  if (a.change && !b.change) return direction;\n  if (!a.change && b.change) return -direction;\n  const aint = parseInt(a.bip32Path.split(\"/\").reverse()[0], 10);\n  const bint = parseInt(b.bip32Path.split(\"/\").reverse()[0], 10);\n  return aint > bint ? direction : -direction;\n}\n\n/**\n * Function to compare two slices and determine sort\n * order by balance\n * @param {object} a - slice a for comparison\n * @param {object} b - slice b for comparison\n * @param {string} [orderDir = \"asc\"] - direction for ordering (desc or asc)\n */\nexport function compareSlicesByBalance(a, b, orderDir = \"asc\") {\n  if (!a.balanceSats && !b.balanceSats)\n    throw new Error(\"Missing balance for comparing slices\");\n\n  const direction = initSortDir(orderDir);\n\n  if (a.balanceSats.isEqualTo(b.balanceSats)) return 0;\n  return a.balanceSats.isGreaterThan(b.balanceSats) ? direction : -direction;\n}\n\n/**\n * Function to compare two slices and determine sort\n * order by total UTXO count\n * @param {object} a - slice a for comparison\n * @param {object} b - slice b for comparison\n * @param {string} [orderDir = \"asc\"] - direction for ordering (desc or asc)\n */\nexport function compareSlicesByUTXOCount(a, b, orderDir = \"asc\") {\n  if (!a.utxos && !b.utxos)\n    throw new Error(\"Missing utxo array for comparing slices\");\n  const direction = initSortDir(orderDir);\n  if (a.utxos.length === b.utxos.length) return 0;\n  return a.utxos.length > b.utxos.length ? direction : -direction;\n}\n\n/**\n * Function to compare two slices and determine sort\n * order by lastUsed time\n * @param {object} a - slice a for comparison\n * @param {object} b - slice b for comparison\n * @param {string} [orderDir = \"asc\"] - direction for ordering (desc or asc)\n * @returns {number}\n */\nexport function compareSlicesByTime(a, b, orderDir = \"asc\") {\n  const direction = initSortDir(orderDir);\n  if (!a.utxos && !b.utxos && !a.lastUsed && !b.lastUsed) return 0;\n\n  // when ascending, spent is after unused but before used and unspent\n  if (a.lastUsed === \"Spent\")\n    return b.lastUsed && b.lastUsed !== \"Spent\" ? -direction : direction;\n  if (b.lastUsed === \"Spent\")\n    return a.lastUsed && a.lastUsed !== \"Spent\" ? direction : -direction;\n\n  // if there is a lastUsedTime param then we should be able to compare those\n  if (a.lastUsedTime && b.lastUsedTime) {\n    if (a.lastUsedTime === b.lastUsedTime) return 0;\n    return a.lastUsedTime >= b.lastUsedTime ? direction : -direction;\n  }\n\n  if (a.lastUsedTime && (!b.lastUsedTime || b.utxos.length === 0)) {\n    return direction;\n  }\n\n  if (b.lastUsedTime && (!a.lastUsedTime || a.utxos.length === 0)) {\n    return -direction;\n  }\n\n  if (a.utxos.length === 0) {\n    return b.utxos.length === 0 ? 0 : direction;\n  }\n  if (b.utxos.length === 0) {\n    return a.utxos.length === 0 ? 0 : -direction;\n  }\n  const amax = Math.max(...a.utxos.map((utxo) => utxo.time));\n  const bmax = Math.max(...b.utxos.map((utxo) => utxo.time));\n\n  if (Number.isNaN(amax) && Number.Number.isNaN(bmax)) return 0;\n  if (Number.isNaN(amax)) return direction;\n  if (Number.isNaN(bmax)) return -direction;\n  return amax > bmax ? direction : -direction;\n}\n\nexport function isChange(path) {\n  // if the prefix matches the change prefix\n  // and there is only 1 more index after, then it is change\n  const prefixLength = DEFAULT_CHANGE_PREFIX.length;\n  if (\n    path.slice(0, prefixLength) === DEFAULT_CHANGE_PREFIX &&\n    // this checks that the only thing after the change prefix is an index\n    path.slice(prefixLength).match(/^([0-9]+)$/g)\n  )\n    return true;\n\n  // if the last two indexes are not hardened and the second to last\n  // index in the path is the change index, then it is change\n  const pathIndexMatcher = /\\/([0-9]+('?))/g;\n  const indexes = path.match(pathIndexMatcher).slice(-2);\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const index of indexes) {\n    // neither of the final two indexes should be hardened\n    // if it is change\n    if (index.includes(\"'\")) return false;\n  }\n\n  // if two matching indexes found and first is change, e.g. /1/0\n  // then it is change\n  if (indexes[0] === CHANGE_INDEX && indexes.length === 2) return true;\n  return false;\n}\n","import { createSelector } from \"reselect\";\n\n// convert slice objects to array of slice values\n// only care about inbound to deposit account, not change\nconst getDepositSlices = (state) => Object.values(state.wallet.deposits.nodes);\nconst getWalletSlices = (state) => [\n  ...Object.values(state.wallet.deposits.nodes),\n  ...Object.values(state.wallet.change.nodes),\n];\n\nconst getAddressType = (state) => state.settings.addressType;\nconst getNetwork = (state) => state.settings.network;\nconst getTotalSigners = (state) => state.settings.totalSigners;\nconst getRequiredSigners = (state) => state.settings.requiredSigners;\nconst getStartingAddressIndex = (state) => state.settings.startingAddressIndex;\nconst getWalletName = (state) => state.wallet.common.walletName;\nconst getClientDetails = (state) => {\n  if (state.client.type === \"private\") {\n    return `{\n    \"type\": \"private\",\n    \"url\": \"${state.client.url}\",\n    \"username\": \"${state.client.username}\"\n  }`;\n  }\n  return `{\n    \"type\": \"public\"\n  }`;\n};\n\nconst extendedPublicKeyImporterBIP32Path = (state, number) => {\n  const { extendedPublicKeyImporters } = state.quorum;\n  const extendedPublicKeyImporter = extendedPublicKeyImporters[number];\n  const bip32Path =\n    extendedPublicKeyImporter.method === \"text\"\n      ? \"Unknown (make sure you have written this down previously!)\"\n      : extendedPublicKeyImporter.bip32Path;\n  const rootFingerprint =\n    extendedPublicKeyImporter.rootXfp === \"Unknown\"\n      ? \"00000000\"\n      : extendedPublicKeyImporter.rootXfp;\n  return extendedPublicKeyImporter.method === \"unknown\"\n    ? `    {\n        \"name\": \"${extendedPublicKeyImporter.name}\",\n        \"bip32Path\": \"${bip32Path}\",\n        \"xpub\": \"${extendedPublicKeyImporter.extendedPublicKey}\",\n        \"xfp\" : \"${rootFingerprint}\"\n        }`\n    : `    {\n        \"name\": \"${extendedPublicKeyImporter.name}\",\n        \"bip32Path\": \"${bip32Path}\",\n        \"xpub\": \"${extendedPublicKeyImporter.extendedPublicKey}\",\n        \"xfp\" : \"${rootFingerprint}\",\n        \"method\": \"${extendedPublicKeyImporter.method}\"\n      }`;\n};\n\nconst getExtendedPublicKeysBIP32Paths = (state) => {\n  const totalSigners = getTotalSigners(state);\n  const extendedPublicKeyImporterBIP32Paths = [];\n  for (let i = 1; i <= totalSigners; i += 1) {\n    extendedPublicKeyImporterBIP32Paths.push(\n      `${extendedPublicKeyImporterBIP32Path(state, i)}${\n        i < totalSigners ? \",\" : \"\"\n      }`\n    );\n  }\n  return extendedPublicKeyImporterBIP32Paths.join(\"\\n\");\n};\n\n/**\n * @description cycle through all slices to calculate total balance of all utxos\n * from all slices including pending.\n */\nexport const getTotalBalance = createSelector(getWalletSlices, (slices) => {\n  return slices.reduce((balance, slice) => {\n    const sliceTotal = slice.utxos.reduce((total, utxo) => {\n      return total + parseInt(utxo.amountSats, 10);\n    }, 0);\n    return balance + sliceTotal;\n  }, 0);\n});\n\nexport const getPendingBalance = createSelector(\n  getDepositSlices,\n  // iterate through all slices to add up the pending balance\n  (slices) => {\n    // reduce slices to calculate unconfirmed utxos from each slice\n    return slices.reduce((balance, currentSlice) => {\n      // if the current slice has no UTXOs, then continue\n      if (!currentSlice.utxos.length) return balance;\n      // otherwise, loop through available utxos and add balance of those\n      // that are unconfirmed\n      const sliceBalance = currentSlice.utxos.reduce((total, utxo) => {\n        if (!utxo.confirmed) return total + parseInt(utxo.amountSats, 10);\n        return total;\n      }, 0);\n\n      // add slice's pending balance to aggregated balance\n      return sliceBalance + balance;\n    }, 0);\n  }\n);\n\n/**\n * @description selector that subtracts pending balance (calculated with\n * other selector) from total balance of each braid which is stored in the state\n */\nexport const getConfirmedBalance = createSelector(\n  [getTotalBalance, getPendingBalance],\n  (totalBalance, pendingBalance) => totalBalance - pendingBalance\n);\n\n/**\n * @description Returns a selector with all slices from both deposit and change braids\n * also adds a \"lastUsed\" property for each slice\n */\nexport const getSlicesWithLastUsed = createSelector(\n  getWalletSlices,\n  (slices) => {\n    return slices.map((slice) => {\n      if (!slice.utxos.length && slice.addressUsed)\n        return { ...slice, lastUsed: \"Spent\" };\n\n      // if no utxos and no recorded balanceSats then just return the slice unchanged\n      if (!slice.utxos.length && slice.balanceSats.isEqualTo(0)) return slice;\n\n      // find the last UTXO time for the last used time for that slice\n      const maxtime = Math.max(...slice.utxos.map((utxo) => utxo.time));\n\n      // if no max was able to be found, but we still have a balanceSats\n      // then we can can assume the utxo is pending\n      if (\n        Number.isNaN(maxtime) ||\n        (slice.balanceSats.isGreaterThan(0) && !slice.utxos.length)\n      )\n        return { ...slice, lastUsed: \"Pending\" };\n      return {\n        ...slice,\n        lastUsed: new Date(1000 * maxtime).toLocaleDateString(),\n        lastUsedTime: maxtime,\n      };\n    });\n  }\n);\n\n/**\n * Gets the set of spendable slices, i.e. ones that don't have a\n * pending utxo and are not spent\n */\nexport const getSpendableSlices = createSelector(\n  getSlicesWithLastUsed,\n  (slices) => {\n    return slices.filter(\n      (slice) =>\n        // pending change is considered spendable\n        (slice.lastUsed !== \"Pending\" || slice.change) &&\n        slice.lastUsed !== \"Spent\" &&\n        slice.utxos.length\n    );\n  }\n);\n\n/**\n * @description Returns a selector that provides all spent slices, i.e.\n * All slices that have been used but have no balance left.\n */\nexport const getSpentSlices = createSelector(getSlicesWithLastUsed, (slices) =>\n  slices.filter((slice) => slice.addressUsed && slice.balanceSats.isEqualTo(0))\n);\n\n/**\n * @description Returns a selector that provides all slices with an active balance\n */\nexport const getSlicesWithBalance = createSelector(\n  getSlicesWithLastUsed,\n  (slices) => slices.filter((slice) => slice.balanceSats.isGreaterThan(0))\n);\n\n/**\n * @description Returns a selector that provides all unused slices,\n * i.e. where the balance is zero and the address has not been used\n */\nexport const getZeroBalanceSlices = createSelector(\n  getSlicesWithLastUsed,\n  (slices) =>\n    slices.filter(\n      (slice) => slice.balanceSats.isEqualTo(0) && !slice.addressUsed\n    )\n);\n\n/**\n * @description Returns a selector of all wallet slices\n * where the status of that slice is not known.\n */\nexport const getUnknownAddressSlices = createSelector(\n  getWalletSlices,\n  (slices) => slices.filter((slice) => !slice.addressKnown)\n);\n\n/**\n * @description returns an array of all addresses of slices\n * where the state of that slice is not known\n */\nexport const getUnknownAddresses = createSelector(\n  [getWalletSlices, getUnknownAddressSlices],\n  (slices) => slices.map((slice) => slice.multisig.address)\n);\n\n/**\n * @description Returns a selector of all slices from the _deposit_ braid\n * where the address hasn't been used yet.\n */\nexport const getDepositableSlices = createSelector(getDepositSlices, (slices) =>\n  slices.filter((slice) => slice.balanceSats.isEqualTo(0) && !slice.addressUsed)\n);\n\n/**\n * @description Returns a selector of the text needed to construct a wallet\n * details file.\n */\nexport const getWalletDetailsText = createSelector(\n  [\n    getWalletName,\n    getAddressType,\n    getNetwork,\n    getClientDetails,\n    getRequiredSigners,\n    getTotalSigners,\n    getExtendedPublicKeysBIP32Paths,\n    getStartingAddressIndex,\n  ],\n  (\n    walletName,\n    addressType,\n    network,\n    clientDetails,\n    requiredSigners,\n    totalSigners,\n    extendedPublicKeys,\n    startingAddressIndex\n  ) => {\n    return `{\n  \"name\": \"${walletName}\",\n  \"addressType\": \"${addressType}\",\n  \"network\": \"${network}\",\n  \"client\":  ${clientDetails},\n  \"quorum\": {\n    \"requiredSigners\": ${requiredSigners},\n    \"totalSigners\": ${totalSigners}\n  },\n  \"extendedPublicKeys\": [\n    ${extendedPublicKeys}\n  ],\n  \"startingAddressIndex\": ${startingAddressIndex}\n}`;\n  }\n);\n","import BigNumber from \"bignumber.js\";\nimport {\n  estimateMultisigTransactionFee,\n  satoshisToBitcoins,\n} from \"unchained-bitcoin\";\nimport { getSpendableSlices, getConfirmedBalance } from \"../selectors/wallet\";\nimport { DUST_IN_BTC } from \"../utils/constants\";\n\nexport const CHOOSE_PERFORM_SPEND = \"CHOOSE_PERFORM_SPEND\";\n\nexport const SET_REQUIRED_SIGNERS = \"SET_REQUIRED_SIGNERS\";\nexport const SET_TOTAL_SIGNERS = \"SET_TOTAL_SIGNERS\";\n\nexport const SET_INPUTS = \"SET_INPUTS\";\n\nexport const ADD_OUTPUT = \"ADD_OUTPUT\";\nexport const SET_OUTPUT_ADDRESS = \"SET_OUTPUT_ADDRESS\";\nexport const SET_OUTPUT_AMOUNT = \"SET_OUTPUT_AMOUNT\";\nexport const DELETE_OUTPUT = \"DELETE_OUTPUT\";\n\nexport const SET_FEE_RATE = \"SET_FEE_RATE\";\nexport const SET_FEE = \"SET_FEE\";\n\nexport const FINALIZE_OUTPUTS = \"FINALIZE_OUTPUTS\";\nexport const RESET_OUTPUTS = \"RESET_OUTPUTS\";\n\nexport const SET_TXID = \"SET_TXID\";\nexport const RESET_TRANSACTION = \"RESET_TRANSACTION\";\nexport const SET_IS_WALLET = \"SET_IS_WALLET\";\nexport const SET_CHANGE_OUTPUT_INDEX = \"SET_CHANGE_OUTPUT_INDEX\";\nexport const SET_CHANGE_OUTPUT_MULTISIG = \"SET_CHANGE_OUTPUT_MULTISIG\";\nexport const UPDATE_AUTO_SPEND = \"UPDATE_AUTO_SPEND\";\nexport const SET_CHANGE_ADDRESS = \"SET_CHANGE_ADDRESS\";\nexport const SET_SIGNING_KEY = \"SET_SIGNING_KEY\";\nexport const SET_SPEND_STEP = \"SET_SPEND_STEP\";\nexport const SET_BALANCE_ERROR = \"SET_BALANCE_ERROR\";\nexport const SPEND_STEP_CREATE = 0;\nexport const SPEND_STEP_PREVIEW = 1;\nexport const SPEND_STEP_SIGN = 2;\n\nexport function choosePerformSpend() {\n  return {\n    type: CHOOSE_PERFORM_SPEND,\n  };\n}\n\nexport function setRequiredSigners(number) {\n  return {\n    type: SET_REQUIRED_SIGNERS,\n    value: number,\n  };\n}\n\nexport function setTotalSigners(number) {\n  return {\n    type: SET_TOTAL_SIGNERS,\n    value: number,\n  };\n}\n\nexport function setInputs(inputs) {\n  return {\n    type: SET_INPUTS,\n    value: inputs,\n  };\n}\n\nexport function addOutput() {\n  return {\n    type: ADD_OUTPUT,\n  };\n}\n\nexport function setChangeOutputIndex(number) {\n  return {\n    type: SET_CHANGE_OUTPUT_INDEX,\n    value: number,\n  };\n}\n\nexport function setChangeOutputMultisig(number, multisig) {\n  return {\n    type: SET_CHANGE_OUTPUT_MULTISIG,\n    number,\n    value: multisig,\n  };\n}\n\nexport function setOutputAddress(number, address) {\n  return {\n    type: SET_OUTPUT_ADDRESS,\n    number,\n    value: address,\n  };\n}\n\nexport function setOutputAmount(number, amountString) {\n  return {\n    type: SET_OUTPUT_AMOUNT,\n    number,\n    value: amountString,\n  };\n}\n\nexport function setChangeAddressAction(value) {\n  return {\n    type: SET_CHANGE_ADDRESS,\n    value,\n  };\n}\n\nexport function setChangeOutput({ value, address }) {\n  return (dispatch, getState) => {\n    const {\n      spend: {\n        transaction: { outputs, changeOutputIndex },\n      },\n    } = getState();\n    // add output for change if there's none set (or it's set to zero)\n    // if there's a change index then we use that\n    // otherwise put it at the end of the outputs\n    if (!changeOutputIndex) dispatch(addOutput());\n\n    // output/change indexes are not zero-indexed\n    const index = changeOutputIndex || outputs.length + 1;\n    dispatch(setChangeOutputIndex(index));\n    dispatch(setChangeAddressAction(address));\n    dispatch(setOutputAddress(index, address));\n    dispatch(setOutputAmount(index, value));\n  };\n}\n\nexport function deleteOutput(number) {\n  return {\n    type: DELETE_OUTPUT,\n    number,\n  };\n}\n\nexport function deleteChangeOutput() {\n  return (dispatch, getState) => {\n    const { changeOutputIndex } = getState().spend.transaction;\n    if (!changeOutputIndex) return;\n\n    dispatch(deleteOutput(changeOutputIndex));\n  };\n}\n\nexport function setFeeRate(valueString) {\n  return {\n    type: SET_FEE_RATE,\n    value: valueString,\n  };\n}\n\nexport function setFee(valueString) {\n  return {\n    type: SET_FEE,\n    value: valueString,\n  };\n}\n\nexport function finalizeOutputs(finalized) {\n  return {\n    type: FINALIZE_OUTPUTS,\n    value: finalized,\n  };\n}\n\nexport function resetOutputs() {\n  return {\n    type: RESET_OUTPUTS,\n  };\n}\n\nexport function setBalanceError(message) {\n  return {\n    type: SET_BALANCE_ERROR,\n    value: message,\n  };\n}\n\nexport function resetTransaction() {\n  return {\n    type: RESET_TRANSACTION,\n  };\n}\n\nexport function setTXID(txid) {\n  return {\n    type: SET_TXID,\n    value: txid,\n  };\n}\n\nexport function setIsWallet() {\n  return {\n    type: SET_IS_WALLET,\n  };\n}\n\nexport function updateAutoSpendAction(value) {\n  return {\n    type: UPDATE_AUTO_SPEND,\n    value,\n  };\n}\n\nexport function setSigningKey(number, extendedPublicKeyImporterIndex) {\n  return {\n    type: SET_SIGNING_KEY,\n    number,\n    value: extendedPublicKeyImporterIndex,\n  };\n}\n\nexport function setSpendStep(value) {\n  return {\n    type: SET_SPEND_STEP,\n    value,\n  };\n}\n\n/**\n * @description Given an output index and the current state of the transaction,\n * calculate an estimated fee for a tx with all spendable utxos as inputs,\n * and then use that to determine value of an output that spends all spendable funds\n * minus fee. Dispatches an action to add that value to the given output.\n * @param {Number} outputIndex - 1-indexed location of the output\n * to add all remaining spendable funds to\n */\nexport function setMaxSpendOnOutput(outputIndex) {\n  return (dispatch, getState) => {\n    const spendableSlices = getSpendableSlices(getState());\n    const confirmedBalance = getConfirmedBalance(getState());\n    const {\n      settings: { addressType, requiredSigners, totalSigners },\n      spend: {\n        transaction: { outputs, feeRate },\n      },\n    } = getState();\n    const numInputs = spendableSlices.reduce(\n      (count, slice) => count + slice.utxos.length,\n      0\n    );\n    const estimatedFee = estimateMultisigTransactionFee({\n      addressType,\n      numInputs,\n      numOutputs: outputs.length,\n      m: requiredSigners,\n      n: totalSigners,\n      feesPerByteInSatoshis: feeRate,\n    });\n\n    const totalOutputValue = outputs.reduce(\n      (total, output) =>\n        total.plus(output.amount.length ? output.amountSats : 0),\n      new BigNumber(0)\n    );\n\n    const spendAllAmount = satoshisToBitcoins(\n      new BigNumber(confirmedBalance)\n        .minus(outputs.length > 1 ? totalOutputValue : 0)\n        .minus(estimatedFee)\n    );\n\n    if (\n      (spendAllAmount.isLessThanOrEqualTo(satoshisToBitcoins(estimatedFee)) &&\n        outputs.length > 1) ||\n      spendAllAmount.isLessThan(DUST_IN_BTC)\n    )\n      return dispatch(\n        setBalanceError(\n          \"Not enough available funds for max spend. Clear other outputs or wait for incoming deposits to confirm.\"\n        )\n      );\n    return dispatch(setOutputAmount(outputIndex, spendAllAmount.toFixed()));\n  };\n}\n","export const SET_ERROR_NOTIFICATION = \"SET_ERROR_NOTIFICATION\";\nexport const CLEAR_ERROR_NOTIFICATION = \"CLEAR_ERROR_NOTIFICATION\";\n\nexport function setErrorNotification(message) {\n  return {\n    type: SET_ERROR_NOTIFICATION,\n    value: message,\n  };\n}\n\nexport function clearErrorNotification() {\n  return {\n    type: CLEAR_ERROR_NOTIFICATION,\n  };\n}\n","import {\n  estimateMultisigTransactionFee,\n  satoshisToBitcoins,\n} from \"unchained-bitcoin\";\n\nimport BigNumber from \"bignumber.js\";\nimport { fetchAddressUTXOs } from \"../blockchain\";\nimport { isChange } from \"../utils/slices\";\nimport { naiveCoinSelection } from \"../utils\";\nimport {\n  setBalanceError,\n  setChangeOutput,\n  setInputs,\n  setFee,\n  finalizeOutputs,\n} from \"./transactionActions\";\nimport { setErrorNotification } from \"./errorNotificationActions\";\nimport { getSpendableSlices } from \"../selectors/wallet\";\n\nexport const UPDATE_DEPOSIT_SLICE = \"UPDATE_DEPOSIT_SLICE\";\nexport const UPDATE_CHANGE_SLICE = \"UPDATE_CHANGE_SLICE\";\nexport const RESET_NODES_SPEND = \"RESET_NODES_SPEND\";\nexport const UPDATE_WALLET_NAME = \"UPDATE_WALLET_NAME\";\nexport const UPDATE_WALLET_MODE = \"UPDATE_WALLET_MODE\";\nexport const RESET_WALLET_VIEW = \"RESET_WALLET_VIEW\";\nexport const RESET_WALLET = \"RESET_WALLET\";\nexport const SPEND_SLICES = \"SPEND_SLICES\";\nexport const INITIAL_LOAD_COMPLETE = \"INITIAL_LOAD_COMPLETE\";\nexport const RESET_NODES_FETCH_ERRORS = \"RESET_NODES_FETCH_ERRORS\";\n\nexport const WALLET_MODES = {\n  VIEW: 0,\n  DEPOSIT: 1,\n  SPEND: 2,\n};\n\nexport function updateDepositSliceAction(value) {\n  return {\n    type: UPDATE_DEPOSIT_SLICE,\n    value: {\n      ...value,\n      ...{ change: false },\n    },\n  };\n}\n\nexport function updateChangeSliceAction(value) {\n  return {\n    type: UPDATE_CHANGE_SLICE,\n    value: {\n      ...value,\n      ...{ change: true },\n    },\n  };\n}\n\nexport function resetNodesSpend() {\n  return {\n    type: RESET_NODES_SPEND,\n  };\n}\n\n/**\n * @description This dispatcher goes through the necessary steps and dispatching\n * related actions for the process of selecting coins for a transaction.\n * 1. Get all spendable slices that can be used for inputs\n * 2. Select the utxos needed to fund the tx and determine if change is needed\n * 3. Set a change output if necessary\n * 4. Determine and set fee\n * 5. Mark all slices being spent so the store is aware that they've been selected\n */\nexport function autoSelectCoins() {\n  // eslint-disable-next-line consistent-return\n  return (dispatch, getState) => {\n    const {\n      settings,\n      spend: { transaction },\n      wallet: {\n        change: {\n          nextNode: {\n            multisig: { address: changeAddress },\n          },\n        },\n      },\n    } = getState();\n    const { totalSigners: n, requiredSigners: m, addressType } = settings;\n    const { outputs, feeRate: feesPerByteInSatoshis } = transaction;\n    const spendableSlices = getSpendableSlices(getState());\n\n    let selectedUtxos;\n    let changeRequired;\n\n    // select coins and catch error if any occurs during selection\n    try {\n      [selectedUtxos, changeRequired] = naiveCoinSelection({\n        outputs,\n        feesPerByteInSatoshis,\n        m,\n        n,\n        addressType,\n        slices: spendableSlices,\n      });\n    } catch (e) {\n      return dispatch(setBalanceError(e.message));\n    }\n\n    // determine fee based on rate, selected utxos and\n    // if change output is required\n    let fee;\n    const options = {\n      addressType,\n      numInputs: selectedUtxos.length,\n      m,\n      n,\n      feesPerByteInSatoshis,\n    };\n\n    // add change output if necessary and make fee calculation\n    if (changeRequired) {\n      // calculate output, input, and fee totals to determine change amount\n      const outputsTotal = outputs.reduce(\n        (total, output) => total.plus(output.amountSats),\n        new BigNumber(0)\n      );\n      const inputsTotalSats = selectedUtxos.reduce(\n        (total, utxo) => total.plus(utxo.amountSats),\n        new BigNumber(0)\n      );\n      fee = estimateMultisigTransactionFee({\n        ...options,\n        numOutputs: outputs.length + 1,\n      });\n\n      const changeAmount = inputsTotalSats\n        .minus(fee)\n        .minus(outputsTotal)\n        .toFixed(8);\n\n      dispatch(\n        setChangeOutput({\n          address: changeAddress,\n          value: satoshisToBitcoins(changeAmount).toFixed(),\n        })\n      );\n    } else {\n      fee = estimateMultisigTransactionFee({\n        ...options,\n        numOutputs: outputs.length,\n      });\n    }\n\n    dispatch(setFee(satoshisToBitcoins(fee).toFixed()));\n    // set chosen selectedUtxos in the transaction store\n    dispatch(setInputs(selectedUtxos));\n    dispatch(finalizeOutputs(true));\n  };\n}\n\n/**\n * @description Given the state of the transaction store, check status of\n * the slices being used in the spend tx and update them once changed state is confirmed.\n * @param {Object} changeSlice - the slice that was chosen as the change output\n * @param {number} retries - number of retries\n * @param {Set} skipAddresses - set of addresses to skip\n */\nexport function updateTxSlices(\n  changeSlice,\n  retries = 10,\n  skipAddresses = new Set()\n) {\n  // eslint-disable-next-line consistent-return\n  return async (dispatch, getState) => {\n    const {\n      settings: { network },\n      client,\n      spend: {\n        transaction: { changeAddress, inputs, txid },\n      },\n      wallet: {\n        deposits: { nextNode: nextDepositSlice, nodes: depositSlices },\n        change: { nodes: changeSlices },\n      },\n    } = getState();\n\n    // utility function for getting utxo set of an address\n    // and formatting the result in a way we can use\n    const fetchSliceStatus = async (address, bip32Path) => {\n      const utxos = await fetchAddressUTXOs(address, network, client);\n      return {\n        addressUsed: true,\n        change: isChange(bip32Path),\n        address,\n        bip32Path,\n        ...utxos,\n      };\n    };\n\n    // array of slices we want to query\n    const slices = [...inputs];\n\n    // if there is a change address in the transaction\n    // then we want to query the state of that slice as well\n    if (changeSlice && changeSlice.multisig.address === changeAddress) {\n      slices.push(changeSlice);\n    }\n\n    // array to store results from queries for each slice\n    const sliceUpdates = [];\n\n    // track which slices are already being queried since\n    // the fetch command will get all utxos for an address\n    // and some inputs might be for the same address\n    const addressSet = new Set();\n\n    // go through each slice and see if it needs to be queried\n    slices.forEach((slice) => {\n      const { address } = slice.multisig;\n      // if address isn't already being queried and isn't in the\n      // set of addresses to skip (which means it's already been\n      // successfully updated), then fetchSliceStatus\n      if (!addressSet.has(address) && !skipAddresses.has(address)) {\n        addressSet.add(address);\n        // setting up async network calls to await all of them\n        sliceUpdates.push(fetchSliceStatus(address, slice.bip32Path));\n      }\n    });\n\n    let queriedSlices;\n    try {\n      queriedSlices = await Promise.all(sliceUpdates);\n    } catch (e) {\n      return dispatch(\n        setErrorNotification(\n          `There was a problem updating wallet state. Try a refresh. Error: ${e.message}`\n        )\n      );\n    }\n\n    // once all queries have completed we can confirm which have been updated\n    // and dispatch the changes to the store\n    for (let i = 0; i < queriedSlices.length; i += 1) {\n      const slice = queriedSlices[i];\n      const utxoCount = slice.change\n        ? changeSlices[slice.bip32Path].utxos.length\n        : depositSlices[slice.bip32Path].utxos.length;\n\n      // if the utxo count is not the same then we can reliably update\n      // this slice and can skip in any future calls\n      if (slice && slice.utxos && slice.utxos.length !== utxoCount) {\n        dispatch({\n          type: slice.change ? UPDATE_CHANGE_SLICE : UPDATE_DEPOSIT_SLICE,\n          value: slice,\n        });\n        skipAddresses.add(slice.address);\n      }\n    }\n\n    // if not all slices queried were successful, then we want to recursively call\n    // updateTxSlices, counting down retries and with the full set of successful queries\n    // ALL input slices must return a different utxo set otherwise something went wrong\n    if (skipAddresses.size !== queriedSlices.length && retries)\n      return setTimeout(\n        () => dispatch(updateTxSlices(changeSlice, retries - 1, skipAddresses)),\n        750\n      );\n\n    // if we're out of retries and counts are still the same\n    // then we're done trying and should show an error\n    if (!retries) {\n      let message = `There was a problem updating the wallet balance.\n      It is recommended you refresh the wallet to make sure UTXO current set is up to date.`;\n      if (txid && txid.length) message += ` Transaction ID: ${txid}`;\n      return dispatch(setErrorNotification(message));\n    }\n\n    // Check the next deposit slice just in case a spend is to own wallet.\n    // This doesn't catch all self-spend cases but should catch the majority\n    // to avoid any confusion for less technical users.\n    const updatedSlice = await fetchSliceStatus(\n      nextDepositSlice.multisig.address,\n      nextDepositSlice.bip32Path\n    );\n\n    // if its status has changed and the utxo set for the next\n    // deposit slice is different, then update it as well\n    if (\n      updatedSlice.utxos.length !==\n      depositSlices[updatedSlice.bip32Path].utxos.length\n    )\n      return dispatch({ type: UPDATE_DEPOSIT_SLICE, value: updatedSlice });\n  };\n}\n\nexport function setWalletModeAction(value) {\n  return {\n    type: UPDATE_WALLET_MODE,\n    value,\n  };\n}\n\nexport function updateWalletNameAction(number, value) {\n  return {\n    type: UPDATE_WALLET_NAME,\n    value,\n  };\n}\n\nexport function resetWalletView() {\n  return {\n    type: RESET_WALLET_VIEW,\n  };\n}\n\nexport function resetWallet() {\n  return {\n    type: RESET_WALLET,\n  };\n}\n\nexport function initialLoadComplete() {\n  return {\n    type: INITIAL_LOAD_COMPLETE,\n  };\n}\n\nexport function resetNodesFetchErrors() {\n  return {\n    type: RESET_NODES_FETCH_ERRORS,\n  };\n}\n","import {\n  updateDepositSliceAction,\n  updateChangeSliceAction,\n} from \"./walletActions\";\nimport { fetchAddressUTXOs, getAddressStatus } from \"../blockchain\";\nimport { setErrorNotification } from \"./errorNotificationActions\";\n\nexport const UPDATE_BRAID_SLICE = \"UPDATE_BRAID_SLICE\";\n\n/**\n * Given an array of slices from one or more braids,\n * query the utxos for that slice (i.e. at that address) and\n * check if the address is \"used\". Will then dispatch actions\n * to update the data for each slice\n * @param {array<object>} slices - array of slices from one or more braids\n */\nexport const fetchSliceData = async (slices) => {\n  return async (dispatch, getState) => {\n    const { network } = getState().settings;\n    const { client } = getState();\n\n    try {\n      // Create a list of the async calls for updating the slice data.\n      // This lets us run these requests in parallel with a Promise.all\n      const sliceDataPromises = slices.map((slice) => {\n        const { address } = slice.multisig;\n        // creating a tuple of async calls that will need to be resolved\n        // for each slice we're querying for\n        return Promise.all([\n          fetchAddressUTXOs(address, network, client),\n          getAddressStatus(address, network, client),\n        ]);\n      });\n\n      // wait until we've gotten the updates for each slice\n      const queriedSlices = await Promise.all(sliceDataPromises);\n\n      // each slice had two queries and should be in a tuple\n      queriedSlices.forEach(([addressData, addressStatus], index) => {\n        // reference to the original slice object passed into action creator\n        const slice = slices[index];\n\n        // for each queried slice, we need to check if there are utxos\n        // skip if no updates\n        if (!addressData || !addressData.utxos.length) return;\n\n        const updater = slice.change\n          ? updateChangeSliceAction\n          : updateDepositSliceAction;\n        const updatedSlice = {\n          bip32Path: slice.bip32Path,\n          addressKnown: true,\n          ...addressData,\n          addressStatus,\n        };\n        dispatch(updater(updatedSlice));\n      });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(\n        \"There was a problem getting updated braid data:\",\n        e.message\n      );\n      dispatch(setErrorNotification(e.message));\n    }\n  };\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { SvgIcon } from \"@material-ui/core\";\nimport { MAINNET } from \"unchained-bitcoin\";\n\nconst BitcoinIcon = ({ network }) => (\n  <SvgIcon\n    data-cy=\"bitcoin-icon\"\n    htmlColor={network === MAINNET ? \"orange\" : \"grey\"}\n  >\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      aria-hidden=\"true\"\n      focusable=\"false\"\n      data-prefix=\"fab\"\n      data-icon=\"bitcoin\"\n      className=\"svg-inline--fa fa-bitcoin fa-w-16\"\n      role=\"img\"\n      viewBox=\"0 0 512 512\"\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-141.651-35.33c4.937-32.999-20.191-50.739-54.55-62.573l11.146-44.702-27.213-6.781-10.851 43.524c-7.154-1.783-14.502-3.464-21.803-5.13l10.929-43.81-27.198-6.781-11.153 44.686c-5.922-1.349-11.735-2.682-17.377-4.084l.031-.14-37.53-9.37-7.239 29.062s20.191 4.627 19.765 4.913c11.022 2.751 13.014 10.044 12.68 15.825l-12.696 50.925c.76.194 1.744.473 2.829.907-.907-.225-1.876-.473-2.876-.713l-17.796 71.338c-1.349 3.348-4.767 8.37-12.471 6.464.271.395-19.78-4.937-19.78-4.937l-13.51 31.147 35.414 8.827c6.588 1.651 13.045 3.379 19.4 5.006l-11.262 45.213 27.182 6.781 11.153-44.733a1038.209 1038.209 0 0 0 21.687 5.627l-11.115 44.523 27.213 6.781 11.262-45.128c46.404 8.781 81.299 5.239 95.986-36.727 11.836-33.79-.589-53.281-25.004-65.991 17.78-4.098 31.174-15.792 34.747-39.949zm-62.177 87.179c-8.41 33.79-65.308 15.523-83.755 10.943l14.944-59.899c18.446 4.603 77.6 13.717 68.811 48.956zm8.417-87.667c-7.673 30.736-55.031 15.12-70.393 11.292l13.548-54.327c15.363 3.828 64.836 10.973 56.845 43.035z\"\n      />\n    </svg>\n  </SvgIcon>\n);\n\nBitcoinIcon.propTypes = {\n  network: PropTypes.string,\n};\n\nBitcoinIcon.defaultProps = {\n  network: MAINNET,\n};\n\nexport default BitcoinIcon;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Grid, IconButton, TextField } from \"@material-ui/core\";\nimport { Check, Clear, Edit } from \"@material-ui/icons\";\n\nclass EditableName extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: false,\n      newName: \"\",\n      error: \"\",\n    };\n  }\n\n  componentDidMount = () => {\n    const { name } = this.props;\n    this.setState({ newName: name });\n  };\n\n  render = () => {\n    const { name } = this.props;\n    const { editing, newName, error } = this.state;\n    if (editing) {\n      // <Form onSubmit={this.submit} inline>\n      return (\n        <Grid container alignItems=\"center\">\n          <Grid item>\n            <TextField\n              autoFocus\n              label=\"Name\"\n              value={newName}\n              onChange={this.handleChange}\n              onFocus={(event) => {\n                setTimeout(event.target.select.bind(event.target), 20);\n              }}\n              onKeyDown={(e) => (e.key === \"Enter\" ? this.submit() : null)}\n              error={this.hasError()}\n              helperText={error}\n            />\n          </Grid>\n\n          <Grid item>\n            <IconButton\n              data-cy=\"save-button\"\n              size=\"small\"\n              onClick={this.submit}\n              disabled={this.hasError()}\n            >\n              <Check />\n            </IconButton>\n          </Grid>\n\n          <Grid item>\n            <IconButton\n              data-cy=\"cancel-button\"\n              color=\"secondary\"\n              size=\"small\"\n              onClick={this.cancel}\n            >\n              <Clear />\n            </IconButton>\n          </Grid>\n        </Grid>\n      );\n    }\n    return (\n      <span>\n        <IconButton\n          data-cy=\"edit-button\"\n          size=\"small\"\n          onClick={this.startEditing}\n        >\n          <Edit />\n        </IconButton>\n        &nbsp;\n        {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions */}\n        <span\n          data-cy=\"editable-name-value\"\n          style={{ cursor: \"pointer\" }}\n          onClick={this.startEditing}\n        >\n          {name}\n        </span>\n      </span>\n    );\n  };\n\n  hasError = () => {\n    const { error } = this.state;\n    return error !== \"\";\n  };\n\n  startEditing = (event) => {\n    const { name } = this.props;\n    event.preventDefault();\n    this.setState({ editing: true, newName: name });\n  };\n\n  handleChange = (event) => {\n    const newName = event.target.value;\n    let error = \"\";\n    if (newName === null || newName === undefined || newName === \"\") {\n      error = \"Name cannot be blank.\";\n    }\n    this.setState({ newName, error });\n  };\n\n  submit = () => {\n    const { setName, number } = this.props;\n    const { newName } = this.state;\n    setName(number, newName);\n    this.setState({ editing: false });\n  };\n\n  cancel = () => {\n    const { name } = this.props;\n    this.setState({ error: \"\", newName: name, editing: false });\n  };\n}\n\nEditableName.propTypes = {\n  number: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  setName: PropTypes.func.isRequired,\n};\n\nexport default EditableName;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { NETWORKS } from \"unchained-bitcoin\";\n\n// Components\nimport {\n  Card,\n  CardContent,\n  Typography,\n  makeStyles,\n  Grid,\n} from \"@material-ui/core\";\nimport BitcoinIcon from \"../BitcoinIcon\";\nimport EditableName from \"../EditableName\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"100%\",\n  },\n  title: {\n    fontSize: \"2rem\",\n    color: \"#212529\",\n  },\n  balance: {\n    fontSize: \"1.2rem\",\n  },\n  gutter: {\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    paddingTop: theme.spacing(2),\n  },\n}));\n\nconst WalletInfoCard = ({\n  walletName,\n  setName,\n  balance = 0,\n  pendingBalance,\n  editable,\n  network,\n}) => {\n  const classes = useStyles();\n  return (\n    <Card data-cy=\"wallet-info-card\" className={classes.root}>\n      <CardContent>\n        <Grid container direction=\"row\" alignItems=\"center\">\n          {editable ? (\n            <Grid item>\n              <Typography variant=\"h1\" className={classes.title}>\n                <EditableName number={0} name={walletName} setName={setName} />\n              </Typography>\n            </Grid>\n          ) : (\n            <>\n              <Grid container alignItems=\"center\" className={classes.gutter}>\n                <Grid item xs={1}>\n                  <BitcoinIcon network={network} />\n                </Grid>\n                <Grid item>\n                  <Typography variant=\"h1\" className={classes.title}>\n                    {walletName}\n                  </Typography>\n                </Grid>\n              </Grid>\n              <Grid container className={classes.gutter}>\n                <Grid item xs={12} mt={5}>\n                  <Typography\n                    data-cy=\"balance\"\n                    variant=\"subtitle1\"\n                    className={classes.balance}\n                  >\n                    {balance} BTC\n                  </Typography>\n                </Grid>\n                <Grid item>\n                  <Typography data-cy=\"pending-balance\" variant=\"caption\">\n                    {pendingBalance !== 0 ? (\n                      <>\n                        <span\n                          style={{\n                            color: pendingBalance > 0 ? \"green\" : \"red\",\n                            fontWeight: \"bold\",\n                          }}\n                        >\n                          {pendingBalance > 0 ? \"+\" : \"\"}\n                          {pendingBalance} BTC\n                        </span>{\" \"}\n                        (unconfirmed)\n                      </>\n                    ) : (\n                      \"\"\n                    )}\n                  </Typography>\n                </Grid>\n              </Grid>\n            </>\n          )}\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n\nWalletInfoCard.propTypes = {\n  walletName: PropTypes.string.isRequired,\n  network: PropTypes.string,\n  balance: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  pendingBalance: PropTypes.number,\n  editable: PropTypes.bool.isRequired,\n  setName: PropTypes.func.isRequired,\n};\n\nWalletInfoCard.defaultProps = {\n  network: NETWORKS.TESTNET,\n  balance: 0,\n  pendingBalance: 0,\n};\n\nexport default WalletInfoCard;\n","export const SET_NETWORK = \"SET_NETWORK\";\nexport const SET_TOTAL_SIGNERS = \"SET_TOTAL_SIGNERS\";\nexport const SET_REQUIRED_SIGNERS = \"SET_REQUIRED_SIGNERS\";\nexport const SET_STARTING_ADDRESS_INDEX = \"SET_STARTING_ADDRESS_INDEX\";\nexport const SET_ADDRESS_TYPE = \"SET_ADDRESS_TYPE\";\nexport const SET_FROZEN = \"SET_FROZEN\";\n\nexport function setNetwork(value) {\n  return {\n    type: SET_NETWORK,\n    value,\n  };\n}\n\nexport function setTotalSigners(number) {\n  return {\n    type: SET_TOTAL_SIGNERS,\n    value: number,\n  };\n}\n\nexport function setRequiredSigners(number) {\n  return {\n    type: SET_REQUIRED_SIGNERS,\n    value: number,\n  };\n}\n\nexport function setStartingAddressIndex(number) {\n  return {\n    type: SET_STARTING_ADDRESS_INDEX,\n    value: number,\n  };\n}\n\nexport function setAddressType(value) {\n  return {\n    type: SET_ADDRESS_TYPE,\n    value,\n  };\n}\n\nexport function setFrozen(value) {\n  return {\n    type: SET_FROZEN,\n    value,\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { TESTNET, MAINNET } from \"unchained-bitcoin\";\n\n// Components\n\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  FormControl,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  FormHelperText,\n} from \"@material-ui/core\";\n\n// Actions\nimport { setNetwork as setNetworkAction } from \"../actions/settingsActions\";\n\nclass NetworkPicker extends React.Component {\n  handleNetworkChange = (event) => {\n    const { setNetwork } = this.props;\n    setNetwork(event.target.value);\n  };\n\n  render() {\n    const { network, frozen } = this.props;\n    return (\n      <Card>\n        <CardHeader title=\"Network\" />\n        <CardContent>\n          <FormControl component=\"fieldset\">\n            <RadioGroup>\n              <FormControlLabel\n                id=\"mainnet\"\n                control={<Radio color=\"primary\" />}\n                name=\"network\"\n                value=\"mainnet\"\n                label={<strong>Mainnet</strong>}\n                onChange={this.handleNetworkChange}\n                checked={network === MAINNET}\n                disabled={frozen}\n              />\n              <FormControlLabel\n                id=\"testnet\"\n                control={<Radio color=\"primary\" />}\n                name=\"network\"\n                value=\"testnet\"\n                label=\"Testnet\"\n                onChange={this.handleNetworkChange}\n                checked={network === TESTNET}\n                disabled={frozen}\n              />\n            </RadioGroup>\n            <FormHelperText>\n              <small>\n                Choose &apos;Mainnet&apos; if you don&apos;t understand the\n                difference.\n              </small>\n            </FormHelperText>\n          </FormControl>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nNetworkPicker.propTypes = {\n  network: PropTypes.string.isRequired,\n  frozen: PropTypes.bool.isRequired,\n  setNetwork: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    network: state.settings.network,\n    frozen: state.settings.frozen,\n  };\n}\n\nconst mapDispatchToProps = {\n  setNetwork: setNetworkAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NetworkPicker);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\n// Actions\n\n// Components\nimport {\n  Typography,\n  Grid,\n  IconButton,\n  Card,\n  CardHeader,\n  CardContent,\n  Box,\n} from \"@material-ui/core\";\nimport { AddCircle, RemoveCircle } from \"@material-ui/icons\";\nimport {\n  setTotalSigners as setTotalSignersAction,\n  setRequiredSigners as setRequiredSignersAction,\n} from \"../actions/settingsActions\";\nimport \"./styles.css\";\n\nconst MAX_TOTAL_SIGNERS = 7;\n\nclass QuorumPicker extends React.Component {\n  renderIncrementRequiredSigners = () => {\n    const { requiredSigners, totalSigners, frozen } = this.props;\n    const disabled = requiredSigners === totalSigners || frozen;\n    return (\n      <IconButton\n        color=\"primary\"\n        onClick={this.handleIncrementRequiredSigners}\n        disabled={disabled}\n      >\n        <AddCircle />\n      </IconButton>\n    );\n  };\n\n  renderDecrementRequiredSigners = () => {\n    const { requiredSigners, frozen } = this.props;\n    const disabled = requiredSigners === 1 || frozen;\n    return (\n      <IconButton\n        color=\"secondary\"\n        onClick={this.handleDecrementRequiredSigners}\n        disabled={disabled}\n      >\n        <RemoveCircle />\n      </IconButton>\n    );\n  };\n\n  renderIncrementTotalSigners = () => {\n    const { totalSigners, frozen } = this.props;\n    const disabled = totalSigners === MAX_TOTAL_SIGNERS || frozen;\n    return (\n      <IconButton\n        color=\"primary\"\n        onClick={this.handleIncrementTotalSigners}\n        disabled={disabled}\n      >\n        <AddCircle />\n      </IconButton>\n    );\n  };\n\n  renderDecrementTotalSigners = () => {\n    const { requiredSigners, totalSigners, frozen } = this.props;\n    const disabled =\n      totalSigners === requiredSigners || totalSigners === 2 || frozen;\n    return (\n      <IconButton\n        color=\"secondary\"\n        onClick={this.handleDecrementTotalSigners}\n        disabled={disabled}\n      >\n        <RemoveCircle />\n      </IconButton>\n    );\n  };\n\n  handleIncrementRequiredSigners = (event) => {\n    const { requiredSigners, setRequiredSigners } = this.props;\n    setRequiredSigners(requiredSigners + 1);\n    event.preventDefault();\n  };\n\n  handleDecrementRequiredSigners = (event) => {\n    const { requiredSigners, setRequiredSigners } = this.props;\n    setRequiredSigners(requiredSigners - 1);\n    event.preventDefault();\n  };\n\n  handleIncrementTotalSigners = (event) => {\n    const { totalSigners, setTotalSigners } = this.props;\n    setTotalSigners(totalSigners + 1);\n    event.preventDefault();\n  };\n\n  handleDecrementTotalSigners = (event) => {\n    const { totalSigners, setTotalSigners } = this.props;\n    setTotalSigners(totalSigners - 1);\n    event.preventDefault();\n  };\n\n  render() {\n    const { requiredSigners, totalSigners } = this.props;\n\n    return (\n      <Card>\n        <CardHeader title=\"Quorum\" />\n        <CardContent>\n          <Box>\n            <Grid container justify=\"center\">\n              <Grid container item xs={2} direction=\"column\">\n                &nbsp;\n              </Grid>\n\n              <Grid\n                container\n                item\n                xs={3}\n                direction=\"column\"\n                alignItems=\"center\"\n              >\n                <Grid item>{this.renderIncrementRequiredSigners()}</Grid>\n\n                <Grid item>\n                  <Typography variant=\"h2\">{requiredSigners}</Typography>\n                </Grid>\n\n                <Grid item>\n                  <small>\n                    <p>Required</p>\n                  </small>\n                </Grid>\n\n                <Grid item>{this.renderDecrementRequiredSigners()}</Grid>\n              </Grid>\n\n              <Grid\n                container\n                item\n                xs={2}\n                direction=\"column\"\n                alignItems=\"center\"\n                justify=\"center\"\n              >\n                <Grid item>\n                  <Typography variant=\"h6\">of</Typography>\n                </Grid>\n              </Grid>\n\n              <Grid\n                item\n                container\n                xs={3}\n                direction=\"column\"\n                alignItems=\"center\"\n              >\n                <Grid item>{this.renderIncrementTotalSigners()}</Grid>\n\n                <Grid item>\n                  <Typography variant=\"h2\">{totalSigners}</Typography>\n                </Grid>\n\n                <Grid item>\n                  <small>\n                    <p>Total</p>\n                  </small>\n                </Grid>\n\n                <Grid item>{this.renderDecrementTotalSigners()}</Grid>\n              </Grid>\n              <Grid container item xs={2} direction=\"column\">\n                &nbsp;\n              </Grid>\n            </Grid>\n          </Box>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nQuorumPicker.propTypes = {\n  totalSigners: PropTypes.number.isRequired,\n  requiredSigners: PropTypes.number.isRequired,\n  frozen: PropTypes.bool.isRequired,\n  setTotalSigners: PropTypes.func.isRequired,\n  setRequiredSigners: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return state.settings;\n}\n\nconst mapDispatchToProps = {\n  setTotalSigners: setTotalSignersAction,\n  setRequiredSigners: setRequiredSignersAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(QuorumPicker);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { P2SH, P2SH_P2WSH, P2WSH } from \"unchained-bitcoin\";\n\n// Components\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  FormControl,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  FormHelperText,\n} from \"@material-ui/core\";\n// Actions\nimport { setAddressType } from \"../actions/settingsActions\";\n\nclass AddressTypePicker extends React.Component {\n  handleTypeChange = (event) => {\n    const { setType } = this.props;\n    setType(event.target.value);\n  };\n\n  render() {\n    const { addressType, frozen } = this.props;\n    return (\n      <Card>\n        <CardHeader title=\"Address Type\" />\n        <CardContent>\n          <FormControl component=\"fieldset\">\n            <RadioGroup>\n              <FormControlLabel\n                id={P2SH}\n                control={<Radio color=\"primary\" />}\n                name=\"type\"\n                value={P2SH}\n                label={P2SH}\n                onChange={this.handleTypeChange}\n                checked={addressType === P2SH}\n                disabled={frozen}\n              />\n              <FormControlLabel\n                id={P2SH_P2WSH}\n                control={<Radio color=\"primary\" />}\n                name=\"type\"\n                value={P2SH_P2WSH}\n                label={P2SH_P2WSH}\n                onChange={this.handleTypeChange}\n                checked={addressType === P2SH_P2WSH}\n                disabled={frozen}\n              />\n              <FormControlLabel\n                id={P2WSH}\n                control={<Radio color=\"primary\" />}\n                name=\"type\"\n                value={P2WSH}\n                label={P2WSH}\n                onChange={this.handleTypeChange}\n                checked={addressType === P2WSH}\n                disabled={frozen}\n              />\n            </RadioGroup>\n            <FormHelperText>\n              <small>\n                Choose &apos;\n                {P2WSH}\n                &apos; for best practices, &apos;\n                {P2SH}\n                &apos; for greatest compatibility.\n              </small>\n            </FormHelperText>\n          </FormControl>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nAddressTypePicker.propTypes = {\n  addressType: PropTypes.string.isRequired,\n  frozen: PropTypes.bool.isRequired,\n  setType: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return state.settings;\n}\n\nconst mapDispatchToProps = {\n  setType: setAddressType,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddressTypePicker);\n","function actionWrapper(type) {\n  return (value) => {\n    return { type, value };\n  };\n}\n\nexport function wrappedActions(mapping) {\n  const wrappedMapping = {};\n  const actionFunctionNames = Object.keys(mapping);\n  let actionIndex;\n  for (\n    actionIndex = 0;\n    actionIndex < actionFunctionNames.length;\n    actionIndex += 1\n  ) {\n    const actionFunctionName = actionFunctionNames[actionIndex];\n    const actionType = mapping[actionFunctionName];\n    wrappedMapping[actionFunctionName] = actionWrapper(actionType);\n  }\n  return wrappedMapping;\n}\n\nfunction numberedActionWrapper(type) {\n  return (number, value) => {\n    return { type, number, value };\n  };\n}\n\nexport function wrappedNumberedActions(mapping) {\n  const wrappedMapping = {};\n  const actionFunctionNames = Object.keys(mapping);\n  let actionIndex;\n  for (\n    actionIndex = 0;\n    actionIndex < actionFunctionNames.length;\n    actionIndex += 1\n  ) {\n    const actionFunctionName = actionFunctionNames[actionIndex];\n    const actionType = mapping[actionFunctionName];\n    wrappedMapping[actionFunctionName] = numberedActionWrapper(actionType);\n  }\n  return wrappedMapping;\n}\n","export const SET_CLIENT_TYPE = \"SET_CLIENT_TYPE\";\nexport const SET_CLIENT_URL = \"SET_CLIENT_URL\";\nexport const SET_CLIENT_USERNAME = \"SET_CLIENT_USERNAME\";\nexport const SET_CLIENT_PASSWORD = \"SET_CLIENT_PASSWORD\";\n\nexport const SET_CLIENT_URL_ERROR = \"SET_CLIENT_URL_ERROR\";\nexport const SET_CLIENT_USERNAME_ERROR = \"SET_CLIENT_USERNAME_ERROR\";\nexport const SET_CLIENT_PASSWORD_ERROR = \"SET_CLIENT_PASSWORD_ERROR\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Components\nimport {\n  Grid,\n  TextField,\n  Button,\n  FormHelperText,\n  Box,\n} from \"@material-ui/core\";\n\nimport { externalLink } from \"../../utils\";\n\nconst PrivateClientSettings = ({\n  handleUrlChange,\n  handleUsernameChange,\n  handlePasswordChange,\n  client,\n  urlError,\n  usernameError,\n  passwordError,\n  privateNotes,\n  connectSuccess,\n  connectError,\n  testConnection,\n}) => (\n  <div>\n    <p>\n      A <code>bitcoind</code>\n      -compatible client is required to query UTXO data, estimate fees, and\n      broadcast transactions.\n    </p>\n    <p>\n      <small>\n        {\n          \"Due to CORS requirements, you must use a proxy around the node. Instructions are available \"\n        }\n        {externalLink(\n          \"https://github.com/unchained-capital/caravan#adding-cors-headers\",\n          \"here\"\n        )}\n        {\".\"}\n      </small>\n    </p>\n    <form>\n      <Grid container direction=\"column\" spacing={1}>\n        <Grid item>\n          <TextField\n            fullWidth\n            label=\"URL\"\n            value={client.url}\n            onChange={handleUrlChange}\n            error={urlError !== \"\"}\n            helperText={urlError}\n          />\n        </Grid>\n\n        <Grid item>\n          <TextField\n            id=\"bitcoind-username\"\n            fullWidth\n            label=\"Username\"\n            value={client.username}\n            onChange={handleUsernameChange}\n            error={usernameError !== \"\"}\n            helperText={usernameError}\n          />\n        </Grid>\n\n        <Grid item>\n          <TextField\n            id=\"bitcoind-password\"\n            fullWidth\n            type=\"password\"\n            label=\"Password\"\n            value={client.password}\n            onChange={handlePasswordChange}\n            error={passwordError !== \"\"}\n            helperText={passwordError}\n          />\n        </Grid>\n        <Grid item>\n          <Box mt={1}>\n            <Button variant=\"contained\" onClick={testConnection}>\n              Test Connection\n            </Button>\n          </Box>\n          <Box mt={2}>\n            {connectSuccess && (\n              <FormHelperText>Connection Success!</FormHelperText>\n            )}\n            {connectError !== \"\" && (\n              <FormHelperText error>{connectError}</FormHelperText>\n            )}\n          </Box>\n        </Grid>\n      </Grid>\n    </form>\n    {privateNotes}\n  </div>\n);\n\nPrivateClientSettings.propTypes = {\n  client: PropTypes.shape({\n    url: PropTypes.string.isRequired,\n    username: PropTypes.string.isRequired,\n    password: PropTypes.string.isRequired,\n  }).isRequired,\n  handleUrlChange: PropTypes.func.isRequired,\n  handleUsernameChange: PropTypes.func.isRequired,\n  handlePasswordChange: PropTypes.func.isRequired,\n  testConnection: PropTypes.func.isRequired,\n  urlError: PropTypes.string,\n  usernameError: PropTypes.string,\n  passwordError: PropTypes.string,\n  privateNotes: PropTypes.node,\n  connectSuccess: PropTypes.bool.isRequired,\n  connectError: PropTypes.string.isRequired,\n};\n\nPrivateClientSettings.defaultProps = {\n  urlError: \"\",\n  usernameError: \"\",\n  passwordError: \"\",\n  privateNotes: React.createElement(\"span\"),\n};\n\nexport default PrivateClientSettings;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  Grid,\n  Card,\n  CardHeader,\n  CardContent,\n  FormControlLabel,\n  FormControl,\n  Radio,\n  RadioGroup,\n  FormHelperText,\n} from \"@material-ui/core\";\nimport { fetchFeeEstimate } from \"../../blockchain\";\n\n// Components\n\n// Actions\nimport { wrappedActions } from \"../../actions/utils\";\nimport {\n  SET_CLIENT_TYPE,\n  SET_CLIENT_URL,\n  SET_CLIENT_USERNAME,\n  SET_CLIENT_PASSWORD,\n  SET_CLIENT_URL_ERROR,\n  SET_CLIENT_USERNAME_ERROR,\n  SET_CLIENT_PASSWORD_ERROR,\n} from \"../../actions/clientActions\";\n\nimport PrivateClientSettings from \"./PrivateClientSettings\";\n\nclass ClientPicker extends React.Component {\n  static validatePassword() {\n    return \"\";\n  }\n\n  static validateUsername() {\n    return \"\";\n  }\n\n  static validateUrl(host) {\n    const validhost = /^http(s)?:\\/\\/[^\\s]+$/.exec(host);\n    if (!validhost) return \"Must be a valid URL.\";\n    return \"\";\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      urlEdited: false,\n      connectError: \"\",\n      connectSuccess: false,\n    };\n  }\n\n  handleTypeChange = (event) => {\n    const { setType, network, setUrl } = this.props;\n    const { urlEdited } = this.state;\n\n    const type = event.target.value;\n    if (type === \"private\" && !urlEdited) {\n      setUrl(`http://localhost:${network === \"mainnet\" ? 8332 : 18332}`);\n    }\n    setType(type);\n  };\n\n  handleUrlChange = (event) => {\n    const { setUrl, setUrlError } = this.props;\n    const { urlEdited } = this.state;\n    const url = event.target.value;\n    const error = ClientPicker.validateUrl(url);\n    if (!urlEdited && !error) this.setState({ urlEdited: true });\n    setUrl(url);\n    setUrlError(error);\n  };\n\n  handleUsernameChange = (event) => {\n    const { setUsername, setUsernameError } = this.props;\n    const username = event.target.value;\n    const error = ClientPicker.validateUsername(username);\n    setUsername(username);\n    setUsernameError(error);\n  };\n\n  handlePasswordChange = (event) => {\n    const { setPassword, setPasswordError } = this.props;\n    const password = event.target.value;\n    const error = ClientPicker.validatePassword(password);\n    setPassword(password);\n    setPasswordError(error);\n  };\n\n  testConnection = async () => {\n    const { network, client, onSuccess } = this.props;\n    this.setState({ connectError: \"\", connectSuccess: false });\n    try {\n      await fetchFeeEstimate(network, client);\n      if (onSuccess) {\n        onSuccess();\n      }\n      this.setState({ connectSuccess: true });\n    } catch (e) {\n      this.setState({ connectError: e.message });\n    }\n  };\n\n  render() {\n    const {\n      client,\n      urlError,\n      usernameError,\n      passwordError,\n      privateNotes,\n    } = this.props;\n    const { connectSuccess, connectError } = this.state;\n    return (\n      <Card>\n        <Grid container justify=\"space-between\">\n          <CardHeader title=\"Bitcoin Client\" />\n        </Grid>\n        <CardContent>\n          <Grid item>\n            <FormControl component=\"fieldset\">\n              <RadioGroup>\n                <FormControlLabel\n                  id=\"public\"\n                  control={<Radio color=\"primary\" />}\n                  name=\"clientType\"\n                  value=\"public\"\n                  label={<strong>Public</strong>}\n                  onChange={this.handleTypeChange}\n                  checked={client.type === \"public\"}\n                />\n                <FormControlLabel\n                  id=\"private\"\n                  control={<Radio color=\"primary\" />}\n                  name=\"clientType\"\n                  value=\"private\"\n                  label=\"Private\"\n                  onChange={this.handleTypeChange}\n                  checked={client.type === \"private\"}\n                />\n              </RadioGroup>\n              {client.type === \"public\" && (\n                <FormHelperText>\n                  {\"'Public' uses the \"}\n                  <code>blockstream.info</code>\n                  {\" API. Switch to private to use a \"}\n                  <code>bitcoind</code>\n                  {\" node.\"}\n                </FormHelperText>\n              )}\n              {client.type === \"private\" && (\n                <PrivateClientSettings\n                  handleUrlChange={(event) => this.handleUrlChange(event)}\n                  handleUsernameChange={(event) =>\n                    this.handleUsernameChange(event)\n                  }\n                  handlePasswordChange={(event) =>\n                    this.handlePasswordChange(event)\n                  }\n                  client={client}\n                  urlError={urlError}\n                  usernameError={usernameError}\n                  passwordError={passwordError}\n                  privateNotes={privateNotes}\n                  connectSuccess={connectSuccess}\n                  connectError={connectError}\n                  testConnection={() => this.testConnection()}\n                />\n              )}\n            </FormControl>\n          </Grid>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nClientPicker.propTypes = {\n  client: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n  network: PropTypes.string.isRequired,\n  privateNotes: PropTypes.shape({}),\n  setUrl: PropTypes.func.isRequired,\n  urlError: PropTypes.string,\n  onSuccess: PropTypes.func,\n  setUrlError: PropTypes.func.isRequired,\n  setPassword: PropTypes.func.isRequired,\n  passwordError: PropTypes.string,\n  setPasswordError: PropTypes.func.isRequired,\n  setType: PropTypes.func.isRequired,\n  usernameError: PropTypes.string,\n  setUsername: PropTypes.func.isRequired,\n  setUsernameError: PropTypes.func.isRequired,\n};\n\nClientPicker.defaultProps = {\n  urlError: \"\",\n  usernameError: \"\",\n  onSuccess: null,\n  passwordError: \"\",\n  privateNotes: React.createElement(\"span\"),\n};\n\nfunction mapStateToProps(state) {\n  return {\n    network: state.settings.network,\n    client: state.client,\n    urlError: state.client.urlError,\n    url: state.client.url,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  wrappedActions({\n    setType: SET_CLIENT_TYPE,\n    setUrl: SET_CLIENT_URL,\n    setUsername: SET_CLIENT_USERNAME,\n    setPassword: SET_CLIENT_PASSWORD,\n    setUrlError: SET_CLIENT_URL_ERROR,\n    setUsernameError: SET_CLIENT_USERNAME_ERROR,\n    setPasswordError: SET_CLIENT_PASSWORD_ERROR,\n  })\n)(ClientPicker);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { validateBIP32Index } from \"unchained-bitcoin\";\nimport {\n  Grid,\n  Card,\n  CardHeader,\n  CardContent,\n  FormControlLabel,\n  FormControl,\n  FormHelperText,\n  Radio,\n  RadioGroup,\n  TextField,\n  Tooltip,\n} from \"@material-ui/core\";\n\nimport { wrappedActions } from \"../actions/utils\";\nimport { SET_STARTING_ADDRESS_INDEX } from \"../actions/settingsActions\";\n\nclass StartingAddressIndexPicker extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      customIndex: props.startingAddressIndex !== 0,\n      startingAddressIndexField: props.startingAddressIndex,\n    };\n  }\n\n  handleIndexChange = (event) => {\n    const { setStartingAddressIndex } = this.props;\n    const index = event.target.value;\n    const error = validateBIP32Index(index, { mode: \"unhardened\" }).replace(\n      \"BIP32\",\n      \"Starting Address\"\n    );\n    if (!error && index) {\n      setStartingAddressIndex(parseInt(index, 10));\n    }\n    this.setState({\n      startingAddressIndexField: index,\n      startingAddressIndexError: error,\n    });\n  };\n\n  handleCustomIndexChange = (event) => {\n    const customIndex = event.target.value === \"true\";\n    this.setState({ customIndex });\n  };\n\n  render() {\n    const {\n      customIndex,\n      startingAddressIndexField,\n      startingAddressIndexError,\n    } = this.state;\n    return (\n      <Card>\n        <Grid container justify=\"space-between\">\n          <CardHeader title=\"Starting Address Index\" />\n        </Grid>\n        <CardContent>\n          <Grid item>\n            <FormControl component=\"fieldset\">\n              <RadioGroup>\n                <FormControlLabel\n                  id=\"default\"\n                  control={<Radio color=\"primary\" />}\n                  name=\"customIndex\"\n                  value=\"false\"\n                  label={<strong>Default (0)</strong>}\n                  onChange={this.handleCustomIndexChange}\n                  checked={!customIndex}\n                />\n                <Tooltip\n                  title=\"The starting address index allows you to skip\n                    forward in a wallet. Addresses with indices less than the\n                    starting address are ignored.\"\n                >\n                  <FormControlLabel\n                    id=\"custom\"\n                    control={<Radio color=\"primary\" />}\n                    name=\"customIndex\"\n                    value=\"true\"\n                    label=\"Custom\"\n                    onChange={this.handleCustomIndexChange}\n                    checked={customIndex}\n                  />\n                </Tooltip>\n                <FormHelperText>\n                  Use the default value if you do not understand how to use\n                  starting address index.\n                </FormHelperText>\n              </RadioGroup>\n              {customIndex && (\n                <TextField\n                  fullWidth\n                  value={startingAddressIndexField}\n                  type=\"text\"\n                  name=\"startingAddressIndex\"\n                  onChange={this.handleIndexChange}\n                  error={Boolean(startingAddressIndexError)}\n                  helperText={startingAddressIndexError}\n                />\n              )}\n            </FormControl>\n          </Grid>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nStartingAddressIndexPicker.propTypes = {\n  startingAddressIndex: PropTypes.number.isRequired,\n  setStartingAddressIndex: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    startingAddressIndex: state.settings.startingAddressIndex,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  wrappedActions({\n    setStartingAddressIndex: SET_STARTING_ADDRESS_INDEX,\n  })\n)(StartingAddressIndexPicker);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n  Box,\n} from \"@material-ui/core\";\nimport { Alert } from \"@material-ui/lab\";\n\nclass WalletConfirmation extends React.Component {\n  render = () => {\n    const { startingAddressIndex } = this.props;\n    return (\n      <Box>\n        {startingAddressIndex > 0 && (\n          <Alert severity=\"info\">\n            Starting Address Index set to {startingAddressIndex}\n          </Alert>\n        )}\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Name</TableCell>\n              <TableCell>BIP32 Path</TableCell>\n              <TableCell>Extended Public Key</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>{this.renderConfirmationInfo()}</TableBody>\n        </Table>\n      </Box>\n    );\n  };\n\n  renderConfirmationInfo = () => {\n    const { extendedPublicKeyImporters } = this.props;\n    return Object.values(extendedPublicKeyImporters).map((importer) => (\n      <TableRow key={importer.extendedPublicKey}>\n        <TableCell>{importer.name}</TableCell>\n        <TableCell>\n          {importer.method === \"text\" ? \"N/A\" : importer.bip32Path}\n        </TableCell>\n        <TableCell>{importer.extendedPublicKey}</TableCell>\n      </TableRow>\n    ));\n  };\n}\n\nWalletConfirmation.propTypes = {\n  startingAddressIndex: PropTypes.number.isRequired,\n  extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    startingAddressIndex: state.settings.startingAddressIndex,\n    extendedPublicKeyImporters: state.quorum.extendedPublicKeyImporters,\n  };\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletConfirmation);\n","import PropTypes from \"prop-types\";\n\nexport const bigNumberPropTypes = {\n  c: PropTypes.arrayOf(PropTypes.number).isRequired,\n  e: PropTypes.number.isRequired,\n  s: PropTypes.number.isRequired,\n};\n\nexport default {\n  bigNumberPropTypes,\n};\n","import PropTypes from \"prop-types\";\nimport { bigNumberPropTypes } from \"./utils\";\n\nconst slicePropTypes = {\n  present: PropTypes.bool,\n  bip32Path: PropTypes.string,\n  publicKeys: PropTypes.array,\n  multisig: PropTypes.shape({}),\n  address: PropTypes.string.isRequired,\n  balanceSats: PropTypes.shape(bigNumberPropTypes),\n  utxos: PropTypes.array,\n  change: PropTypes.bool.isRequired,\n  spend: PropTypes.bool.isRequired,\n  fetchUtxos: PropTypes.bool,\n  fetchUTXOsError: PropTypes.string.isRequired,\n  addressUsed: PropTypes.bool,\n  addressKnown: PropTypes.bool.isRequired,\n  lastUsed: PropTypes.string,\n};\n\nexport default slicePropTypes;\n","import PropTypes from \"prop-types\";\n\nconst clientPropTypes = {\n  type: PropTypes.string.isRequired,\n  url: PropTypes.string,\n  username: PropTypes.string,\n  password: PropTypes.string,\n  urlError: PropTypes.string,\n  usernameError: PropTypes.string,\n  passwordError: PropTypes.string,\n  status: PropTypes.string,\n};\n\nexport default clientPropTypes;\n","import PropTypes from \"prop-types\";\n\nconst settingsPropTypes = {\n  network: PropTypes.string,\n  totalSigners: PropTypes.number,\n  requiredSigners: PropTypes.number,\n  addressType: PropTypes.string,\n  frozen: PropTypes.bool,\n};\n\nexport default settingsPropTypes;\n","import PropTypes from \"prop-types\";\nimport React, { useState, useEffect } from \"react\";\n\n// Components\nimport CopyToClipboard from \"react-copy-to-clipboard\";\nimport { FileCopy } from \"@material-ui/icons\";\nimport { IconButton, makeStyles } from \"@material-ui/core\";\nimport { useSnackbar } from \"notistack\";\n\nconst useStyles = makeStyles(() => ({\n  copyText: {\n    \"&:hover\": { cursor: \"pointer\" },\n  },\n  code: {\n    fontSize: \"1rem\",\n  },\n}));\n\nconst Copyable = ({\n  newline,\n  text,\n  children,\n  showIcon,\n  showText,\n  code,\n  ...otherProps\n}) => {\n  const [copied, setCopied] = useState(false);\n  const [timer, setTimer] = useState(null);\n  const { enqueueSnackbar } = useSnackbar();\n\n  useEffect(() => {\n    if (timer) clearTimeout(timer);\n    // eslint-disable-next-line\n  }, []);\n\n  const classes = useStyles();\n\n  const showSnackbarMessage = () => {\n    const MAX_LENGTH = 25;\n    const shortenedText =\n      text.length > MAX_LENGTH ? `${text.substring(0, MAX_LENGTH)}...` : text;\n\n    enqueueSnackbar(`Copied ${shortenedText} to clipboard`, {\n      preventDuplicate: true,\n    });\n  };\n\n  const onCopy = () => {\n    const timerTimeout = setTimeout(() => {\n      setCopied(false);\n      setTimer(null);\n    }, 1000);\n\n    setCopied(true);\n    setTimer(timerTimeout);\n\n    showSnackbarMessage();\n  };\n\n  const TextComponent = () => {\n    if (code) return <code className={classes.code}>{text}</code>;\n    return <span>{text}</span>;\n  };\n\n  return (\n    // eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions\n    <span onClick={(e) => e.stopPropagation()} {...otherProps}>\n      <CopyToClipboard\n        text={text}\n        onCopy={onCopy}\n        options={{ format: \"text/plain\" }}\n      >\n        <span\n          style={{\n            fontStyle: copied ? \"italic\" : \"inherit\",\n            overflowWrap: \"break-word\",\n          }}\n          className={`copyable ${classes.copyText}`}\n        >\n          {children}\n          {showText && <TextComponent />}\n          {newline && <br />}\n          {showIcon && (\n            <IconButton>\n              <FileCopy\n                fontSize=\"small\"\n                color={copied ? \"primary\" : \"action\"}\n              />\n            </IconButton>\n          )}\n        </span>\n      </CopyToClipboard>\n    </span>\n  );\n};\n\nCopyable.propTypes = {\n  // defaults\n  newline: PropTypes.bool,\n  // parent\n  text: PropTypes.string.isRequired,\n  children: PropTypes.node,\n  showIcon: PropTypes.bool,\n  showText: PropTypes.bool,\n  code: PropTypes.bool,\n};\n\nCopyable.defaultProps = {\n  newline: false,\n  showIcon: false,\n  children: React.createElement(\"span\"),\n  showText: true,\n  code: false,\n};\nexport default Copyable;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  blockExplorerTransactionURL,\n  satoshisToBitcoins,\n} from \"unchained-bitcoin\";\nimport {\n  Table,\n  TableHead,\n  TableBody,\n  TableFooter,\n  TableRow,\n  TableCell,\n  Typography,\n} from \"@material-ui/core\";\nimport { OpenInNew } from \"@material-ui/icons\";\nimport { externalLink } from \"../../utils\";\nimport Copyable from \"../Copyable\";\n\n// Components\n\n// Assets\nimport \"react-table/react-table.css\";\nimport styles from \"./styles.module.scss\";\n\nclass UTXOSet extends React.Component {\n  renderInputs = () => {\n    const { inputs, network } = this.props;\n    return inputs.map((input, inputIndex) => {\n      const confirmedStyle = `${styles.utxoTxid}${\n        input.confirmed ? \"\" : ` ${styles.unconfirmed}`\n      }`;\n      const confirmedTitle = input.confirmed ? \"confirmed\" : \"unconfirmed\";\n      return (\n        <TableRow hover key={input.txid}>\n          <TableCell>{inputIndex + 1}</TableCell>\n          <TableCell className={confirmedStyle}>\n            <Copyable text={input.txid} showIcon showText={false}>\n              <code title={confirmedTitle}>{input.txid}</code>\n            </Copyable>\n          </TableCell>\n          <TableCell>\n            <Copyable text={input.index.toString()} />\n          </TableCell>\n          <TableCell>\n            <Copyable text={satoshisToBitcoins(input.amountSats).toString()} />\n          </TableCell>\n          <TableCell>\n            {externalLink(\n              blockExplorerTransactionURL(input.txid, network),\n              <OpenInNew />\n            )}\n          </TableCell>\n        </TableRow>\n      );\n    });\n  };\n\n  render() {\n    const { inputs, inputsTotalSats } = this.props;\n    return (\n      <>\n        <Typography variant=\"h5\">\n          {`Available Inputs (${inputs.length})`}{\" \"}\n        </Typography>\n        <p>The following UTXOs will be spent as inputs in a new transaction.</p>\n        <Table>\n          <TableHead>\n            <TableRow hover>\n              <TableCell>Number</TableCell>\n              <TableCell>TXID</TableCell>\n              <TableCell>Index</TableCell>\n              <TableCell>Amount (BTC)</TableCell>\n              <TableCell>View</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>{this.renderInputs()}</TableBody>\n          <TableFooter>\n            <TableRow hover>\n              <TableCell colSpan={3}>TOTAL:</TableCell>\n              <TableCell colSpan={2}>\n                {satoshisToBitcoins(inputsTotalSats).toString()}\n              </TableCell>\n            </TableRow>\n          </TableFooter>\n        </Table>\n      </>\n    );\n  }\n}\n\nUTXOSet.propTypes = {\n  network: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  inputsTotalSats: PropTypes.shape({}).isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n  };\n}\n\nexport default connect(mapStateToProps)(UTXOSet);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  scriptToOps,\n  scriptToHex,\n  networkLabel,\n  multisigAddressType,\n  multisigRedeemScript,\n  multisigWitnessScript,\n  multisigRequiredSigners,\n  multisigTotalSigners,\n  blockExplorerAddressURL,\n} from \"unchained-bitcoin\";\nimport { Typography, Grid, Box, Chip } from \"@material-ui/core\";\nimport { OpenInNew } from \"@material-ui/icons\";\nimport { externalLink } from \"../utils\";\n\n// Components\nimport Copyable from \"./Copyable\";\n\nclass MultisigDetails extends React.Component {\n  renderScript = (name, script) => {\n    const hex = scriptToHex(script);\n    const ops = scriptToOps(script);\n    return (\n      <Box mt={2}>\n        <Typography variant=\"h6\">{name}</Typography>\n        <Grid container spacing={2}>\n          <Grid item sm={6}>\n            <Copyable text={hex} showIcon code />\n          </Grid>\n          <Grid item sm={6}>\n            <Copyable text={ops} showIcon code />\n          </Grid>\n        </Grid>\n      </Box>\n    );\n  };\n\n  render() {\n    const { network, multisig, showAddress } = this.props;\n    const { address } = multisig;\n    const redeemScript = multisigRedeemScript(multisig);\n    const witnessScript = multisigWitnessScript(multisig);\n    return (\n      <Box mt={2} style={{ maxWidth: \"1080px\" }}>\n        {showAddress && <Typography variant=\"h6\">Address</Typography>}\n\n        <Typography align=\"center\" variant=\"h5\">\n          <Grid container direction=\"column\" spacing={2}>\n            {showAddress && (\n              <Grid item>\n                <Copyable text={address} showIcon code />\n                &nbsp;\n                {externalLink(\n                  blockExplorerAddressURL(address, network),\n                  <OpenInNew />\n                )}\n              </Grid>\n            )}\n\n            <Grid item justify=\"center\" container spacing={3}>\n              <Grid item>\n                <Chip label=\"BTC\" />\n              </Grid>\n\n              <Grid item>\n                <Chip label={networkLabel(network)} />\n              </Grid>\n\n              <Grid item>\n                <Chip\n                  label={`${multisigRequiredSigners(\n                    multisig\n                  )}-of-${multisigTotalSigners(multisig)}`}\n                />\n              </Grid>\n\n              <Grid item>\n                <Chip label={multisigAddressType(multisig)} />\n              </Grid>\n            </Grid>\n          </Grid>\n        </Typography>\n\n        {this.renderScript(\"Script\", multisig)}\n        {redeemScript && this.renderScript(\"Redeem Script\", redeemScript)}\n        {witnessScript && this.renderScript(\"Witness Script\", witnessScript)}\n      </Box>\n    );\n  }\n}\n\nMultisigDetails.propTypes = {\n  multisig: PropTypes.shape({\n    address: PropTypes.string,\n  }).isRequired,\n  network: PropTypes.string.isRequired,\n  showAddress: PropTypes.bool,\n};\n\nMultisigDetails.defaultProps = {\n  showAddress: true,\n};\n\nfunction mapStateToProps(state) {\n  return state.settings;\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MultisigDetails);\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Components\nimport {\n  FormHelperText,\n  Button,\n  Box,\n  Switch,\n  FormControlLabel,\n  Tooltip,\n  makeStyles,\n  Grid,\n} from \"@material-ui/core\";\nimport InfoIcon from \"@material-ui/icons/Info\";\nimport {\n  bitcoindImportMulti,\n  bitcoindGetAddressStatus,\n  bitcoindParams,\n} from \"../bitcoind\";\nimport { clientPropTypes } from \"../proptypes\";\n\nconst useStyles = makeStyles(() => ({\n  tooltip: {\n    fontSize: \".8rem\",\n  },\n}));\n/**\n * @description A button for importing a set of given addresses. Includes a switch\n * to optionally choose to rescan the blockchain for balances.\n */\nfunction ImportAddressesButton({ addresses = [], client, importCallback }) {\n  const [imported, setImported] = useState(false);\n  const [importError, setImportError] = useState(\"\");\n  const [rescan, setRescanPreference] = useState(false);\n  const [addressesError, setAddressesError] = useState(\"\");\n  const [enableImport, setEnableImport] = useState(false);\n\n  const classes = useStyles();\n  // when addresses prop has changed, we want to check its status\n  // Address management currently isn't optimized and so they are added to the store\n  // one at at time. This effect is run each time that updates. Eventually,\n  // this should be optimized to happen all at once. For now though, once we find\n  // a single address that can be imported then enable the import button and\n  // we won't run this anymore. This is mostly for wallet view, not script entry\n  useEffect(() => {\n    const checkAddress = async () => {\n      // reset in case we can't import\n      setEnableImport(false);\n      const address = addresses[addresses.length - 1]; // TODO: loop, or maybe just check one\n      if (!address) return;\n      try {\n        const status = await bitcoindGetAddressStatus({\n          // TODO: use this to warn if spent\n          ...bitcoindParams(client),\n          address,\n        });\n        // if there is a problem querying the address, then enable the button\n        // once enabled, we won't run checkAddress effect anymore\n        if (!status || typeof status.used === \"undefined\") {\n          setEnableImport(true);\n        } else {\n          setEnableImport(false);\n        }\n        setAddressesError(\"\");\n      } catch (e) {\n        // e.status 401 e.statusText\n        // e.status 500 e.data.error.message\n        const status = (e.response && e.response.status) || \"unknown\";\n        const errorMessage =\n          // eslint-disable-next-line no-nested-ternary\n          status === 401\n            ? e.response.statusText\n            : status === 500\n            ? e.response.data.error.message\n            : e.message || \"An unknown address error occured\";\n\n        setAddressesError(errorMessage);\n      }\n    };\n\n    // check address if the button is disabled OR\n    // there's been an update to the address array and there's only one\n    // this typically is the case for the script interactions when dealing\n    // with a single address\n    if (\n      client.type === \"private\" &&\n      (!enableImport || addresses.length === 1)\n    ) {\n      checkAddress();\n    }\n    // eslint-disable-next-line\n  }, [addresses, client]);\n\n  // return \"addresses\" or \"address\"\n  const pluralOrSingularAddress = (capitalize = false) =>\n    `${capitalize ? \"A\" : \"a\"}ddress${\n      addresses && addresses.length > 1 ? \"es\" : \"\"\n    }`;\n\n  async function importAddresses() {\n    const label = \"\"; // TODO: do we want to allow to set? or set to \"caravan\"?\n\n    try {\n      const response = await bitcoindImportMulti({\n        ...bitcoindParams(client),\n        ...{ addresses, label, rescan },\n      });\n\n      const responseError = response.result.reduce((e, c) => {\n        return (c.error && c.error.message) || e;\n      }, \"\");\n\n      setImportError(responseError);\n      setImported(!responseError.length);\n\n      if (importCallback) {\n        // provide succesfully imported addreses to callback\n        const successes = response.result.filter((addr) => addr.success);\n        await importCallback(successes, rescan);\n      }\n    } catch (e) {\n      setImportError(\"Unable to import, check your settings and try again\");\n      setImported(false);\n    }\n  }\n\n  const rescanTooltip = `To get accurate information from your node, your ${pluralOrSingularAddress()}\nwill need to be imported to your node. Importing will give you accurate balance information\nhowever to know if an address has been used prior to import, a rescan needs to take place.`;\n\n  return (\n    <Grid className={classes.container}>\n      <Box component=\"span\" ml={2}>\n        <Button\n          variant=\"contained\"\n          disabled={(!enableImport && !rescan) || !addresses.length}\n          onClick={importAddresses}\n        >\n          Import {pluralOrSingularAddress(true)}\n        </Button>\n      </Box>\n      <Box component=\"span\" ml={2}>\n        <FormControlLabel\n          control={\n            <Switch\n              checked={rescan}\n              onChange={(e) => setRescanPreference(e.target.checked)}\n              color=\"secondary\"\n            />\n          }\n          label=\"Rescan\"\n        />\n        <Tooltip title={rescanTooltip} classes={{ tooltip: classes.tooltip }}>\n          <InfoIcon fontSize=\"small\" color=\"disabled\" />\n        </Tooltip>\n      </Box>\n      <Box>\n        {addressesError.length > 0 && (\n          <FormHelperText error>{addressesError}</FormHelperText>\n        )}\n        {importError.length > 0 && (\n          <FormHelperText error>{importError}</FormHelperText>\n        )}\n        {imported && rescan && (\n          <FormHelperText>\n            {pluralOrSingularAddress(true)} imported, rescan of your node may\n            take some time.\n          </FormHelperText>\n        )}\n        {imported && !rescan && (\n          <FormHelperText>\n            {pluralOrSingularAddress(true)} imported.\n          </FormHelperText>\n        )}\n      </Box>\n    </Grid>\n  );\n}\n\nImportAddressesButton.propTypes = {\n  addresses: PropTypes.arrayOf(PropTypes.string),\n  importCallback: PropTypes.func,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n};\n\nImportAddressesButton.defaultProps = {\n  addresses: [],\n  importCallback() {},\n};\n\nexport default ImportAddressesButton;\n","import { wrappedNumberedActions } from \"./utils\";\n\nexport const SET_SIGNATURE_IMPORTER_NAME = \"SET_SIGNATURE_IMPORTER_NAME\";\nexport const SET_SIGNATURE_IMPORTER_METHOD = \"SET_SIGNATURE_IMPORTER_METHOD\";\nexport const SET_SIGNATURE_IMPORTER_BIP32_PATH =\n  \"SET_SIGNATURE_IMPORTER_BIP32_PATH\";\nexport const SET_SIGNATURE_IMPORTER_PUBLIC_KEYS =\n  \"SET_SIGNATURE_IMPORTER_PUBLIC_KEYS\";\nexport const SET_SIGNATURE_IMPORTER_SIGNATURE =\n  \"SET_SIGNATURE_IMPORTER_SIGNATURE\";\nexport const SET_SIGNATURE_IMPORTER_FINALIZED =\n  \"SET_SIGNATURE_IMPORTER_FINALIZED\";\nexport const SET_SIGNATURE_IMPORTER_COMPLETE =\n  \"SET_SIGNATURE_IMPORTER_COMPLETE\";\n\nexport const {\n  setSignatureImporterName,\n  setSignatureImporterMethod,\n  setSignatureImporterBIP32Path,\n  setSignatureImporterPublicKeys,\n  setSignatureImporterSignature,\n  setSignatureImporterFinalized,\n  setSignatureImporterComplete,\n} = wrappedNumberedActions({\n  setSignatureImporterName: SET_SIGNATURE_IMPORTER_NAME,\n  setSignatureImporterMethod: SET_SIGNATURE_IMPORTER_METHOD,\n  setSignatureImporterBIP32Path: SET_SIGNATURE_IMPORTER_BIP32_PATH,\n  setSignatureImporterPublicKeys: SET_SIGNATURE_IMPORTER_PUBLIC_KEYS,\n  setSignatureImporterSignature: SET_SIGNATURE_IMPORTER_SIGNATURE,\n  setSignatureImporterFinalized: SET_SIGNATURE_IMPORTER_FINALIZED,\n  setSignatureImporterComplete: SET_SIGNATURE_IMPORTER_COMPLETE,\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box, TextField, Button } from \"@material-ui/core\";\n\nclass TextSignatureImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      signatureJSON: \"\",\n      error: \"\",\n    };\n  }\n\n  render = () => {\n    const { signatureJSON, error } = this.state;\n    return (\n      <Box mt={2}>\n        <TextField\n          fullWidth\n          multiline\n          variant=\"outlined\"\n          name=\"signature\"\n          label=\"Signature\"\n          rows={5}\n          value={signatureJSON}\n          onChange={this.handleChange}\n          error={this.hasError()}\n          helperText={error}\n        />\n\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={this.finalize}\n            disabled={signatureJSON === \"\"}\n          >\n            Add Signature\n          </Button>\n        </Box>\n      </Box>\n    );\n  };\n\n  hasError = () => {\n    const { error } = this.state;\n    return error !== \"\";\n  };\n\n  setError = (value) => {\n    this.setState({ error: value });\n  };\n\n  handleChange = (event) => {\n    const signatureJSON = event.target.value;\n    let error = \"\";\n    try {\n      JSON.parse(signatureJSON);\n    } catch (parseError) {\n      error = \"Invalid JSON.\";\n    }\n    this.setState({ signatureJSON, error });\n  };\n\n  finalize = () => {\n    const { validateAndSetSignature } = this.props;\n    const { signatureJSON } = this.state;\n    try {\n      const sig = JSON.parse(signatureJSON);\n      validateAndSetSignature(sig, this.setError);\n    } catch (e) {\n      this.setError(e.message);\n    }\n  };\n}\n\nTextSignatureImporter.propTypes = {\n  signatureImporter: PropTypes.shape({}).isRequired,\n  validateAndSetSignature: PropTypes.func.isRequired,\n};\n\nexport default TextSignatureImporter;\n","// FIXME\n/* eslint-disable max-classes-per-file */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { INFO, WARNING, ERROR } from \"unchained-wallets\";\nimport {\n  Box,\n  Typography,\n  Tabs,\n  Tab,\n  Paper,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from \"@material-ui/core\";\nimport { Info, Warning, Error } from \"@material-ui/icons\";\n\nimport \"./InteractionMessages.css\";\n\nclass MessagesList extends React.Component {\n  render = () => {\n    const { messages } = this.props;\n    return (\n      <List style={{ maxHeight: \"400px\", overflow: \"auto\" }} dense>\n        {messages.map(this.renderMessage)}\n      </List>\n    );\n  };\n\n  renderMessage = (message, key) => {\n    return (\n      <ListItem key={key}>\n        {message.level && (\n          <ListItemIcon>{this.messageIcon(message)}</ListItemIcon>\n        )}\n        <ListItemText>\n          {this.renderMessageBodyAndSubmessages(message)}\n        </ListItemText>\n      </ListItem>\n    );\n  };\n\n  renderMessageBodyAndSubmessages = (message) => {\n    return (\n      <Box>\n        {this.renderMessageBody(message)}\n        {message.messages && (\n          <List dense>{message.messages.map(this.renderMessage)}</List>\n        )}\n      </Box>\n    );\n  };\n\n  renderMessageBody = (message) => {\n    return (\n      <Box>\n        {message.image && (\n          <Box align=\"center\">\n            <img\n              className=\"InteractionMessages-image\"\n              src={`data:${message.image.mimeType};base64, ${message.image.data}`}\n              alt={message.image.label}\n            />\n          </Box>\n        )}\n        <p>{message.text}</p>\n      </Box>\n    );\n  };\n\n  messageIcon = (message) => {\n    switch (message.level) {\n      case INFO:\n        return <Info />;\n      case WARNING:\n        return <Warning />;\n      case ERROR:\n        return <Error />;\n      default:\n        return null;\n    }\n  };\n}\n\nMessagesList.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n};\n\nclass VersionTabPanel extends React.Component {\n  render = () => {\n    const { version, currentVersion } = this.props;\n    return (\n      <Box\n        role=\"tabpanel\"\n        hidden={version !== currentVersion}\n        id={`interactionMessages-tabpanel-${version}`}\n        aria-labelledby={`interactionMessages-tab-${version}`}\n      >\n        {version === currentVersion && (\n          <MessagesList messages={this.filteredMessages()} />\n        )}\n      </Box>\n    );\n  };\n\n  filteredMessages = () => {\n    const { messages, version } = this.props;\n    return messages.filter((message) => {\n      if (message.version) {\n        return message.version === version;\n      }\n      return true;\n    });\n  };\n}\n\nVersionTabPanel.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  version: PropTypes.string.isRequired,\n  currentVersion: PropTypes.string.isRequired,\n};\n\nclass InteractionMessages extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentVersion: \"\",\n    };\n  }\n\n  render = () => {\n    const { messages, versions } = this.filteredMessages();\n    const currentVersion = this.currentVersion(versions);\n    if (versions.length < 2) {\n      return <MessagesList messages={messages} />;\n    }\n    return (\n      <Box>\n        <Typography variant=\"h6\">Model</Typography>\n        <Paper square>\n          <Tabs\n            value={currentVersion}\n            onChange={this.handleChange}\n            aria-label=\"interactionMessages-version\"\n          >\n            {versions.map((version) => (\n              <Tab\n                key={version}\n                value={version}\n                label={version}\n                id={`interactionMessages-tab-${version}`}\n                aria-controls={`interactionMessages-tabpanel-${version}`}\n              />\n            ))}\n          </Tabs>\n        </Paper>\n        {versions.map((version) => (\n          <VersionTabPanel\n            key={version}\n            version={version}\n            currentVersion={currentVersion}\n            messages={messages}\n          />\n        ))}\n      </Box>\n    );\n  };\n\n  currentVersion = (versions) => {\n    const { currentVersion } = this.state;\n    if (currentVersion) {\n      return currentVersion;\n    }\n    return versions[versions.length - 1];\n  };\n\n  handleChange = (event, newValue) => {\n    this.setState({ currentVersion: newValue });\n  };\n\n  filteredMessages = () => {\n    const { messages, excludeCodes } = this.props;\n    const filteredMessages = [];\n    const versions = [];\n    messages.forEach((message) => {\n      for (let i = 0; i < excludeCodes.length; i += 1) {\n        const excludeCode = excludeCodes[i];\n        if ((message.code || \"\").includes(excludeCode)) {\n          return;\n        }\n      }\n      filteredMessages.push(message);\n      if (message.version && !versions.includes(message.version)) {\n        versions.push(message.version);\n      }\n    });\n    return { versions, messages: filteredMessages };\n  };\n}\n\nInteractionMessages.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.shape({})),\n  excludeCodes: PropTypes.arrayOf(PropTypes.string),\n};\n\nInteractionMessages.defaultProps = {\n  messages: [],\n  excludeCodes: [],\n};\n\nexport default InteractionMessages;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { satoshisToBitcoins } from \"unchained-bitcoin\";\nimport {\n  PENDING,\n  UNSUPPORTED,\n  ACTIVE,\n  ERROR,\n  SignMultisigTransaction,\n} from \"unchained-wallets\";\nimport {\n  Button,\n  TextField,\n  FormHelperText,\n  Box,\n  Grid,\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n} from \"@material-ui/core\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nclass DirectSignatureImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      signatureError: \"\",\n      bip32PathError: \"\",\n      status: this.interaction().isSupported() ? PENDING : UNSUPPORTED,\n    };\n  }\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n  };\n\n  interaction = () => {\n    const { signatureImporter, network, inputs, outputs } = this.props;\n    const keystore = signatureImporter.method;\n    const bip32Paths = inputs.map((input) => {\n      if (typeof input.bip32Path === \"undefined\")\n        return signatureImporter.bip32Path; // pubkey path\n      return `${signatureImporter.bip32Path}${input.bip32Path.slice(1)}`; // xpub/pubkey slice away the m, keep /\n    });\n    return SignMultisigTransaction({\n      network,\n      keystore,\n      inputs,\n      outputs,\n      bip32Paths,\n    });\n  };\n\n  render = () => {\n    const {\n      signatureImporter,\n      extendedPublicKeyImporter,\n      isWallet,\n    } = this.props;\n    const { status } = this.state;\n    const interaction = this.interaction();\n    if (status === UNSUPPORTED) {\n      return (\n        <FormHelperText error>\n          {interaction.messageTextFor({ state: status })}\n        </FormHelperText>\n      );\n    }\n    return (\n      <Box mt={2}>\n        {(!isWallet ||\n          extendedPublicKeyImporter === null ||\n          typeof extendedPublicKeyImporter === \"undefined\" ||\n          extendedPublicKeyImporter.method === \"text\") && (\n          <>\n            <Grid container>\n              <Grid item md={10}>\n                <TextField\n                  fullWidth\n                  name=\"bip32Path\"\n                  label=\"BIP32 Path\"\n                  type=\"text\"\n                  value={signatureImporter.bip32Path}\n                  onChange={this.handleBIP32PathChange}\n                  disabled={status !== PENDING}\n                  error={this.hasBIP32PathError()}\n                  helperText={this.bip32PathError()}\n                />\n              </Grid>\n              <Grid item md={2}>\n                {!this.bip32PathIsDefault() && (\n                  <Button\n                    type=\"button\"\n                    variant=\"contained\"\n                    size=\"small\"\n                    onClick={this.resetBIP32Path}\n                    disabled={status !== PENDING}\n                  >\n                    Default\n                  </Button>\n                )}\n              </Grid>\n            </Grid>\n            <FormHelperText>\n              Use the default value if you don&rsquo;t understand BIP32 paths.\n            </FormHelperText>\n          </>\n        )}\n        <Box mt={2}>{this.renderAction()}</Box>\n        {this.renderDeviceConfirmInfo()}\n        <InteractionMessages\n          messages={interaction.messagesFor({ state: status })}\n          excludeCodes={[\"bip32\"]}\n        />\n      </Box>\n    );\n  };\n\n  renderDeviceConfirmInfo = () => {\n    const { fee, inputsTotalSats } = this.props;\n    const { status } = this.state;\n\n    if (status === ACTIVE) {\n      return (\n        <Box>\n          <p>Your device will ask you to verify the following information:</p>\n          <Table>\n            <TableHead>\n              <TableRow hover>\n                <TableCell />\n                <TableCell>Amount (BTC)</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {this.renderTargets()}\n              <TableRow hover>\n                <TableCell>Fee</TableCell>\n                <TableCell>{fee}</TableCell>\n              </TableRow>\n              <TableRow hover>\n                <TableCell>Total</TableCell>\n                <TableCell>\n                  {satoshisToBitcoins(inputsTotalSats).toString()}\n                </TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </Box>\n      );\n    }\n    return \"\";\n  };\n\n  renderTargets = () => {\n    const { outputs } = this.props;\n    return outputs.map((output) => {\n      return (\n        <TableRow hover key={output.address}>\n          <TableCell>\n            Address <code>{output.address}</code>\n          </TableCell>\n          <TableCell>{output.amount}</TableCell>\n        </TableRow>\n      );\n    });\n  };\n\n  renderAction = () => {\n    const { signatureError, status } = this.state;\n    return (\n      <Grid container alignItems=\"center\">\n        <Grid item md={3}>\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            color=\"primary\"\n            onClick={this.sign}\n            disabled={status !== PENDING}\n          >\n            Sign\n          </Button>\n        </Grid>\n        <Grid item md={9}>\n          <FormHelperText error>{signatureError}</FormHelperText>\n        </Grid>\n      </Grid>\n    );\n  };\n\n  //\n  // BIP32 Path\n  //\n\n  hasBIP32PathError = () => {\n    const { bip32PathError, status } = this.state;\n    return (\n      bip32PathError !== \"\" ||\n      this.interaction().hasMessagesFor({\n        state: status,\n        level: ERROR,\n        code: \"bip32\",\n      })\n    );\n  };\n\n  bip32PathError = () => {\n    const { bip32PathError, status } = this.state;\n    if (bip32PathError !== \"\") {\n      return bip32PathError;\n    }\n    return this.interaction().messageTextFor({\n      state: status,\n      level: ERROR,\n      code: \"bip32\",\n    });\n  };\n\n  setBIP32PathError = (value) => {\n    this.setState({ bip32PathError: value });\n  };\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(bip32Path, () => {}, this.setBIP32PathError);\n  };\n\n  bip32PathIsDefault = () => {\n    const { signatureImporter, defaultBIP32Path } = this.props;\n    return signatureImporter.bip32Path === defaultBIP32Path;\n  };\n\n  resetBIP32Path = () => {\n    const { resetBIP32Path } = this.props;\n    this.setBIP32PathError(\"\");\n    resetBIP32Path();\n  };\n\n  //\n  // Sign\n  //\n\n  sign = async () => {\n    const {\n      disableChangeMethod,\n      validateAndSetSignature,\n      enableChangeMethod,\n    } = this.props;\n    disableChangeMethod();\n    this.setState({ signatureError: \"\", status: ACTIVE });\n\n    try {\n      const signature = await this.interaction().run();\n      validateAndSetSignature(signature, (signatureError) => {\n        const stateUpdate = { signatureError };\n        if (signatureError !== \"\") stateUpdate.status = PENDING;\n        this.setState(stateUpdate);\n      });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      this.setState({ signatureError: e.message, status: PENDING });\n    }\n    enableChangeMethod();\n  };\n}\n\nDirectSignatureImporter.propTypes = {\n  defaultBIP32Path: PropTypes.string.isRequired,\n  disableChangeMethod: PropTypes.func.isRequired,\n  enableChangeMethod: PropTypes.func.isRequired,\n  extendedPublicKeyImporter: PropTypes.shape({\n    method: PropTypes.string,\n  }).isRequired,\n  fee: PropTypes.string.isRequired,\n  inputsTotalSats: PropTypes.shape({}).isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  isWallet: PropTypes.bool.isRequired,\n  network: PropTypes.string.isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  signatureImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    method: PropTypes.string,\n  }).isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetSignature: PropTypes.func.isRequired,\n};\n\nexport default DirectSignatureImporter;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { PENDING, ACTIVE } from \"unchained-wallets\";\nimport QrReader from \"react-qr-reader\";\nimport { Grid, Button, Box, FormHelperText } from \"@material-ui/core\";\nimport Copyable from \"../Copyable\";\n\nconst QR_CODE_READER_DELAY = 300; // ms?\n\nclass HermitReader extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: PENDING,\n      error: \"\",\n    };\n  }\n\n  render = () => {\n    const { status, error } = this.state;\n    const { interaction, width, startText } = this.props;\n\n    if (status === PENDING) {\n      const commandMessage = interaction.messageFor({\n        state: status,\n        code: \"hermit.command\",\n      });\n      return (\n        <div>\n          <p>{commandMessage.instructions}</p>\n          <Grid container justify=\"center\" className=\"mb-2\">\n            <Copyable text={commandMessage.command} showText={false}>\n              <code>\n                <strong>{commandMessage.mode}&gt;</strong>{\" \"}\n                {commandMessage.command}\n              </code>\n            </Copyable>\n          </Grid>\n          <p>When you are ready, scan the QR code produced by Hermit:</p>\n          <Box mt={2}>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className=\"mt-2\"\n              size=\"large\"\n              onClick={this.handleStart}\n            >\n              {startText}\n            </Button>\n          </Box>\n        </div>\n      );\n    }\n\n    if (status === ACTIVE) {\n      return (\n        <Grid container direction=\"column\">\n          <Grid item>\n            <QrReader\n              delay={QR_CODE_READER_DELAY}\n              onError={this.handleError}\n              onScan={this.handleScan}\n              style={{ width }}\n              facingMode=\"user\"\n            />\n          </Grid>\n          <Grid item>\n            <Button\n              variant=\"contained\"\n              color=\"secondary\"\n              size=\"small\"\n              onClick={this.handleStop}\n            >\n              Cancel\n            </Button>\n          </Grid>\n        </Grid>\n      );\n    }\n\n    if (status === \"error\" || status === \"success\") {\n      return (\n        <div>\n          <FormHelperText error>{error}</FormHelperText>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            size=\"small\"\n            onClick={this.handleStop}\n          >\n            Reset\n          </Button>\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  handleStart = () => {\n    const { onStart } = this.props;\n    this.setState({ status: ACTIVE, error: \"\" });\n    if (onStart) {\n      onStart();\n    }\n  };\n\n  handleError = (error) => {\n    const { onClear } = this.props;\n    this.setState({ status: \"error\", error: error.message });\n    if (onClear) {\n      onClear();\n    }\n  };\n\n  handleScan = (data) => {\n    const { onSuccess, interaction } = this.props;\n    if (data) {\n      try {\n        const result = interaction.parse(data);\n        onSuccess(result);\n        this.setState({ status: \"success\" });\n      } catch (e) {\n        this.handleError(e);\n      }\n    }\n  };\n\n  handleStop = () => {\n    const { onClear } = this.props;\n    this.setState({\n      status: PENDING,\n      error: \"\",\n    });\n    if (onClear) {\n      onClear();\n    }\n  };\n}\n\nHermitReader.propTypes = {\n  onStart: PropTypes.func.isRequired,\n  onSuccess: PropTypes.func.isRequired,\n  onClear: PropTypes.func.isRequired,\n  width: PropTypes.string,\n  startText: PropTypes.string,\n  interaction: PropTypes.shape({\n    messageFor: PropTypes.func,\n    parse: PropTypes.func,\n  }).isRequired,\n};\n\nHermitReader.defaultProps = {\n  width: \"256px\",\n  startText: \"Scan\",\n};\n\nexport default HermitReader;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport QRCode from \"qrcode.react\";\nimport Copyable from \"../Copyable\";\n\nconst HermitDisplayer = (props) => {\n  const { width, string } = props;\n  return (\n    <Copyable text={string} newline showText={false}>\n      <QRCode size={width} value={string} level=\"L\" />\n    </Copyable>\n  );\n};\n\nHermitDisplayer.propTypes = {\n  string: PropTypes.string,\n  width: PropTypes.number,\n};\n\nHermitDisplayer.defaultProps = {\n  string: \"\",\n  width: 120,\n};\n\nexport default HermitDisplayer;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  HERMIT,\n  PENDING,\n  UNSUPPORTED,\n  SignMultisigTransaction,\n} from \"unchained-wallets\";\nimport {\n  Grid,\n  Box,\n  TextField,\n  Button,\n  FormHelperText,\n} from \"@material-ui/core\";\nimport HermitReader from \"./HermitReader\";\nimport HermitDisplayer from \"./HermitDisplayer\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nclass HermitSignatureImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bip32PathError: \"\",\n      signatureError: \"\",\n      status: this.interaction(true).isSupported() ? PENDING : UNSUPPORTED,\n    };\n  }\n\n  interaction = () => {\n    const { signatureImporter, network, inputs, outputs } = this.props;\n    const bip32Paths = inputs.map((input) => {\n      if (typeof input.bip32Path === \"undefined\")\n        return signatureImporter.bip32Path; // pubkey path\n      return `${signatureImporter.bip32Path}${input.bip32Path.slice(1)}`; // xpub/pubkey slice away the m, keep /\n    });\n\n    return SignMultisigTransaction({\n      keystore: HERMIT,\n      network,\n      inputs,\n      outputs,\n      bip32Paths,\n    });\n  };\n\n  render = () => {\n    const {\n      signatureImporter,\n      disableChangeMethod,\n      resetBIP32Path,\n    } = this.props;\n    const { bip32PathError, signatureError, status } = this.state;\n    const interaction = this.interaction();\n    if (status === UNSUPPORTED) {\n      return (\n        <InteractionMessages\n          messages={interaction.messagesFor({ state: status })}\n          excludeCodes={[\"hermit.signature_request\", \"hermit.command\"]}\n        />\n      );\n    }\n    return (\n      <Box mt={2}>\n        <Grid container>\n          <Grid item md={10}>\n            <TextField\n              name=\"bip32Path\"\n              value={signatureImporter.bip32Path}\n              onChange={this.handleBIP32PathChange}\n              disabled={status !== PENDING}\n              error={this.hasBIP32PathError()}\n              helperText={bip32PathError}\n            />\n          </Grid>\n\n          <Grid item md={2}>\n            {!this.bip32PathIsDefault() && (\n              <Button\n                type=\"button\"\n                variant=\"contained\"\n                size=\"small\"\n                onClick={resetBIP32Path}\n                disabled={status !== PENDING}\n              >\n                Default\n              </Button>\n            )}\n          </Grid>\n        </Grid>\n\n        <FormHelperText>\n          Use the default value if you don&rsquo;t understand BIP32 paths.\n        </FormHelperText>\n\n        <Box mt={2}>\n          <Grid container justify=\"center\">\n            <Grid item>\n              <HermitDisplayer width={400} string={interaction.request()} />\n            </Grid>\n          </Grid>\n\n          <HermitReader\n            startText=\"Scan Signature QR Code\"\n            interaction={interaction}\n            onStart={disableChangeMethod}\n            onSuccess={this.import}\n            onClear={this.clear}\n          />\n\n          <InteractionMessages\n            messages={interaction.messagesFor({ state: status })}\n            excludeCodes={[\"hermit.signature_request\", \"hermit.command\"]}\n          />\n\n          <FormHelperText error>{signatureError}</FormHelperText>\n        </Box>\n      </Box>\n    );\n  };\n\n  import = (signature) => {\n    const { validateAndSetSignature, enableChangeMethod } = this.props;\n    this.setState({ signatureError: \"\" });\n    enableChangeMethod();\n    validateAndSetSignature(signature, (signatureError) => {\n      this.setState({ signatureError });\n    });\n  };\n\n  clear = () => {\n    const { resetBIP32Path, enableChangeMethod } = this.props;\n    resetBIP32Path();\n    this.setState({ signatureError: \"\" });\n    enableChangeMethod();\n  };\n\n  hasBIP32PathError = () => {\n    const { bip32PathError } = this.state;\n    return bip32PathError !== \"\";\n  };\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(\n      bip32Path,\n      () => {},\n      (bip32PathError) => {\n        this.setState({ bip32PathError });\n      }\n    );\n  };\n\n  bip32PathIsDefault = () => {\n    const { signatureImporter, defaultBIP32Path } = this.props;\n    return signatureImporter.bip32Path === defaultBIP32Path;\n  };\n}\n\nHermitSignatureImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  signatureImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n  }).isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetSignature: PropTypes.func.isRequired,\n  enableChangeMethod: PropTypes.func.isRequired,\n  disableChangeMethod: PropTypes.func.isRequired,\n};\n\nexport default HermitSignatureImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  PENDING,\n  UNSUPPORTED,\n  SignMultisigTransaction,\n  ACTIVE,\n} from \"unchained-wallets\";\nimport {\n  Box,\n  FormHelperText,\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n  FormGroup,\n} from \"@material-ui/core\";\nimport { satoshisToBitcoins } from \"unchained-bitcoin\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nclass IndirectSignatureImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bip32PathError: \"\",\n      signatureError: \"\",\n      status: this.interaction().isSupported() ? PENDING : UNSUPPORTED,\n    };\n  }\n\n  interaction = () => {\n    const { signatureImporter, network, inputs, outputs } = this.props;\n    const keystore = signatureImporter.method;\n    const bip32Paths = inputs.map((input) => {\n      if (typeof input.bip32Path === \"undefined\")\n        return signatureImporter.bip32Path; // pubkey path\n      return `${signatureImporter.bip32Path}${input.bip32Path.slice(1)}`; // xpub/pubkey slice away the m, keep /\n    });\n\n    return SignMultisigTransaction({\n      keystore,\n      network,\n      inputs,\n      outputs,\n      bip32Paths,\n    });\n  };\n\n  renderDeviceConfirmInfo = () => {\n    const { fee, inputsTotalSats } = this.props;\n    return (\n      <Box>\n        <p>Your device will ask you to verify the following information:</p>\n        <Table>\n          <TableHead>\n            <TableRow hover>\n              <TableCell />\n              <TableCell>Amount (BTC)</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {this.renderTargets()}\n            <TableRow hover>\n              <TableCell>Fee</TableCell>\n              <TableCell>{fee}</TableCell>\n            </TableRow>\n            <TableRow hover>\n              <TableCell>Total</TableCell>\n              <TableCell>\n                {satoshisToBitcoins(inputsTotalSats).toString()}\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </Box>\n    );\n  };\n\n  renderTargets = () => {\n    const { outputs } = this.props;\n    return outputs.map((output) => {\n      return (\n        <TableRow hover key={output.address}>\n          <TableCell>\n            Address <code>{output.address}</code>\n          </TableCell>\n          <TableCell>{output.amount}</TableCell>\n        </TableRow>\n      );\n    });\n  };\n\n  render = () => {\n    const {\n      disableChangeMethod,\n      extendedPublicKeyImporter,\n      Signer,\n    } = this.props;\n    const { signatureError, status } = this.state;\n    const interaction = this.interaction();\n    if (status === UNSUPPORTED) {\n      return (\n        <InteractionMessages\n          messages={interaction.messagesFor({ state: status })}\n          excludeCodes={[\"hermit.signature_request\", \"hermit.command\"]}\n        />\n      );\n    }\n    return (\n      <Box mt={2}>\n        <Box mt={2}>\n          {this.renderDeviceConfirmInfo()}\n          <FormGroup>\n            <Signer\n              setError={this.setError}\n              hasError={this.hasBIP32PathError()}\n              onReceive={this.onReceive}\n              onReceivePSBT={this.onReceivePSBT}\n              interaction={this.interaction()}\n              setActive={this.setActive}\n              disableChangeMethod={disableChangeMethod}\n              extendedPublicKeyImporter={extendedPublicKeyImporter}\n            />\n\n            <FormHelperText error>{signatureError}</FormHelperText>\n\n            <InteractionMessages\n              messages={interaction.messagesFor({ state: status })}\n            />\n          </FormGroup>\n        </Box>\n      </Box>\n    );\n  };\n\n  setActive = () => {\n    this.setState({ status: ACTIVE });\n  };\n\n  onReceive = (signature) => {\n    const { validateAndSetSignature, enableChangeMethod } = this.props;\n    this.setState({ signatureError: \"\" });\n    if (enableChangeMethod) {\n      enableChangeMethod();\n    }\n    validateAndSetSignature(signature, (signatureError) => {\n      this.setState({ signatureError });\n    });\n  };\n\n  onReceivePSBT = (data) => {\n    const { validateAndSetSignature } = this.props;\n    try {\n      // signatureData is one or more sets of signatures that are keyed\n      // based on which pubkey the signatures are signing.\n      const signatureData = this.interaction().parse(data);\n      const signatureSetsKeys = Object.keys(signatureData);\n      const signatures = [];\n\n      // We have a slight issue for the n-ly signed PSBT case\n      // because there is no order to the pubkey: [signature(s)] mapping\n      // returned from `unchained-bitcoin`. it's ok, we have valid signatures, etc.\n      // but truncating information can cause problems down the line in keeping\n      // the validation straightforward.\n\n      // e.g. have a doubly-signed psbt with 3 inputs on the same 2-of-3 multisig address,\n      // so 6 signatures total are returned in signatureData back for 2 pubkeys (3 signatures from each pubkey).\n      // here adding a pubkey set matches that signature array.\n      // [siga1, siga2, siga3, sigb1, sigb2, sigb3]\n      // In the case of multiple 2-of-3 multisig addresses, the pubkeys can get jumbled and there's no longer\n      // a clear break between signature sets based purely on pubkey. need xfp information as well.\n\n      // For now, shove all of the signatures into the same array and return that.\n      signatureSetsKeys.forEach((pubkey) => {\n        signatures.push(...signatureData[pubkey]);\n      });\n\n      this.setState({ signatureError: \"\" });\n      validateAndSetSignature(signatures, (signatureError) => {\n        this.setState({ signatureError });\n      });\n    } catch (e) {\n      e.errorType = \"Coldcard Signing Error\";\n      this.setState({ signatureError: e.message });\n    }\n  };\n\n  setError = (value) => {\n    this.setState({ signatureError: value });\n  };\n\n  clear = () => {\n    const { resetBIP32Path, enableChangeMethod } = this.props;\n    resetBIP32Path();\n    this.setState({ signatureError: \"\" });\n    enableChangeMethod();\n  };\n\n  hasBIP32PathError = () => {\n    const { bip32PathError } = this.state;\n    return bip32PathError !== \"\";\n  };\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(\n      bip32Path,\n      () => {},\n      (bip32PathError) => {\n        this.setState({ bip32PathError });\n      }\n    );\n  };\n\n  bip32PathIsDefault = () => {\n    const { signatureImporter, defaultBIP32Path } = this.props;\n    return signatureImporter.bip32Path === defaultBIP32Path;\n  };\n}\n\nIndirectSignatureImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  signatureImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    method: PropTypes.string,\n  }).isRequired,\n  resetBIP32Path: PropTypes.func,\n  defaultBIP32Path: PropTypes.string,\n  validateAndSetBIP32Path: PropTypes.func,\n  validateAndSetSignature: PropTypes.func.isRequired,\n  enableChangeMethod: PropTypes.func,\n  disableChangeMethod: PropTypes.func,\n  extendedPublicKeyImporter: PropTypes.shape({\n    method: PropTypes.string,\n  }),\n  Signer: PropTypes.shape({}).isRequired,\n  fee: PropTypes.string,\n  inputsTotalSats: PropTypes.shape({}),\n};\n\nIndirectSignatureImporter.defaultProps = {\n  resetBIP32Path: null,\n  defaultBIP32Path: \"\",\n  validateAndSetBIP32Path: null,\n  enableChangeMethod: null,\n  disableChangeMethod: null,\n  extendedPublicKeyImporter: {},\n  fee: \"\",\n  inputsTotalSats: {},\n};\n\nexport default IndirectSignatureImporter;\n","// eslint-disable-next-line max-classes-per-file\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Dropzone from \"react-dropzone\";\nimport {\n  Box,\n  Button,\n  FormHelperText,\n  Grid,\n  TextField,\n} from \"@material-ui/core\";\nimport { CloudUpload as UploadIcon } from \"@material-ui/icons\";\nimport styles from \"./ColdcardFileReader.module.scss\";\n\nclass ColdcardFileReaderBase extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: props.fileType || \"JSON\",\n    };\n  }\n\n  render = () => {\n    const {\n      maxFileSize,\n      validFileFormats,\n      extendedPublicKeyImporter,\n      handleBIP32PathChange,\n      resetBIP32Path,\n      bip32PathIsDefault,\n      hasError,\n      errorMessage,\n      isTest,\n    } = this.props;\n    const { fileType } = this.state;\n    return (\n      <Grid container direction=\"column\">\n        {fileType === \"JSON\" && !isTest && (\n          <Grid container>\n            <Grid item md={6}>\n              <TextField\n                label=\"BIP32 Path\"\n                value={extendedPublicKeyImporter.bip32Path}\n                onChange={handleBIP32PathChange}\n                error={hasError}\n                helperText={errorMessage}\n              />\n            </Grid>\n            <Grid item md={6}>\n              {!bip32PathIsDefault() && (\n                <Button\n                  type=\"button\"\n                  variant=\"contained\"\n                  size=\"small\"\n                  onClick={resetBIP32Path}\n                >\n                  Default\n                </Button>\n              )}\n            </Grid>\n            <FormHelperText>\n              Use the default value if you don&rsquo;t understand BIP32 paths.\n            </FormHelperText>\n          </Grid>\n        )}\n        <p>\n          When you are ready, upload the {fileType} file from your Coldcard:\n        </p>\n        <Box>\n          <Dropzone\n            className={hasError ? styles.dropzoneDull : styles.dropzone}\n            onDrop={this.onDrop}\n            multiple={false}\n            minSize={1}\n            maxSize={maxFileSize}\n            accept={validFileFormats}\n            disableClick={hasError}\n          >\n            <UploadIcon classes={{ root: styles.uploadIcon }} />\n            <p className={styles.instruction}>\n              {fileType === \"JSON\" ? \"Upload The XPUB\" : \"Upload Signed PSBT\"}\n            </p>\n          </Dropzone>\n        </Box>\n      </Grid>\n    );\n  };\n\n  singleAcceptedFile = (acceptedFiles, rejectedFiles) => {\n    return rejectedFiles.length === 0 && acceptedFiles.length === 1;\n  };\n\n  onDrop = (acceptedFiles, rejectedFiles) => {\n    const { onReceive, onReceivePSBT, setError, hasError } = this.props;\n    const { fileType } = this.state;\n    if (hasError) return; // do not continue if the bip32path is invalid\n    if (this.singleAcceptedFile(acceptedFiles, rejectedFiles)) {\n      const file = acceptedFiles[0];\n      const reader = new FileReader();\n      reader.onload = () => {\n        // eslint-disable-next-line no-unused-expressions\n        fileType === \"JSON\"\n          ? onReceive(reader.result)\n          : onReceivePSBT(reader.result);\n      };\n      reader.readAsText(file);\n    } else if (rejectedFiles.length === 1) {\n      setError(\n        `The file you attempted to upload was unacceptable. File type must be .${fileType.toLowerCase()}.`\n      );\n    } else if (rejectedFiles.length > 1) {\n      setError(`This dropzone only accepts a single file.`);\n    }\n  };\n}\n\nColdcardFileReaderBase.propTypes = {\n  onReceive: PropTypes.func,\n  onReceivePSBT: PropTypes.func,\n  setError: PropTypes.func.isRequired,\n  fileType: PropTypes.string,\n  maxFileSize: PropTypes.number,\n  validFileFormats: PropTypes.string,\n  extendedPublicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n  }),\n  handleBIP32PathChange: PropTypes.func,\n  resetBIP32Path: PropTypes.func,\n  bip32PathIsDefault: PropTypes.func,\n  hasError: PropTypes.bool,\n  errorMessage: PropTypes.string,\n  isTest: PropTypes.bool,\n};\n\nColdcardFileReaderBase.defaultProps = {\n  onReceive: null,\n  onReceivePSBT: null,\n  handleBIP32PathChange: null,\n  resetBIP32Path: null,\n  bip32PathIsDefault: null,\n  errorMessage: \"\",\n  hasError: PropTypes.bool,\n  maxFileSize: 1048576, // 1MB\n  fileType: \"JSON\",\n  validFileFormats: \".json\",\n  extendedPublicKeyImporter: null,\n  isTest: false,\n};\n\nexport class ColdcardJSONReader extends ColdcardFileReaderBase {}\nColdcardJSONReader.defaultProps = {\n  fileType: \"JSON\",\n  validFileFormats: \".json\",\n};\n\nexport class ColdcardPSBTReader extends ColdcardFileReaderBase {}\nColdcardPSBTReader.defaultProps = {\n  fileType: \"PSBT\",\n  validFileFormats: \".psbt\",\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button } from \"@material-ui/core\";\n\nconst ColdcardSigningButtons = (props) => {\n  const { handlePSBTDownloadClick, handleWalletConfigDownloadClick } = props;\n  return (\n    <>\n      <Button\n        type=\"button\"\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handlePSBTDownloadClick}\n      >\n        Download PSBT\n      </Button>\n      <Button\n        type=\"button\"\n        variant=\"contained\"\n        onClick={handleWalletConfigDownloadClick}\n      >\n        Download Coldcard Config\n      </Button>\n    </>\n  );\n};\n\nColdcardSigningButtons.propTypes = {\n  handlePSBTDownloadClick: PropTypes.func.isRequired,\n  handleWalletConfigDownloadClick: PropTypes.func.isRequired,\n};\n\nexport default ColdcardSigningButtons;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\";\nimport { COLDCARD, ConfigAdapter } from \"unchained-wallets\";\nimport { connect } from \"react-redux\";\nimport { ColdcardSigningButtons } from \".\";\nimport { ColdcardPSBTReader } from \"./ColdcardFileReader\";\nimport { downloadFile } from \"../../utils\";\nimport { getWalletDetailsText } from \"../../selectors/wallet\";\n\nclass ColdcardSigner extends Component {\n  handlePSBTDownloadClick = () => {\n    const { walletName, interaction, setActive } = this.props;\n    const body = interaction.request().toBase64();\n    const timestamp = moment().format(\"HHmm\");\n    const filename = `${timestamp}-${walletName}.psbt`;\n    downloadFile(body, filename);\n    setActive();\n  };\n\n  handleWalletConfigDownloadClick = () => {\n    const { walletDetailsText } = this.props;\n    this.reshapeConfig(walletDetailsText);\n  };\n\n  // This tries to reshape it to a Coldcard Wallet Config via unchained-wallets\n  reshapeConfig = (walletDetails) => {\n    const walletConfig = JSON.parse(walletDetails);\n    const { startingAddressIndex } = walletConfig;\n    // If this is a config that's been rekeyed, note that in the name.\n    walletConfig.name =\n      startingAddressIndex === 0\n        ? walletConfig.name\n        : `${walletConfig.name}_${startingAddressIndex.toString()}`;\n\n    // At the moment (2020-Dec), Coldcard has just released a new firmware version\n    // which addresses the following problem:  that they inverted the ordering\n    // for p2sh-p2wsh as p2wsh-p2sh but we need to support the older firmware.\n    walletConfig.addressType = walletConfig.addressType.includes(\"-\")\n      ? \"P2WSH-P2SH\"\n      : walletConfig.addressType;\n\n    const interaction = ConfigAdapter({\n      KEYSTORE: COLDCARD,\n      jsonConfig: walletConfig,\n    });\n    const body = interaction.adapt();\n    const filename = `wc-${walletConfig.name}.txt`;\n    downloadFile(body, filename);\n  };\n\n  render = () => {\n    const { onReceivePSBT, setError } = this.props;\n    return (\n      <div>\n        <ColdcardSigningButtons\n          handlePSBTDownloadClick={this.handlePSBTDownloadClick}\n          handleWalletConfigDownloadClick={this.handleWalletConfigDownloadClick}\n        />\n        <ColdcardPSBTReader onReceivePSBT={onReceivePSBT} setError={setError} />\n      </div>\n    );\n  };\n}\n\nColdcardSigner.propTypes = {\n  walletName: PropTypes.string.isRequired,\n  interaction: PropTypes.shape({\n    request: PropTypes.func,\n  }).isRequired,\n  setActive: PropTypes.func.isRequired,\n  walletDetailsText: PropTypes.string.isRequired,\n  onReceivePSBT: PropTypes.func.isRequired,\n  setError: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    walletName: state.wallet.common.walletName,\n    walletDetailsText: getWalletDetailsText(state),\n  };\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ColdcardSigner);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport IndirectSignatureImporter from \"../ScriptExplorer/IndirectSignatureImporter\";\nimport ColdcardSigner from \"./ColdcardSigner\";\n\nconst ColdcardSignatureImporter = (props) => {\n  const {\n    signatureImporter,\n    extendedPublicKeyImporter,\n    inputs,\n    outputs,\n    inputsTotalSats,\n    fee,\n    validateAndSetSignature,\n    network,\n  } = props;\n  return (\n    <IndirectSignatureImporter\n      network={network}\n      signatureImporter={signatureImporter}\n      inputs={inputs}\n      outputs={outputs}\n      inputsTotalSats={inputsTotalSats}\n      fee={fee}\n      extendedPublicKeyImporter={extendedPublicKeyImporter}\n      validateAndSetSignature={validateAndSetSignature}\n      Signer={ColdcardSigner}\n    />\n  );\n};\n\nColdcardSignatureImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  signatureImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n  }).isRequired,\n  validateAndSetSignature: PropTypes.func.isRequired,\n  extendedPublicKeyImporter: PropTypes.shape({}).isRequired,\n  inputsTotalSats: PropTypes.shape({}).isRequired,\n  fee: PropTypes.string.isRequired,\n};\n\nexport default ColdcardSignatureImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  validateHex,\n  validateMultisigSignature,\n  multisigBIP32Path,\n  multisigBIP32Root,\n  validateBIP32Path,\n} from \"unchained-bitcoin\";\nimport { TREZOR, LEDGER, HERMIT, COLDCARD } from \"unchained-wallets\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  Select,\n  MenuItem,\n  InputLabel,\n  Button,\n  Box,\n  FormControl,\n} from \"@material-ui/core\";\nimport Copyable from \"../Copyable\";\nimport TextSignatureImporter from \"./TextSignatureImporter\";\nimport DirectSignatureImporter from \"./DirectSignatureImporter\";\nimport HermitSignatureImporter from \"../Hermit/HermitSignatureImporter\";\nimport ColdcardSignatureImporter from \"../Coldcard/ColdcardSignatureImporter\";\nimport EditableName from \"../EditableName\";\nimport {\n  setSignatureImporterName,\n  setSignatureImporterMethod,\n  setSignatureImporterBIP32Path,\n  setSignatureImporterPublicKeys,\n  setSignatureImporterSignature,\n  setSignatureImporterFinalized,\n  setSignatureImporterComplete,\n} from \"../../actions/signatureImporterActions\";\nimport \"react-table/react-table.css\";\nimport { setSigningKey as setSigningKeyAction } from \"../../actions/transactionActions\";\n\nconst TEXT = \"text\";\nconst UNKNOWN = \"unknown\";\n\nclass SignatureImporter extends React.Component {\n  titleRef = React.createRef();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      disableChangeMethod: false,\n    };\n  }\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n    this.scrollToTitle();\n  };\n\n  componentDidUpdate = () => {\n    this.scrollToTitle();\n  };\n\n  getCurrent() {\n    const { signatureImporters } = this.props;\n    return Object.keys(signatureImporters).reduce((o, k) => {\n      return o + (signatureImporters[k].finalized ? 1 : 0);\n    }, 1);\n  }\n\n  title = () => {\n    const { number, signatureImporter, setName } = this.props;\n    return (\n      <EditableName\n        number={number}\n        name={signatureImporter.name}\n        setName={setName}\n      />\n    );\n  };\n\n  scrollToTitle = () => {\n    const { number } = this.props;\n    if (number === this.getCurrent()) {\n      this.titleRef.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n  };\n\n  renderImport = () => {\n    const { signatureImporter, number, isWallet } = this.props;\n    const currentNumber = this.getCurrent();\n    const notMyTurn = number > currentNumber;\n    const { disableChangeMethod } = this.state;\n    const labelId = `signature-${number}-importer-select-label`;\n    if (notMyTurn) {\n      return (\n        <p>\n          Once you have imported the signature above, you will be able to import\n          another signature here.\n        </p>\n      );\n    }\n\n    return (\n      <form>\n        <FormControl fullWidth>\n          <InputLabel id={labelId}>Select Method</InputLabel>\n\n          <Select\n            labelId={labelId}\n            id={`signature-${number}-importer-select`}\n            disabled={disableChangeMethod}\n            value={signatureImporter.method}\n            onChange={this.handleMethodChange}\n          >\n            <MenuItem value={UNKNOWN}>{\"< Select method >\"}</MenuItem>\n            <MenuItem value={TREZOR}>Trezor</MenuItem>\n            <MenuItem value={LEDGER}>Ledger</MenuItem>\n            <MenuItem value={COLDCARD} disabled={!isWallet}>\n              Coldcard\n            </MenuItem>\n            <MenuItem value={HERMIT}>Hermit</MenuItem>\n            <MenuItem value={TEXT}>Enter as text</MenuItem>\n          </Select>\n        </FormControl>\n\n        {this.renderImportByMethod()}\n      </form>\n    );\n  };\n\n  renderImportByMethod = () => {\n    const {\n      network,\n      signatureImporter,\n      signatureImporters,\n      inputs,\n      inputsTotalSats,\n      outputs,\n      fee,\n      isWallet,\n      extendedPublicKeyImporter,\n    } = this.props;\n    const { method } = signatureImporter;\n\n    if (method === TREZOR || method === LEDGER) {\n      return (\n        <DirectSignatureImporter\n          network={network}\n          signatureImporter={signatureImporter}\n          signatureImporters={signatureImporters}\n          inputs={inputs}\n          outputs={outputs}\n          inputsTotalSats={inputsTotalSats}\n          fee={fee}\n          isWallet={isWallet}\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          resetBIP32Path={this.resetBIP32Path}\n          defaultBIP32Path={this.defaultBIP32Path()}\n          validateAndSetSignature={this.validateAndSetSignature}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n        />\n      );\n    }\n    if (method === HERMIT) {\n      return (\n        <HermitSignatureImporter\n          network={network}\n          signatureImporter={signatureImporter}\n          inputs={inputs}\n          outputs={outputs}\n          inputsTotalSats={inputsTotalSats}\n          fee={fee}\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          resetBIP32Path={this.resetBIP32Path}\n          defaultBIP32Path={this.defaultBIP32Path()}\n          validateAndSetSignature={this.validateAndSetSignature}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n        />\n      );\n    }\n    if (method === COLDCARD) {\n      return (\n        <ColdcardSignatureImporter\n          network={network}\n          signatureImporter={signatureImporter}\n          inputs={inputs}\n          outputs={outputs}\n          inputsTotalSats={inputsTotalSats}\n          fee={fee}\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetSignature={this.validateAndSetSignature}\n        />\n      );\n    }\n    if (method === TEXT) {\n      return (\n        <TextSignatureImporter\n          signatureImporter={signatureImporter}\n          validateAndSetSignature={this.validateAndSetSignature}\n        />\n      );\n    }\n    return null;\n  };\n\n  //\n  // Method\n  //\n\n  handleMethodChange = (event) => {\n    const { number, setMethod } = this.props;\n    setMethod(number, event.target.value);\n    this.reset();\n  };\n\n  disableChangeMethod = () => {\n    this.setState({ disableChangeMethod: true });\n  };\n\n  enableChangeMethod = () => {\n    this.setState({ disableChangeMethod: false });\n  };\n\n  //\n  // State\n  //\n\n  reset = () => {\n    const { number, setSignature, setPublicKeys, setFinalized } = this.props;\n    setSignature(number, \"\");\n    setPublicKeys(number, []);\n    setFinalized(number, false);\n  };\n\n  //\n  // BIP32 Path\n  //\n\n  defaultBIP32Path = () => {\n    const { addressType, network, isWallet } = this.props;\n    return isWallet\n      ? multisigBIP32Root(addressType, network)\n      : multisigBIP32Path(addressType, network);\n  };\n\n  resetBIP32Path = () => {\n    const { number, setBIP32Path, isWallet } = this.props;\n    if (isWallet) {\n      const { extendedPublicKeyImporter } = this.props;\n      if (\n        extendedPublicKeyImporter &&\n        extendedPublicKeyImporter.method !== \"text\"\n      )\n        return;\n    }\n    setBIP32Path(number, this.defaultBIP32Path());\n  };\n\n  validateAndSetBIP32Path = (bip32Path, callback, errback, options) => {\n    const { number, setBIP32Path } = this.props;\n    const error = validateBIP32Path(bip32Path, options);\n    setBIP32Path(number, bip32Path);\n    if (error) {\n      errback(error);\n    } else {\n      errback(\"\");\n      callback();\n    }\n  };\n\n  //\n  // Signature\n  //\n\n  renderSignature = () => {\n    const { signatureImporter, txid } = this.props;\n    const signatureJSON = JSON.stringify(signatureImporter.signature);\n    return (\n      <div>\n        <p>The following signature was imported:</p>\n        <Box>\n          <Copyable text={signatureJSON} showIcon code />\n        </Box>\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            disabled={txid !== \"\"}\n            size=\"small\"\n            onClick={this.reset}\n          >\n            Remove Signature\n          </Button>\n        </Box>\n      </div>\n    );\n  };\n\n  validateAndSetSignature = (inputsSignatures, errback) => {\n    const {\n      number,\n      inputs,\n      signatureImporters,\n      setComplete,\n      network,\n      outputs,\n      setSigningKey,\n    } = this.props;\n    if (!Array.isArray(inputsSignatures)) {\n      errback(\"Signature is not an array of strings.\");\n      return;\n    }\n\n    if (inputsSignatures.length < inputs.length) {\n      errback(\n        \"Not enough signatures (must be at least one signature for each input).\"\n      );\n      return;\n    }\n\n    if (inputsSignatures.length % inputs.length !== 0) {\n      errback(\"Number of signatures must be a multiple of number of inputs.\");\n      return;\n    }\n\n    const numSignatureSets = inputsSignatures.length / inputs.length;\n\n    if (numSignatureSets > Object.values(signatureImporters).length) {\n      errback(\n        \"Too many signatures. Max one set of signatures per required signer.\"\n      );\n      return;\n    }\n    const publicKeys = [];\n    if (numSignatureSets === 1) {\n      const finalizedSignatureImporters = Object.values(\n        signatureImporters\n      ).filter((signatureImporter) => signatureImporter.finalized);\n      for (\n        let inputIndex = 0;\n        inputIndex < inputsSignatures.length;\n        inputIndex += 1\n      ) {\n        const inputNumber = inputIndex + 1;\n        const inputSignature = inputsSignatures[inputIndex];\n        if (validateHex(inputSignature) !== \"\") {\n          errback(`Signature for input ${inputNumber} is not valid hex.`);\n          return;\n        }\n\n        let publicKey;\n        try {\n          publicKey = validateMultisigSignature(\n            network,\n            inputs,\n            outputs,\n            inputIndex,\n            inputSignature\n          );\n        } catch (e) {\n          errback(`Signature for input ${inputNumber} is invalid.`);\n          return;\n        }\n        if (publicKey) {\n          for (\n            let finalizedSignatureImporterNum = 0;\n            finalizedSignatureImporterNum < finalizedSignatureImporters.length;\n            finalizedSignatureImporterNum += 1\n          ) {\n            const finalizedSignatureImporter =\n              finalizedSignatureImporters[finalizedSignatureImporterNum];\n\n            if (\n              finalizedSignatureImporter.signature[inputIndex] ===\n                inputSignature ||\n              finalizedSignatureImporter.publicKeys[inputIndex] === publicKey\n            ) {\n              errback(\n                `Signature for input ${inputNumber} is a duplicate of a previously provided signature.`\n              );\n              return;\n            }\n          }\n          publicKeys.push(publicKey);\n        } else {\n          errback(`Signature for input ${inputNumber} is invalid.`);\n          return;\n        }\n      }\n      setComplete(number, {\n        signature: inputsSignatures,\n        publicKeys,\n        finalized: true,\n      });\n    } else {\n      // We land here if a PSBT has been uploaded with multiple signature sets.\n      // In case we already have some signatures saved, e.g. first a singly-signed\n      // PSBT was uploaded, and now a doubly-signed PSBT was uploaded, filter out\n      // the known signatures.\n      let signaturesToCheck = this.filterKnownSignatures(inputsSignatures);\n      let signatureSetNumber = number; // so we can iterate, number is a const from props.\n\n      while (\n        signatureSetNumber <= Object.keys(signatureImporters).length &&\n        signaturesToCheck.length > 0\n      ) {\n        setSigningKey(signatureSetNumber, signatureSetNumber - 1);\n        const signatureSet = [];\n        const publicKeySet = [];\n\n        // Loop over inputs and check the sigs array to see if you can find a public key or not.\n        // NOTE - signaturesToCheck.length could be much larger than inputs.length!\n        // This is *not* efficient, but it will work as a temporary solution until we refactor\n        // the signatures data structure returned from unchained-bitcoin or change how caravan\n        // validates signatures.\n\n        // The \"sets\" of signatures that come out of this process are not all connected /  tied to the same root xpub\n        // because we've truncated a little information in the psbt parsing => signature return process\n        // We can re-generate that information later but for now this should work. There are\n        // bugs in edge cases that need to be handled better.\n        for (let inputIndex = 0; inputIndex < inputs.length; inputIndex += 1) {\n          let publicKey;\n\n          // THIS NEEDS TO BE MORE OPINIONATED ABOUT *WHICH* SIGNING DEVICE ARE THESE PUBKEYS COMING FROM\n          // e.g. after the first round of this loop if you successfully find a public key -- that public key\n          // is derived from some root xpub with a particular fingerprint, as you move along this loop to the\n          // next input, you want to *keep* searching until you find a public key that's from the same root fingerprint.\n          // Meaning a member of the same signatureSet. All of the remaining publicKey solutions in this round of\n          // signature validation should be derived from the *same* xpub.\n          //\n          // This assumption is not held if you're just blindly searching for *any* (or the first) valid public key\n          // within the list of signatures. E.g. there are multiple *valid* publicKeys for every input if we're at\n          // this point in the code. But if you don't pay attention to the root xpub as you assign public keys to\n          // a signatureSet, you will get a row of public keys that *may not* all be associated with any particular\n          // ExtendedPublicKey. Obviously that's not quite right. But if uploaded PSBT is fully signed, then this\n          // should not matter and the transaction should validate, build, and be able to be broadcast.\n          for (let i = 0; i < signaturesToCheck.length; i += 1) {\n            const inputSignature = signaturesToCheck[i];\n            if (validateHex(inputSignature) !== \"\") {\n              errback(\n                `Signature for input at index ${inputIndex} is not valid hex.`\n              );\n              return;\n            }\n            try {\n              // This returns false if it completes with no error\n              publicKey = validateMultisigSignature(\n                network,\n                inputs,\n                outputs,\n                inputIndex,\n                inputSignature\n              );\n            } catch (e) {\n              // eslint-disable-next-line no-console\n              console.error(e);\n            }\n            // FIXME `&& publicKey is member of a particular root xpub/fingerprint` should be added here!\n            if (publicKey) {\n              // We know inputSignature is a signature for publicKey but we aren't keeping root xpub/xfp info around\n              publicKeySet.push(publicKey);\n              signatureSet.push(inputSignature);\n              break;\n            }\n          }\n          if (!publicKey) {\n            errback(`No valid signature for input ${inputIndex} found.`);\n            return;\n          }\n        }\n        if (\n          publicKeySet.length !== inputs.length ||\n          signatureSet.length !== inputs.length\n        ) {\n          errback(`There was an error in validating the transaction.`);\n          return;\n        }\n        // Set the signatureSetNumber we're currently on to complete and include publicKeySet/signatureSet\n        setComplete(signatureSetNumber, {\n          signature: signatureSet,\n          publicKeySet,\n          finalized: true,\n        });\n        // Send signatures to this method again, since now some of them are marked\n        // as finalized, and they will be filtered out.\n        signaturesToCheck = this.filterKnownSignatures(inputsSignatures);\n        // increment which signature number we're working on next.\n        signatureSetNumber += 1;\n      }\n    }\n  };\n\n  filterKnownSignatures = (inputsSignatures) => {\n    const { inputs, signatureImporters } = this.props;\n    const finalizedSignatureImporters = Object.values(\n      signatureImporters\n    ).filter((signatureImporter) => signatureImporter.finalized);\n    const knownSignatures = [];\n    for (let inputIndex = 0; inputIndex < inputs.length; inputIndex += 1) {\n      for (\n        let finalizedSignatureImporterNum = 0;\n        finalizedSignatureImporterNum < finalizedSignatureImporters.length;\n        finalizedSignatureImporterNum += 1\n      ) {\n        const finalizedSignatureImporter =\n          finalizedSignatureImporters[finalizedSignatureImporterNum];\n\n        knownSignatures.push(finalizedSignatureImporter.signature[inputIndex]);\n      }\n    }\n    // diff out any signature we've seen before\n    return inputsSignatures.filter((x) => !knownSignatures.includes(x));\n  };\n\n  render() {\n    const { signatureImporter } = this.props;\n    return (\n      <Card>\n        <CardHeader title={this.title()} ref={this.titleRef} />\n        <CardContent>\n          {signatureImporter.finalized\n            ? this.renderSignature()\n            : this.renderImport()}\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nSignatureImporter.propTypes = {\n  addressType: PropTypes.string.isRequired,\n  extendedPublicKeyImporter: PropTypes.shape({\n    method: PropTypes.string,\n  }),\n  fee: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  inputsTotalSats: PropTypes.shape({}).isRequired,\n  isWallet: PropTypes.bool.isRequired,\n  network: PropTypes.string.isRequired,\n  number: PropTypes.number.isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  setName: PropTypes.func.isRequired,\n  setMethod: PropTypes.func.isRequired,\n  setBIP32Path: PropTypes.func.isRequired,\n  setSignature: PropTypes.func.isRequired,\n  setPublicKeys: PropTypes.func.isRequired,\n  setFinalized: PropTypes.func.isRequired,\n  setComplete: PropTypes.func.isRequired,\n  signatureImporter: PropTypes.shape({\n    finalized: PropTypes.bool,\n    name: PropTypes.string,\n    method: PropTypes.string,\n    signature: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.arrayOf(PropTypes.string),\n    ]),\n  }).isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n  txid: PropTypes.string.isRequired,\n  unsignedTransaction: PropTypes.shape({}).isRequired,\n  setSigningKey: PropTypes.func.isRequired,\n};\n\nSignatureImporter.defaultProps = {\n  extendedPublicKeyImporter: {},\n};\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...{\n      signatureImporters: state.spend.signatureImporters,\n      signatureImporter: state.spend.signatureImporters[ownProps.number],\n      fee: state.spend.transaction.fee,\n      txid: state.spend.transaction.txid,\n    },\n    ...state.spend.transaction,\n  };\n}\n\nconst mapDispatchToProps = {\n  setName: setSignatureImporterName,\n  setMethod: setSignatureImporterMethod,\n  setBIP32Path: setSignatureImporterBIP32Path,\n  setPublicKeys: setSignatureImporterPublicKeys,\n  setSignature: setSignatureImporterSignature,\n  setFinalized: setSignatureImporterFinalized,\n  setComplete: setSignatureImporterComplete,\n  setSigningKey: setSigningKeyAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignatureImporter);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\n// Actions\nimport { deriveChildPublicKey } from \"unchained-bitcoin\";\nimport {\n  Box,\n  FormControl,\n  Select,\n  MenuItem,\n  InputLabel,\n} from \"@material-ui/core\";\nimport {\n  setSignatureImporterBIP32Path,\n  setSignatureImporterMethod,\n} from \"../../actions/signatureImporterActions\";\n\nimport { setSigningKey as setSigningKeyAction } from \"../../actions/transactionActions\";\n\n// Components\nimport SignatureImporter from \"../ScriptExplorer/SignatureImporter\";\n\nclass ExtendedPublicKeySelector extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selection: \"\",\n    };\n  }\n\n  componentDidMount = () => {\n    const { signingKeys, number } = this.props;\n    if (signingKeys[number - 1] > 0)\n      this.updateKeySelection(signingKeys[number - 1]);\n  };\n\n  // There can be a situation where a signatureImporter is in the finalized\n  // state, but it was never actually selected as a key. This can\n  // happen when a signed PSBT is uploaded that has more than one set of\n  // signatures, given all of the assumptions around transaction signing flow\n  // and signature validation\n  render = () => {\n    const { selection } = this.state;\n    const { number, signatureImporter } = this.props;\n    return (\n      <div>\n        {this.renderKeySelectorMenu()}\n        {((selection > 0 && number > 0) ||\n          (signatureImporter && signatureImporter.finalized)) &&\n          this.renderSignatureImporter()}\n      </div>\n    );\n  };\n\n  renderSignatureImporter = () => {\n    const { number } = this.props;\n    const extendedPublicKeyImporter = this.getAssociatedExtendedPublicKeyImporter();\n    return (\n      <Box mt={2}>\n        <SignatureImporter\n          number={number}\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n        />\n      </Box>\n    );\n  };\n\n  getAssociatedExtendedPublicKeyImporter = () => {\n    const { extendedPublicKeyImporters } = this.props;\n    const { selection } = this.state;\n    let associatedExtendedPublicKeyImporter = null;\n\n    if (selection) {\n      associatedExtendedPublicKeyImporter =\n        extendedPublicKeyImporters[selection];\n    }\n\n    return associatedExtendedPublicKeyImporter;\n  };\n\n  renderKeySelectorMenu = () => {\n    const { number, signatureImporters, setBIP32Path } = this.props;\n    const { selection } = this.state;\n    const labelId = `keySelector${number}`;\n\n    const extendedPublicKeyImporter = this.getAssociatedExtendedPublicKeyImporter();\n    if (extendedPublicKeyImporter !== null && number > 0) {\n      const signatureImporter = signatureImporters[number];\n      if (signatureImporter.signature.length > 0) return \"\";\n\n      if (\n        extendedPublicKeyImporter.bip32Path !== signatureImporter.bip32Path &&\n        extendedPublicKeyImporter.method !== \"text\"\n      ) {\n        setTimeout(() => {\n          setBIP32Path(number, extendedPublicKeyImporter.bip32Path);\n        }, 0);\n      }\n    }\n\n    return (\n      <form>\n        <FormControl fullWidth>\n          <InputLabel id={labelId}>Select Key</InputLabel>\n\n          <Select\n            labelId={labelId}\n            id={`signature-${number}-key-select`}\n            value={selection}\n            onChange={this.handleKeyChange}\n          >\n            <MenuItem value=\"\">{\"< Select Extended Public Key >\"}</MenuItem>\n            {this.renderKeySelectorMenuItems()}\n          </Select>\n        </FormControl>\n      </form>\n    );\n  };\n\n  extendedPublicKeyImporterNotUsed = (extendedPublicKeyImporter) => {\n    const { inputs, network, signatureImporters, number } = this.props;\n    if (number === 0) return true;\n\n    for (let inputIndex = 0; inputIndex < inputs.length; inputIndex += 1) {\n      const input = inputs[inputIndex];\n      const derivedKey = deriveChildPublicKey(\n        extendedPublicKeyImporter.extendedPublicKey,\n        input.bip32Path,\n        network\n      );\n      for (\n        let importerIndex = 1;\n        importerIndex <= Object.keys(signatureImporters).length;\n        importerIndex += 1\n      ) {\n        const importer = signatureImporters[importerIndex];\n        for (\n          let publicKeyIndex = 0;\n          publicKeyIndex < importer.publicKeys.length;\n          publicKeyIndex += 1\n        ) {\n          const publicKey = importer.publicKeys[publicKeyIndex];\n          if (publicKey === derivedKey) return false;\n        }\n      }\n    }\n    return true;\n  };\n\n  renderKeySelectorMenuItems = () => {\n    const { extendedPublicKeyImporters, totalSigners } = this.props;\n    const extendedPublicKeys = [];\n    for (\n      let extendedPublicKeyImporterNum = 1;\n      extendedPublicKeyImporterNum <= totalSigners;\n      extendedPublicKeyImporterNum += 1\n    ) {\n      const extendedPublicKeyImporter =\n        extendedPublicKeyImporters[extendedPublicKeyImporterNum];\n      if (this.extendedPublicKeyImporterNotUsed(extendedPublicKeyImporter)) {\n        extendedPublicKeys.push(\n          <MenuItem\n            value={extendedPublicKeyImporterNum}\n            key={extendedPublicKeyImporterNum}\n          >\n            {extendedPublicKeyImporter.name}\n          </MenuItem>\n        );\n      }\n    }\n    return extendedPublicKeys;\n  };\n\n  handleKeyChange = (event) => {\n    const { onChange } = this.props;\n    this.updateKeySelection(event.target.value);\n\n    if (onChange) {\n      const { extendedPublicKeyImporters } = this.props;\n\n      const importer = extendedPublicKeyImporters[event.target.value];\n      onChange(event, importer);\n    }\n  };\n\n  updateKeySelection(value) {\n    this.setState({ selection: value });\n    if (value === \"\") return;\n\n    const {\n      extendedPublicKeyImporters,\n      setMethod,\n      number,\n      setSigningKey,\n    } = this.props;\n    const extendedPublicKeyImporter = extendedPublicKeyImporters[value];\n    const importMethod = extendedPublicKeyImporter.method;\n    if (importMethod === \"text\") {\n      setMethod(number, \"\"); // user picks\n    } else {\n      setMethod(number, importMethod);\n    }\n    if (number > 0) setSigningKey(number, value);\n  }\n}\n\nExtendedPublicKeySelector.propTypes = {\n  extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n  inputs: PropTypes.arrayOf(\n    PropTypes.shape({\n      bip32Path: PropTypes.string,\n    })\n  ).isRequired,\n  onChange: PropTypes.func,\n  network: PropTypes.string.isRequired,\n  number: PropTypes.number.isRequired,\n  setBIP32Path: PropTypes.func.isRequired,\n  setMethod: PropTypes.func.isRequired,\n  setSigningKey: PropTypes.func.isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n  signatureImporter: PropTypes.shape({\n    finalized: PropTypes.bool,\n  }),\n  signingKeys: PropTypes.arrayOf(PropTypes.number).isRequired,\n  totalSigners: PropTypes.number.isRequired,\n};\n\nExtendedPublicKeySelector.defaultProps = {\n  onChange: null,\n  signatureImporter: null,\n};\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...state.quorum,\n    totalSigners: state.spend.transaction.totalSigners,\n    inputs: state.spend.transaction.inputs,\n    network: state.settings.network,\n    signatureImporters: state.spend.signatureImporters,\n    signatureImporter: state.spend.signatureImporters[ownProps.number],\n    signingKeys: state.spend.transaction.signingKeys,\n  };\n}\n\nconst mapDispatchToProps = {\n  setBIP32Path: setSignatureImporterBIP32Path,\n  setMethod: setSignatureImporterMethod,\n  setSigningKey: setSigningKeyAction,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ExtendedPublicKeySelector);\n","import React, { useReducer, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Grid,\n  Box,\n  Typography,\n  Button,\n  FormControl,\n  Select,\n  Table,\n  TableBody,\n  TableRow,\n  TableCell,\n  MenuItem,\n  InputLabel,\n} from \"@material-ui/core\";\nimport { ThumbUp as SuccessIcon, Error as ErrorIcon } from \"@material-ui/icons\";\nimport {\n  multisigAddressType,\n  multisigRequiredSigners,\n  multisigTotalSigners,\n} from \"unchained-bitcoin\";\nimport {\n  TREZOR,\n  LEDGER,\n  COLDCARD,\n  HERMIT,\n  ACTIVE,\n  PENDING,\n  ConfirmMultisigAddress,\n} from \"unchained-wallets\";\n\nimport ExtendedPublicKeySelector from \"../Wallet/ExtendedPublicKeySelector\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nimport { slicePropTypes } from \"../../proptypes\";\n\nconst TEXT = \"text\";\n\nconst initialInteractionState = {\n  keySelected: false,\n  deviceType: \"unknown\",\n  bip32Path: \"\",\n  hasInteraction: false,\n  interactionState: PENDING,\n  interactionError: \"\",\n  interactionMessage: \"\",\n};\n\nconst interactionReducer = (state, action) => {\n  switch (action.type) {\n    case \"RESET\":\n      return {\n        ...state,\n        interactionError: \"\",\n        interactionMessage: \"\",\n        interactionState: PENDING,\n      };\n    case \"SET_KEY_SELECTED\":\n      return { ...state, keySelected: true };\n    case \"SET_KEY_UNSELECTED\":\n      return { ...state, keySelected: false };\n    case \"SET_DEVICE_TYPE\":\n      return { ...state, deviceType: action.value };\n    case \"SET_BIP32_PATH\":\n      return { ...state, bip32Path: action.value };\n    case \"SET_ACTIVE\":\n      return { ...state, interactionState: ACTIVE };\n    case \"HAS_INTERACTION\":\n      return { ...state, hasInteraction: action.value };\n    case \"SET_MESSAGE\":\n      return {\n        ...state,\n        interactionMessage: action.value,\n        interactionError: \"\",\n      };\n    case \"SET_ERROR\":\n      return {\n        ...state,\n        interactionError: action.value,\n        interactionMessage: \"\",\n      };\n    default:\n      return state;\n  }\n};\n\nconst ConfirmAddress = ({ slice, network }) => {\n  const [state, dispatch] = useReducer(\n    interactionReducer,\n    initialInteractionState\n  );\n  const [interaction, setInteraction] = useState(null);\n\n  const addressType = multisigAddressType(slice.multisig);\n  const requiredSigners = multisigRequiredSigners(slice.multisig);\n  const totalSigners = multisigTotalSigners(slice.multisig);\n\n  // Sets device interaction for component based on xpub selected\n  function handleKeySelected(_event, extendedPublicKeyImporter) {\n    const { multisig, bip32Path } = slice;\n    if (extendedPublicKeyImporter) {\n      dispatch({ type: \"SET_KEY_SELECTED\" });\n      dispatch({\n        type: \"SET_DEVICE_TYPE\",\n        value: extendedPublicKeyImporter.method,\n      });\n      const fullBip32Path = `${\n        extendedPublicKeyImporter.bip32Path\n      }${bip32Path.slice(1)}`;\n      if (extendedPublicKeyImporter.bip32Path !== \"Unknown\") {\n        dispatch({\n          type: \"SET_BIP32_PATH\",\n          value: fullBip32Path,\n        });\n      } else {\n        dispatch({\n          type: \"SET_BIP32_PATH\",\n          value: \"\",\n        });\n      }\n      // FIXME - hardcoded to just show up for trezor\n      if (extendedPublicKeyImporter.method === \"trezor\") {\n        setInteraction(\n          ConfirmMultisigAddress({\n            keystore: extendedPublicKeyImporter.method,\n            network,\n            bip32Path: fullBip32Path,\n            multisig,\n          })\n        );\n        dispatch({ type: \"HAS_INTERACTION\", value: true });\n        dispatch({ type: \"RESET\" });\n      } else {\n        setInteraction(null);\n        dispatch({ type: \"HAS_INTERACTION\", value: false });\n        dispatch({ type: \"RESET\" });\n      }\n    } else {\n      setInteraction(null);\n      dispatch({ type: \"HAS_INTERACTION\", value: false });\n      dispatch({ type: \"RESET\" });\n      dispatch({ type: \"SET_KEY_UNSELECTED\" });\n    }\n  }\n\n  // Sets device interaction for component based on xpub selected\n  function handleMethodChange(event) {\n    if (event.target.value !== \"\") {\n      dispatch({\n        type: \"SET_DEVICE_TYPE\",\n        value: event.target.value,\n      });\n      const { multisig } = slice;\n      setInteraction(\n        ConfirmMultisigAddress({\n          keystore: event.target.value,\n          network,\n          bip32Path: state.bip32Path,\n          multisig,\n        })\n      );\n      dispatch({ type: \"HAS_INTERACTION\", value: true });\n      dispatch({ type: \"RESET\" });\n    }\n  }\n\n  // run interaction and see if address confirms\n  async function confirmOnDevice() {\n    dispatch({ type: \"SET_ACTIVE\" });\n    const { multisig } = slice;\n\n    try {\n      const confirmed = await interaction.run();\n      if (\n        confirmed.address === multisig.address &&\n        confirmed.serializedPath === interaction.bip32Path\n      ) {\n        dispatch({ type: \"SET_MESSAGE\", value: \"Success\" });\n      } else {\n        dispatch({ type: \"SET_ERROR\", value: \"An unknown error occured\" });\n      }\n    } catch (error) {\n      dispatch({ type: \"SET_ERROR\", value: error.message });\n    }\n  }\n\n  return (\n    <Grid item md={12}>\n      <ExtendedPublicKeySelector number={0} onChange={handleKeySelected} />\n      {state.keySelected && (\n        <form>\n          <FormControl fullWidth>\n            <InputLabel>Select Method</InputLabel>\n\n            <Select\n              id=\"confirm-importer-select\"\n              value=\"\"\n              onChange={handleMethodChange}\n            >\n              <MenuItem value=\"\">{\"< Select method >\"}</MenuItem>\n              <MenuItem value={TREZOR}>Trezor</MenuItem>\n              <MenuItem value={COLDCARD} disabled>\n                Coldcard\n              </MenuItem>\n              <MenuItem value={LEDGER} disabled>\n                Ledger\n              </MenuItem>\n              <MenuItem value={HERMIT} disabled>\n                Hermit\n              </MenuItem>\n              <MenuItem value={TEXT} disabled>\n                Enter as text\n              </MenuItem>\n            </Select>\n          </FormControl>\n        </form>\n      )}\n      {state.hasInteraction && (\n        <>\n          <Box>\n            <p>\n              Confirm the following {network.length ? network : \"\"}{\" \"}\n              {addressType} {requiredSigners} -of-\n              {totalSigners} multisig address on your device:\n            </p>\n            <Table>\n              <TableBody>\n                <TableRow>\n                  <TableCell>Address:</TableCell>\n                  <TableCell>\n                    <code>{slice.multisig.address}</code>\n                  </TableCell>\n                </TableRow>\n\n                <TableRow>\n                  <TableCell>BIP32 Path:</TableCell>\n                  <TableCell>\n                    <code>{state.bip32Path}</code>\n                  </TableCell>\n                </TableRow>\n              </TableBody>\n            </Table>\n          </Box>\n          {state.interactionMessage !== \"\" && (\n            <Box mt={2} align=\"center\">\n              <Typography variant=\"h5\" style={{ color: \"green\" }}>\n                <SuccessIcon />\n                &nbsp; {state.interactionMessage}\n              </Typography>\n            </Box>\n          )}\n          {state.interactionError !== \"\" && (\n            <Box mt={2} align=\"center\" style={{ color: \"red\" }}>\n              <Typography variant=\"h5\">\n                <ErrorIcon />\n                &nbsp; Confirmation Error\n              </Typography>\n              <Typography variant=\"caption\">\n                {state.interactionError}\n              </Typography>\n            </Box>\n          )}\n          {state.interactionMessage === \"\" && state.interactionError === \"\" && (\n            <InteractionMessages\n              messages={interaction.messagesFor({\n                state: state.interactionState,\n              })}\n            />\n          )}\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            onClick={confirmOnDevice}\n            disabled={state.interactionState === ACTIVE || !state.bip32Path}\n          >\n            Confirm\n          </Button>\n          {(state.interactionMessage !== \"\" ||\n            state.interactionError !== \"\") && (\n            <Button size=\"large\" onClick={() => dispatch({ type: \"RESET\" })}>\n              Reset\n            </Button>\n          )}\n        </>\n      )}\n    </Grid>\n  );\n};\n\nConfirmAddress.propTypes = {\n  slice: PropTypes.shape(slicePropTypes).isRequired,\n  network: PropTypes.string,\n};\n\nConfirmAddress.defaultProps = {\n  network: \"\",\n};\n\nexport default ConfirmAddress;\n","/* eslint-disable react/no-array-index-key */\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Typography,\n  Grid,\n  Tabs,\n  Tab,\n  Box,\n  Tooltip,\n  AppBar,\n  makeStyles,\n} from \"@material-ui/core\";\n\nimport UTXOSet from \"../ScriptExplorer/UTXOSet\";\nimport MultisigDetails from \"../MultisigDetails\";\nimport ImportAddressesButton from \"../ImportAddressesButton\";\nimport ConfirmAddress from \"./ConfirmAddress\";\n\nimport { slicePropTypes, clientPropTypes } from \"../../proptypes\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\n\nfunction a11yProps(index) {\n  return {\n    id: `scrollable-auto-tab-${index}`,\n    \"aria-controls\": `scrollable-auto-tabpanel-${index}`,\n  };\n}\n\nconst createTab = ({ tab }, index) => {\n  const tooltipTab = (\n    <Tab value={index.toString()} key={index} {...a11yProps(index)} {...tab} />\n  );\n  if (tab.disabled)\n    return (\n      <Tooltip title=\"Not available for this address\" key={index} arrow>\n        <div>{tooltipTab}</div>\n      </Tooltip>\n    );\n  return tooltipTab;\n};\n\nfunction TabPanel({ children, value, index, ...other }) {\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      style={{ display: value === index ? \"inherit\" : \"none\" }}\n      {...other}\n    >\n      <Grid item md={11}>\n        <Box>{children}</Box>\n      </Grid>\n    </Grid>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  value: PropTypes.string.isRequired,\n  index: PropTypes.string.isRequired,\n};\n\nTabPanel.defaultProps = {\n  children: React.createElement(\"span\"),\n};\n\nconst SliceDetails = ({ slice, client, network }) => {\n  const [tabIndex, setTabIndex] = React.useState(\"0\");\n  const classes = useStyles();\n\n  const handleChange = (_e, newIndex) => setTabIndex(newIndex);\n  const tabs = [\n    {\n      tab: {\n        label: \"Redeem Script\",\n      },\n      panel: <MultisigDetails multisig={slice.multisig} showAddress={false} />,\n    },\n    {\n      tab: {\n        label: \"Confirm on Device\",\n      },\n      panel: (\n        <div>\n          <Typography variant=\"h6\">\n            Verify Address with Quorum Participants\n          </Typography>\n          <Typography variant=\"caption\">\n            (not all device variants supported)\n          </Typography>\n          <ConfirmAddress slice={slice} network={network} />\n        </div>\n      ),\n    },\n    {\n      tab: {\n        label: \"UTXOs\",\n        disabled: !slice.balanceSats.isGreaterThan(0),\n      },\n      panel: (\n        <UTXOSet inputs={slice.utxos} inputsTotalSats={slice.balanceSats} />\n      ),\n    },\n    {\n      tab: {\n        label: \"Watch Address\",\n        disabled: client.type !== \"private\",\n      },\n      panel: (\n        <div>\n          <Typography variant=\"h6\">Import Watch-Only Address</Typography>\n          <Typography variant=\"caption\">\n            Address must be imported to get accurate balance data. If this\n            address has previous history, a rescan may be required.\n          </Typography>\n          <Box my={3}>\n            <ImportAddressesButton\n              addresses={[slice.multisig.address]}\n              client={client}\n            />\n          </Box>\n        </div>\n      ),\n    },\n  ];\n\n  return (\n    <Grid container className={classes.root}>\n      <AppBar position=\"static\" color=\"default\" variant=\"outlined\">\n        <Tabs\n          value={tabIndex}\n          onChange={handleChange}\n          aria-label=\"Slice Details View\"\n          centered\n        >\n          {tabs.map(createTab)}\n        </Tabs>\n      </AppBar>\n      {tabs.map(({ panel }, index) => (\n        <TabPanel value={tabIndex} index={index.toString()} key={index}>\n          <Box my={3}>{panel}</Box>\n        </TabPanel>\n      ))}\n    </Grid>\n  );\n};\n\nSliceDetails.propTypes = {\n  slice: PropTypes.shape(slicePropTypes).isRequired,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n  network: PropTypes.string.isRequired,\n};\n\nexport default SliceDetails;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialTable from \"material-table\";\nimport { Typography, Box, makeStyles } from \"@material-ui/core\";\nimport { satoshisToBitcoins } from \"unchained-bitcoin\";\n\nimport {\n  compareSlicesByPath,\n  compareSlicesByBalance,\n  compareSlicesByUTXOCount,\n  compareSlicesByTime,\n} from \"../../utils/slices\";\n\n// Components\nimport Copyable from \"../Copyable\";\nimport { slicePropTypes, clientPropTypes } from \"../../proptypes\";\nimport SliceDetails from \"./SliceDetails\";\n\nconst useStyles = makeStyles((theme) => ({\n  panel: {\n    boxShadow: `inset 0px 0px 4px 1px ${theme.palette.grey[500]}`,\n  },\n  spent: {\n    textDecoration: \"line-through\",\n  },\n}));\n\nconst SlicesTable = ({\n  slices,\n  search,\n  paging,\n  title,\n  client,\n  network,\n  disabled,\n}) => {\n  const classes = useStyles();\n\n  const options = {\n    search,\n    paging,\n    detailPanelType: \"single\",\n    showTitle: (title && title.length) || false,\n    emptyRowsWhenPaging: false,\n    pageSize: 10,\n    pageSizeOptions: [10, 20, 50],\n  };\n  options.toolbar = options.showTitle && options.search;\n  let columns = [\n    {\n      title: \"Path Suffix\",\n      field: \"bip32Path\",\n      render: (rowData) => (\n        <Typography>{rowData.bip32Path.replace(\"m\", \"*\")}</Typography>\n      ),\n      type: \"string\",\n      defaultSort: \"asc\",\n      customSort: compareSlicesByPath,\n    },\n    {\n      title: \"UTXOs\",\n      field: \"utxos\",\n      width: \"50px\",\n      render: (rowData) => <Typography>{rowData.utxos.length}</Typography>,\n      customSort: compareSlicesByUTXOCount,\n    },\n    {\n      title: \"Balance\",\n      field: \"balanceSats\",\n      render: (rowData) => (\n        <Typography>\n          {satoshisToBitcoins(rowData.balanceSats).toString()}\n        </Typography>\n      ),\n      customSort: compareSlicesByBalance,\n    },\n    {\n      title: \"Last Used\",\n      field: \"lastUsed\",\n      render: (rowData) => <Typography>{rowData.lastUsed || \"\"}</Typography>,\n      customSort: compareSlicesByTime,\n    },\n    {\n      title: \"Address\",\n      field: \"address\",\n      sorting: false,\n      render: (rowData) => (\n        <Copyable\n          text={rowData.multisig.address}\n          showIcon\n          showText\n          code\n          className={\n            rowData.addressUsed && rowData.balanceSats.isEqualTo(0)\n              ? classes.spent\n              : \"\"\n          }\n        />\n      ),\n    },\n  ];\n\n  // filter out any columns that should be disabled\n  columns = columns.filter((column) => !disabled.includes(column.field));\n  return (\n    <MaterialTable\n      options={options}\n      columns={columns}\n      data={slices}\n      detailPanel={[\n        {\n          tooltip: \"Address Details\",\n          render: (rowData) => (\n            <Box p={1} className={classes.panel}>\n              <SliceDetails client={client} slice={rowData} network={network} />\n            </Box>\n          ),\n        },\n      ]}\n    />\n  );\n};\n\nSlicesTable.propTypes = {\n  slices: PropTypes.arrayOf(PropTypes.shape(slicePropTypes)).isRequired,\n  search: PropTypes.bool,\n  paging: PropTypes.bool,\n  title: PropTypes.string,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n  network: PropTypes.string.isRequired,\n  disabled: PropTypes.arrayOf(PropTypes.string),\n};\n\nSlicesTable.defaultProps = {\n  search: false,\n  paging: false,\n  title: \"\",\n  disabled: [],\n};\n\nexport default SlicesTable;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\nimport QRCode from \"qrcode.react\";\nimport {\n  Button,\n  Box,\n  Card,\n  CardContent,\n  Grid,\n  InputAdornment,\n  Typography,\n  TextField,\n} from \"@material-ui/core\";\nimport { withSnackbar } from \"notistack\";\n\nimport { fetchAddressUTXOs } from \"../../blockchain\";\nimport {\n  updateDepositSliceAction,\n  resetWalletView as resetWalletViewAction,\n} from \"../../actions/walletActions\";\nimport { getDepositableSlices } from \"../../selectors/wallet\";\nimport { slicePropTypes } from \"../../proptypes\";\n\n// Components\nimport Copyable from \"../Copyable\";\nimport BitcoinIcon from \"../BitcoinIcon\";\nimport SlicesTable from \"../Slices/SlicesTable\";\n\nlet depositTimer;\n\nclass WalletDeposit extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      address: \"\",\n      amount: 0,\n      amountError: \"\",\n      depositIndex: 0,\n      slice: null,\n    };\n  }\n\n  componentDidMount() {\n    this.getDepositAddress();\n  }\n\n  componentWillUnmount() {\n    clearInterval(depositTimer);\n  }\n\n  getNextDepositAddress = () => {\n    const { depositIndex } = this.state;\n    this.setState({ depositIndex: depositIndex + 1 });\n    setTimeout(this.getDepositAddress, 0);\n  };\n\n  getDepositAddress = () => {\n    const {\n      network,\n      client,\n      updateDepositSlice,\n      depositableSlices,\n      enqueueSnackbar,\n    } = this.props;\n    const { depositIndex } = this.state;\n\n    if (depositIndex < depositableSlices.length)\n      this.setState({\n        slice: depositableSlices[depositIndex],\n        address: depositableSlices[depositIndex].multisig.address,\n      });\n\n    clearInterval(depositTimer);\n    depositTimer = setInterval(async () => {\n      let updates;\n      try {\n        const { address, slice } = this.state;\n        updates = await fetchAddressUTXOs(address, network, client);\n        if (updates && updates.utxos && updates.utxos.length) {\n          clearInterval(depositTimer);\n          updateDepositSlice({ ...updates, bip32Path: slice.bip32Path });\n          enqueueSnackbar(\n            \"Deposit received. A new address should now be available for deposit.\"\n          );\n          this.resetDepositAddressIndex();\n          setTimeout(this.getDepositAddress, 2000);\n        }\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error(e);\n      }\n    }, 2000);\n  };\n\n  handleAmountChange = (event) => {\n    const amount = event.target.value;\n    let error = \"\";\n\n    if (amount.length && !amount.match(/^[0-9.]+$/)) {\n      error = \"Amount must be numeric\";\n    }\n    const decimal = amount.split(\".\");\n    if (decimal.length > 2) {\n      error = \"Amount must be numeric\";\n    } else if (decimal.length === 2 && decimal[1].length > 8) {\n      error = \"Amount must have maximum precision of 8 decimal places\";\n    }\n\n    this.setState({ amount: event.target.value, amountError: error });\n  };\n\n  qrString = () => {\n    const { address, amount } = this.state;\n    return `bitcoin:${address}${amount ? `?amount=${amount}` : \"\"}`;\n  };\n\n  resetDepositAddressIndex = () => {\n    const { depositableSlices } = this.props;\n    this.setState({\n      slice: depositableSlices[0],\n      address: depositableSlices[0].multisig.address,\n      depositIndex: 0,\n    });\n  };\n\n  render() {\n    const { client, network, depositableSlices } = this.props;\n    const { address, amount, amountError, depositIndex, slice } = this.state;\n\n    return (\n      <div>\n        <Card>\n          <CardContent>\n            <Grid\n              container\n              justify=\"center\"\n              direction=\"column\"\n              alignItems=\"center\"\n            >\n              <Grid item md={6}>\n                <Copyable text={address} newline showText={false}>\n                  <QRCode size={300} value={this.qrString()} level=\"L\" />\n                </Copyable>\n              </Grid>\n              <Grid item>\n                <Typography align=\"center\" variant=\"subtitle1\">\n                  Scan QR code or click to copy address to clipboard.\n                </Typography>\n              </Grid>\n              <Grid item md={6}>\n                <Box my={3}>\n                  <TextField\n                    fullWidth\n                    label=\"Amount BTC\"\n                    name=\"depositAmount\"\n                    onChange={this.handleAmountChange}\n                    value={amount}\n                    error={amountError !== \"\"}\n                    helperText={amountError}\n                    InputProps={{\n                      endAdornment: (\n                        <InputAdornment position=\"end\">\n                          <BitcoinIcon network={network} />\n                        </InputAdornment>\n                      ),\n                    }}\n                  />\n                </Box>\n              </Grid>\n            </Grid>\n            {slice ? (\n              <SlicesTable\n                slices={[slice]}\n                client={client}\n                network={network}\n                disabled={[\"lastUsed\"]}\n              />\n            ) : (\n              \"\"\n            )}\n            <Box mt={2}>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={this.getNextDepositAddress}\n                disabled={depositIndex >= depositableSlices.length - 1}\n              >\n                Next Address\n              </Button>\n            </Box>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n}\n\nWalletDeposit.propTypes = {\n  client: PropTypes.shape({}).isRequired,\n  depositableSlices: PropTypes.arrayOf(PropTypes.shape(slicePropTypes))\n    .isRequired,\n  enqueueSnackbar: PropTypes.func.isRequired,\n  network: PropTypes.string.isRequired,\n  updateDepositSlice: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    depositableSlices: getDepositableSlices(state),\n    client: state.client,\n  };\n}\n\nconst mapDispatchToProps = {\n  updateDepositSlice: updateDepositSliceAction,\n  resetWalletView: resetWalletViewAction,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withSnackbar(WalletDeposit));\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\n// Components\nimport {\n  Grid,\n  Menu,\n  MenuItem,\n  Button,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Box,\n  Table,\n  TableBody,\n  TableRow,\n  TableCell,\n  Typography,\n} from \"@material-ui/core\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport { ThumbUp as SuccessIcon, Error as ErrorIcon } from \"@material-ui/icons\";\nimport {\n  blockExplorerAddressURL,\n  multisigAddressType,\n  NETWORKS,\n} from \"unchained-bitcoin\";\nimport { PENDING, ACTIVE, ConfirmMultisigAddress } from \"unchained-wallets\";\nimport LaunchIcon from \"@material-ui/icons/Launch\";\nimport UTXOSet from \"../ScriptExplorer/UTXOSet\";\nimport MultisigDetails from \"../MultisigDetails\";\nimport ImportAddressesButton from \"../ImportAddressesButton\";\nimport Copyable from \"../Copyable\";\nimport InteractionMessages from \"../InteractionMessages\";\nimport ExtendedPublicKeySelector from \"./ExtendedPublicKeySelector\";\n\nimport styles from \"../ScriptExplorer/styles.module.scss\";\n\nimport { externalLink } from \"../../utils\";\n\nconst MODE_UTXO = 0;\nconst MODE_REDEEM = 1;\nconst MODE_CONFIRM = 2;\nconst MODE_WATCH = 3;\nlet anchor;\n\nclass AddressExpander extends React.Component {\n  interaction = null;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expandMode: null,\n      showMenu: false,\n      showMenuIcon: false,\n      hasInteraction: false,\n      interactionState: PENDING,\n      interactionError: \"\",\n      interactionMessage: \"\",\n    };\n  }\n\n  componentDidMount = () => {\n    this.defaultMode();\n  };\n\n  addressContent = () => {\n    const { node, network, client } = this.props;\n    const { multisig, addressUsed, balanceSats } = node;\n    const { expandMode, showMenu, showMenuIcon } = this.state;\n\n    return (\n      <div style={{ width: \"100%\" }}>\n        <Typography>\n          <Copyable text={multisig.address} showIcon showText={false}>\n            <code\n              className={\n                addressUsed && balanceSats.isEqualTo(0) ? styles.spent : \"\"\n              }\n            >\n              {multisig.address}\n            </code>\n            &nbsp;\n          </Copyable>\n          {externalLink(\n            blockExplorerAddressURL(multisig.address, network),\n            <LaunchIcon onClick={(e) => e.stopPropagation()} />\n          )}\n        </Typography>\n        <MoreVertIcon\n          onClick={this.handleMenu}\n          style={{\n            float: \"right\",\n            display:\n              showMenuIcon && this.hasAdditionalOptions() ? \"block\" : \"none\",\n          }}\n          aria-controls=\"address-menu\"\n          aria-haspopup=\"true\"\n        />\n        <Menu\n          id=\"address-menu\"\n          anchorEl={anchor}\n          keepMounted\n          open={showMenu}\n          onClose={this.handleClose}\n        >\n          {balanceSats.isGreaterThan(0) && (\n            <MenuItem\n              selected={expandMode === MODE_UTXO}\n              onClick={(e) => {\n                this.setState({ expandMode: MODE_UTXO });\n                this.handleClose(e);\n              }}\n            >\n              UTXOs\n            </MenuItem>\n          )}\n          <MenuItem\n            selected={expandMode === MODE_REDEEM}\n            onClick={(e) => {\n              this.setState({ expandMode: MODE_REDEEM });\n              this.handleClose(e);\n            }}\n          >\n            Scripts\n          </MenuItem>\n          {this.canConfirm() && (\n            <MenuItem\n              selected={expandMode === MODE_CONFIRM}\n              onClick={(e) => {\n                this.setState({ expandMode: MODE_CONFIRM });\n                this.handleClose(e);\n              }}\n            >\n              Confirm on Device\n            </MenuItem>\n          )}\n          {client.type === \"private\" && (\n            <MenuItem\n              selected={expandMode === MODE_WATCH}\n              onClick={(e) => {\n                this.setState({ expandMode: MODE_WATCH });\n                this.handleClose(e);\n              }}\n            >\n              Watch with bitcoind Node\n            </MenuItem>\n          )}\n        </Menu>\n      </div>\n    );\n  };\n\n  canConfirm = () => {\n    const { extendedPublicKeyImporters } = this.props;\n    return (\n      Object.values(extendedPublicKeyImporters).filter(\n        (importer) => importer.method === \"trezor\"\n      ).length > 0\n    );\n  };\n\n  hasAdditionalOptions = () => {\n    const { client, node } = this.props;\n    const { balanceSats } = node;\n\n    return (\n      balanceSats.isGreaterThan(0) ||\n      client.type === \"private\" ||\n      this.canConfirm()\n    );\n  };\n\n  handleClose = (event) => {\n    event.stopPropagation();\n    this.setState({ showMenu: false });\n  };\n\n  handleMenu = (event) => {\n    event.stopPropagation();\n    anchor = event.target;\n    this.setState({ showMenu: true });\n  };\n\n  panelExpand = (event, expanded) => {\n    this.setState({ showMenuIcon: expanded });\n  };\n\n  render = () => {\n    const { node } = this.props;\n    const { bip32Path } = node;\n    return (\n      <ExpansionPanel onChange={this.panelExpand}>\n        <ExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls=\"panel1a-content\"\n          id={`address-header${bip32Path}`}\n        >\n          {this.addressContent()}\n        </ExpansionPanelSummary>\n        <ExpansionPanelDetails>\n          <Grid container>{this.expandContent()}</Grid>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    );\n  };\n\n  defaultMode = () => {\n    const { node } = this.props;\n    const { balanceSats } = node;\n\n    this.setState({\n      expandMode: balanceSats.isGreaterThan(0) ? MODE_UTXO : MODE_REDEEM,\n    });\n  };\n\n  expandContent = () => {\n    const { client, node } = this.props;\n    const { utxos, balanceSats, multisig } = node;\n    const { expandMode } = this.state;\n\n    if (client.type === \"public\" && expandMode === MODE_WATCH)\n      this.defaultMode();\n    if (balanceSats.isEqualTo(0) && expandMode === MODE_UTXO)\n      this.defaultMode();\n\n    switch (expandMode) {\n      case MODE_UTXO:\n        return (\n          <Grid item md={12}>\n            <UTXOSet inputs={utxos} inputsTotalSats={balanceSats} />\n          </Grid>\n        );\n      case MODE_REDEEM:\n        return (\n          <Grid item md={12}>\n            <MultisigDetails multisig={multisig} showAddress={false} />\n          </Grid>\n        );\n      case MODE_CONFIRM:\n        return this.renderAddressConfirmation();\n      case MODE_WATCH:\n        return (\n          <Grid item md={12}>\n            <ImportAddressesButton addresses={[multisig.address]} />\n          </Grid>\n        );\n      default:\n        return \"\";\n    }\n  };\n\n  renderAddressConfirmation = () => {\n    const {\n      interactionState,\n      interactionMessage,\n      interactionError,\n      hasInteraction,\n    } = this.state;\n    return (\n      <Grid item md={12}>\n        <ExtendedPublicKeySelector number={0} onChange={this.keySelected} />\n        {hasInteraction && (\n          <>\n            {this.confirmAddressDescription()}\n            {interactionMessage !== \"\" && (\n              <Box mt={2} align=\"center\">\n                <Typography variant=\"h5\" style={{ color: \"green\" }}>\n                  <SuccessIcon />\n                  &nbsp; {interactionMessage}\n                </Typography>\n              </Box>\n            )}\n            {interactionError !== \"\" && (\n              <Box mt={2} align=\"center\" style={{ color: \"red\" }}>\n                <Typography variant=\"h5\">\n                  <ErrorIcon />\n                  &nbsp; Confirmation Error\n                </Typography>\n                <Typography variant=\"caption\">{interactionError}</Typography>\n              </Box>\n            )}\n            {interactionMessage === \"\" && interactionError === \"\" && (\n              <InteractionMessages\n                messages={this.interaction.messagesFor({\n                  state: interactionState,\n                })}\n              />\n            )}\n            <Button\n              variant=\"contained\"\n              size=\"large\"\n              onClick={this.confirmOnDevice}\n              disabled={interactionState === ACTIVE}\n            >\n              Confirm\n            </Button>\n            {(interactionMessage !== \"\" || interactionError !== \"\") && (\n              <Button size=\"large\" onClick={this.resetInteractionState}>\n                Reset\n              </Button>\n            )}\n          </>\n        )}\n      </Grid>\n    );\n  };\n\n  resetInteractionState = () => {\n    this.setState({\n      interactionError: \"\",\n      interactionMessage: \"\",\n      interactionState: PENDING,\n    });\n  };\n\n  confirmOnDevice = async () => {\n    this.setState({ interactionState: ACTIVE });\n    const { node } = this.props;\n    const { multisig } = node;\n    try {\n      const confirmed = await this.interaction.run();\n      if (\n        confirmed.address === multisig.address &&\n        confirmed.serializedPath === this.interaction.bip32Path\n      ) {\n        this.setState({\n          interactionState: ACTIVE,\n          interactionMessage: \"Success\",\n          interactionError: \"\",\n        });\n      } else {\n        this.setState({\n          interactionState: ACTIVE,\n          interactionError: \"An unknow error occured\",\n          interactionMessage: \"\",\n        });\n      }\n    } catch (error) {\n      this.setState({\n        interactionState: ACTIVE,\n        interactionError: error.message,\n        interactionMessage: \"\",\n      });\n    }\n  };\n\n  keySelected = (event, extendedPublicKeyImporter) => {\n    const { network, node } = this.props;\n    const { multisig, bip32Path } = node;\n\n    this.interaction = ConfirmMultisigAddress({\n      keystore: extendedPublicKeyImporter.method,\n      network,\n      bip32Path: `${extendedPublicKeyImporter.bip32Path}${bip32Path.slice(1)}`,\n      multisig,\n    });\n    this.setState({ hasInteraction: true });\n    this.resetInteractionState();\n  };\n\n  // TODO: DRY out with test\n  confirmAddressDescription() {\n    const { network, node, requiredSigners, totalSigners } = this.props;\n    const { multisig } = node;\n    const addressType = multisigAddressType(multisig);\n\n    return (\n      <Box>\n        <p>\n          Confirm the following {network} {addressType} {requiredSigners}\n          -of-\n          {totalSigners} multisig address on your device:\n        </p>\n\n        <Table>\n          <TableBody>\n            <TableRow>\n              <TableCell>Address:</TableCell>\n              <TableCell>\n                <code>{multisig.address}</code>\n              </TableCell>\n            </TableRow>\n\n            <TableRow>\n              <TableCell>BIP32 Path:</TableCell>\n              <TableCell>\n                <code>{this.interaction.bip32Path}</code>\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </Box>\n    );\n  }\n}\n\nAddressExpander.propTypes = {\n  client: PropTypes.shape({\n    type: PropTypes.string,\n  }).isRequired,\n  extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n  node: PropTypes.shape({\n    addressUsed: PropTypes.bool,\n    balanceSats: PropTypes.shape({\n      isEqualTo: PropTypes.func,\n      isGreaterThan: PropTypes.func,\n    }),\n    bip32Path: PropTypes.string,\n    multisig: PropTypes.shape({\n      address: PropTypes.string,\n    }),\n    utxos: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  network: PropTypes.string,\n  requiredSigners: PropTypes.number.isRequired,\n  totalSigners: PropTypes.number.isRequired,\n};\n\nAddressExpander.defaultProps = {\n  network: NETWORKS.TESTNET,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    network: state.settings.network,\n    requiredSigners: state.settings.requiredSigners,\n    totalSigners: state.settings.totalSigners,\n    client: state.client,\n    extendedPublicKeyImporters: state.quorum.extendedPublicKeyImporters,\n  };\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddressExpander);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { satoshisToBitcoins } from \"unchained-bitcoin\";\n\n// Components\nimport { TableRow, TableCell, Checkbox } from \"@material-ui/core\";\nimport AddressExpander from \"./AddressExpander\";\n\n// Actions\nimport {\n  setInputs as setInputsAction,\n  setFeeRate as setFeeRateAction,\n  updateAutoSpendAction as updateAutoSpendActionImport,\n} from \"../../actions/transactionActions\";\nimport { WALLET_MODES } from \"../../actions/walletActions\";\n\nclass Node extends React.Component {\n  componentDidMount = () => {\n    this.generate();\n  };\n\n  render = () => {\n    const {\n      bip32Path,\n      spend,\n      fetchedUTXOs,\n      balanceSats,\n      multisig,\n      utxos,\n      walletMode,\n      addressKnown,\n    } = this.props;\n    const spending = walletMode === WALLET_MODES.SPEND;\n    return (\n      <TableRow key={bip32Path}>\n        {spending && (\n          <TableCell>\n            <Checkbox\n              id={bip32Path}\n              name=\"spend\"\n              onChange={this.handleSpend}\n              checked={spend}\n              disabled={!fetchedUTXOs || balanceSats.isEqualTo(0)}\n            />\n          </TableCell>\n        )}\n        <TableCell>\n          <code>{bip32Path.replace(\"m\", \"*\")}</code>\n        </TableCell>\n        <TableCell>{utxos.length}</TableCell>\n        <TableCell>\n          {fetchedUTXOs && addressKnown\n            ? satoshisToBitcoins(balanceSats).toFixed()\n            : \"\"}\n        </TableCell>\n        <TableCell>{this.maxUtxoDate()}</TableCell>\n\n        <TableCell>{multisig ? this.renderAddress() : \"...\"}</TableCell>\n      </TableRow>\n    );\n  };\n\n  maxUtxoDate = () => {\n    const { utxos } = this.props;\n    if (!utxos.length) return \"\";\n    const maxtime = Math.max(...utxos.map((utxo) => utxo.time));\n    if (Number.isNaN(maxtime)) return \"Pending\";\n    return new Date(1000 * maxtime).toLocaleDateString();\n  };\n\n  renderAddress = () => {\n    const { braidNode } = this.props;\n    return <AddressExpander node={braidNode} />;\n  };\n\n  generate = () => {\n    const { present, change, bip32Path, addNode } = this.props;\n    if (!present) {\n      addNode(change, bip32Path);\n    }\n  };\n\n  handleSpend = (e) => {\n    const {\n      change,\n      bip32Path,\n      updateNode,\n      inputs,\n      utxos,\n      multisig,\n      setInputs,\n      updateAutoSpend,\n      setFeeRate,\n      feeRate,\n    } = this.props;\n    let newInputs;\n    if (e.target.checked) {\n      newInputs = inputs.concat(\n        utxos.map((utxo) => ({ ...utxo, multisig, bip32Path }))\n      );\n    } else {\n      newInputs = inputs.filter((input) => {\n        const newUtxos = utxos.filter((utxo) => {\n          return utxo.txid === input.txid && utxo.index === input.index;\n        });\n        return newUtxos.length === 0;\n      });\n    }\n    setInputs(newInputs);\n    updateNode(change, { spend: e.target.checked, bip32Path });\n    updateAutoSpend(false);\n    setFeeRate(feeRate);\n  };\n}\n\nNode.propTypes = {\n  addNode: PropTypes.func.isRequired,\n  addressKnown: PropTypes.bool.isRequired,\n  balanceSats: PropTypes.shape({\n    isEqualTo: PropTypes.func,\n  }).isRequired,\n  bip32Path: PropTypes.string.isRequired,\n  braidNode: PropTypes.shape({}).isRequired,\n  change: PropTypes.bool.isRequired,\n  feeRate: PropTypes.string.isRequired,\n  fetchedUTXOs: PropTypes.bool.isRequired,\n  inputs: PropTypes.arrayOf(\n    PropTypes.shape({\n      index: PropTypes.number,\n      txid: PropTypes.string,\n    })\n  ).isRequired,\n  multisig: PropTypes.shape({}),\n  present: PropTypes.bool,\n  setFeeRate: PropTypes.func.isRequired,\n  setInputs: PropTypes.func.isRequired,\n  spend: PropTypes.bool.isRequired,\n  updateAutoSpend: PropTypes.func.isRequired,\n  updateNode: PropTypes.func.isRequired,\n  utxos: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  walletMode: PropTypes.number.isRequired,\n};\n\nNode.defaultProps = {\n  multisig: {},\n  present: false,\n};\n\nfunction mapStateToProps(state, ownProps) {\n  const change = (ownProps.bip32Path || \"\").split(\"/\")[1] === \"1\"; // // m, 0, 1\n  const braid = state.wallet[change ? \"change\" : \"deposits\"];\n  return {\n    ...state.settings,\n    ...{ change },\n    ...braid.nodes[ownProps.bip32Path],\n    ...state.spend.transaction,\n    walletMode: state.wallet.common.walletMode,\n    braidNode: braid.nodes[ownProps.bip32Path],\n  };\n}\n\nconst mapDispatchToProps = {\n  setInputs: setInputsAction,\n  setFeeRate: setFeeRateAction,\n  updateAutoSpend: updateAutoSpendActionImport,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Node);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\n// Components\nimport {\n  FormGroup,\n  FormControlLabel,\n  Checkbox,\n  FormLabel,\n  Grid,\n  Box,\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n  TablePagination,\n  TableSortLabel,\n} from \"@material-ui/core\";\nimport Node from \"./Node\";\nimport { WALLET_MODES } from \"../../actions/walletActions\";\n\nclass NodeSet extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 0,\n      nodesPerPage: 10,\n      spend: false,\n      filterIncludeSpent: false,\n      filterIncludeZeroBalance: false,\n      orderBy: \"bip32Path\",\n      orderDir: \"asc\",\n    };\n  }\n\n  sortAddresses = (key) => {\n    const { orderBy, orderDir } = this.state;\n    if (key === orderBy) {\n      this.setState({ page: 0, orderDir: orderDir === \"asc\" ? \"desc\" : \"asc\" });\n    } else {\n      this.setState({ page: 0, orderBy: key });\n    }\n  };\n\n  renderFilters = () => {\n    const { filterIncludeSpent, filterIncludeZeroBalance } = this.state;\n    return (\n      <FormGroup row>\n        <FormLabel component=\"h2\">\n          <Box mr={3}>Show Additional</Box>\n        </FormLabel>\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={filterIncludeSpent}\n              value=\"filterIncludeSpent\"\n              onChange={this.filterAddresses}\n            />\n          }\n          label=\"Spent Addresses\"\n        />\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={filterIncludeZeroBalance}\n              value=\"filterIncludeZeroBalance\"\n              onChange={this.filterAddresses}\n            />\n          }\n          label=\"Zero Balance\"\n        />\n      </FormGroup>\n    );\n  };\n\n  filterAddresses = (event, checked) => {\n    this.setState({ [event.target.value]: checked, page: 0 });\n  };\n\n  getNodeSet = () => {\n    const { changeNodes, depositNodes } = this.props;\n    const {\n      filterIncludeSpent,\n      filterIncludeZeroBalance,\n      orderBy,\n      orderDir,\n    } = this.state;\n    const nodes = Object.values(depositNodes)\n      .concat(Object.values(changeNodes))\n      .reduce((result, node) => {\n        const returnValue = result;\n        returnValue[node.bip32Path] = node;\n        return returnValue;\n      }, {});\n\n    let nodeSet = [];\n    Object.values(nodes).forEach((node) => {\n      if (node.balanceSats.isGreaterThan(0)) {\n        nodeSet.push(node);\n      } else if (\n        filterIncludeZeroBalance &&\n        node.balanceSats.isEqualTo(0) &&\n        !node.addressUsed\n      ) {\n        nodeSet.push(node);\n      } else if (filterIncludeSpent && node.addressUsed) {\n        nodeSet.push(node);\n      }\n    });\n\n    nodeSet = nodeSet.sort((a, b) => {\n      const direction = orderDir === \"asc\" ? 1 : -1;\n      if (orderBy === \"bip32Path\") {\n        if (a.change && !b.change) return direction;\n        if (!a.change && b.change) return -direction;\n        const aint = parseInt(a.bip32Path.split(\"/\").reverse()[0], 10);\n        const bint = parseInt(b.bip32Path.split(\"/\").reverse()[0], 10);\n        return aint > bint ? direction : -direction;\n      }\n      if (orderBy === \"balanceSats\") {\n        if (a.balanceSats.isEqualTo(b.balanceSats)) return 0;\n        return a.balanceSats.isGreaterThan(b.balanceSats)\n          ? direction\n          : -direction;\n      }\n      if (orderBy === \"utxos\") {\n        if (a.utxos.length === b.utxos.length) return 0;\n        return a.utxos.length > b.utxos.length ? direction : -direction;\n      }\n      if (orderBy === \"time\") {\n        if (a.utxos.length === 0) {\n          return b.utxos.length === 0 ? 0 : direction;\n        }\n        if (b.utxos.length === 0) {\n          return a.utxos.length === 0 ? 0 : -direction;\n        }\n        const amin = Math.min(...a.utxos.map((utxo) => utxo.time));\n        const bmin = Math.min(...b.utxos.map((utxo) => utxo.time));\n        if (Number.isNaN(amin) && Number.Number.isNaN(bmin)) return 0;\n        if (Number.isNaN(amin)) return direction;\n        if (Number.isNaN(bmin)) return -direction;\n        return amin > bmin ? direction : -direction;\n      }\n      return 0;\n    });\n\n    nodeSet = nodeSet.reduce((nodesObject, currentNode) => {\n      const returnValue = nodesObject;\n      returnValue[currentNode.bip32Path] = currentNode;\n      return returnValue;\n    }, {});\n\n    return nodeSet;\n  };\n\n  renderNodes = () => {\n    const { page, nodesPerPage, spend } = this.state;\n    const { addNode, updateNode } = this.props;\n    const startingIndex = page * nodesPerPage;\n    const nodesRows = [];\n    const nodeSet = this.getNodeSet();\n    for (let index = 0; index < nodesPerPage; index += 1) {\n      const whichOne = startingIndex + index;\n      if (whichOne > Object.keys(nodeSet).length - 1) break;\n      const bip32Path = Object.values(nodeSet)[whichOne].bip32Path; // eslint-disable-line prefer-destructuring\n      const change = Object.values(nodeSet)[whichOne].change; // eslint-disable-line prefer-destructuring\n      const nodeRow = (\n        <Node\n          key={bip32Path}\n          bip32Path={bip32Path}\n          addNode={addNode}\n          updateNode={updateNode}\n          change={change}\n          spend={spend}\n        />\n      );\n      nodesRows.push(nodeRow);\n    }\n    return nodesRows;\n  };\n\n  handlePageChange = (e, selected) => {\n    const page = selected; // + 1;\n    this.setState({ page });\n  };\n\n  handleChangeRowsPerPage = (e) => {\n    this.setState({ nodesPerPage: e.target.value, page: 0 });\n  };\n\n  pageCount = () => {\n    const { nodesPerPage } = this.state;\n    return Math.ceil(this.rowCount() / nodesPerPage);\n  };\n\n  rowCount = () => {\n    const nodeSet = this.getNodeSet();\n    return Object.keys(nodeSet).length;\n  };\n\n  render() {\n    const { page, nodesPerPage, orderBy, orderDir } = this.state;\n    const { walletMode } = this.props;\n    const spending = walletMode === WALLET_MODES.SPEND;\n    return (\n      <Grid item md={12}>\n        <Table style={{ tableLayout: \"fixed\" }}>\n          <TableHead>\n            <TableRow>\n              {spending && <TableCell width={62}>Spend?</TableCell>}\n              <TableCell width={106}>\n                <TableSortLabel\n                  active={orderBy === \"bip32Path\"}\n                  direction={orderDir}\n                  onClick={() => this.sortAddresses(\"bip32Path\")}\n                >\n                  BIP32 Path\n                </TableSortLabel>\n              </TableCell>\n              <TableCell width={78}>\n                <TableSortLabel\n                  active={orderBy === \"utxos\"}\n                  direction={orderDir}\n                  onClick={() => this.sortAddresses(\"utxos\")}\n                >\n                  UTXOs\n                </TableSortLabel>\n              </TableCell>\n              <TableCell width={82}>\n                <TableSortLabel\n                  active={orderBy === \"balanceSats\"}\n                  direction={orderDir}\n                  onClick={() => this.sortAddresses(\"balanceSats\")}\n                >\n                  Balance\n                </TableSortLabel>\n              </TableCell>\n              <TableCell width={98}>\n                <TableSortLabel\n                  active={orderBy === \"time\"}\n                  direction={orderDir}\n                  onClick={() => this.sortAddresses(\"time\")}\n                >\n                  Last Used\n                </TableSortLabel>\n              </TableCell>\n              <TableCell>Address</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>{this.renderNodes()}</TableBody>\n        </Table>\n        <Grid container>\n          <Grid item md={6}>\n            <TablePagination\n              component=\"div\"\n              count={this.rowCount()}\n              rowsPerPage={nodesPerPage}\n              page={page}\n              backIconButtonProps={{\n                \"aria-label\": \"previous page\",\n              }}\n              nextIconButtonProps={{\n                \"aria-label\": \"next page\",\n              }}\n              onChangePage={this.handlePageChange}\n              onChangeRowsPerPage={this.handleChangeRowsPerPage}\n            />\n          </Grid>\n        </Grid>\n        {!spending && this.renderFilters()}\n      </Grid>\n    );\n  }\n}\n\nNodeSet.propTypes = {\n  depositNodes: PropTypes.shape({}).isRequired,\n  changeNodes: PropTypes.shape({}).isRequired,\n  addNode: PropTypes.func.isRequired,\n  updateNode: PropTypes.func.isRequired,\n  walletMode: PropTypes.number.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    changeNodes: state.wallet.change.nodes,\n    depositNodes: state.wallet.deposits.nodes,\n    walletMode: state.wallet.common.walletMode,\n    client: state.client,\n    ...state.settings,\n  };\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NodeSet);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  satoshisToBitcoins,\n  bitcoinsToSatoshis,\n  validateOutputAmount,\n} from \"unchained-bitcoin\";\nimport BigNumber from \"bignumber.js\";\nimport {\n  Grid,\n  Tooltip,\n  TextField,\n  IconButton,\n  InputAdornment,\n  FormHelperText,\n  Typography,\n} from \"@material-ui/core\";\nimport AccountBalanceWalletOutlinedIcon from \"@material-ui/icons/AccountBalanceWallet\";\nimport { Delete, AddCircle, RemoveCircle } from \"@material-ui/icons\";\nimport {\n  setOutputAddress,\n  setOutputAmount,\n  deleteOutput,\n  setChangeOutputIndex,\n  setMaxSpendOnOutput,\n} from \"../../actions/transactionActions\";\nimport styles from \"./styles.module.scss\";\n\nclass OutputEntry extends React.Component {\n  displayBalanceAction = () => {\n    const { isWallet, finalizedOutputs, autoSpend } = this.props;\n    if (isWallet) {\n      return (\n        !autoSpend &&\n        !finalizedOutputs &&\n        this.hasBalanceError() &&\n        this.isBalanceable()\n      );\n    }\n    return !finalizedOutputs && this.hasBalanceError() && this.isBalanceable();\n  };\n\n  //\n  // Address\n  //\n\n  addChangeAddress = () => {\n    const { changeNode, number, setAddress, setChangeOutput } = this.props;\n    setAddress(number, changeNode.multisig.address);\n    setChangeOutput(number);\n  };\n\n  renderChangeAdornment = () => {\n    const {\n      changeNode,\n      number,\n      changeOutputIndex,\n      address,\n      isWallet,\n      autoSpend,\n    } = this.props;\n    if (isWallet && autoSpend) return {};\n    if (changeNode !== null) {\n      let title;\n      let disable = false;\n      if (changeOutputIndex === 0 && address === \"\") {\n        title = \"Set to wallet change address\";\n      } else if (number === changeOutputIndex) {\n        title = \"Your change will go here.\";\n        disable = true;\n      } else return {};\n      return {\n        /* min: \"0\", */\n        /* max: \"1000\", */\n        /* step: \"any\", */\n        endAdornment: (\n          <InputAdornment position=\"end\">\n            <Tooltip placement=\"top\" title={title}>\n              <small>\n                <IconButton onClick={this.addChangeAddress} disabled={disable}>\n                  <AccountBalanceWalletOutlinedIcon />\n                </IconButton>\n              </small>\n            </Tooltip>\n          </InputAdornment>\n        ),\n      };\n    }\n    return {};\n  };\n\n  handleAddressChange = (event) => {\n    const { number, setAddress } = this.props;\n    setAddress(number, event.target.value);\n  };\n\n  hasAddressError = () => {\n    const { addressError } = this.props;\n    return addressError !== \"\";\n  };\n\n  //\n  // Amount\n  //\n\n  handleAmountChange = (event) => {\n    const { number, setAmount } = this.props;\n    setAmount(number, event.target.value);\n  };\n\n  hasAmountError = () => {\n    const { amountError } = this.props;\n    return amountError !== \"\";\n  };\n\n  //\n  // Balance\n  //\n\n  isNotBalanceable = () => {\n    const {\n      number,\n      outputs,\n      feeError,\n      amountError,\n      amount,\n      inputsTotalSats,\n    } = this.props;\n    if (feeError !== \"\") {\n      return true;\n    }\n    for (let i = 0; i < outputs.length; i += 1) {\n      if (i !== number - 1) {\n        if (outputs[i].amountError !== \"\" || outputs[i].amount === \"\") {\n          return true;\n        }\n      }\n    }\n    const newAmount = this.autoBalancedAmount();\n    if (\n      validateOutputAmount(bitcoinsToSatoshis(newAmount), inputsTotalSats) !==\n      \"\"\n    ) {\n      return true;\n    }\n    return amountError === \"\" && newAmount === new BigNumber(amount);\n  };\n\n  isBalanceable = () => !this.isNotBalanceable();\n\n  hasBalanceError = () => {\n    const { balanceError } = this.props;\n    return balanceError !== \"\";\n  };\n\n  autoBalancedAmount = () => {\n    const { number, fee, inputsTotalSats, outputs } = this.props;\n    const outputTotalSats = outputs\n      .filter((output, i) => i !== number - 1)\n      .map((output) => output.amountSats)\n      .reduce(\n        (accumulator, currentValue) => accumulator.plus(currentValue),\n        new BigNumber(0)\n      );\n    const feeSats = bitcoinsToSatoshis(new BigNumber(fee));\n    return satoshisToBitcoins(\n      inputsTotalSats.minus(outputTotalSats.plus(feeSats))\n    );\n  };\n\n  balanceAction = () => {\n    const { balanceError } = this.props;\n    if (!this.hasBalanceError() || this.isNotBalanceable()) {\n      return null;\n    }\n    return balanceError.split(\" \")[0];\n  };\n\n  handleBalance = () => {\n    const { number, setAmount } = this.props;\n    setAmount(number, this.autoBalancedAmount().toString());\n  };\n\n  //\n  // State\n  //\n\n  hasError = () => {\n    return this.hasAddressError() || this.hasAmountError();\n  };\n\n  handleDelete = () => {\n    const { number, remove } = this.props;\n    remove(number);\n  };\n\n  handleMaxSpend = (e) => {\n    e.preventDefault();\n    const { number, setMaxSpend } = this.props;\n    setMaxSpend(number);\n  };\n\n  render() {\n    const {\n      outputs,\n      finalizedOutputs,\n      address,\n      amount,\n      addressError,\n      amountError,\n      changeOutputIndex,\n      autoSpend,\n      isWallet,\n      number,\n    } = this.props;\n\n    const gridSpacing = isWallet ? 10 : 1;\n\n    return (\n      <Grid container spacing={gridSpacing}>\n        <Grid item xs={7}>\n          <TextField\n            fullWidth\n            placeholder=\"Address\"\n            name=\"destination\"\n            className={styles.outputsFormInput}\n            disabled={finalizedOutputs}\n            onChange={this.handleAddressChange}\n            value={address}\n            error={this.hasAddressError()}\n            helperText={addressError}\n            InputProps={this.renderChangeAdornment()}\n          />\n        </Grid>\n\n        <Grid item xs={3}>\n          <TextField\n            fullWidth\n            placeholder=\"Amount\"\n            className={styles.outputsFormInput}\n            name=\"amount\"\n            disabled={finalizedOutputs}\n            onChange={this.handleAmountChange}\n            value={amount}\n            error={this.hasAmountError()}\n            helperText={amountError}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  {isWallet &&\n                    autoSpend &&\n                    number === outputs.length &&\n                    number !== changeOutputIndex && (\n                      <Typography\n                        onClick={this.handleMaxSpend}\n                        className={styles.maxSpend}\n                        style={{ fontSize: \".7rem\" }}\n                      >\n                        MAX\n                      </Typography>\n                    )}\n                </InputAdornment>\n              ),\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <FormHelperText>BTC</FormHelperText>\n                </InputAdornment>\n              ),\n            }}\n          />\n        </Grid>\n        {this.displayBalanceAction() && (\n          <Grid item xs={1}>\n            <Tooltip\n              title={`${this.balanceAction()} to ${this.autoBalancedAmount().toString()}`}\n              placement=\"top\"\n            >\n              <small>\n                <IconButton onClick={this.handleBalance}>\n                  {this.balanceAction() === \"Increase\" ? (\n                    <AddCircle />\n                  ) : (\n                    <RemoveCircle />\n                  )}\n                </IconButton>\n              </small>\n            </Tooltip>\n          </Grid>\n        )}\n\n        {!finalizedOutputs &&\n          outputs.length > (changeOutputIndex > 0 && autoSpend ? 2 : 1) && (\n            <Grid item xs={1}>\n              <Tooltip title=\"Remove Output\" placement=\"top\">\n                <IconButton onClick={this.handleDelete}>\n                  <Delete />\n                </IconButton>\n              </Tooltip>\n            </Grid>\n          )}\n      </Grid>\n    );\n  }\n}\n\nOutputEntry.propTypes = {\n  address: PropTypes.string.isRequired,\n  addressError: PropTypes.string.isRequired,\n  amount: PropTypes.string.isRequired,\n  amountError: PropTypes.string.isRequired,\n  autoSpend: PropTypes.bool.isRequired,\n  balanceError: PropTypes.string.isRequired,\n  changeNode: PropTypes.shape({\n    multisig: PropTypes.shape({\n      address: PropTypes.string,\n    }),\n  }),\n  changeOutputIndex: PropTypes.number.isRequired,\n  fee: PropTypes.string.isRequired,\n  feeError: PropTypes.string.isRequired,\n  finalizedOutputs: PropTypes.bool.isRequired,\n  inputsTotalSats: PropTypes.shape({\n    minus: PropTypes.func,\n  }).isRequired,\n  isWallet: PropTypes.bool.isRequired,\n  number: PropTypes.number.isRequired,\n  outputs: PropTypes.arrayOf(\n    PropTypes.shape({\n      amount: PropTypes.string,\n      amountError: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n  remove: PropTypes.func.isRequired,\n  setAddress: PropTypes.func.isRequired,\n  setAmount: PropTypes.func.isRequired,\n  setMaxSpend: PropTypes.func.isRequired,\n  setChangeOutput: PropTypes.func.isRequired,\n};\n\nOutputEntry.defaultProps = {\n  changeNode: {},\n};\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...state.spend.transaction,\n    ...state.spend.transaction.outputs[ownProps.number - 1],\n    changeNode: state.wallet.change.nextNode,\n  };\n}\n\nconst mapDispatchToProps = {\n  setAddress: setOutputAddress,\n  setAmount: setOutputAmount,\n  remove: deleteOutput,\n  setChangeOutput: setChangeOutputIndex,\n  setMaxSpend: setMaxSpendOnOutput,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OutputEntry);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { map } from \"lodash\";\nimport BigNumber from \"bignumber.js\";\nimport { bitcoinsToSatoshis, satoshisToBitcoins } from \"unchained-bitcoin\";\nimport {\n  Grid,\n  Button,\n  Tooltip,\n  TextField,\n  Box,\n  IconButton,\n  InputAdornment,\n  Typography,\n  FormHelperText,\n} from \"@material-ui/core\";\nimport { Speed } from \"@material-ui/icons\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {\n  addOutput as addOutputAction,\n  setOutputAmount as setOutputAmountAction,\n  setFeeRate as setFeeRateAction,\n  setFee as setFeeAction,\n  finalizeOutputs as finalizeOutputsAction,\n  resetOutputs as resetOutputsAction,\n} from \"../../actions/transactionActions\";\nimport { fetchFeeEstimate } from \"../../blockchain\";\nimport { MIN_SATS_PER_BYTE_FEE } from \"../Wallet/constants\";\nimport OutputEntry from \"./OutputEntry\";\nimport styles from \"./styles.module.scss\";\n\nclass OutputsForm extends React.Component {\n  static unitLabel(label, options) {\n    let inputProps = {\n      endAdornment: (\n        <InputAdornment position=\"end\">\n          <FormHelperText>{label}</FormHelperText>\n        </InputAdornment>\n      ),\n    };\n    if (options) {\n      inputProps = {\n        ...inputProps,\n        ...options,\n      };\n    }\n    return inputProps;\n  }\n\n  titleRef = React.createRef();\n\n  outputsTotal = 0;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      feeRateFetchError: \"\",\n    };\n  }\n\n  componentDidMount = () => {\n    this.initialOutputState();\n    this.scrollToTitle();\n  };\n\n  componentDidUpdate = () => {\n    this.scrollToTitle();\n  };\n\n  scrollToTitle = () => {\n    const { signatureImporters, isWallet } = this.props;\n    const finalizedCount = Object.keys(signatureImporters).reduce(\n      (o, k) => o + signatureImporters[k].finalized,\n      0\n    );\n    if (finalizedCount === 0 && !isWallet)\n      this.titleRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  renderOutputs = () => {\n    const { outputs, changeOutputIndex, autoSpend } = this.props;\n    return map(outputs).map((output, i) => (\n      <Box\n        key={i} // eslint-disable-line react/no-array-index-key\n        display={autoSpend && changeOutputIndex === i + 1 ? \"none\" : \"block\"}\n      >\n        <Grid container>\n          <OutputEntry number={i + 1} />\n        </Grid>\n      </Box>\n    ));\n  };\n\n  inputsTotal = () => {\n    const { inputsTotalSats } = this.props;\n    return satoshisToBitcoins(inputsTotalSats);\n  };\n\n  outputsAndFeeTotal = () => {\n    const { outputs, fee, updatesComplete, inputs } = this.props;\n    let total = outputs\n      .map((output) => {\n        let { amount } = output;\n        if (!amount || !amount.length || Number.isNaN(amount)) amount = 0;\n        return new BigNumber(amount);\n      })\n      .reduce(\n        (accumulator, currentValue) => accumulator.plus(currentValue),\n        new BigNumber(0)\n      );\n\n    // only care to add fee if we have inputs\n    // which we won't have in auto-spend wallet output form\n    if (fee && inputs.length) total = total.plus(fee);\n\n    if (updatesComplete) {\n      this.outputsTotal = total;\n      return total.toFixed(8);\n    }\n    return \"0.00000000\";\n  };\n\n  hasFeeRateFetchError = () => {\n    const { feeRateFetchError } = this.state;\n    return feeRateFetchError !== \"\";\n  };\n\n  hasFeeRateError = () => {\n    const { feeRateError } = this.props;\n    return feeRateError !== \"\";\n  };\n\n  hasFeeError = () => {\n    const { feeError } = this.props;\n    return feeError !== \"\";\n  };\n\n  hasBalanceError = () => {\n    const { balanceError } = this.props;\n    return balanceError !== \"\";\n  };\n\n  hasError = () => {\n    return (\n      this.hasFeeRateFetchError() ||\n      this.hasFeeRateError() ||\n      this.hasFeeError() ||\n      this.hasBalanceError()\n    );\n  };\n\n  handleAddOutput = () => {\n    const { addOutput } = this.props;\n    addOutput();\n  };\n\n  handleFeeRateChange = (event) => {\n    const { setFeeRate } = this.props;\n    let rate = event.target.value;\n\n    if (\n      rate === \"\" ||\n      Number.isNaN(parseFloat(rate, 10)) ||\n      parseFloat(rate, 10) < 1\n    )\n      rate = \"0\";\n    setFeeRate(rate);\n  };\n\n  handleFeeChange = (event) => {\n    const { setFee } = this.props;\n    setFee(event.target.value);\n  };\n\n  handleFinalize = () => {\n    const { finalizeOutputs } = this.props;\n    finalizeOutputs(true);\n  };\n\n  handleReset = () => {\n    const { resetOutputs, isWallet } = this.props;\n    resetOutputs();\n    if (!isWallet) setTimeout(() => this.initialOutputState(), 0);\n  };\n\n  getFeeEstimate = async () => {\n    const { client, network, setFeeRate } = this.props;\n    let feeEstimate;\n    let feeRateFetchError = \"\";\n    try {\n      feeEstimate = await fetchFeeEstimate(network, client);\n    } catch (e) {\n      feeRateFetchError = \"There was an error fetching the fee rate.\";\n    } finally {\n      setFeeRate(\n        !Number.isNaN(feeEstimate)\n          ? feeEstimate.toString()\n          : MIN_SATS_PER_BYTE_FEE.toString()\n      );\n      this.setState({ feeRateFetchError });\n    }\n  };\n\n  gatherSignaturesDisabled = () => {\n    const { finalizedOutputs, outputs, inputs } = this.props;\n    if (inputs.length === 0) return true;\n    if (finalizedOutputs || this.hasError()) {\n      return true;\n    }\n    for (let i = 0; i < outputs.length; i += 1) {\n      const output = outputs[i];\n      if (\n        output.address === \"\" ||\n        output.amount === \"\" ||\n        output.addressError !== \"\" ||\n        output.amountError !== \"\"\n      ) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  async initialOutputState() {\n    const { inputs, outputs } = this.props;\n    await this.getFeeEstimate();\n    const { inputsTotalSats, fee, setOutputAmount } = this.props;\n    const feeSats = bitcoinsToSatoshis(new BigNumber(fee));\n    const outputAmount = satoshisToBitcoins(inputsTotalSats.minus(feeSats));\n    // only initialize once so we don't lose state\n    if (inputs.length && outputs[0].amount === \"\")\n      setOutputAmount(1, outputAmount.toFixed(8));\n  }\n\n  render() {\n    const {\n      feeRate,\n      fee,\n      finalizedOutputs,\n      feeRateError,\n      feeError,\n      balanceError,\n      inputs,\n      isWallet,\n      autoSpend,\n    } = this.props;\n    const { feeRateFetchError } = this.state;\n    const feeDisplay = inputs && inputs.length > 0 ? fee : \"0.0000\";\n    const feeMt = 3;\n    const totalMt = 7;\n    const actionMt = 7;\n    const gridSpacing = isWallet ? 10 : 1;\n    return (\n      <>\n        <Box ref={this.titleRef}>\n          <Grid container spacing={gridSpacing}>\n            <Grid item xs={4}>\n              <Typography variant=\"caption\" className={styles.outputsFormLabel}>\n                To\n              </Typography>\n            </Grid>\n            <Grid item xs={3}>\n              &nbsp;\n            </Grid>\n            <Grid item xs={3}>\n              <Typography variant=\"caption\" className={styles.outputsFormLabel}>\n                Amount\n              </Typography>\n            </Grid>\n          </Grid>\n\n          <Grid>{this.renderOutputs()}</Grid>\n\n          <Grid item container spacing={gridSpacing}>\n            <Grid item xs={12}>\n              <Button\n                color=\"primary\"\n                disabled={finalizedOutputs}\n                onClick={this.handleAddOutput}\n              >\n                <AddIcon /> Add output\n              </Button>\n            </Grid>\n          </Grid>\n          <Grid item container spacing={gridSpacing}>\n            <Grid item xs={3}>\n              <Box mt={feeMt}>\n                <Typography\n                  variant=\"caption\"\n                  className={styles.outputsFormLabel}\n                >\n                  Fee Rate\n                </Typography>\n                <TextField\n                  fullWidth\n                  value={feeRate}\n                  type=\"number\"\n                  minimum={0}\n                  step={1}\n                  name=\"fee_rate\"\n                  disabled={finalizedOutputs}\n                  onChange={this.handleFeeRateChange}\n                  error={this.hasFeeRateError()}\n                  helperText={feeRateFetchError || feeRateError}\n                  InputProps={{\n                    endAdornment: (\n                      <InputAdornment position=\"end\">\n                        <Tooltip placement=\"top\" title=\"Estimate best rate\">\n                          <small>\n                            <IconButton\n                              onClick={this.getFeeEstimate}\n                              disabled={finalizedOutputs}\n                            >\n                              <Speed />\n                            </IconButton>\n                          </small>\n                        </Tooltip>\n                        <FormHelperText>Sats/byte</FormHelperText>\n                      </InputAdornment>\n                    ),\n                  }}\n                />\n              </Box>\n            </Grid>\n\n            <Grid item xs={4}>\n              <Box mt={feeMt}>&nbsp;</Box>\n            </Grid>\n            {!isWallet || (isWallet && !autoSpend) ? (\n              <Grid item xs={3}>\n                <Box mt={feeMt}>\n                  <Typography\n                    variant=\"caption\"\n                    className={styles.outputsFormLabel}\n                  >\n                    Estimated Fees\n                  </Typography>\n                  <TextField\n                    fullWidth\n                    name=\"fee_total\"\n                    disabled={finalizedOutputs}\n                    value={feeDisplay}\n                    onChange={this.handleFeeChange}\n                    error={this.hasFeeError()}\n                    helperText={feeError}\n                    InputProps={OutputsForm.unitLabel(\"BTC\", {\n                      readOnly: true,\n                      disableUnderline: true,\n                      style: { color: \"gray\" },\n                    })}\n                  />\n                </Box>\n              </Grid>\n            ) : (\n              \"\"\n            )}\n\n            <Grid item xs={2} />\n          </Grid>\n\n          <Grid item container spacing={gridSpacing}>\n            <Grid item xs={4}>\n              <Box mt={totalMt}>\n                <Typography variant=\"h6\">\n                  {!isWallet || (isWallet && !autoSpend)\n                    ? \"Totals\"\n                    : \"Output Total\"}\n                </Typography>\n              </Box>\n            </Grid>\n            <Grid item xs={3}>\n              <Box\n                display={\n                  !isWallet || (isWallet && !autoSpend) ? \"block\" : \"none\"\n                }\n                mt={totalMt}\n              >\n                <TextField\n                  fullWidth\n                  label=\"Inputs Total\"\n                  readOnly\n                  value={this.inputsTotal().toFixed(8)}\n                  disabled={finalizedOutputs}\n                  InputProps={OutputsForm.unitLabel(\"BTC\", { readOnly: true })}\n                />\n              </Box>\n            </Grid>\n            <Grid item xs={3}>\n              <Box mt={totalMt}>\n                <TextField\n                  fullWidth\n                  label={\n                    !isWallet || (isWallet && !autoSpend)\n                      ? \"Outputs & Fee Total\"\n                      : \"\"\n                  }\n                  value={this.outputsAndFeeTotal()}\n                  error={this.hasBalanceError()}\n                  disabled={finalizedOutputs}\n                  helperText={balanceError}\n                  InputProps={OutputsForm.unitLabel(\"BTC\", {\n                    readOnly: true,\n                    disableUnderline: true,\n                  })}\n                />\n              </Box>\n            </Grid>\n            <Grid item xs={2} />\n          </Grid>\n        </Box>\n\n        {!isWallet && (\n          <Box mt={actionMt}>\n            <Grid container spacing={3} justify=\"center\">\n              <Grid item>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  disabled={this.gatherSignaturesDisabled()}\n                  onClick={this.handleFinalize}\n                >\n                  Gather Signatures\n                </Button>\n              </Grid>\n\n              <Grid item>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  disabled={finalizedOutputs}\n                  onClick={this.handleReset}\n                >\n                  Reset Outputs\n                </Button>\n              </Grid>\n            </Grid>\n          </Box>\n        )}\n      </>\n    );\n  }\n}\n\nOutputsForm.propTypes = {\n  addOutput: PropTypes.func.isRequired,\n  autoSpend: PropTypes.bool.isRequired,\n  balanceError: PropTypes.string.isRequired,\n  change: PropTypes.shape({\n    nextNode: PropTypes.shape({\n      multisig: PropTypes.shape({\n        address: PropTypes.string,\n      }),\n    }),\n  }).isRequired,\n  changeOutputIndex: PropTypes.number.isRequired,\n  client: PropTypes.shape({}).isRequired,\n  fee: PropTypes.string.isRequired,\n  feeError: PropTypes.string.isRequired,\n  feeRateError: PropTypes.string.isRequired,\n  finalizeOutputs: PropTypes.func.isRequired,\n  feeRate: PropTypes.string.isRequired,\n  finalizedOutputs: PropTypes.bool.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  inputsTotalSats: PropTypes.shape({\n    minus: PropTypes.func,\n  }).isRequired,\n  isWallet: PropTypes.bool.isRequired,\n  network: PropTypes.string.isRequired,\n  outputs: PropTypes.arrayOf(\n    PropTypes.shape({\n      address: PropTypes.string,\n      addressError: PropTypes.string,\n      amount: PropTypes.string,\n      amountError: PropTypes.string,\n    })\n  ).isRequired,\n  resetOutputs: PropTypes.func.isRequired,\n  setFeeRate: PropTypes.func.isRequired,\n  setFee: PropTypes.func.isRequired,\n  setOutputAmount: PropTypes.func.isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n  updatesComplete: PropTypes.bool,\n};\n\nOutputsForm.defaultProps = {\n  updatesComplete: false,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...{\n      network: state.settings.network,\n      client: state.client,\n    },\n    ...state.spend.transaction,\n    ...state.client,\n    signatureImporters: state.spend.signatureImporters,\n    change: state.wallet.change,\n  };\n}\n\nconst mapDispatchToProps = {\n  addOutput: addOutputAction,\n  setOutputAmount: setOutputAmountAction,\n  setFeeRate: setFeeRateAction,\n  setFee: setFeeAction,\n  finalizeOutputs: finalizeOutputsAction,\n  resetOutputs: resetOutputsAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OutputsForm);\n","export const CARAVAN_CONFIG = \"caravan_config\";\nexport const MAX_TRAILING_EMPTY_NODES = 20;\nexport const MAX_FETCH_UTXOS_ERRORS = 5;\nexport const MIN_SATS_PER_BYTE_FEE = 1;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  signedMultisigTransaction,\n  blockExplorerTransactionURL,\n} from \"unchained-bitcoin\";\n\nimport {\n  Typography,\n  Box,\n  FormHelperText,\n  Button,\n  Card,\n  CardHeader,\n  CardContent,\n} from \"@material-ui/core\";\nimport { OpenInNew } from \"@material-ui/icons\";\nimport { broadcastTransaction } from \"../../blockchain\";\nimport Copyable from \"../Copyable\";\nimport { externalLink } from \"../../utils\";\nimport { setTXID } from \"../../actions/transactionActions\";\n\nclass Transaction extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: \"\",\n      broadcasting: false,\n      txid: \"\",\n    };\n  }\n\n  buildSignedTransaction = () => {\n    const { network, inputs, outputs, signatureImporters } = this.props;\n    return signedMultisigTransaction(\n      network,\n      inputs,\n      outputs,\n      Object.values(signatureImporters).map(\n        (signatureImporter) => signatureImporter.signature\n      )\n    );\n  };\n\n  handleBroadcast = async () => {\n    const { client, network, setTxid } = this.props;\n    const signedTransaction = this.buildSignedTransaction();\n    let error = \"\";\n    let txid = \"\";\n    this.setState({ broadcasting: true });\n    try {\n      txid = await broadcastTransaction(\n        signedTransaction.toHex(),\n        network,\n        client\n      );\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      error = `There was an error broadcasting the transaction.: ${e}`;\n    } finally {\n      this.setState({ txid, error, broadcasting: false });\n      setTxid(txid);\n    }\n  };\n\n  transactionURL = () => {\n    const { network } = this.props;\n    const { txid } = this.state;\n    return blockExplorerTransactionURL(txid, network);\n  };\n\n  render() {\n    const { error, broadcasting, txid } = this.state;\n    const signedTransaction = this.buildSignedTransaction();\n    const signedTransactionHex = signedTransaction.toHex();\n    return (\n      <Card>\n        <CardHeader title=\"Broadcast\" />\n        <CardContent>\n          <form>\n            {signedTransaction && (\n              <Box mt={4}>\n                <Typography variant=\"h6\">Signed Transaction</Typography>\n                <Copyable text={signedTransactionHex} code showIcon />\n              </Box>\n            )}\n            {txid === \"\" ? (\n              <Box mt={2}>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  disabled={!signedTransaction || broadcasting}\n                  onClick={this.handleBroadcast}\n                >\n                  Broadcast Transaction\n                </Button>\n                <FormHelperText error>{error}</FormHelperText>\n                <small>\n                  <FormHelperText>\n                    Warning: Broadcasting this transaction cannot be undone.\n                  </FormHelperText>\n                </small>\n              </Box>\n            ) : (\n              <Box mt={2}>\n                <Typography variant=\"h5\">\n                  <Copyable text={txid} code showIcon />\n                  &nbsp;\n                  {externalLink(this.transactionURL(), <OpenInNew />)}\n                </Typography>\n                <p>Transaction successfully broadcast.</p>\n              </Box>\n            )}\n          </form>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nTransaction.propTypes = {\n  client: PropTypes.shape({}).isRequired,\n  network: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  setTxid: PropTypes.func.isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    network: state.settings.network,\n    client: state.client,\n    ...state.client,\n    signatureImporters: state.spend.signatureImporters,\n    inputs: state.spend.transaction.inputs,\n    outputs: state.spend.transaction.outputs,\n  };\n}\n\nconst mapDispatchToProps = {\n  setTxid: setTXID,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Transaction);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\nimport { Button } from \"@material-ui/core\";\nimport Copyable from \"./Copyable\";\n\nclass UnsignedTransaction extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showUnsignedTransaction: false,\n    };\n  }\n\n  render = () => {\n    const { showUnsignedTransaction } = this.state;\n    const { unsignedTransaction } = this.props;\n    if (showUnsignedTransaction) {\n      const hex = unsignedTransaction.toHex();\n      return (\n        <div>\n          <small>\n            <Button size=\"small\" onClick={this.handleHideUnsignedTransaction}>\n              Hide Unsigned Transaction\n            </Button>\n          </small>\n          <p>\n            <Copyable text={hex} showIcon />\n          </p>\n        </div>\n      );\n    }\n    return (\n      <small>\n        <Button size=\"small\" onClick={this.handleShowUnsignedTransaction}>\n          Show Unsigned Transaction\n        </Button>\n      </small>\n    );\n  };\n\n  handleShowUnsignedTransaction = () => {\n    this.setState({ showUnsignedTransaction: true });\n  };\n\n  handleHideUnsignedTransaction = () => {\n    this.setState({ showUnsignedTransaction: false });\n  };\n}\n\nUnsignedTransaction.propTypes = {\n  unsignedTransaction: PropTypes.shape({\n    toHex: PropTypes.func,\n  }).isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    unsignedTransaction: state.spend.transaction.unsignedTransaction,\n  };\n}\n\nconst mapDispatchToProps = {};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(UnsignedTransaction);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\n// Components\nimport { Box, Button } from \"@material-ui/core\";\nimport Transaction from \"../ScriptExplorer/Transaction\";\nimport ExtendedPublicKeySelector from \"./ExtendedPublicKeySelector\";\n\n// Actions\nimport {\n  finalizeOutputs as finalizeOutputsAction,\n  setRequiredSigners as setRequiredSignersAction,\n  resetTransaction as resetTransactionAction,\n  setSpendStep as setSpendStepAction,\n  SPEND_STEP_CREATE,\n} from \"../../actions/transactionActions\";\nimport {\n  updateTxSlices as updateTxSlicesAction,\n  resetWalletView as resetWalletViewAction,\n} from \"../../actions/walletActions\";\nimport UnsignedTransaction from \"../UnsignedTransaction\";\n\nclass WalletSign extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spent: false,\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { txid, changeSlice, updateTxSlices } = props;\n    if (txid.length && !state.spent) {\n      updateTxSlices(changeSlice);\n      return {\n        spent: true,\n      };\n    }\n    return null;\n  }\n\n  componentWillUnmount() {\n    const { resetTransaction } = this.props;\n    const { spent } = this.state;\n\n    // reset the transaction when we leave the view if tx is spent\n    if (spent) {\n      resetTransaction();\n    }\n  }\n\n  renderKeySelectors = () => {\n    const { requiredSigners } = this.props;\n    const keySelectors = [];\n    for (\n      let keySelectorNum = 1;\n      keySelectorNum <= requiredSigners;\n      keySelectorNum += 1\n    ) {\n      keySelectors.push(\n        <Box key={keySelectorNum} mt={2}>\n          <ExtendedPublicKeySelector number={keySelectorNum} />\n        </Box>\n      );\n    }\n    return keySelectors;\n  };\n\n  signaturesFinalized = () => {\n    const { signatureImporters } = this.props;\n    return (\n      Object.values(signatureImporters).length > 0 &&\n      Object.values(signatureImporters).every(\n        (signatureImporter) => signatureImporter.finalized\n      )\n    );\n  };\n\n  handleReturn = () => {\n    const { resetTransaction, resetWalletView } = this.props;\n    resetTransaction();\n    resetWalletView();\n  };\n\n  handleCancel = (event) => {\n    const {\n      finalizeOutputs,\n      requiredSigners,\n      setRequiredSigners,\n      setSpendStep,\n    } = this.props;\n    event.preventDefault();\n    setRequiredSigners(requiredSigners); // this will generate signature importers\n    finalizeOutputs(false);\n    setSpendStep(SPEND_STEP_CREATE);\n  };\n\n  render = () => {\n    const { spent } = this.state;\n    return (\n      <Box>\n        <Button href=\"#\" onClick={this.handleCancel}>\n          Edit Transaction\n        </Button>\n        <Box mt={2}>\n          <UnsignedTransaction />\n        </Box>\n        {this.renderKeySelectors()}\n\n        <Box mt={2}>\n          <Button\n            href=\"#\"\n            onClick={(e) => {\n              e.preventDefault();\n              this.handleReturn();\n            }}\n          >\n            Abandon Transaction\n          </Button>\n        </Box>\n\n        {this.signaturesFinalized() && (\n          <Box mt={2}>\n            <Transaction />\n          </Box>\n        )}\n\n        {spent && (\n          <Box mt={2}>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={this.handleReturn}\n            >\n              Return\n            </Button>\n          </Box>\n        )}\n      </Box>\n    );\n  };\n}\n\nWalletSign.propTypes = {\n  changeSlice: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    multisig: PropTypes.shape({\n      address: PropTypes.string,\n    }),\n  }).isRequired,\n  finalizeOutputs: PropTypes.func.isRequired,\n  requiredSigners: PropTypes.number.isRequired,\n  resetTransaction: PropTypes.func.isRequired,\n  resetWalletView: PropTypes.func.isRequired,\n  setRequiredSigners: PropTypes.func.isRequired,\n  setSpendStep: PropTypes.func.isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n  updateTxSlices: PropTypes.func.isRequired,\n  txid: PropTypes.string.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.wallet,\n    ...state.spend,\n    ...state.quorum,\n    txid: state.spend.transaction.txid,\n    requiredSigners: state.spend.transaction.requiredSigners,\n    totalSigners: state.spend.transaction.totalSigners,\n    changeSlice: state.wallet.change.nextNode,\n  };\n}\n\nconst mapDispatchToProps = {\n  finalizeOutputs: finalizeOutputsAction,\n  setRequiredSigners: setRequiredSignersAction,\n  updateTxSlices: updateTxSlicesAction,\n  resetTransaction: resetTransactionAction,\n  resetWalletView: resetWalletViewAction,\n  setSpendStep: setSpendStepAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletSign);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport BigNumber from \"bignumber.js\";\nimport { satoshisToBitcoins } from \"unchained-bitcoin\";\nimport {\n  Button,\n  Box,\n  Table,\n  TableHead,\n  TableBody,\n  TableFooter,\n  TableRow,\n  TableCell,\n  Grid,\n} from \"@material-ui/core\";\nimport UnsignedTransaction from \"../UnsignedTransaction\";\nimport { setChangeOutputMultisig as setChangeOutputMultisigAction } from \"../../actions/transactionActions\";\n\nclass TransactionPreview extends React.Component {\n  componentDidMount() {\n    const {\n      outputs,\n      changeAddress,\n      changeOutputIndex,\n      changeNode,\n      setChangeOutputMultisig,\n    } = this.props;\n    outputs.forEach((output) => {\n      if (output.address === changeAddress) {\n        setChangeOutputMultisig(changeOutputIndex, changeNode.multisig);\n      }\n    });\n  }\n\n  renderAddresses = () => {\n    const addressWithUtxos = this.mapAddresses();\n    return Object.keys(addressWithUtxos).map((address) => {\n      return (\n        <TableRow key={address}>\n          <TableCell>\n            <code>{address}</code>\n          </TableCell>\n          <TableCell>{addressWithUtxos[address].utxos.length}</TableCell>\n          <TableCell>\n            <code>{addressWithUtxos[address].amount.toFixed(8)}</code>\n          </TableCell>\n        </TableRow>\n      );\n    });\n  };\n\n  renderOutputAddresses = () => {\n    const { changeAddress, outputs } = this.props;\n\n    return outputs.map((output) => {\n      return (\n        <TableRow key={output.address}>\n          <TableCell>\n            <code>{output.address}</code>\n            {output.address === changeAddress ? (\n              <small>&nbsp;(change)</small>\n            ) : (\n              \"\"\n            )}\n          </TableCell>\n          <TableCell>\n            <code>{BigNumber(output.amount).toFixed(8)}</code>\n          </TableCell>\n        </TableRow>\n      );\n    });\n  };\n\n  renderOutputs = () => {\n    return (\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Address</TableCell>\n            <TableCell>Amount (BTC)</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>{this.renderOutputAddresses()}</TableBody>\n        <TableFooter>\n          <TableRow>\n            <TableCell>TOTAL:</TableCell>\n            <TableCell>{this.outputsTotal()}</TableCell>\n          </TableRow>\n        </TableFooter>\n      </Table>\n    );\n  };\n\n  renderInputs = () => {\n    const { inputsTotalSats } = this.props;\n\n    return (\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Address</TableCell>\n            <TableCell>UTXO count</TableCell>\n            <TableCell>Amount (BTC)</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>{this.renderAddresses()}</TableBody>\n        <TableFooter>\n          <TableRow>\n            <TableCell colSpan={2}>TOTAL:</TableCell>\n            <TableCell>\n              {satoshisToBitcoins(inputsTotalSats).toString()}\n            </TableCell>\n          </TableRow>\n        </TableFooter>\n      </Table>\n    );\n  };\n\n  mapAddresses = () => {\n    const { inputs } = this.props;\n    return inputs.reduce((mapped, input) => {\n      const mappedAddresses = mapped;\n      const { confirmed, txid, index, amount } = input;\n\n      mappedAddresses[input.multisig.address] = mapped[\n        input.multisig.address\n      ] || {\n        amount: BigNumber(0),\n        utxos: [],\n      };\n      mappedAddresses[input.multisig.address].utxos.push({\n        confirmed,\n        txid,\n        index,\n        amount,\n      });\n      mappedAddresses[input.multisig.address].amount = mapped[\n        input.multisig.address\n      ].amount.plus(BigNumber(input.amount));\n      return mappedAddresses;\n    }, {});\n  };\n\n  outputsTotal = () => {\n    const { outputs } = this.props;\n    return satoshisToBitcoins(\n      outputs.reduce(\n        (total, output) => total.plus(BigNumber(output.amountSats || 0)),\n        BigNumber(0)\n      )\n    ).toString();\n  };\n\n  render = () => {\n    const {\n      feeRate,\n      fee,\n      inputsTotalSats,\n      editTransaction,\n      handleSignTransaction,\n    } = this.props;\n\n    return (\n      <Box>\n        <h2>Transaction Preview</h2>\n        <UnsignedTransaction />\n        <h3>Inputs</h3>\n        {this.renderInputs()}\n        <h3>Outputs</h3>\n        {this.renderOutputs()}\n        <Grid container>\n          <Grid item xs={4}>\n            <h3>Fee</h3>\n            <div>{BigNumber(fee).toFixed(8)} BTC </div>\n          </Grid>\n          <Grid item xs={4}>\n            <h3>Fee Rate</h3>\n            <div>{feeRate} sats/byte</div>\n          </Grid>\n          <Grid item xs={4}>\n            <h3>Total</h3>\n            <div>\n              {satoshisToBitcoins(BigNumber(inputsTotalSats || 0)).toFixed(8)}{\" \"}\n              BTC\n            </div>\n          </Grid>\n        </Grid>\n        <Box mt={2}>\n          <Grid container spacing={2}>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  editTransaction();\n                }}\n              >\n                Edit Transaction\n              </Button>\n            </Grid>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleSignTransaction}\n              >\n                Sign Transaction\n              </Button>\n            </Grid>\n          </Grid>\n        </Box>\n      </Box>\n    );\n  };\n}\n\nTransactionPreview.propTypes = {\n  changeAddress: PropTypes.string.isRequired,\n  changeNode: PropTypes.shape({\n    multisig: PropTypes.shape({}),\n  }).isRequired,\n  changeOutputIndex: PropTypes.number.isRequired,\n  editTransaction: PropTypes.func.isRequired,\n  fee: PropTypes.string.isRequired,\n  feeRate: PropTypes.string.isRequired,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  inputsTotalSats: PropTypes.shape({}).isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  handleSignTransaction: PropTypes.func.isRequired,\n  setChangeOutputMultisig: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    changeOutputIndex: state.spend.transaction.changeOutputIndex,\n  };\n}\n\nconst mapDispatchToProps = {\n  setChangeOutputMultisig: setChangeOutputMultisigAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TransactionPreview);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport BigNumber from \"bignumber.js\";\nimport {\n  Box,\n  Card,\n  CardContent,\n  Grid,\n  Switch,\n  FormControlLabel,\n  Button,\n} from \"@material-ui/core\";\nimport {\n  updateDepositSliceAction,\n  updateChangeSliceAction,\n  resetNodesSpend as resetNodesSpendAction,\n  autoSelectCoins as autoSelectCoinsAction,\n} from \"../../actions/walletActions\";\nimport {\n  setInputs as setInputsAction,\n  setFeeRate as setFeeRateAction,\n  addOutput,\n  setOutputAddress,\n  updateAutoSpendAction,\n  setChangeAddressAction,\n  finalizeOutputs as finalizeOutputsAction,\n  SPEND_STEP_CREATE,\n  SPEND_STEP_PREVIEW,\n  SPEND_STEP_SIGN,\n  setSpendStep as setSpendStepAction,\n  deleteChangeOutput as deleteChangeOutputAction,\n} from \"../../actions/transactionActions\";\nimport { naiveCoinSelection } from \"../../utils\";\nimport NodeSet from \"./NodeSet\";\nimport OutputsForm from \"../ScriptExplorer/OutputsForm\";\nimport WalletSign from \"./WalletSign\";\nimport TransactionPreview from \"./TransactionPreview\";\nimport { bigNumberPropTypes } from \"../../proptypes/utils\";\n\nclass WalletSpend extends React.Component {\n  outputsAmount = new BigNumber(0);\n\n  coinSelection = naiveCoinSelection;\n\n  feeAmount = new BigNumber(0);\n\n  componentDidUpdate = (prevProps) => {\n    const { finalizedOutputs } = this.props;\n    if (finalizedOutputs && !prevProps.finalizedOutputs) {\n      this.showPreview();\n    }\n  };\n\n  previewDisabled = () => {\n    const {\n      finalizedOutputs,\n      outputs,\n      feeRateError,\n      feeError,\n      inputs,\n      balanceError,\n      autoSpend,\n    } = this.props;\n\n    if (inputs.length === 0 && !autoSpend) return true;\n    if (finalizedOutputs || feeRateError || feeError || balanceError) {\n      return true;\n    }\n    for (let i = 0; i < outputs.length; i += 1) {\n      const output = outputs[i];\n      if (\n        output.address === \"\" ||\n        output.amount === \"\" ||\n        output.addressError !== \"\" ||\n        output.amountError !== \"\"\n      ) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  showSignTransaction = () => {\n    const { setSpendStep } = this.props;\n    setSpendStep(SPEND_STEP_SIGN);\n  };\n\n  handleShowPreview = () => {\n    const { autoSelectCoins, autoSpend, finalizeOutputs } = this.props;\n    if (autoSpend) autoSelectCoins();\n    else finalizeOutputs(true);\n  };\n\n  showPreview = () => {\n    const { setSpendStep } = this.props;\n    setSpendStep(SPEND_STEP_PREVIEW);\n  };\n\n  showCreate = () => {\n    const {\n      finalizeOutputs,\n      setSpendStep,\n      resetNodesSpend,\n      autoSpend,\n      deleteChangeOutput,\n    } = this.props;\n    setSpendStep(SPEND_STEP_CREATE);\n    finalizeOutputs(false);\n\n    // for auto spend view, user doesn't have direct knowledge of\n    // input nodes and change. So when going back to edit a transaction\n    // we want to clear these from the state, since these are added automatically\n    // when going from output form to transaction preview\n    if (autoSpend) {\n      resetNodesSpend();\n      deleteChangeOutput();\n    }\n  };\n\n  handleSpendMode = (event) => {\n    const { updateAutoSpend, resetNodesSpend, deleteChangeOutput } = this.props;\n    updateAutoSpend(!event.target.checked);\n    updateAutoSpend(!event.target.checked);\n    resetNodesSpend();\n    deleteChangeOutput();\n  };\n\n  render() {\n    const {\n      autoSpend,\n      changeAddress,\n      changeNode,\n      updateNode,\n      addNode,\n      spendingStep,\n      fee,\n      feeRate,\n      inputs,\n      inputsTotalSats,\n      outputs,\n    } = this.props;\n\n    return (\n      <Card>\n        <CardContent>\n          <Grid container>\n            {spendingStep === SPEND_STEP_SIGN && (\n              <Grid item md={12}>\n                <Box>\n                  <WalletSign />\n                </Box>\n              </Grid>\n            )}\n            {spendingStep === SPEND_STEP_CREATE && (\n              <Grid item md={12}>\n                <Grid container direction=\"row-reverse\">\n                  <Box display=\"flex-end\">\n                    <Box p={1}>\n                      <FormControlLabel\n                        control={\n                          <Switch\n                            checked={!autoSpend}\n                            onChange={this.handleSpendMode}\n                          />\n                        }\n                        label=\"Manual\"\n                      />\n                    </Box>\n                  </Box>\n                </Grid>\n                <Box component=\"div\" display={autoSpend ? \"none\" : \"block\"}>\n                  <NodeSet addNode={addNode} updateNode={updateNode} />\n                </Box>\n                <OutputsForm />\n                <Box mt={2}>\n                  <Button\n                    onClick={this.handleShowPreview}\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={this.previewDisabled()}\n                  >\n                    Preview Transaction\n                  </Button>\n                </Box>\n              </Grid>\n            )}\n            {spendingStep === SPEND_STEP_PREVIEW && (\n              <Grid item md={12}>\n                <Box mt={3}>\n                  <TransactionPreview\n                    changeAddress={changeAddress}\n                    changeNode={changeNode}\n                    editTransaction={this.showCreate}\n                    fee={fee}\n                    feeRate={feeRate}\n                    inputs={inputs}\n                    inputsTotalSats={inputsTotalSats}\n                    outputs={outputs}\n                    handleSignTransaction={() => this.showSignTransaction()}\n                  />\n                </Box>\n              </Grid>\n            )}\n          </Grid>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nWalletSpend.propTypes = {\n  addNode: PropTypes.func.isRequired,\n  autoSpend: PropTypes.bool,\n  autoSelectCoins: PropTypes.func.isRequired,\n  balanceError: PropTypes.string,\n  changeNode: PropTypes.shape({\n    multisig: PropTypes.shape({\n      address: PropTypes.string,\n    }),\n  }).isRequired,\n  changeNodes: PropTypes.shape({}),\n  changeAddress: PropTypes.string.isRequired,\n  deleteChangeOutput: PropTypes.func.isRequired,\n  depositNodes: PropTypes.shape({}),\n  fee: PropTypes.string.isRequired,\n  feeError: PropTypes.string,\n  feeRate: PropTypes.string.isRequired,\n  feeRateError: PropTypes.string,\n  finalizeOutputs: PropTypes.func.isRequired,\n  finalizedOutputs: PropTypes.bool,\n  inputs: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n  inputsTotalSats: PropTypes.shape(bigNumberPropTypes).isRequired,\n  outputs: PropTypes.arrayOf(\n    PropTypes.shape({\n      address: PropTypes.string,\n      amount: PropTypes.string,\n      addressError: PropTypes.string,\n      amountError: PropTypes.string,\n    })\n  ).isRequired,\n  resetNodesSpend: PropTypes.func.isRequired,\n  setSpendStep: PropTypes.func.isRequired,\n  spendingStep: PropTypes.number,\n  updateAutoSpend: PropTypes.func.isRequired,\n  updateNode: PropTypes.func.isRequired,\n};\n\nWalletSpend.defaultProps = {\n  autoSpend: false,\n  balanceError: null,\n  changeNodes: {},\n  depositNodes: {},\n  finalizedOutputs: false,\n  feeError: null,\n  feeRateError: null,\n  spendingStep: 0,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.spend.transaction,\n    changeNodes: state.wallet.change.nodes,\n    changeNode: state.wallet.change.nextNode,\n    depositNodes: state.wallet.deposits.nodes,\n    autoSpend: state.spend.transaction.autoSpend,\n  };\n}\n\nconst mapDispatchToProps = {\n  autoSelectCoins: autoSelectCoinsAction,\n  deleteChangeOutput: deleteChangeOutputAction,\n  updateAutoSpend: updateAutoSpendAction,\n  setInputs: setInputsAction,\n  updateChangeSlice: updateChangeSliceAction,\n  updateDepositSlice: updateDepositSliceAction,\n  setAddress: setOutputAddress,\n  resetNodesSpend: resetNodesSpendAction,\n  setFeeRate: setFeeRateAction,\n  addOutput,\n  finalizeOutputs: finalizeOutputsAction,\n  setChangeAddress: setChangeAddressAction,\n  setSpendStep: setSpendStepAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletSpend);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\nimport {\n  Box,\n  Card,\n  CardContent,\n  Checkbox,\n  FormControlLabel,\n  FormGroup,\n  FormLabel,\n  Grid,\n} from \"@material-ui/core\";\nimport {\n  getSlicesWithBalance,\n  getZeroBalanceSlices,\n  getSpentSlices,\n} from \"../../selectors/wallet\";\nimport { slicePropTypes, clientPropTypes } from \"../../proptypes\";\n\n// Components\nimport SlicesTable from \"./SlicesTable\";\n\nclass SlicesTableContainer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filterIncludeSpent: false,\n      filterIncludeZeroBalance: false,\n      displaySlices: props.slicesWithBalance.length\n        ? [...props.slicesWithBalance]\n        : [],\n    };\n  }\n\n  componentDidUpdate(newProps) {\n    const { slicesWithBalance } = this.props;\n    if (newProps.slicesWithBalance.length !== slicesWithBalance.length) {\n      this.setDisplaySlices();\n    }\n  }\n\n  setDisplaySlices() {\n    const { slicesWithBalance, zeroBalanceSlices, spentSlices } = this.props;\n    const { filterIncludeSpent, filterIncludeZeroBalance } = this.state;\n    const newDisplaySlices = [...slicesWithBalance];\n    if (filterIncludeSpent) {\n      newDisplaySlices.push(...spentSlices);\n    }\n    if (filterIncludeZeroBalance) {\n      newDisplaySlices.push(...zeroBalanceSlices);\n    }\n    this.setState({ displaySlices: newDisplaySlices });\n  }\n\n  filterAddresses = (event, checked) => {\n    this.setState({ [event.target.value]: checked }, () =>\n      this.setDisplaySlices()\n    );\n  };\n\n  render() {\n    const {\n      filterIncludeSpent,\n      filterIncludeZeroBalance,\n      displaySlices,\n    } = this.state;\n    const { client, network } = this.props;\n\n    return (\n      <Card>\n        <CardContent>\n          <Grid container direction=\"column\">\n            <Grid item>\n              <SlicesTable\n                slices={displaySlices}\n                client={client}\n                network={network}\n                paging\n              />\n            </Grid>\n            <Grid item>\n              <FormGroup row>\n                <FormLabel component=\"h2\">\n                  <Box mr={3}>Show Additional</Box>\n                </FormLabel>\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={filterIncludeSpent}\n                      value=\"filterIncludeSpent\"\n                      onChange={this.filterAddresses}\n                    />\n                  }\n                  label=\"Spent Addresses\"\n                />\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={filterIncludeZeroBalance}\n                      value=\"filterIncludeZeroBalance\"\n                      onChange={this.filterAddresses}\n                    />\n                  }\n                  label=\"Zero Balance\"\n                />\n              </FormGroup>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nSlicesTableContainer.propTypes = {\n  slicesWithBalance: PropTypes.arrayOf(PropTypes.shape(slicePropTypes))\n    .isRequired,\n  zeroBalanceSlices: PropTypes.arrayOf(PropTypes.shape(slicePropTypes))\n    .isRequired,\n  spentSlices: PropTypes.arrayOf(PropTypes.shape(slicePropTypes)).isRequired,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n  network: PropTypes.string.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    slicesWithBalance: getSlicesWithBalance(state),\n    zeroBalanceSlices: getZeroBalanceSlices(state),\n    spentSlices: getSpentSlices(state),\n    walletMode: state.wallet.common.walletMode,\n    client: state.client,\n    network: state.settings.network,\n  };\n}\n\nexport default connect(mapStateToProps)(SlicesTableContainer);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  Tabs,\n  Tab,\n  Box,\n  LinearProgress,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport {\n  setWalletModeAction as setWalletModeActionImport,\n  WALLET_MODES,\n} from \"../../actions/walletActions\";\nimport { setRequiredSigners as setRequiredSignersAction } from \"../../actions/transactionActions\";\nimport { MAX_FETCH_UTXOS_ERRORS, MAX_TRAILING_EMPTY_NODES } from \"./constants\";\nimport WalletDeposit from \"./WalletDeposit\";\nimport WalletSpend from \"./WalletSpend\";\nimport { SlicesTableContainer } from \"../Slices\";\n\nclass WalletControl extends React.Component {\n  scrollRef = React.createRef();\n\n  componentDidMount = () => {\n    this.scrollRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  render = () => {\n    const { walletMode } = this.props;\n    return (\n      <div>\n        <Tabs\n          ref={this.scrollRef}\n          value={walletMode}\n          onChange={this.handleModeChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          variant=\"fullWidth\"\n        >\n          {this.addressesAreLoaded() && [\n            <Tab label=\"Addresses\" value={WALLET_MODES.VIEW} key={0} />,\n            <Tab label=\"Receive\" value={WALLET_MODES.DEPOSIT} key={1} />,\n            <Tab label=\"Send\" value={WALLET_MODES.SPEND} key={2} />,\n          ]}\n        </Tabs>\n        <Box mt={2}>{this.renderModeComponent()}</Box>\n      </div>\n    );\n  };\n\n  renderModeComponent = () => {\n    const { walletMode, addNode, updateNode } = this.props;\n    if (this.addressesAreLoaded()) {\n      if (walletMode === WALLET_MODES.DEPOSIT) return <WalletDeposit />;\n      if (walletMode === WALLET_MODES.SPEND)\n        return <WalletSpend addNode={addNode} updateNode={updateNode} />;\n      if (walletMode === WALLET_MODES.VIEW) return <SlicesTableContainer />;\n    }\n    const progress = this.progress();\n    return [\n      <div style={{ textAlign: \"center\", marginBottom: \"5em\" }} key={0}>\n        <CircularProgress variant=\"indeterminate\" />\n      </div>,\n      <LinearProgress variant=\"determinate\" value={progress} key={1} />,\n    ];\n  };\n\n  progress = () => {\n    const { change, deposits } = this.props;\n    return (\n      (100 * (deposits.trailingEmptyNodes + change.trailingEmptyNodes)) /\n      (2 * MAX_TRAILING_EMPTY_NODES)\n    );\n  };\n\n  addressesAreLoaded = () => {\n    const { change, deposits, nodesLoaded } = this.props;\n    if (nodesLoaded) return true;\n    return (\n      (deposits.trailingEmptyNodes >= MAX_TRAILING_EMPTY_NODES ||\n        deposits.fetchUTXOsErrors >= MAX_FETCH_UTXOS_ERRORS) &&\n      (change.trailingEmptyNodes >= MAX_TRAILING_EMPTY_NODES ||\n        change.fetchUTXOsErrors >= MAX_FETCH_UTXOS_ERRORS)\n    );\n  };\n\n  handleModeChange = (_event, mode) => {\n    const {\n      setMode,\n      requiredSigners,\n      setRequiredSigners,\n      signatureImporters,\n    } = this.props;\n    if (\n      mode === WALLET_MODES.SPEND &&\n      Object.keys(signatureImporters).length !== requiredSigners\n    ) {\n      setRequiredSigners(requiredSigners); // this will generate signature importers\n    }\n    setMode(mode);\n  };\n}\n\nWalletControl.propTypes = {\n  addNode: PropTypes.func.isRequired,\n  change: PropTypes.shape({\n    trailingEmptyNodes: PropTypes.number,\n    fetchUTXOsErrors: PropTypes.number,\n  }).isRequired,\n  deposits: PropTypes.shape({\n    trailingEmptyNodes: PropTypes.number,\n    fetchUTXOsErrors: PropTypes.number,\n  }).isRequired,\n  nodesLoaded: PropTypes.bool.isRequired,\n  requiredSigners: PropTypes.number.isRequired,\n  setMode: PropTypes.func.isRequired,\n  setRequiredSigners: PropTypes.func.isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n  updateNode: PropTypes.func.isRequired,\n  walletMode: PropTypes.number.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.wallet,\n    ...state.wallet.common,\n    requiredSigners: state.spend.transaction.requiredSigners,\n    signatureImporters: state.spend.signatureImporters,\n  };\n}\n\nconst mapDispatchToProps = {\n  setMode: setWalletModeActionImport,\n  setRequiredSigners: setRequiredSignersAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletControl);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Grid } from \"@material-ui/core\";\nimport { CARAVAN_CONFIG } from \"./constants\";\n\nconst WalletConfigInteractionButtons = ({ onClearFn, onDownloadFn }) => {\n  const handleClearClick = (e) => {\n    e.preventDefault();\n    if (sessionStorage) sessionStorage.removeItem(CARAVAN_CONFIG);\n    onClearFn(e);\n  };\n\n  return (\n    <Grid container spacing={2}>\n      <Grid item>\n        <Button variant=\"contained\" color=\"primary\" onClick={onDownloadFn}>\n          Download Wallet Details\n        </Button>\n      </Grid>\n      <Grid item>\n        <Button\n          onClick={(e) => handleClearClick(e)}\n          variant=\"contained\"\n          color=\"secondary\"\n        >\n          Clear Wallet\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n\nWalletConfigInteractionButtons.propTypes = {\n  onClearFn: PropTypes.func.isRequired,\n  onDownloadFn: PropTypes.func.isRequired,\n};\n\nexport default WalletConfigInteractionButtons;\n","import { wrappedNumberedActions } from \"./utils\";\n\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME\";\nexport const RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH =\n  \"RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED\";\nexport const SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE =\n  \"SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE\";\n\nexport const {\n  setExtendedPublicKeyImporterName,\n  setExtendedPublicKeyImporterBIP32Path,\n  resetExtendedPublicKeyImporterBIP32Path,\n  setExtendedPublicKeyImporterMethod,\n  setExtendedPublicKeyImporterExtendedPublicKey,\n  setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,\n  setExtendedPublicKeyImporterFinalized,\n} = wrappedNumberedActions({\n  setExtendedPublicKeyImporterName: SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME,\n  resetExtendedPublicKeyImporterBIP32Path: RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  setExtendedPublicKeyImporterBIP32Path: SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  setExtendedPublicKeyImporterMethod: SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD,\n  setExtendedPublicKeyImporterExtendedPublicKey: SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY,\n  setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint: SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT,\n  setExtendedPublicKeyImporterFinalized: SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED,\n});\n\nexport function setExtendedPublicKeyImporterVisible(value) {\n  return {\n    type: SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE,\n    value,\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { debounce } from \"lodash\";\nimport {\n  deriveMultisigByPath,\n  ExtendedPublicKey,\n  generateBraid,\n} from \"unchained-bitcoin\";\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardContent,\n  InputAdornment,\n  Grid,\n  TextField,\n  FormHelperText,\n  Typography,\n  Box,\n} from \"@material-ui/core\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport {\n  fetchAddressUTXOs,\n  getAddressStatus,\n  fetchFeeEstimate,\n} from \"../../blockchain\";\nimport ClientPicker from \"../ClientPicker\";\nimport ConfirmWallet from \"./ConfirmWallet\";\nimport WalletControl from \"./WalletControl\";\nimport WalletConfigInteractionButtons from \"./WalletConfigInteractionButtons\";\nimport { setFrozen } from \"../../actions/settingsActions\";\nimport {\n  updateDepositSliceAction,\n  updateChangeSliceAction,\n  resetNodesFetchErrors as resetNodesFetchErrorsAction,\n  resetWallet as resetWalletAction,\n  initialLoadComplete as initialLoadCompleteAction,\n} from \"../../actions/walletActions\";\nimport { fetchSliceData as fetchSliceDataAction } from \"../../actions/braidActions\";\nimport { setExtendedPublicKeyImporterVisible } from \"../../actions/extendedPublicKeyImporterActions\";\nimport { setIsWallet as setIsWalletAction } from \"../../actions/transactionActions\";\nimport { wrappedActions } from \"../../actions/utils\";\nimport {\n  SET_CLIENT_PASSWORD,\n  SET_CLIENT_PASSWORD_ERROR,\n} from \"../../actions/clientActions\";\nimport { MAX_FETCH_UTXOS_ERRORS, MAX_TRAILING_EMPTY_NODES } from \"./constants\";\n\n// const bitcoin = require('bitcoinjs-lib');\n\nclass WalletGenerator extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      connectSuccess: false,\n      unknownClient: false,\n    };\n  }\n\n  componentDidMount() {\n    const {\n      refreshNodes,\n      common: { nodesLoaded },\n      setGenerating,\n    } = this.props;\n    this.debouncedTestConnection = debounce(\n      (args) => this.testConnection(args),\n      500,\n      { trailing: true, leading: false }\n    );\n    refreshNodes(this.refreshNodes);\n    if (nodesLoaded) setGenerating(true);\n  }\n\n  async componentDidUpdate(prevProps) {\n    const prevPassword = prevProps.client.password;\n    const {\n      setPasswordError,\n      network,\n      client,\n      common: { nodesLoaded },\n      setIsWallet,\n      configuring,\n    } = this.props;\n    const { unknownClient } = this.state;\n    if (client.type === \"unknown\" && prevProps.client.type === \"public\") {\n      this.setState({ unknownClient: true }); // eslint-disable-line react/no-did-update-set-state\n    } else if (configuring && client.type !== \"unknown\" && unknownClient) {\n      // re-initializes the state if we're in the configuring stage.\n      // catches situation where wallet is cleared and new one is added\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ unknownClient: false });\n    }\n    // if the password was updated\n    if (prevPassword !== client.password && client.password.length) {\n      // test the connection using the set password\n      // but only if the password field hasn't been changed for 500ms\n      this.debouncedTestConnection({ network, client, setPasswordError });\n    }\n\n    // make sure the spend view knows it's a wallet view once nodes\n    // are loaded\n    if (!prevProps.common.nodesLoaded && nodesLoaded) setIsWallet();\n  }\n\n  title = () => {\n    const { totalSigners, requiredSigners, addressType } = this.props;\n    return (\n      <span className=\"justify-content-between d-flex\">\n        Your {requiredSigners}\n        -of-\n        {totalSigners} {addressType} Multisig Wallet\n        <small className=\"text-muted\">{` Extended Public Keys: ${this.extendedPublicKeyCount()}/${totalSigners}`}</small>\n      </span>\n    );\n  };\n\n  testConnection = async ({ network, client, setPasswordError }, cb) => {\n    try {\n      await fetchFeeEstimate(network, client);\n      setPasswordError(\"\");\n      this.setState({ connectSuccess: true }, () => {\n        // if testConnection was passed a callback\n        // we call that after a successful test, which\n        // in this case generates the wallet\n        if (cb) setTimeout(cb, 750);\n      });\n    } catch (e) {\n      this.setState({ connectSuccess: false });\n      if (e.response && e.response.status === 401)\n        setPasswordError(\n          \"Unauthorized: Incorrect username and password combination\"\n        );\n      else setPasswordError(e.message);\n    }\n  };\n\n  extendedPublicKeyCount = () => {\n    const { extendedPublicKeyImporters } = this.props;\n    return Object.values(extendedPublicKeyImporters).filter(\n      (extendedPublicKeyImporter) => extendedPublicKeyImporter.finalized\n    ).length;\n  };\n\n  toggleImporters = (event, clear) => {\n    event.preventDefault();\n    const {\n      setImportersVisible,\n      configuring,\n      resetWallet,\n      initialLoadComplete,\n      setGenerating,\n    } = this.props;\n\n    if (!configuring) {\n      setGenerating(false);\n      if (clear) resetWallet();\n      if (!clear) initialLoadComplete();\n    }\n\n    setImportersVisible(!configuring);\n  };\n\n  generate = () => {\n    const {\n      setImportersVisible,\n      freeze,\n      setGenerating,\n      startingAddressIndex,\n    } = this.props;\n    const startingDepositBIP32Suffix = `m/0/${startingAddressIndex}`;\n    const startingChangeBIP32Suffix = `m/1/${startingAddressIndex}`;\n    freeze(true);\n    setImportersVisible(false);\n    setGenerating(true);\n    this.setState({ connectSuccess: false }, () => {\n      this.addNode(false, startingDepositBIP32Suffix, true);\n      this.addNode(true, startingChangeBIP32Suffix, true);\n    });\n  };\n\n  updateNode = (isChange, update) => {\n    const { updateChangeSlice, updateDepositSlice } = this.props;\n    const updater = isChange ? updateChangeSlice : updateDepositSlice;\n    updater(update);\n  };\n\n  addNode = async (isChange, bip32Path, attemptToKeepGenerating) => {\n    const multisigUpdates = await this.generateMultisig(\n      isChange,\n      bip32Path,\n      attemptToKeepGenerating\n    );\n    this.updateNode(isChange, { bip32Path, ...multisigUpdates });\n  };\n\n  generateMultisig = async (isChange, bip32Path, attemptToKeepGenerating) => {\n    const {\n      extendedPublicKeyImporters,\n      network,\n      addressType,\n      requiredSigners,\n    } = this.props;\n\n    const extendedPublicKeys = this.generateRichExtendedPublicKeys(\n      extendedPublicKeyImporters\n    );\n    const index = isChange ? \"1\" : \"0\";\n    const braid = generateBraid(\n      network,\n      addressType,\n      extendedPublicKeys,\n      requiredSigners,\n      index\n    );\n    const multisig = deriveMultisigByPath(braid, bip32Path);\n\n    // FIXME: Add regtest option for private node, if you're on regtest have to change the prefix for p2wsh addresses.\n    // if (true) {\n    //   const multisigAddress = bitcoin.address.fromBech32(multisig.address);\n    //   multisig.address = bitcoin.address.toBech32(multisigAddress.data, multisigAddress.version, 'bcrt');\n    // }\n    const utxoUpdates = await this.fetchUTXOs(\n      isChange,\n      multisig,\n      attemptToKeepGenerating\n    );\n    return { multisig, ...utxoUpdates };\n  };\n\n  fetchUTXOs = async (isChange, multisig, attemptToKeepGenerating) => {\n    const { network, client } = this.props;\n    let addressStatus;\n    let updates = await fetchAddressUTXOs(multisig.address, network, client);\n\n    // only check for address status if there weren't any errors\n    // fetching the utxos for the address\n    if (updates && !updates.fetchUTXOsError.length)\n      addressStatus = await getAddressStatus(multisig.address, network, client);\n\n    if (addressStatus) {\n      updates = { ...updates, addressUsed: addressStatus.used };\n    }\n\n    if (attemptToKeepGenerating) {\n      setTimeout(() => this.generateNextNodeIfNecessary(isChange));\n    }\n    return updates;\n  };\n\n  generateNextNodeIfNecessary = (isChange) => {\n    const { change, deposits, initialLoadComplete } = this.props;\n    const { trailingEmptyNodes } = isChange ? change : deposits;\n    const { fetchUTXOsErrors } = isChange ? change : deposits;\n    const allBIP32Paths = Object.keys((isChange ? change : deposits).nodes);\n    if (\n      trailingEmptyNodes >= MAX_TRAILING_EMPTY_NODES ||\n      fetchUTXOsErrors >= MAX_FETCH_UTXOS_ERRORS\n    ) {\n      initialLoadComplete();\n      return;\n    }\n\n    allBIP32Paths.sort((p1, p2) => {\n      const p1Segments = (p1 || \"\").split(\"/\");\n      const p2Segments = (p2 || \"\").split(\"/\");\n      const p1Index = parseInt(p1Segments[2], 10);\n      const p2Index = parseInt(p2Segments[2], 10);\n      return p1Index - p2Index;\n    });\n    const pathSegments = (allBIP32Paths[allBIP32Paths.length - 1] || \"\").split(\n      \"/\"\n    ); // m, 0, 1\n    const maxIndex = parseInt(pathSegments[2], 10);\n    const nextBIP32Path = `m/${pathSegments[1]}/${maxIndex + 1}`;\n    // Similar to above, we wrap the call to add the next node with\n    // setTimeout with a timeout of zero to allow React time to\n    // render.\n    setTimeout(() => this.addNode(isChange, nextBIP32Path, true));\n  };\n\n  refreshNodes = async () => {\n    const { change, deposits, resetNodesFetchErrors } = this.props;\n    const allNodes = Object.values(deposits.nodes).concat(\n      Object.values(change.nodes)\n    );\n    const previousFetchErrors = Math.max(\n      change.fetchUTXOsErrors,\n      deposits.fetchUTXOsErrors\n    );\n\n    resetNodesFetchErrors();\n    await Promise.all(\n      allNodes.map(async (node) => {\n        const utxos = await this.fetchUTXOs(node.change, node.multisig);\n        this.updateNode(node.change, { bip32Path: node.bip32Path, ...utxos });\n      })\n    );\n\n    if (previousFetchErrors >= MAX_FETCH_UTXOS_ERRORS) {\n      const currentFetchErrors = Math.max(\n        change.fetchUTXOsErrors,\n        deposits.fetchUTXOsErrors\n      );\n      if (currentFetchErrors < 5) {\n        // eslint-disable-next-line no-console\n        console.log(\"we had errors but now looks good, try to build more\");\n      }\n    }\n  };\n\n  // eslint-disable-next-line class-methods-use-this\n  generateRichExtendedPublicKeys(extendedPublicKeyImporters) {\n    return Object.values(extendedPublicKeyImporters).map((importer) => {\n      const extendedPublicKey = ExtendedPublicKey.fromBase58(\n        importer.extendedPublicKey\n      );\n      extendedPublicKey.setRootFingerprint(\n        importer.rootXfp && !importer.rootXfp.toLowerCase().includes(\"unknown\")\n          ? importer.rootXfp\n          : \"00000000\"\n      );\n      extendedPublicKey.setBip32Path(\n        importer.bip32Path &&\n          !importer.bip32Path.toLowerCase().includes(\"unknown\")\n          ? importer.bip32Path\n          : `m${\"/0\".repeat(extendedPublicKey.depth)}`\n      );\n      extendedPublicKey.addBase58String();\n      return extendedPublicKey;\n    });\n  }\n\n  async handlePasswordEnter(event) {\n    event.preventDefault();\n    this.debouncedTestConnection.cancel();\n    await this.testConnection(this.props, this.generate);\n  }\n\n  async handlePasswordChange(event) {\n    event.preventDefault();\n    const { setPassword, setPasswordError } = this.props;\n    const password = event.target.value;\n    this.setState({ connectSuccess: false }, () => {\n      setPassword(password);\n      setPasswordError(\"\");\n    });\n  }\n\n  body() {\n    const {\n      totalSigners,\n      configuring,\n      downloadWalletDetails,\n      client,\n      generating,\n      extendedPublicKeyImporters,\n    } = this.props;\n    const { connectSuccess, unknownClient } = this.state;\n    const hasConflict = Object.values(extendedPublicKeyImporters).some(\n      (xpub) => xpub.conflict\n    );\n    if (this.extendedPublicKeyCount() === totalSigners) {\n      if (generating && !configuring) {\n        return (\n          <WalletControl addNode={this.addNode} updateNode={this.updateNode} />\n        );\n      }\n      if (!hasConflict) {\n        return (\n          <Card>\n            <CardHeader title={this.title()} />\n            <CardContent>\n              <Button href=\"#\" onClick={(e) => this.toggleImporters(e, false)}>\n                {configuring ? \"Hide Key Selection\" : \"Edit Details\"}\n              </Button>\n              <ConfirmWallet />\n              <p>\n                You have imported all&nbsp;\n                {totalSigners} extended public keys. You will need to save this\n                information.\n              </p>\n              <WalletConfigInteractionButtons\n                onClearFn={(e) => this.toggleImporters(e, true)}\n                onDownloadFn={downloadWalletDetails}\n              />\n              {unknownClient && (\n                <Box my={5}>\n                  <Typography variant=\"subtitle1\">\n                    This config does not contain client information. Please\n                    choose a client to connect to before importing your wallet.\n                  </Typography>\n                  <ClientPicker\n                    onSuccess={() => this.setState({ connectSuccess: true })}\n                  />\n                </Box>\n              )}\n              {client.type === \"private\" && !unknownClient && (\n                <Box my={5}>\n                  <Grid container spacing={2} alignItems=\"center\">\n                    <Grid item xs={12}>\n                      <Typography variant=\"subtitle1\">\n                        This config uses a private client. Please enter password\n                        if not set.\n                      </Typography>\n                    </Grid>\n                    <Grid item>\n                      <TextField\n                        id=\"client-username\"\n                        label=\"Username\"\n                        defaultValue={client.username}\n                        InputProps={{\n                          readOnly: true,\n                          disabled: true,\n                          startAdornment: (\n                            <InputAdornment position=\"start\">\n                              <AccountCircleIcon />\n                            </InputAdornment>\n                          ),\n                        }}\n                      />\n                    </Grid>\n                    <Grid item md={4} xs={10}>\n                      <form\n                        onSubmit={(event) => this.handlePasswordEnter(event)}\n                      >\n                        <TextField\n                          id=\"bitcoind-password\"\n                          fullWidth\n                          type=\"password\"\n                          label=\"Password\"\n                          placeholder=\"Enter bitcoind password\"\n                          value={client.password}\n                          onChange={(event) => this.handlePasswordChange(event)}\n                          error={client.passwordError.length > 0}\n                          helperText={client.passwordError}\n                        />\n                        {connectSuccess && (\n                          <FormHelperText>\n                            Connection confirmed with password!\n                          </FormHelperText>\n                        )}\n                      </form>\n                    </Grid>\n                  </Grid>\n                </Box>\n              )}\n              <p>\n                Please confirm that the above information is correct and you\n                wish to generate your wallet.\n              </p>\n              <Button\n                id=\"confirm-wallet\"\n                type=\"button\"\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={this.generate}\n                disabled={client.type !== \"public\" && !connectSuccess}\n              >\n                Confirm\n              </Button>\n            </CardContent>\n          </Card>\n        );\n      }\n      return (\n        <p>You must correct the conflict before the wallet can be generated.</p>\n      );\n    }\n    return (\n      <p>\n        {`Once you have imported all ${totalSigners} extended public keys, `}\n        {\"your wallet will be generated here.\"}\n        {hasConflict &&\n          ` You will not be able to continue until you address the conflict.`}\n      </p>\n    );\n  }\n\n  render() {\n    return <div>{this.body()}</div>;\n  }\n}\n\nWalletGenerator.propTypes = {\n  addressType: PropTypes.string.isRequired,\n  change: PropTypes.shape({\n    nodes: PropTypes.shape({}),\n    fetchUTXOsErrors: PropTypes.number,\n  }).isRequired,\n  client: PropTypes.shape({\n    password: PropTypes.string,\n    passwordError: PropTypes.string,\n    type: PropTypes.string,\n    username: PropTypes.string,\n  }).isRequired,\n  common: PropTypes.shape({\n    nodesLoaded: PropTypes.bool,\n  }).isRequired,\n  configuring: PropTypes.bool.isRequired,\n  deposits: PropTypes.shape({\n    nodes: PropTypes.shape({}),\n    fetchUTXOsErrors: PropTypes.number,\n  }).isRequired,\n  downloadWalletDetails: PropTypes.func.isRequired,\n  extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n  freeze: PropTypes.func.isRequired,\n  generating: PropTypes.bool.isRequired,\n  initialLoadComplete: PropTypes.func.isRequired,\n  network: PropTypes.string.isRequired,\n  setGenerating: PropTypes.func.isRequired,\n  startingAddressIndex: PropTypes.number.isRequired,\n  refreshNodes: PropTypes.func.isRequired,\n  requiredSigners: PropTypes.number.isRequired,\n  resetNodesFetchErrors: PropTypes.func.isRequired,\n  resetWallet: PropTypes.func.isRequired,\n  setImportersVisible: PropTypes.func.isRequired,\n  setIsWallet: PropTypes.func.isRequired,\n  setPassword: PropTypes.func.isRequired,\n  setPasswordError: PropTypes.func.isRequired,\n  totalSigners: PropTypes.number.isRequired,\n  updateChangeSlice: PropTypes.func.isRequired,\n  updateDepositSlice: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    ...{ client: state.client },\n    ...state.quorum,\n    ...state.wallet,\n    ...state.wallet.common,\n  };\n}\n\nconst mapDispatchToProps = {\n  freeze: setFrozen,\n  updateDepositSlice: updateDepositSliceAction,\n  updateChangeSlice: updateChangeSliceAction,\n  fetchSliceData: fetchSliceDataAction,\n  setImportersVisible: setExtendedPublicKeyImporterVisible,\n  setIsWallet: setIsWalletAction,\n  resetWallet: resetWalletAction,\n  resetNodesFetchErrors: resetNodesFetchErrorsAction,\n  ...wrappedActions({\n    setPassword: SET_CLIENT_PASSWORD,\n    setPasswordError: SET_CLIENT_PASSWORD_ERROR,\n  }),\n  initialLoadComplete: initialLoadCompleteAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WalletGenerator);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  UNSUPPORTED,\n  PENDING,\n  ACTIVE,\n  ERROR,\n  ExportExtendedPublicKey,\n} from \"unchained-wallets\";\nimport {\n  Button,\n  TextField,\n  FormHelperText,\n  Box,\n  Grid,\n} from \"@material-ui/core\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nclass DirectExtendedPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      extendedPublicKeyError: \"\",\n      status: this.interaction().isSupported() ? PENDING : UNSUPPORTED,\n    };\n  }\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n  };\n\n  interaction = () => {\n    const { network, extendedPublicKeyImporter } = this.props;\n    return ExportExtendedPublicKey({\n      network,\n      keystore: extendedPublicKeyImporter.method,\n      bip32Path: extendedPublicKeyImporter.bip32Path,\n      includeXFP: true,\n    });\n  };\n\n  render = () => {\n    const { extendedPublicKeyImporter } = this.props;\n    const { status, extendedPublicKeyError } = this.state;\n    const interaction = this.interaction();\n    if (status === UNSUPPORTED) {\n      return (\n        <FormHelperText className=\"text-danger\">\n          {interaction.messageTextFor({ status })}\n        </FormHelperText>\n      );\n    }\n    return (\n      <Box mt={2}>\n        <Grid container>\n          <Grid item md={6}>\n            <TextField\n              fullWidth\n              label=\"BIP32 Path\"\n              value={extendedPublicKeyImporter.bip32Path}\n              onChange={this.handleBIP32PathChange}\n              disabled={status !== PENDING}\n              error={this.hasBIP32PathError()}\n              helperText={this.bip32PathError()}\n            />\n          </Grid>\n          <Grid item md={6}>\n            {!this.bip32PathIsDefault() && (\n              <Button\n                type=\"button\"\n                variant=\"contained\"\n                size=\"small\"\n                onClick={this.resetBIP32Path}\n                disabled={status !== PENDING}\n              >\n                Default\n              </Button>\n            )}\n          </Grid>\n        </Grid>\n        <FormHelperText>\n          Use the default value if you don&rsquo;t understand BIP32 paths.\n        </FormHelperText>\n        <Box mt={2}>\n          <Button\n            type=\"button\"\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={this.import}\n            disabled={this.hasBIP32PathError() || status === ACTIVE}\n          >\n            Import Extended Public Key\n          </Button>\n        </Box>\n        <InteractionMessages\n          messages={interaction.messagesFor({ state: status })}\n        />\n        <FormHelperText error>{extendedPublicKeyError}</FormHelperText>\n      </Box>\n    );\n  };\n\n  import = async () => {\n    const {\n      validateAndSetExtendedPublicKey,\n      validateAndSetRootFingerprint,\n      enableChangeMethod,\n      disableChangeMethod,\n    } = this.props;\n    disableChangeMethod();\n    this.setState({ extendedPublicKeyError: \"\", status: ACTIVE });\n    try {\n      const result = await this.interaction().run();\n      const extendedPublicKey = result.xpub;\n      validateAndSetRootFingerprint(result.rootFingerprint, (error) => {\n        this.setState({ extendedPublicKeyError: error, status: PENDING });\n      });\n      validateAndSetExtendedPublicKey(extendedPublicKey, (error) => {\n        this.setState({ extendedPublicKeyError: error, status: PENDING });\n      });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      this.setState({ extendedPublicKeyError: e.message, status: PENDING });\n    }\n    enableChangeMethod();\n  };\n\n  hasBIP32PathError = () => {\n    const { status } = this.state;\n    return this.interaction().hasMessagesFor({\n      state: status,\n      level: ERROR,\n      code: \"bip32\",\n    });\n  };\n\n  bip32PathError = () => {\n    const { status } = this.state;\n    return this.interaction().messageTextFor({\n      state: status,\n      level: ERROR,\n      code: \"bip32\",\n    });\n  };\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(\n      bip32Path,\n      () => {},\n      () => {}\n    );\n  };\n\n  bip32PathIsDefault = () => {\n    const { extendedPublicKeyImporter, defaultBIP32Path } = this.props;\n    return extendedPublicKeyImporter.bip32Path === defaultBIP32Path;\n  };\n\n  resetBIP32Path = () => {\n    const { resetBIP32Path } = this.props;\n    resetBIP32Path();\n  };\n}\n\nDirectExtendedPublicKeyImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  extendedPublicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    method: PropTypes.string,\n  }).isRequired,\n  validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetRootFingerprint: PropTypes.func.isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  enableChangeMethod: PropTypes.func.isRequired,\n  disableChangeMethod: PropTypes.func.isRequired,\n};\n\nexport default DirectExtendedPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Components\nimport { TextField, Box } from \"@material-ui/core\";\n\nclass TextExtendedPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: \"\",\n    };\n  }\n\n  render = () => {\n    const { extendedPublicKeyImporter } = this.props;\n    const { error } = this.state;\n    return (\n      <Box mt={2}>\n        <TextField\n          fullWidth\n          name=\"publicKey\"\n          label=\"Extended Public Key\"\n          value={extendedPublicKeyImporter.extendedPublicKey}\n          onChange={this.handleChange}\n          error={this.hasError()}\n          helperText={error}\n        />\n      </Box>\n    );\n  };\n\n  hasError = () => {\n    const { error } = this.state;\n    return error !== \"\";\n  };\n\n  setError = (value) => {\n    this.setState({ error: value });\n  };\n\n  handleChange = (event) => {\n    const { validateAndSetExtendedPublicKey } = this.props;\n    validateAndSetExtendedPublicKey(event.target.value, this.setError);\n  };\n}\nTextExtendedPublicKeyImporter.propTypes = {\n  extendedPublicKeyImporter: PropTypes.shape({\n    extendedPublicKey: PropTypes.string,\n  }).isRequired,\n  validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n};\n\nexport default TextExtendedPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Components\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from \"@material-ui/core\";\nimport { Warning } from \"@material-ui/icons\";\n\nconst Conflict = (props) => {\n  const { message } = props;\n\n  return (\n    <small>\n      <List>\n        <ListItem color=\"error.main\">\n          <ListItemIcon>\n            <Typography color=\"error\">\n              <Warning />\n            </Typography>\n          </ListItemIcon>\n          <ListItemText>\n            <Typography color=\"error\">{message}</Typography>\n          </ListItemText>\n        </ListItem>\n      </List>\n    </small>\n  );\n};\n\nConflict.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n\nexport default Conflict;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  ERROR,\n  ExportExtendedPublicKey,\n  PENDING,\n  UNSUPPORTED,\n} from \"unchained-wallets\";\nimport { FormGroup, FormHelperText } from \"@material-ui/core\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nclass IndirectExtendedPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: this.interaction().isSupported() ? PENDING : UNSUPPORTED,\n      extendedPublicKeyError: \"\",\n    };\n  }\n\n  // The extendedPublicKeyImporter has a \"default\" root multisig bip32path\n  // which does not work on Coldcard, so the status will be UNSUPPORTED.\n  // this gets updated almost immediately, so just fire off another isSupported()\n  // to check if we're good.\n  componentDidUpdate() {\n    const { status } = this.state;\n    if (status !== PENDING && this.interaction().isSupported()) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ status: PENDING });\n    }\n  }\n\n  interaction = () => {\n    const { network, extendedPublicKeyImporter } = this.props;\n    return new ExportExtendedPublicKey({\n      keystore: extendedPublicKeyImporter.method,\n      bip32Path: extendedPublicKeyImporter.bip32Path,\n      network,\n      includeXFP: true,\n    });\n  };\n\n  render = () => {\n    const {\n      Reader,\n      disableChangeMethod,\n      resetBIP32Path,\n      extendedPublicKeyImporter,\n    } = this.props;\n    const { status, extendedPublicKeyError } = this.state;\n    return (\n      <FormGroup>\n        <Reader\n          setError={this.setError}\n          hasError={this.hasBIP32PathError()}\n          errorMessage={this.bip32PathError()}\n          bip32PathIsDefault={this.bip32PathIsDefault}\n          handleBIP32PathChange={this.handleBIP32PathChange}\n          resetBIP32Path={resetBIP32Path}\n          onReceive={this.onReceive}\n          interaction={this.interaction()}\n          disableChangeMethod={disableChangeMethod}\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n        />\n        <InteractionMessages\n          messages={this.interaction().messagesFor({ state: status })}\n          excludeCodes={[\"bip32\"]}\n        />\n        <FormHelperText error>{extendedPublicKeyError}</FormHelperText>\n      </FormGroup>\n    );\n  };\n\n  hasBIP32PathError = () => {\n    const { status } = this.state;\n    return this.interaction().hasMessagesFor({\n      state: status,\n      level: ERROR,\n      code: \"bip32\",\n    });\n  };\n\n  bip32PathError = () => {\n    const { status } = this.state;\n    return this.interaction().messageTextFor({\n      state: status,\n      level: ERROR,\n      code: \"bip32\",\n    });\n  };\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(\n      bip32Path,\n      () => {},\n      () => {}\n    );\n  };\n\n  bip32PathIsDefault = () => {\n    const { extendedPublicKeyImporter, defaultBIP32Path } = this.props;\n    return extendedPublicKeyImporter.bip32Path === defaultBIP32Path;\n  };\n\n  resetBIP32Path = () => {\n    const { resetBIP32Path } = this.props;\n    resetBIP32Path();\n  };\n\n  setError = (value) => {\n    this.setState({ extendedPublicKeyError: value });\n  };\n\n  onReceive = (data) => {\n    const {\n      validateAndSetBIP32Path,\n      validateAndSetExtendedPublicKey,\n      validateAndSetRootFingerprint,\n      enableChangeMethod,\n    } = this.props;\n    if (enableChangeMethod) {\n      enableChangeMethod();\n    }\n    try {\n      const { xpub, bip32Path, rootFingerprint } = this.interaction().parse(\n        data\n      );\n      validateAndSetRootFingerprint(rootFingerprint, this.setError);\n      validateAndSetBIP32Path(\n        bip32Path,\n        () => {\n          validateAndSetExtendedPublicKey(xpub, this.setError);\n        },\n        this.setError\n      );\n    } catch (e) {\n      this.setError(e.message);\n    }\n  };\n}\n\nIndirectExtendedPublicKeyImporter.propTypes = {\n  enableChangeMethod: PropTypes.func,\n  extendedPublicKeyImporter: PropTypes.shape({\n    method: PropTypes.string,\n    bip32Path: PropTypes.string,\n  }).isRequired,\n  disableChangeMethod: PropTypes.func,\n  network: PropTypes.string.isRequired,\n  Reader: PropTypes.func.isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n  validateAndSetRootFingerprint: PropTypes.func.isRequired,\n};\n\nIndirectExtendedPublicKeyImporter.defaultProps = {\n  enableChangeMethod: null,\n  disableChangeMethod: null,\n};\n\nexport default IndirectExtendedPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { COLDCARD } from \"unchained-wallets\";\nimport { FormGroup, FormHelperText } from \"@material-ui/core\";\nimport { MAINNET, P2SH } from \"unchained-bitcoin\";\nimport { ColdcardJSONReader } from \".\";\nimport IndirectExtendedPublicKeyImporter from \"../Wallet/IndirectExtendedPublicKeyImporter\";\n\nclass ColdcardExtendedPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    const coldcardBIP32Path = this.getColdcardBip32Path();\n    this.state = {\n      COLDCARD_MULTISIG_BIP32_PATH: coldcardBIP32Path,\n    };\n  }\n\n  componentDidMount = () => {\n    const { extendedPublicKeyImporter, validateAndSetBIP32Path } = this.props;\n    const { COLDCARD_MULTISIG_BIP32_PATH } = this.state;\n    if (extendedPublicKeyImporter.method === COLDCARD) {\n      validateAndSetBIP32Path(\n        COLDCARD_MULTISIG_BIP32_PATH,\n        () => {},\n        () => {},\n        {}\n      );\n    }\n  };\n\n  componentDidUpdate(prevProps) {\n    const { validateAndSetBIP32Path, network, addressType } = this.props;\n    const coldcardBIP32Path = this.getColdcardBip32Path();\n\n    // Any updates to the network/addressType we should set the BIP32Path\n    if (\n      prevProps.network !== network ||\n      prevProps.addressType !== addressType\n    ) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ COLDCARD_MULTISIG_BIP32_PATH: coldcardBIP32Path });\n      validateAndSetBIP32Path(\n        coldcardBIP32Path,\n        () => {},\n        () => {}\n      );\n    }\n  }\n\n  // Unfortunately not possible to use our Multisig P2SH ROOT on a Coldcard atm\n  // because they do not allow us to export m/45'/{0-1}'/0' yet.\n  getColdcardBip32Path = () => {\n    const { network, addressType, defaultBIP32Path } = this.props;\n    const coinPath = network === MAINNET ? \"0\" : \"1\";\n    const coldcardP2SHPath = `m/45'/${coinPath}/0`;\n    return addressType === P2SH ? coldcardP2SHPath : defaultBIP32Path;\n  };\n\n  render = () => {\n    const {\n      extendedPublicKeyImporter,\n      validateAndSetExtendedPublicKey,\n      validateAndSetBIP32Path,\n      validateAndSetRootFingerprint,\n      addressType,\n      network,\n    } = this.props;\n    const { extendedPublicKeyError, COLDCARD_MULTISIG_BIP32_PATH } = this.state;\n    return (\n      <FormGroup>\n        <IndirectExtendedPublicKeyImporter\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetExtendedPublicKey={validateAndSetExtendedPublicKey}\n          validateAndSetBIP32Path={validateAndSetBIP32Path}\n          validateAndSetRootFingerprint={validateAndSetRootFingerprint}\n          addressType={addressType}\n          network={network}\n          resetBIP32Path={this.resetColdcardBIP32Path}\n          defaultBIP32Path={COLDCARD_MULTISIG_BIP32_PATH}\n          Reader={ColdcardJSONReader}\n        />\n        <FormHelperText error>{extendedPublicKeyError}</FormHelperText>\n      </FormGroup>\n    );\n  };\n\n  resetColdcardBIP32Path = () => {\n    const { validateAndSetBIP32Path } = this.props;\n    const { COLDCARD_MULTISIG_BIP32_PATH } = this.state;\n    validateAndSetBIP32Path(\n      COLDCARD_MULTISIG_BIP32_PATH,\n      () => {},\n      () => {}\n    );\n  };\n}\n\nColdcardExtendedPublicKeyImporter.propTypes = {\n  extendedPublicKeyImporter: PropTypes.shape({\n    method: PropTypes.string,\n    bip32Path: PropTypes.string,\n  }).isRequired,\n  network: PropTypes.string.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n  validateAndSetRootFingerprint: PropTypes.func.isRequired,\n  addressType: PropTypes.string.isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n};\n\nexport default ColdcardExtendedPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { HermitExportExtendedPublicKey } from \"unchained-wallets\";\nimport { FormGroup, FormHelperText } from \"@material-ui/core\";\n\nimport HermitReader from \"./HermitReader\";\n\nclass HermitExtendedPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      extendedPublicKeyError: \"\",\n    };\n  }\n\n  componentDidMount = () => {\n    const { resetBIP32Path } = this.props;\n    resetBIP32Path();\n  };\n\n  interaction = () => {\n    const { network, extendedPublicKeyImporter } = this.props;\n    return new HermitExportExtendedPublicKey({\n      network,\n      bip32Path: extendedPublicKeyImporter.bip32Path,\n    });\n  };\n\n  render = () => {\n    const { disableChangeMethod } = this.props;\n    const { extendedPublicKeyError } = this.state;\n    // Here we are using the HermitReader directly instead of using the\n    // shared `Indirect` helper component class. This is because Hermit does\n    // not need any of the bip32 stuff that is useful from the indirect helper.\n    return (\n      <FormGroup>\n        <HermitReader\n          startText=\"Import Extended Public Key\"\n          interaction={this.interaction()}\n          onStart={disableChangeMethod}\n          onSuccess={this.import}\n          onClear={this.onClear}\n        />\n        <FormHelperText className=\"text-danger\">\n          {extendedPublicKeyError}\n        </FormHelperText>\n      </FormGroup>\n    );\n  };\n\n  setError = (value) => {\n    this.setState({ extendedPublicKeyError: value });\n  };\n\n  import = (data) => {\n    const {\n      validateAndSetBIP32Path,\n      validateAndSetExtendedPublicKey,\n      enableChangeMethod,\n    } = this.props;\n    enableChangeMethod();\n    const { xpub, bip32Path } = data;\n    validateAndSetBIP32Path(\n      bip32Path,\n      () => {\n        validateAndSetExtendedPublicKey(xpub, this.setError);\n      },\n      this.setError\n    );\n  };\n\n  onClear = () => {\n    const { reset, enableChangeMethod } = this.props;\n    reset(true); // clear BIP32 path\n    this.setError(\"\");\n    enableChangeMethod();\n  };\n}\n\nHermitExtendedPublicKeyImporter.propTypes = {\n  enableChangeMethod: PropTypes.func.isRequired,\n  extendedPublicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n  }).isRequired,\n  disableChangeMethod: PropTypes.func.isRequired,\n  network: PropTypes.string.isRequired,\n  reset: PropTypes.func.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  validateAndSetExtendedPublicKey: PropTypes.func.isRequired,\n};\n\nexport default HermitExtendedPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  validateBIP32Path,\n  validateRootFingerprint,\n  convertExtendedPublicKey,\n  validateExtendedPublicKey,\n  NETWORKS,\n} from \"unchained-bitcoin\";\nimport { TREZOR, LEDGER, HERMIT, COLDCARD } from \"unchained-wallets\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  FormControl,\n  Select,\n  MenuItem,\n  InputLabel,\n  Button,\n  FormHelperText,\n  Box,\n  withStyles,\n} from \"@material-ui/core\";\nimport Copyable from \"../Copyable\";\nimport DirectExtendedPublicKeyImporter from \"./DirectExtendedPublicKeyImporter\";\nimport TextExtendedPublicKeyImporter from \"./TextExtendedPublicKeyImporter\";\nimport EditableName from \"../EditableName\";\nimport Conflict from \"../CreateAddress/Conflict\";\nimport {\n  setExtendedPublicKeyImporterName,\n  resetExtendedPublicKeyImporterBIP32Path,\n  setExtendedPublicKeyImporterBIP32Path,\n  setExtendedPublicKeyImporterMethod,\n  setExtendedPublicKeyImporterExtendedPublicKey,\n  setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,\n  setExtendedPublicKeyImporterFinalized,\n} from \"../../actions/extendedPublicKeyImporterActions\";\nimport ColdcardExtendedPublicKeyImporter from \"../Coldcard/ColdcardExtendedPublicKeyImporter\";\nimport HermitExtendedPublicKeyImporter from \"../Hermit/HermitExtendedPublicKeyImporter\";\n\nconst TEXT = \"text\";\nconst UNKNOWN = \"unknown\";\n\nconst useStyles = () => ({\n  xpub: {\n    lineHeight: \".8rem\",\n    overflowWrap: \"break-word\",\n  },\n});\n\nclass ExtendedPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      disableChangeMethod: false,\n      conversionMessage: \"\",\n    };\n  }\n\n  title = () => {\n    const { number, extendedPublicKeyImporter, setName } = this.props;\n    return (\n      <EditableName\n        number={number}\n        name={extendedPublicKeyImporter.name}\n        setName={setName}\n      />\n    );\n  };\n\n  renderImport = () => {\n    const { extendedPublicKeyImporter, number } = this.props;\n    const { disableChangeMethod } = this.state;\n    const labelId = `xpub-${number}-importer-select-label`;\n    return (\n      <div>\n        <FormControl fullWidth>\n          <InputLabel id={labelId}>Select Method</InputLabel>\n\n          <Select\n            labelId={labelId}\n            id={`public-key-${number}-importer-select`}\n            disabled={disableChangeMethod}\n            value={extendedPublicKeyImporter.method}\n            onChange={this.handleMethodChange}\n          >\n            <MenuItem value={UNKNOWN}>{\"< Select method >\"}</MenuItem>\n            <MenuItem value={TREZOR}>Trezor</MenuItem>\n            <MenuItem value={COLDCARD}>Coldcard</MenuItem>\n            <MenuItem value={LEDGER}>Ledger</MenuItem>\n            <MenuItem value={HERMIT}>Hermit</MenuItem>\n            <MenuItem value={TEXT}>Enter as text</MenuItem>\n          </Select>\n        </FormControl>\n\n        {this.renderImportByMethod()}\n      </div>\n    );\n  };\n\n  renderImportByMethod = () => {\n    const {\n      extendedPublicKeyImporter,\n      network,\n      addressType,\n      defaultBIP32Path,\n    } = this.props;\n    const { method } = extendedPublicKeyImporter;\n\n    if (method === TREZOR || method === LEDGER) {\n      return (\n        <DirectExtendedPublicKeyImporter\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetExtendedPublicKey={this.validateAndSetExtendedPublicKey}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          validateAndSetRootFingerprint={this.validateAndSetRootFingerprint}\n          resetBIP32Path={this.resetBIP32Path}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n          addressType={addressType}\n          defaultBIP32Path={defaultBIP32Path}\n          network={network}\n        />\n      );\n    }\n    if (method === HERMIT) {\n      return (\n        <HermitExtendedPublicKeyImporter\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetExtendedPublicKey={this.validateAndSetExtendedPublicKey}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          validateAndSetRootFingerprint={this.validateAndSetRootFingerprint}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n          addressType={addressType}\n          defaultBIP32Path={defaultBIP32Path}\n          network={network}\n          resetBIP32Path={this.resetBIP32Path}\n          reset={this.reset}\n        />\n      );\n    }\n    if (method === COLDCARD) {\n      return (\n        <ColdcardExtendedPublicKeyImporter\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetExtendedPublicKey={this.validateAndSetExtendedPublicKey}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          validateAndSetRootFingerprint={this.validateAndSetRootFingerprint}\n          addressType={addressType}\n          defaultBIP32Path={defaultBIP32Path}\n          network={network}\n        />\n      );\n    }\n    if (method === TEXT) {\n      return (\n        <TextExtendedPublicKeyImporter\n          extendedPublicKeyImporter={extendedPublicKeyImporter}\n          validateAndSetExtendedPublicKey={this.validateAndSetExtendedPublicKey}\n        />\n      );\n    }\n    return null;\n  };\n\n  //\n  // Method\n  //\n\n  handleMethodChange = (event) => {\n    const { number, setMethod, setExtendedPublicKey } = this.props;\n    setMethod(number, event.target.value);\n    setExtendedPublicKey(number, \"\");\n  };\n\n  disableChangeMethod = () => {\n    this.setState({ disableChangeMethod: true });\n  };\n\n  enableChangeMethod = () => {\n    this.setState({ disableChangeMethod: false });\n  };\n\n  //\n  // State\n  //\n\n  finalize = () => {\n    const { number, setFinalized } = this.props;\n    setFinalized(number, true);\n  };\n\n  reset = (resetBIP32Path) => {\n    const { number, setExtendedPublicKey, setFinalized } = this.props;\n    setExtendedPublicKey(number, \"\");\n    setFinalized(number, false);\n    if (resetBIP32Path) {\n      this.resetBIP32Path();\n    }\n  };\n\n  //\n  // BIP32 Path\n  //\n\n  renderBIP32Path = () => {\n    const { extendedPublicKeyImporter } = this.props;\n    if (extendedPublicKeyImporter.method === TEXT) {\n      return (\n        <div className=\"mt-4\">\n          <p>\n            Make sure you <strong>record the corresponding BIP32 path.</strong>\n          </p>\n        </div>\n      );\n    }\n    return (\n      <div className=\"mt-4\">\n        <p>The BIP32 path for this extended public key is:</p>\n        <div className=\"text-center\">\n          <Copyable text={extendedPublicKeyImporter.bip32Path} showIcon />\n        </div>\n        <p className=\"mt-4\">\n          You will need this BIP32 path to sign for this key later.{\" \"}\n          <strong>Write down this BIP32 path!</strong>\n        </p>\n      </div>\n    );\n  };\n\n  validateAndSetBIP32Path = (bip32Path, callback, errback, options) => {\n    const { number, setBIP32Path } = this.props;\n    const error = validateBIP32Path(bip32Path, options);\n    setBIP32Path(number, bip32Path);\n    if (error) {\n      errback(error);\n    } else {\n      errback(\"\");\n      callback();\n    }\n  };\n\n  resetBIP32Path = () => {\n    const { number, resetBIP32Path } = this.props;\n    resetBIP32Path(number);\n  };\n\n  //\n  // Extended Public Key\n  //\n\n  renderExtendedPublicKey = () => {\n    const { extendedPublicKeyImporter, network, classes } = this.props;\n    const { conversionMessage } = this.state;\n    const conversionAppend =\n      extendedPublicKeyImporter.method === HERMIT &&\n      network === NETWORKS.TESTNET\n        ? \"this should not be an issue as hermit signing is not affected by the conversion.\"\n        : \"this may indicate an invalid network setting, if so correct setting, remove key and try again.\";\n    return (\n      <div>\n        <p>The following extended public key was imported:</p>\n        <div className={classes.xpub}>\n          <Copyable\n            text={extendedPublicKeyImporter.extendedPublicKey}\n            showIcon\n          />\n        </div>\n        {this.renderBIP32Path()}\n        {conversionMessage !== \"\" && (\n          <Box mb={2}>\n            <FormHelperText>\n              {conversionMessage}, {conversionAppend}{\" \"}\n            </FormHelperText>\n          </Box>\n        )}\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          size=\"small\"\n          onClick={() => {\n            this.reset(extendedPublicKeyImporter.method === HERMIT);\n          }}\n        >\n          Remove Extended Public Key\n        </Button>\n      </div>\n    );\n  };\n\n  validateAndSetExtendedPublicKey = (extendedPublicKey, errback, callback) => {\n    const {\n      number,\n      network,\n      extendedPublicKeyImporters,\n      setExtendedPublicKey,\n    } = this.props;\n    const networkError = validateExtendedPublicKey(extendedPublicKey, network);\n    let actualExtendedPublicKey = extendedPublicKey;\n    if (networkError !== \"\") {\n      try {\n        actualExtendedPublicKey = convertExtendedPublicKey(\n          extendedPublicKey,\n          network === \"testnet\" ? \"tpub\" : \"xpub\"\n        );\n      } catch (error) {\n        errback(error.message);\n        setExtendedPublicKey(number, extendedPublicKey);\n        return;\n      }\n    }\n\n    const validationError = validateExtendedPublicKey(\n      actualExtendedPublicKey,\n      network\n    );\n    if (validationError !== \"\") {\n      errback(validationError);\n      setExtendedPublicKey(number, extendedPublicKey);\n      return;\n    }\n    setExtendedPublicKey(number, actualExtendedPublicKey);\n\n    if (\n      actualExtendedPublicKey &&\n      Object.values(extendedPublicKeyImporters).find(\n        (extendedPublicKeyImporter, extendedPublicKeyImporterIndex) =>\n          extendedPublicKeyImporterIndex !== number - 1 &&\n          extendedPublicKeyImporter.extendedPublicKey ===\n            actualExtendedPublicKey\n      )\n    ) {\n      errback(\"This extended public key has already been imported.\");\n    } else {\n      errback(\"\");\n      const conversionMessage =\n        actualExtendedPublicKey === extendedPublicKey\n          ? \"\"\n          : `Your extended public key has been converted from ${extendedPublicKey.slice(\n              0,\n              4\n            )} to ${actualExtendedPublicKey.slice(0, 4)}`;\n      this.setState({ conversionMessage });\n      this.finalize();\n\n      if (callback) {\n        callback();\n      }\n    }\n  };\n\n  validateAndSetRootFingerprint = (rootFingerprint, errback) => {\n    const { number, setExtendedPublicKeyRootXfp } = this.props;\n    const error = validateRootFingerprint(rootFingerprint);\n    if (error) {\n      errback(error);\n    } else {\n      setExtendedPublicKeyRootXfp(number, rootFingerprint);\n    }\n  };\n\n  render() {\n    const { extendedPublicKeyImporter, finalizedNetwork, network } = this.props;\n    const hasConflict =\n      extendedPublicKeyImporter.method /* && extendedPublicKeyImporter.method !== TEXT */ &&\n      extendedPublicKeyImporter.conflict;\n    let conflictMessage = \"\";\n    if (hasConflict) {\n      if (finalizedNetwork !== network) {\n        conflictMessage =\n          \"Warning, you can not mix xpub and tpub.  Do not proceed without resolving by either removing conflicting imported keys or returning network type to original state!\";\n      } else {\n        conflictMessage =\n          \"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!\";\n      }\n    }\n    return (\n      <Card>\n        <CardHeader title={this.title()} />\n        <CardContent>\n          {hasConflict && <Conflict message={conflictMessage} />}\n          {extendedPublicKeyImporter.finalized\n            ? this.renderExtendedPublicKey()\n            : this.renderImport()}\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nExtendedPublicKeyImporter.propTypes = {\n  addressType: PropTypes.string.isRequired,\n  classes: PropTypes.shape({\n    xpub: PropTypes.string,\n  }).isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n  extendedPublicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    conflict: PropTypes.bool,\n    extendedPublicKey: PropTypes.string,\n    finalized: PropTypes.bool,\n    name: PropTypes.string,\n    method: PropTypes.string,\n  }).isRequired,\n  extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n  finalizedNetwork: PropTypes.string.isRequired,\n  network: PropTypes.string.isRequired,\n  number: PropTypes.number.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  setBIP32Path: PropTypes.func.isRequired,\n  setExtendedPublicKey: PropTypes.func.isRequired,\n  setExtendedPublicKeyRootXfp: PropTypes.func.isRequired,\n  setFinalized: PropTypes.func.isRequired,\n  setName: PropTypes.func.isRequired,\n  setMethod: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...state.settings,\n    ...state.quorum,\n    ...{\n      extendedPublicKeyImporter:\n        state.quorum.extendedPublicKeyImporters[ownProps.number],\n    },\n  };\n}\n\nconst mapDispatchToProps = {\n  setName: setExtendedPublicKeyImporterName,\n  resetBIP32Path: resetExtendedPublicKeyImporterBIP32Path,\n  setBIP32Path: setExtendedPublicKeyImporterBIP32Path,\n  setMethod: setExtendedPublicKeyImporterMethod,\n  setExtendedPublicKey: setExtendedPublicKeyImporterExtendedPublicKey,\n  setExtendedPublicKeyRootXfp: setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,\n  setFinalized: setExtendedPublicKeyImporterFinalized,\n};\n\nconst ExtendedPublicKeyImporterWithStyles = withStyles(useStyles)(\n  ExtendedPublicKeyImporter\n);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ExtendedPublicKeyImporterWithStyles);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  ButtonGroup,\n  Grid,\n  makeStyles,\n  Tooltip,\n  withStyles,\n} from \"@material-ui/core\";\nimport MuiButton from \"@material-ui/core/Button\";\n\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport {\n  RefreshOutlined,\n  ExitToAppOutlined,\n  GetAppOutlined,\n} from \"@material-ui/icons\";\n\nimport { clientPropTypes } from \"../../proptypes\";\nimport { CARAVAN_CONFIG } from \"./constants\";\n\nimport ImportAddressesButton from \"../ImportAddressesButton\";\n\nconst useStyles = makeStyles(() => ({\n  card: {\n    height: \"100%\",\n    flexDirection: \"column\",\n    display: \"flex\",\n  },\n  cardContent: {\n    textAlign: \"center\",\n    paddingTop: \"0px\",\n    display: \"flex\",\n    flex: 1,\n  },\n}));\n\nconst Button = withStyles({\n  root: {\n    \"&.Mui-disabled\": {\n      pointerEvents: \"auto\",\n    },\n  },\n})(MuiButton);\n\nconst ButtonWithTooltip = ({ tooltipText, disabled, onClick, ...other }) => {\n  const adjustedButtonProps = {\n    disabled,\n    component: disabled ? \"div\" : undefined,\n    onClick: disabled ? undefined : onClick,\n  };\n  return (\n    <Tooltip title={tooltipText}>\n      <Button {...other} {...adjustedButtonProps} />\n    </Tooltip>\n  );\n};\n\nButtonWithTooltip.propTypes = {\n  tooltipText: PropTypes.string.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nconst WalletActionsPanel = ({\n  addresses,\n  client,\n  handleRefresh,\n  onClearConfig,\n  onDownloadConfig,\n  onImportAddresses,\n  refreshing,\n  walletActivated,\n}) => {\n  const classes = useStyles();\n  const handleClearClick = (e) => {\n    e.preventDefault();\n    if (sessionStorage) sessionStorage.removeItem(CARAVAN_CONFIG);\n    onClearConfig(e);\n  };\n  return (\n    <Card className={classes.card}>\n      <CardHeader title=\"Wallet Actions\" />\n      <CardContent className={classes.cardContent}>\n        <Grid container spacing={1} alignItems=\"center\" justify=\"center\">\n          <Grid item xs={12}>\n            <ButtonGroup variant=\"outlined\">\n              <ButtonWithTooltip\n                tooltipText=\"Force a refresh for latest wallet state and balance.\"\n                disabled={!walletActivated}\n                onClick={handleRefresh}\n                startIcon={\n                  refreshing ? (\n                    <CircularProgress size={24} />\n                  ) : (\n                    <RefreshOutlined />\n                  )\n                }\n              >\n                Refresh\n              </ButtonWithTooltip>\n              <ButtonWithTooltip\n                tooltipText=\"Download wallet configuration to local machine for backup. No security is lost with this, but access to this file provides anyone who has it information about balances.\"\n                onClick={onDownloadConfig}\n                disabled={false}\n                startIcon={<GetAppOutlined />}\n              >\n                Download Configuration\n              </ButtonWithTooltip>\n              <ButtonWithTooltip\n                tooltipText=\"Only clears the wallet config from browser sessions. Funds remain unaffected.\"\n                disabled={!walletActivated}\n                startIcon={<ExitToAppOutlined />}\n                onClick={handleClearClick}\n              >\n                Clear Wallet\n              </ButtonWithTooltip>\n            </ButtonGroup>\n          </Grid>\n          {client.type === \"private\" && walletActivated && (\n            <Grid item>\n              <ImportAddressesButton\n                addresses={addresses}\n                client={client}\n                importCallback={onImportAddresses}\n              />\n            </Grid>\n          )}\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n\nWalletActionsPanel.propTypes = {\n  addresses: PropTypes.arrayOf(PropTypes.string),\n  onImportAddresses: PropTypes.func.isRequired,\n  walletActivated: PropTypes.bool,\n  handleRefresh: PropTypes.func.isRequired,\n  onClearConfig: PropTypes.func.isRequired,\n  onDownloadConfig: PropTypes.func.isRequired,\n  refreshing: PropTypes.bool,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n};\n\nWalletActionsPanel.defaultProps = {\n  walletActivated: false,\n  refreshing: false,\n  addresses: [],\n};\n\nexport default WalletActionsPanel;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  satoshisToBitcoins,\n  validateBIP32Index,\n  validateBIP32Path,\n  validateExtendedPublicKey,\n} from \"unchained-bitcoin\";\nimport { Box, Button, FormHelperText, Grid } from \"@material-ui/core\";\nimport { downloadFile } from \"../../utils\";\nimport {\n  resetWallet as resetWalletAction,\n  updateChangeSliceAction,\n  updateDepositSliceAction,\n  updateWalletNameAction as updateWalletNameActionImport,\n} from \"../../actions/walletActions\";\nimport { fetchSliceData as fetchSliceDataAction } from \"../../actions/braidActions\";\nimport walletSelectors from \"../../selectors\";\nimport { CARAVAN_CONFIG } from \"./constants\";\nimport WalletInfoCard from \"./WalletInfoCard\";\nimport NetworkPicker from \"../NetworkPicker\";\nimport QuorumPicker from \"../QuorumPicker\";\nimport AddressTypePicker from \"../AddressTypePicker\";\nimport ClientPicker from \"../ClientPicker\";\nimport StartingAddressIndexPicker from \"../StartingAddressIndexPicker\";\nimport WalletGenerator from \"./WalletGenerator\";\nimport ExtendedPublicKeyImporter from \"./ExtendedPublicKeyImporter\";\nimport WalletActionsPanel from \"./WalletActionsPanel\";\nimport {\n  getUnknownAddresses,\n  getUnknownAddressSlices,\n  getWalletDetailsText,\n} from \"../../selectors/wallet\";\nimport {\n  setAddressType as setAddressTypeAction,\n  setNetwork as setNetworkAction,\n  setRequiredSigners as setRequiredSignersAction,\n  setStartingAddressIndex as setStartingAddressIndexAction,\n  setTotalSigners as setTotalSignersAction,\n} from \"../../actions/settingsActions\";\nimport {\n  setExtendedPublicKeyImporterBIP32Path as setExtendedPublicKeyImporterBIP32PathAction,\n  setExtendedPublicKeyImporterExtendedPublicKey as setExtendedPublicKeyImporterExtendedPublicKeyAction,\n  setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint as setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprintAction,\n  setExtendedPublicKeyImporterFinalized as setExtendedPublicKeyImporterFinalizedAction,\n  setExtendedPublicKeyImporterMethod as setExtendedPublicKeyImporterMethodAction,\n  setExtendedPublicKeyImporterName as setExtendedPublicKeyImporterNameAction,\n  setExtendedPublicKeyImporterVisible as setExtendedPublicKeyImporterVisibleAction,\n} from \"../../actions/extendedPublicKeyImporterActions\";\nimport { wrappedActions } from \"../../actions/utils\";\nimport {\n  SET_CLIENT_PASSWORD,\n  SET_CLIENT_TYPE,\n  SET_CLIENT_URL,\n  SET_CLIENT_USERNAME,\n} from \"../../actions/clientActions\";\nimport { clientPropTypes, slicePropTypes } from \"../../proptypes\";\n\nclass CreateWallet extends React.Component {\n  static validateProperties(config, properties, key) {\n    for (let index = 0; index < properties.length; index += 1) {\n      const property = properties[index];\n      const configObj = key !== \"\" ? config[key] : config;\n      if (!Object.prototype.hasOwnProperty.call(configObj, property)) {\n        return `Configuration missing property \"${\n          key !== \"\" ? `${key}.` : \"\"\n        }${property}\"`;\n      }\n    }\n    return \"\";\n  }\n\n  static validateConfig(config) {\n    const configProperties = [\n      \"name\",\n      \"addressType\",\n      \"network\",\n      \"quorum\",\n      \"extendedPublicKeys\",\n    ];\n    const validProperties = CreateWallet.validateProperties(\n      config,\n      configProperties,\n      \"\"\n    );\n    if (validProperties !== \"\") return validProperties;\n\n    if (config.startingAddressIndex !== undefined) {\n      const startingAddressIndexError = validateBIP32Index(\n        String(config.startingAddressIndex),\n        { mode: \"unhardened \" }\n      ).replace(\"BIP32\", \"Starting Address\");\n      if (startingAddressIndexError !== \"\") return startingAddressIndexError;\n    }\n\n    if (config.client) {\n      const clientProperties =\n        config.client.type === \"public\"\n          ? [\"type\"]\n          : [\"type\", \"url\", \"username\"];\n      const validClient = CreateWallet.validateProperties(\n        config,\n        clientProperties,\n        \"client\"\n      );\n      if (validClient !== \"\") return validClient;\n    }\n\n    const quorumProperties = [\"requiredSigners\", \"totalSigners\"];\n    const validQuorum = CreateWallet.validateProperties(\n      config,\n      quorumProperties,\n      \"quorum\"\n    );\n    if (validQuorum !== \"\") return validQuorum;\n\n    return CreateWallet.validateExtendedPublicKeys(\n      config.extendedPublicKeys,\n      config.network\n    );\n  }\n\n  static validateExtendedPublicKeys(xpubs, network) {\n    let tmpNetwork = network;\n    if (network === \"regtest\") {\n      tmpNetwork = \"testnet\";\n    }\n    const xpubFields = {\n      name: (name, index) =>\n        typeof name === \"string\"\n          ? \"\"\n          : `Extended public key ${index} name must be a string`,\n      bip32Path: (bip32Path, index) => {\n        if (xpubs[index - 1].method === \"text\") return \"\";\n        if (typeof xpubs[index - 1].method === \"undefined\") return \"\";\n        const pathError = validateBIP32Path(bip32Path);\n        if (pathError !== \"\")\n          return `Extended public key ${index} error: ${pathError}`;\n        return \"\";\n      },\n      xpub: (xpub) => validateExtendedPublicKey(xpub, tmpNetwork),\n      method: (method, index) => {\n        if (\n          [\n            \"trezor\",\n            \"coldcard\",\n            \"ledger\",\n            \"hermit\",\n            \"xpub\",\n            \"text\",\n            undefined,\n          ].includes(method)\n        ) {\n          return \"\";\n        }\n        return `Invalid method for extended public key ${index}`;\n      },\n    };\n\n    const keys = Object.keys(xpubFields);\n    const seen = [];\n    for (let xpubIndex = 0; xpubIndex < xpubs.length; xpubIndex += 1) {\n      if (!seen.includes(xpubs[xpubIndex].xpub)) {\n        seen.push(xpubs[xpubIndex].xpub);\n      } else {\n        return \"Duplicate xpub found.\";\n      }\n      for (let keyIndex = 0; keyIndex < keys.length; keyIndex += 1) {\n        const key = keys[keyIndex];\n        const value = xpubs[xpubIndex][key];\n        const valueError = xpubFields[key](value, xpubIndex + 1);\n        if (valueError !== \"\") return valueError;\n      }\n    }\n    return \"\";\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      configError: \"\",\n      configJson: \"\",\n      refreshing: false,\n      generating: false,\n    };\n  }\n\n  componentDidMount() {\n    if (sessionStorage) {\n      const configJson = sessionStorage.getItem(CARAVAN_CONFIG);\n      if (configJson) this.setConfigJson(configJson);\n    }\n  }\n\n  setConfigJson(configJson) {\n    let configError;\n    try {\n      const config = JSON.parse(configJson);\n      configError = CreateWallet.validateConfig(config);\n    } catch (parseError) {\n      configError = \"Invalid JSON\";\n    }\n\n    if (sessionStorage && configError === \"\") {\n      sessionStorage.setItem(CARAVAN_CONFIG, configJson);\n    }\n\n    // async since importDetails needs the updated state for it to work\n    this.setState({ configJson, configError }, () => {\n      if (configError === \"\") this.importDetails();\n    });\n  }\n\n  setGenerating(_val) {\n    const { generating } = this.state;\n    let val = _val;\n    if (_val === undefined) val = !generating;\n    this.setState({ generating: val });\n  }\n\n  handleImport = ({ target }) => {\n    const fileReader = new FileReader();\n    if (target.files[0] && target.files[0].size < 1048576) {\n      fileReader.onload = (event) => {\n        const configJson = event.target.result;\n        this.setConfigJson(configJson);\n      };\n      fileReader.readAsText(target.files[0]);\n    } else {\n      this.setState({ configError: \"Problem uploading file.\" });\n    }\n  };\n\n  refresh = async () => {\n    this.setState({ refreshing: true });\n    await this.generatorRefresh();\n    this.setState({ refreshing: false });\n  };\n\n  resetErrorAndClearTargetValue = (event) => {\n    // eslint-disable-next-line no-param-reassign\n    event.target.value = \"\";\n    this.setState({ configError: \"\" });\n  };\n\n  importDetails = () => {\n    const { configJson } = this.state;\n    const {\n      setTotalSigners,\n      setRequiredSigners,\n      setAddressType,\n      setNetwork,\n      setStartingAddressIndex,\n      setExtendedPublicKeyImporterMethod,\n      setExtendedPublicKeyImporterExtendedPublicKey,\n      setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,\n      setExtendedPublicKeyImporterBIP32Path,\n      setExtendedPublicKeyImporterFinalized,\n      setExtendedPublicKeyImporterName,\n      updateWalletNameAction,\n      setClientType,\n      setClientUrl,\n      setClientUsername,\n    } = this.props;\n\n    const walletConfiguration = JSON.parse(configJson);\n    setTotalSigners(walletConfiguration.quorum.totalSigners);\n    setRequiredSigners(walletConfiguration.quorum.requiredSigners);\n    setAddressType(walletConfiguration.addressType);\n    if (walletConfiguration.network === \"regtest\") {\n      setNetwork(\"testnet\");\n    } else {\n      setNetwork(walletConfiguration.network);\n    }\n    updateWalletNameAction(0, walletConfiguration.name);\n    // set client to unknown\n    if (walletConfiguration.client) {\n      setClientType(walletConfiguration.client.type);\n      if (walletConfiguration.client.type === \"private\") {\n        setClientUrl(walletConfiguration.client.url);\n        setClientUsername(walletConfiguration.client.username);\n      }\n    } else {\n      setClientType(\"unknown\");\n    }\n    // optionally, set starting address index\n    if (walletConfiguration.startingAddressIndex) {\n      setStartingAddressIndex(walletConfiguration.startingAddressIndex);\n    }\n    walletConfiguration.extendedPublicKeys.forEach(\n      (extendedPublicKey, index) => {\n        const number = index + 1;\n        setExtendedPublicKeyImporterName(number, extendedPublicKey.name);\n        if (extendedPublicKey.method) {\n          setExtendedPublicKeyImporterMethod(number, extendedPublicKey.method);\n        } else {\n          setExtendedPublicKeyImporterMethod(number, \"unknown\");\n        }\n\n        setExtendedPublicKeyImporterBIP32Path(\n          number,\n          extendedPublicKey.bip32Path\n        );\n        setExtendedPublicKeyImporterExtendedPublicKey(\n          number,\n          extendedPublicKey.xpub\n        );\n        if (extendedPublicKey.xfp) {\n          setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint(\n            number,\n            extendedPublicKey.xfp\n          );\n        } else {\n          setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint(\n            number,\n            \"unknown\"\n          );\n        }\n\n        setExtendedPublicKeyImporterFinalized(number, true);\n      }\n    );\n  };\n\n  // add client picker if client === 'unknown'\n  renderWalletImporter = () => {\n    const { configError } = this.state;\n    const { configuring } = this.props;\n\n    if (configuring)\n      return (\n        <>\n          <label htmlFor=\"upload-config\">\n            <input\n              style={{ display: \"none\" }}\n              id=\"upload-config\"\n              name=\"upload-config\"\n              accept=\"application/json\"\n              onChange={this.handleImport}\n              onClick={this.resetErrorAndClearTargetValue}\n              type=\"file\"\n            />\n\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              component=\"span\"\n              style={{ marginTop: \"20px\" }}\n            >\n              Import Wallet Configuration\n            </Button>\n          </label>\n          <FormHelperText error>{configError}</FormHelperText>\n        </>\n      );\n    return \"\";\n  };\n\n  renderSettings = () => {\n    const { configuring } = this.props;\n    let settings = null;\n\n    if (configuring)\n      settings = (\n        <Grid item md={4}>\n          <Box>\n            <QuorumPicker />\n          </Box>\n          <Box mt={2}>\n            <AddressTypePicker />\n          </Box>\n          <Box mt={2}>\n            <NetworkPicker />\n          </Box>\n          <Box mt={2}>\n            <ClientPicker />\n          </Box>\n          <Box mt={2}>\n            <StartingAddressIndexPicker />\n          </Box>\n        </Grid>\n      );\n    return settings;\n  };\n\n  renderExtendedPublicKeyImporters = () => {\n    const { totalSigners, configuring } = this.props;\n    const extendedPublicKeyImporters = [];\n    for (\n      let extendedPublicKeyImporterNum = 1;\n      extendedPublicKeyImporterNum <= totalSigners;\n      extendedPublicKeyImporterNum += 1\n    ) {\n      extendedPublicKeyImporters.push(\n        <Box\n          key={extendedPublicKeyImporterNum}\n          mt={extendedPublicKeyImporterNum === 1 ? 0 : 2}\n          display={configuring ? \"block\" : \"none\"}\n        >\n          <ExtendedPublicKeyImporter\n            key={extendedPublicKeyImporterNum}\n            number={extendedPublicKeyImporterNum}\n          />\n        </Box>\n      );\n    }\n    return extendedPublicKeyImporters;\n  };\n\n  downloadWalletDetails = (event) => {\n    const { walletDetailsText } = this.props;\n    event.preventDefault();\n    const filename = this.walletDetailsFilename();\n    downloadFile(walletDetailsText, filename);\n  };\n\n  walletDetailsFilename = () => {\n    const {\n      totalSigners,\n      requiredSigners,\n      addressType,\n      walletName,\n    } = this.props;\n    return `bitcoin-${requiredSigners}-of-${totalSigners}-${addressType}-${walletName}.json`;\n  };\n\n  totalBalance = () => {\n    const { deposits, change } = this.props;\n    if (!Object.keys(deposits.nodes).length) return \"\";\n    return satoshisToBitcoins(\n      deposits.balanceSats.plus(change.balanceSats)\n    ).toFixed();\n  };\n\n  clearConfig = (e) => {\n    const { setExtendedPublicKeyImporterVisible, resetWallet } = this.props;\n    e.preventDefault();\n    resetWallet();\n    setExtendedPublicKeyImporterVisible(true);\n    this.setState({ generating: false });\n  };\n\n  /**\n   * Callback function to pass to the address importer\n   * after addresses have been imported we want\n   * @param {Array<string>} importedAddresses\n   * @param {boolean} rescan - whether or not a rescan is being performed\n   */\n  async afterImportAddresses(importedAddresses, rescan) {\n    // if rescan is true then there's no point in fetching\n    // the slice data yet since we likely won't get anything\n    // until the rescan is complete\n    if (rescan) return;\n\n    const { unknownSlices, fetchSliceData } = this.props;\n    const importedSlices = unknownSlices.reduce((slices, slice) => {\n      if (importedAddresses.indexOf(slice.multisig.address) > -1)\n        slices.push(slice);\n      return slice;\n    }, []);\n\n    await fetchSliceData(importedSlices);\n  }\n\n  render = () => {\n    const {\n      client,\n      configuring,\n      confirmedBalance,\n      walletName,\n      setName,\n      deposits,\n      change,\n      network,\n      pendingBalance,\n      nodesLoaded,\n      frozen,\n      unknownAddresses,\n    } = this.props;\n    const { refreshing, generating } = this.state;\n    const walletLoadError =\n      change.fetchUTXOsErrors + deposits.fetchUTXOsErrors > 0\n        ? \"Wallet loaded, but with errors...\"\n        : \"\";\n\n    return (\n      <>\n        <Box mt={3}>\n          <Grid container spacing={3}>\n            <Grid item xs={10} md={6}>\n              <WalletInfoCard\n                editable={\n                  !Object.keys(deposits.nodes).length ||\n                  !Object.keys(change.nodes).length\n                }\n                walletName={walletName}\n                setName={setName}\n                balance={+satoshisToBitcoins(confirmedBalance).toFixed()}\n                pendingBalance={+satoshisToBitcoins(pendingBalance).toFixed()}\n                network={network}\n              />\n            </Grid>\n            <Grid item xs={10} md={6}>\n              {(nodesLoaded || frozen) && (\n                <WalletActionsPanel\n                  addresses={unknownAddresses}\n                  refreshing={refreshing}\n                  walletActivated={nodesLoaded}\n                  handleRefresh={() => this.refresh()}\n                  onClearConfig={(e) => {\n                    this.clearConfig(e);\n                  }}\n                  onDownloadConfig={(e) => this.downloadWalletDetails(e)}\n                  client={client}\n                  onImportAddresses={(addresses, rescan) =>\n                    this.afterImportAddresses(rescan)\n                  }\n                />\n              )}\n            </Grid>\n          </Grid>\n        </Box>\n        {walletLoadError.length ? (\n          <FormHelperText\n            style={{ float: \"right\", padding: \"11px\", fontSize: \"1.5em\" }}\n            error\n          >\n            {walletLoadError}\n          </FormHelperText>\n        ) : (\n          \"\"\n        )}\n        <Box>\n          <Grid container spacing={3}>\n            <Grid item xs={12}>\n              {this.renderWalletImporter()}\n            </Grid>\n            <Grid item md={configuring ? 8 : 12}>\n              {this.renderExtendedPublicKeyImporters()}\n              <Box mt={2}>\n                <WalletGenerator\n                  generating={generating}\n                  setGenerating={(value) => this.setGenerating(value)}\n                  downloadWalletDetails={this.downloadWalletDetails}\n                  // eslint-disable-next-line no-return-assign\n                  refreshNodes={(click) => (this.generatorRefresh = click)} // FIXME TIGHT COUPLING ALERT, this calls function downstream\n                />\n              </Box>\n            </Grid>\n            {this.renderSettings()}\n          </Grid>\n        </Box>\n      </>\n    );\n  };\n}\n\nCreateWallet.propTypes = {\n  addressType: PropTypes.string.isRequired,\n  change: PropTypes.shape({\n    balanceSats: PropTypes.shape({}),\n    fetchUTXOsErrors: PropTypes.number,\n    nodes: PropTypes.shape({}),\n  }).isRequired,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n  configuring: PropTypes.bool.isRequired,\n  deposits: PropTypes.shape({\n    balanceSats: PropTypes.shape({\n      plus: PropTypes.func,\n    }),\n    fetchUTXOsErrors: PropTypes.number,\n    nodes: PropTypes.shape({}),\n  }).isRequired,\n  confirmedBalance: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n    .isRequired,\n  extendedPublicKeyImporters: PropTypes.shape({}).isRequired,\n  frozen: PropTypes.bool.isRequired,\n  fetchSliceData: PropTypes.func.isRequired,\n  network: PropTypes.string.isRequired,\n  nodesLoaded: PropTypes.bool.isRequired,\n  pendingBalance: PropTypes.number,\n  requiredSigners: PropTypes.number.isRequired,\n  resetWallet: PropTypes.func.isRequired,\n  setTotalSigners: PropTypes.func.isRequired,\n  setRequiredSigners: PropTypes.func.isRequired,\n  setAddressType: PropTypes.func.isRequired,\n  setName: PropTypes.func.isRequired,\n  setNetwork: PropTypes.func.isRequired,\n  setStartingAddressIndex: PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterMethod: PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterExtendedPublicKey: PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint:\n    PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterBIP32Path: PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterFinalized: PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterName: PropTypes.func.isRequired,\n  setExtendedPublicKeyImporterVisible: PropTypes.func.isRequired,\n  setClientType: PropTypes.func.isRequired,\n  setClientUrl: PropTypes.func.isRequired,\n  setClientUsername: PropTypes.func.isRequired,\n  totalSigners: PropTypes.number.isRequired,\n  updateWalletNameAction: PropTypes.func.isRequired,\n  unknownAddresses: PropTypes.arrayOf(PropTypes.string).isRequired,\n  unknownSlices: PropTypes.arrayOf(PropTypes.shape(slicePropTypes)).isRequired,\n  walletName: PropTypes.string.isRequired,\n  walletDetailsText: PropTypes.string.isRequired,\n};\n\nCreateWallet.defaultProps = {\n  pendingBalance: 0,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    ...state.quorum,\n    ...{\n      walletName: state.wallet.common.walletName,\n      nodesLoaded: state.wallet.common.nodesLoaded,\n      walletMode: state.wallet.common.walletMode,\n    },\n    confirmedBalance: walletSelectors.getConfirmedBalance(state),\n    pendingBalance: walletSelectors.getPendingBalance(state),\n    walletDetailsText: getWalletDetailsText(state),\n    unknownAddresses: getUnknownAddresses(state),\n    unknownSlices: getUnknownAddressSlices(state),\n    ...state.wallet,\n    client: state.client,\n  };\n}\n\nconst mapDispatchToProps = {\n  fetchSliceData: fetchSliceDataAction,\n  resetWallet: resetWalletAction,\n  setName: updateWalletNameActionImport,\n  setTotalSigners: setTotalSignersAction,\n  setRequiredSigners: setRequiredSignersAction,\n  setAddressType: setAddressTypeAction,\n  setNetwork: setNetworkAction,\n  setStartingAddressIndex: setStartingAddressIndexAction,\n  setExtendedPublicKeyImporterMethod: setExtendedPublicKeyImporterMethodAction,\n  setExtendedPublicKeyImporterExtendedPublicKey: setExtendedPublicKeyImporterExtendedPublicKeyAction,\n  setExtendedPublicKeyImporterBIP32Path: setExtendedPublicKeyImporterBIP32PathAction,\n  setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint: setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprintAction,\n  setExtendedPublicKeyImporterName: setExtendedPublicKeyImporterNameAction,\n  setExtendedPublicKeyImporterFinalized: setExtendedPublicKeyImporterFinalizedAction,\n  setExtendedPublicKeyImporterVisible: setExtendedPublicKeyImporterVisibleAction,\n  updateWalletNameAction: updateWalletNameActionImport,\n  ...wrappedActions({\n    setClientType: SET_CLIENT_TYPE,\n    setClientUrl: SET_CLIENT_URL,\n    setClientUsername: SET_CLIENT_USERNAME,\n    setClientPassword: SET_CLIENT_PASSWORD,\n  }),\n  updateDepositNode: updateDepositSliceAction,\n  updateChangeNode: updateChangeSliceAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateWallet);\n","import { wrappedNumberedActions } from \"./utils\";\n\nexport const SET_PUBLIC_KEY_IMPORTER_NAME = \"SET_PUBLIC_KEY_IMPORTER_NAME\";\nexport const RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH =\n  \"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_PUBLIC_KEY_IMPORTER_BIP32_PATH =\n  \"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_PUBLIC_KEY_IMPORTER_METHOD = \"SET_PUBLIC_KEY_IMPORTER_METHOD\";\nexport const SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY =\n  \"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY\";\nexport const SET_PUBLIC_KEY_IMPORTER_FINALIZED =\n  \"SET_PUBLIC_KEY_IMPORTER_FINALIZED\";\nexport const MOVE_PUBLIC_KEY_IMPORTER_UP = \"MOVE_PUBLIC_KEY_IMPORTER_UP\";\nexport const MOVE_PUBLIC_KEY_IMPORTER_DOWN = \"MOVE_PUBLIC_KEY_IMPORTER_DOWN\";\nexport const SORT_PUBLIC_KEY_IMPORTERS = \"SORT_PUBLIC_KEY_IMPORTERS\";\nexport const UPDATE_MULTISIG_ADDRESS = \"UPDATE_MULTISIG_ADDRESS\";\n\nexport function sortPublicKeyImporters() {\n  return {\n    type: SORT_PUBLIC_KEY_IMPORTERS,\n  };\n}\n\nexport function setMultisigAddress(address) {\n  return {\n    type: UPDATE_MULTISIG_ADDRESS,\n    value: address,\n  };\n}\n\nexport const {\n  setPublicKeyImporterName,\n  setPublicKeyImporterBIP32Path,\n  resetPublicKeyImporterBIP32Path,\n  setPublicKeyImporterMethod,\n  setPublicKeyImporterPublicKey,\n  setPublicKeyImporterFinalized,\n  movePublicKeyImporterUp,\n  movePublicKeyImporterDown,\n} = wrappedNumberedActions({\n  setPublicKeyImporterName: SET_PUBLIC_KEY_IMPORTER_NAME,\n  resetPublicKeyImporterBIP32Path: RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  setPublicKeyImporterBIP32Path: SET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  setPublicKeyImporterMethod: SET_PUBLIC_KEY_IMPORTER_METHOD,\n  setPublicKeyImporterPublicKey: SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY,\n  setPublicKeyImporterFinalized: SET_PUBLIC_KEY_IMPORTER_FINALIZED,\n  movePublicKeyImporterUp: MOVE_PUBLIC_KEY_IMPORTER_UP,\n  movePublicKeyImporterDown: MOVE_PUBLIC_KEY_IMPORTER_DOWN,\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  generateMultisigFromPublicKeys,\n  scriptToHex,\n  multisigRedeemScript,\n  multisigWitnessScript,\n  validatePublicKey,\n} from \"unchained-bitcoin\";\nimport {\n  Box,\n  Grid,\n  Button,\n  Card,\n  CardHeader,\n  CardContent,\n  FormHelperText,\n} from \"@material-ui/core\";\nimport { externalLink, downloadFile } from \"../../utils\";\n\n// Actions\nimport {\n  sortPublicKeyImporters as sortPublicKeyImportersAction,\n  setMultisigAddress as setMultisigAddressAction,\n} from \"../../actions/publicKeyImporterActions\";\n\n// Components\nimport MultisigDetails from \"../MultisigDetails\";\nimport Conflict from \"./Conflict\";\n\nclass AddressGenerator extends React.Component {\n  isInConflict = () => {\n    const { publicKeyImporters } = this.props;\n    return Object.values(publicKeyImporters).some(\n      (importer) => importer.conflict\n    );\n  };\n\n  publicKeyCount = () => {\n    const { publicKeyImporters, addressType } = this.props;\n    return Object.values(publicKeyImporters).filter(\n      ({ publicKey, finalized }) => {\n        return finalized && !validatePublicKey(publicKey, addressType);\n      }\n    ).length;\n  };\n\n  publicKeysAreCanonicallySorted = () => {\n    const { publicKeyImporters } = this.props;\n    const publicKeys = Object.values(publicKeyImporters)\n      .map((publicKeyImporter) => publicKeyImporter.publicKey)\n      .filter((publicKey) => publicKey !== \"\");\n    const sortedPublicKeys = Object.values(publicKeyImporters)\n      .map((publicKeyImporter) => publicKeyImporter.publicKey)\n      .filter((publicKey) => publicKey !== \"\")\n      .sort(); // sort mutates the array\n    const sorted =\n      publicKeys.filter((publicKey, index) => {\n        return publicKey === sortedPublicKeys[index];\n      }).length === publicKeys.length;\n    return sorted;\n  };\n\n  canonicallySortPublicKeys = () => {\n    const { sortPublicKeyImporters } = this.props;\n    sortPublicKeyImporters();\n  };\n\n  generateMultisig = () => {\n    const {\n      network,\n      publicKeyImporters,\n      totalSigners,\n      requiredSigners,\n      addressType,\n      setMultisigAddress,\n    } = this.props;\n    const publicKeys = [];\n    for (\n      let publicKeyImporterNum = 1;\n      publicKeyImporterNum <= totalSigners;\n      publicKeyImporterNum += 1\n    ) {\n      publicKeys.push(publicKeyImporters[publicKeyImporterNum].publicKey);\n    }\n    const multisig = generateMultisigFromPublicKeys(\n      network,\n      addressType,\n      requiredSigners,\n      ...publicKeys\n    );\n    setMultisigAddress(multisig.address);\n    return multisig;\n  };\n\n  downloadAddressDetails = (event) => {\n    event.preventDefault();\n    const multisig = this.generateMultisig();\n    const body = this.addressDetailsText(multisig);\n    const filename = this.addressDetailsFilename(multisig);\n    downloadFile(body, filename);\n  };\n\n  addressDetailsFilename = (multisig) => {\n    const { totalSigners, requiredSigners, addressType } = this.props;\n    return `bitcoin-${requiredSigners}-of-${totalSigners}-${addressType}-${multisig.address}.txt`;\n  };\n\n  addressDetailsText = (multisig) => {\n    const { addressType, network, totalSigners, requiredSigners } = this.props;\n    const redeemScript = multisigRedeemScript(multisig);\n    const witnessScript = multisigWitnessScript(multisig);\n    const redeemScriptLine = redeemScript\n      ? `Redeem Script: ${scriptToHex(redeemScript)}`\n      : \"\";\n    const witnessScriptLine = witnessScript\n      ? `Witness Script: ${scriptToHex(witnessScript)}`\n      : \"\";\n    const scriptsSpacer = redeemScript && witnessScript ? \"\\n\\n\" : \"\";\n    return `Address: ${multisig.address}\n\nType: ${addressType}\n\nNetwork: ${network}\n\nQuorum: ${requiredSigners}-of-${totalSigners}\n\nBIP32 Paths:\n${this.publicKeyImporterBIP32Paths()}\n\n${redeemScriptLine}${scriptsSpacer}${witnessScriptLine}\n`;\n  };\n\n  publicKeyImporterBIP32Paths = () => {\n    const { totalSigners } = this.props;\n    const publicKeyImporterBIP32Paths = [];\n    for (\n      let publicKeyImporterNum = 1;\n      publicKeyImporterNum <= totalSigners;\n      publicKeyImporterNum += 1\n    ) {\n      publicKeyImporterBIP32Paths.push(\n        this.publicKeyImporterBIP32Path(publicKeyImporterNum)\n      );\n    }\n    return publicKeyImporterBIP32Paths.join(\"\\n\");\n  };\n\n  publicKeyImporterBIP32Path = (number) => {\n    const { publicKeyImporters } = this.props;\n    const publicKeyImporter = publicKeyImporters[number];\n    const bip32Path =\n      publicKeyImporter.method === \"text\"\n        ? \"Unknown (make sure you have written this down previously!)\"\n        : publicKeyImporter.bip32Path;\n    return `  * ${publicKeyImporter.name}: ${bip32Path}: ${publicKeyImporter.publicKey}`;\n  };\n\n  title = () => {\n    const { totalSigners, requiredSigners, addressType } = this.props;\n    return (\n      <Grid container justify=\"space-between\">\n        <Grid item>\n          {requiredSigners}\n          -of-\n          {totalSigners} Multisig {addressType}{\" \"}\n        </Grid>\n        <Grid item>\n          <small>{`Public Keys: ${this.publicKeyCount()}/${totalSigners}`}</small>\n        </Grid>\n      </Grid>\n    );\n  };\n\n  body() {\n    const { totalSigners } = this.props;\n    if (this.publicKeyCount() === totalSigners) {\n      const multisig = this.generateMultisig();\n\n      const canonicallySorted = this.publicKeysAreCanonicallySorted();\n      return (\n        <div>\n          {this.isInConflict() && <Conflict />}\n          {!canonicallySorted && (\n            <Grid container justify=\"space-between\">\n              <Grid item md={8}>\n                <FormHelperText error>\n                  WARNING: These public keys are not in the standard{\" \"}\n                  {externalLink(\n                    \"https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki\",\n                    \"BIP67 order\"\n                  )}\n                  .\n                </FormHelperText>\n              </Grid>\n              <Grid item md={4}>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={this.canonicallySortPublicKeys}\n                >\n                  Sort Public Keys\n                </Button>\n              </Grid>\n            </Grid>\n          )}\n\n          <Box mt={2}>\n            <MultisigDetails multisig={multisig} />\n          </Box>\n\n          <Box mt={2}>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={this.downloadAddressDetails}\n            >\n              Download Address Details\n            </Button>\n          </Box>\n        </div>\n      );\n    }\n    return (\n      <p>\n        {`Once you have imported all ${totalSigners} public keys, `}\n        {\"your address details will be displayed here.\"}\n      </p>\n    );\n  }\n\n  render() {\n    return (\n      <Card>\n        <CardHeader title={this.title()} />\n        <CardContent>{this.body()}</CardContent>\n      </Card>\n    );\n  }\n}\n\nAddressGenerator.propTypes = {\n  network: PropTypes.string.isRequired,\n  totalSigners: PropTypes.number.isRequired,\n  requiredSigners: PropTypes.number.isRequired,\n  addressType: PropTypes.string.isRequired,\n  publicKeyImporters: PropTypes.shape({}).isRequired,\n  sortPublicKeyImporters: PropTypes.func.isRequired,\n  setMultisigAddress: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    ...state.address,\n  };\n}\n\nconst mapDispatchToProps = {\n  sortPublicKeyImporters: sortPublicKeyImportersAction,\n  setMultisigAddress: setMultisigAddressAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddressGenerator);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { validatePublicKey } from \"unchained-bitcoin\";\n\n// Components\nimport { Button, TextField, Box } from \"@material-ui/core\";\n\nclass TextPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: \"\",\n      publicKey: \"\",\n    };\n  }\n\n  render = () => {\n    const { error, publicKey } = this.state;\n    return (\n      <Box mt={2}>\n        <TextField\n          fullWidth\n          name=\"publicKey\"\n          label=\"Public Key\"\n          value={publicKey}\n          onChange={this.handleChange}\n          error={this.hasError()}\n          helperText={error}\n        />\n\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={this.import}\n            disabled={publicKey === \"\" || this.hasError()}\n          >\n            Add Public Key\n          </Button>\n        </Box>\n      </Box>\n    );\n  };\n\n  import = () => {\n    const { validateAndSetPublicKey } = this.props;\n    const { publicKey } = this.state;\n    validateAndSetPublicKey(publicKey, this.setError);\n  };\n\n  hasError = () => {\n    const { error } = this.state;\n    return error !== \"\";\n  };\n\n  setError = (value) => {\n    this.setState({ error: value });\n  };\n\n  handleChange = (event) => {\n    const publicKey = event.target.value;\n    const { addressType } = this.props;\n    const error = validatePublicKey(publicKey, addressType);\n    this.setState({ publicKey, error });\n  };\n}\n\nTextPublicKeyImporter.propTypes = {\n  publicKeyImporter: PropTypes.shape({}).isRequired,\n  validateAndSetPublicKey: PropTypes.func.isRequired,\n  addressType: PropTypes.string.isRequired,\n};\n\nexport default TextPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  convertExtendedPublicKey,\n  validateExtendedPublicKey,\n  validateExtendedPublicKeyForNetwork,\n  deriveChildPublicKey,\n} from \"unchained-bitcoin\";\n\n// Components\nimport {\n  Button,\n  TextField,\n  FormHelperText,\n  Box,\n  Grid,\n} from \"@material-ui/core\";\n\nconst DEFAULT_BIP32_PATH = \"m/0\";\n\nclass ExtendedPublicKeyPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      extendedPublicKey: \"\",\n      extendedPublicKeyError: \"\",\n      bip32PathError: \"\",\n      conversionMessage: \"\",\n    };\n  }\n\n  componentDidMount = () => {\n    this.setBIP32PathToDefault();\n  };\n\n  render = () => {\n    const { publicKeyImporter } = this.props;\n    const {\n      extendedPublicKey,\n      extendedPublicKeyError,\n      bip32PathError,\n      conversionMessage,\n    } = this.state;\n    return (\n      <div>\n        <Box mt={2}>\n          <TextField\n            fullWidth\n            name=\"extendedPublicKey\"\n            label=\"Extended Public Key\"\n            value={extendedPublicKey}\n            onChange={this.handleExtendedPublicKeyChange}\n            error={this.hasExtendedPublicKeyError()}\n            helperText={extendedPublicKeyError}\n          />\n        </Box>\n        {conversionMessage !== \"\" && (\n          <Box mb={2}>\n            <FormHelperText>\n              {conversionMessage}, this may indicate an invalid network setting,\n              if so correct setting, remove key and try again.\n            </FormHelperText>\n          </Box>\n        )}\n\n        <Box mt={2}>\n          <Grid container>\n            <Grid item md={10}>\n              <TextField\n                fullWidth\n                name=\"bip32Path\"\n                label=\"BIP32 Path (relative to xpub)\"\n                type=\"text\"\n                value={publicKeyImporter.bip32Path}\n                onChange={this.handleBIP32PathChange}\n                error={this.hasBIP32PathError()}\n                helperText={bip32PathError}\n              />\n              <FormHelperText>\n                Use the default value if you don&rsquo;t understand BIP32 paths.\n              </FormHelperText>\n            </Grid>\n            <Grid item md={2}>\n              {!this.bip32PathIsDefault() && (\n                <Button\n                  type=\"button\"\n                  variant=\"contained\"\n                  size=\"small\"\n                  onClick={this.resetBIP32Path}\n                >\n                  Default\n                </Button>\n              )}\n            </Grid>\n          </Grid>\n          <Box mt={2}>\n            <Button\n              type=\"button\"\n              variant=\"contained\"\n              color=\"primary\"\n              size=\"large\"\n              onClick={this.import}\n              disabled={extendedPublicKey === \"\" || this.hasError()}\n            >\n              Import Public Key\n            </Button>\n          </Box>\n        </Box>\n      </div>\n    );\n  };\n\n  import = () => {\n    const { network, publicKeyImporter, validateAndSetPublicKey } = this.props;\n    const { extendedPublicKey } = this.state;\n    const publicKey = deriveChildPublicKey(\n      extendedPublicKey,\n      publicKeyImporter.bip32Path,\n      network\n    );\n    validateAndSetPublicKey(publicKey, (bip32PathError) =>\n      this.setState({ bip32PathError })\n    );\n  };\n\n  setBIP32PathToDefault = () => {\n    const { validateAndSetBIP32Path } = this.props;\n    validateAndSetBIP32Path(\n      DEFAULT_BIP32_PATH,\n      () => {},\n      () => {}\n    );\n  };\n\n  hasBIP32PathError = () => {\n    const { bip32PathError } = this.state;\n    return bip32PathError !== \"\";\n  };\n\n  hasExtendedPublicKeyError = () => {\n    const { extendedPublicKeyError } = this.state;\n    return extendedPublicKeyError !== \"\";\n  };\n\n  hasError = () => this.hasBIP32PathError() || this.hasExtendedPublicKeyError();\n\n  setBIP32PathError = (value) => {\n    this.setState({ bip32PathError: value });\n  };\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(bip32Path, () => {}, this.setBIP32PathError, {\n      mode: \"unhardened\",\n    });\n  };\n\n  bip32PathIsDefault = () => {\n    const { publicKeyImporter } = this.props;\n    return publicKeyImporter.bip32Path === DEFAULT_BIP32_PATH;\n  };\n\n  resetBIP32Path = () => {\n    this.setBIP32PathToDefault();\n    this.setBIP32PathError(\"\");\n  };\n\n  handleExtendedPublicKeyChange = (event) => {\n    const { network } = this.props;\n\n    const extendedPublicKey = event.target.value;\n\n    const networkError = validateExtendedPublicKeyForNetwork(\n      extendedPublicKey,\n      network\n    );\n    let actualExtendedPublicKey = extendedPublicKey;\n    if (networkError !== \"\") {\n      try {\n        actualExtendedPublicKey = convertExtendedPublicKey(\n          extendedPublicKey,\n          network === \"testnet\" ? \"tpub\" : \"xpub\"\n        );\n      } catch (error) {\n        this.setState({\n          extendedPublicKey,\n          extendedPublicKeyError: error.message,\n          conversionMessage: \"\",\n        });\n        return;\n      }\n    }\n\n    const validationError = validateExtendedPublicKey(\n      actualExtendedPublicKey,\n      network\n    );\n    if (validationError !== \"\") {\n      this.setState({\n        extendedPublicKey,\n        extendedPublicKeyError: validationError,\n        conversionMessage: \"\",\n      });\n      return;\n    }\n    const conversionMessage =\n      actualExtendedPublicKey === extendedPublicKey\n        ? \"\"\n        : `Your extended public key has been converted from ${extendedPublicKey.slice(\n            0,\n            4\n          )} to ${actualExtendedPublicKey.slice(0, 4)}`;\n\n    this.setState({\n      extendedPublicKey: actualExtendedPublicKey,\n      extendedPublicKeyError: \"\",\n      conversionMessage,\n    });\n  };\n}\n\nExtendedPublicKeyPublicKeyImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  publicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n  }).isRequired,\n  validateAndSetPublicKey: PropTypes.func.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n};\n\nexport default ExtendedPublicKeyPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { HERMIT, ExportPublicKey } from \"unchained-wallets\";\n\n// Components\nimport { FormGroup, FormHelperText } from \"@material-ui/core\";\n\nimport HermitReader from \"../Hermit/HermitReader\";\n\nclass HermitPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      publicKeyError: \"\",\n    };\n  }\n\n  componentDidMount = () => {\n    const { resetBIP32Path } = this.props;\n    resetBIP32Path();\n  };\n\n  interaction = () => {\n    const { network, publicKeyImporter } = this.props;\n    return ExportPublicKey({\n      keystore: HERMIT,\n      network,\n      bip32Path: publicKeyImporter.bip32Path,\n    });\n  };\n\n  render = () => {\n    const { disableChangeMethod } = this.props;\n    const { publicKeyError } = this.state;\n    return (\n      <FormGroup>\n        <HermitReader\n          startText=\"Import Public Key\"\n          interaction={this.interaction()}\n          onStart={disableChangeMethod}\n          onSuccess={this.import}\n          onClear={this.onClear}\n        />\n        <FormHelperText error>{publicKeyError}</FormHelperText>\n      </FormGroup>\n    );\n  };\n\n  setError = (value) => {\n    this.setState({ publicKeyError: value });\n  };\n\n  import = (data) => {\n    const {\n      validateAndSetBIP32Path,\n      validateAndSetPublicKey,\n      enableChangeMethod,\n    } = this.props;\n    enableChangeMethod();\n    const { pubkey, bip32Path } = data;\n    validateAndSetBIP32Path(\n      bip32Path,\n      () => {\n        validateAndSetPublicKey(pubkey, this.setError);\n      },\n      this.setError\n    );\n  };\n\n  onClear = () => {\n    const { reset, enableChangeMethod } = this.props;\n    reset(true); // clear BIP32 path\n    this.setError(\"\");\n    enableChangeMethod();\n  };\n}\n\nHermitPublicKeyImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  publicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n  }).isRequired,\n  validateAndSetPublicKey: PropTypes.func.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  reset: PropTypes.func.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  enableChangeMethod: PropTypes.func.isRequired,\n  disableChangeMethod: PropTypes.func.isRequired,\n};\n\nexport default HermitPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  UNSUPPORTED,\n  PENDING,\n  ACTIVE,\n  ERROR,\n  ExportPublicKey,\n} from \"unchained-wallets\";\n\n// Components\nimport {\n  Button,\n  TextField,\n  FormHelperText,\n  Box,\n  Grid,\n} from \"@material-ui/core\";\n\nimport InteractionMessages from \"../InteractionMessages\";\n\nclass HardwareWalletPublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      publicKeyError: \"\",\n      bip32PathError: \"\",\n      status: this.interaction().isSupported() ? PENDING : UNSUPPORTED,\n    };\n  }\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n  };\n\n  interaction = () => {\n    const { network, publicKeyImporter } = this.props;\n    return ExportPublicKey({\n      network,\n      keystore: publicKeyImporter.method,\n      bip32Path: publicKeyImporter.bip32Path,\n    });\n  };\n\n  render = () => {\n    const { publicKeyImporter } = this.props;\n    const { status, publicKeyError } = this.state;\n    const interaction = this.interaction();\n    if (status === UNSUPPORTED) {\n      return (\n        <FormHelperText error>\n          {interaction.messageTextFor({ status })}\n        </FormHelperText>\n      );\n    }\n    return (\n      <Box mt={2}>\n        <Grid container>\n          <Grid item md={6}>\n            <TextField\n              fullWidth\n              label=\"BIP32 Path\"\n              value={publicKeyImporter.bip32Path}\n              onChange={this.handleBIP32PathChange}\n              disabled={status !== PENDING}\n              error={this.hasBIP32PathError()}\n              helperText={this.bip32PathError()}\n            />\n          </Grid>\n          <Grid item md={6}>\n            {!this.bip32PathIsDefault() && (\n              <Button\n                type=\"button\"\n                variant=\"contained\"\n                size=\"small\"\n                onClick={this.resetBIP32Path}\n                disabled={status !== PENDING}\n              >\n                Default\n              </Button>\n            )}\n          </Grid>\n        </Grid>\n        <FormHelperText>\n          Use the default value if you don&rsquo;t understand BIP32 paths.\n        </FormHelperText>\n        <Box mt={2}>\n          <Button\n            type=\"button\"\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={this.import}\n            disabled={this.hasBIP32PathError() || status === ACTIVE}\n          >\n            Import Public Key\n          </Button>\n        </Box>\n        <InteractionMessages\n          messages={interaction.messagesFor({ state: status })}\n          excludeCodes={[\"bip32\"]}\n        />\n        <FormHelperText error>{publicKeyError}</FormHelperText>\n      </Box>\n    );\n  };\n\n  import = async () => {\n    const {\n      validateAndSetPublicKey,\n      enableChangeMethod,\n      disableChangeMethod,\n    } = this.props;\n    disableChangeMethod();\n    this.setState({ publicKeyError: \"\", status: ACTIVE });\n    try {\n      const publicKey = await this.interaction().run();\n      validateAndSetPublicKey(publicKey, (error) => {\n        this.setState({ publicKeyError: error, status: PENDING });\n      });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      this.setState({ publicKeyError: e.message, status: PENDING });\n    }\n\n    enableChangeMethod();\n  };\n\n  hasBIP32PathError = () => {\n    const { bip32PathError, status } = this.state;\n    return (\n      bip32PathError !== \"\" ||\n      this.interaction().hasMessagesFor({\n        state: status,\n        level: ERROR,\n        code: \"bip32\",\n      })\n    );\n  };\n\n  bip32PathError = () => {\n    const { bip32PathError, status } = this.state;\n    if (bip32PathError !== \"\") {\n      return bip32PathError;\n    }\n    return this.interaction().messageTextFor({\n      state: status,\n      level: ERROR,\n      code: \"bip32\",\n    });\n  };\n\n  setBIP32PathError = (value) => {\n    this.setState({ bip32PathError: value });\n  };\n\n  handleBIP32PathChange = (event) => {\n    const { validateAndSetBIP32Path } = this.props;\n    const bip32Path = event.target.value;\n    validateAndSetBIP32Path(bip32Path, () => {}, this.setBIP32PathError);\n  };\n\n  bip32PathIsDefault = () => {\n    const { publicKeyImporter, defaultBIP32Path } = this.props;\n    return publicKeyImporter.bip32Path === defaultBIP32Path;\n  };\n\n  resetBIP32Path = () => {\n    const { resetBIP32Path } = this.props;\n    this.setBIP32PathError(\"\");\n    resetBIP32Path();\n  };\n}\n\nHardwareWalletPublicKeyImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  publicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    method: PropTypes.string,\n  }).isRequired,\n  validateAndSetPublicKey: PropTypes.func.isRequired,\n  validateAndSetBIP32Path: PropTypes.func.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n  enableChangeMethod: PropTypes.func.isRequired,\n  disableChangeMethod: PropTypes.func.isRequired,\n};\n\nexport default HardwareWalletPublicKeyImporter;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { validateBIP32Path, validatePublicKey } from \"unchained-bitcoin\";\nimport { TREZOR, LEDGER, HERMIT } from \"unchained-wallets\";\n\n// Components\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  FormControl,\n  Select,\n  MenuItem,\n  InputLabel,\n  Button,\n  Grid,\n  Box,\n} from \"@material-ui/core\";\nimport { ArrowUpward, ArrowDownward } from \"@material-ui/icons\";\n\nimport Copyable from \"../Copyable\";\nimport TextPublicKeyImporter from \"./TextPublicKeyImporter\";\nimport ExtendedPublicKeyPublicKeyImporter from \"./ExtendedPublicKeyPublicKeyImporter\";\nimport HermitPublicKeyImporter from \"./HermitPublicKeyImporter\";\nimport HardwareWalletPublicKeyImporter from \"./HardwareWalletPublicKeyImporter\";\nimport EditableName from \"../EditableName\";\nimport Conflict from \"./Conflict\";\n\n// Actions\nimport {\n  setPublicKeyImporterName,\n  setPublicKeyImporterBIP32Path,\n  resetPublicKeyImporterBIP32Path,\n  setPublicKeyImporterMethod,\n  setPublicKeyImporterPublicKey,\n  setPublicKeyImporterFinalized,\n  movePublicKeyImporterUp,\n  movePublicKeyImporterDown,\n} from \"../../actions/publicKeyImporterActions\";\n\nconst XPUB = \"xpub\";\nconst TEXT = \"text\";\n\nclass PublicKeyImporter extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      disableChangeMethod: false,\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const { number, setFinalized, addressType, publicKeyImporter } = this.props;\n    if (\n      prevProps.addressType !== addressType &&\n      validatePublicKey(publicKeyImporter.publicKey, addressType)\n    ) {\n      setFinalized(number, false);\n    }\n  }\n\n  title = () => {\n    const { number, totalSigners, publicKeyImporter, setName } = this.props;\n    return (\n      <Grid container justify=\"space-between\">\n        <Grid item>\n          <EditableName\n            number={number}\n            name={publicKeyImporter.name}\n            setName={setName}\n          />\n        </Grid>\n        <Grid item>\n          <Grid container justify=\"flex-end\">\n            <Button\n              type=\"button\"\n              variant=\"contained\"\n              onClick={this.moveUp}\n              disabled={number === 1}\n            >\n              <ArrowUpward />\n            </Button>\n            <span>&nbsp;</span>\n            <Button\n              type=\"button\"\n              variant=\"contained\"\n              onClick={this.moveDown}\n              disabled={number === totalSigners}\n            >\n              <ArrowDownward />\n            </Button>\n          </Grid>\n        </Grid>\n      </Grid>\n    );\n  };\n\n  renderImport = () => {\n    const { publicKeyImporter, number } = this.props;\n    const { disableChangeMethod } = this.state;\n    const labelId = `public-key-${number}-importer-select-label`;\n    return (\n      <div>\n        <FormControl fullWidth>\n          <InputLabel id={labelId}>Select Method</InputLabel>\n\n          <Select\n            labelId={labelId}\n            id={`public-key-${number}-importer-select`}\n            disabled={disableChangeMethod}\n            value={publicKeyImporter.method}\n            onChange={this.handleMethodChange}\n          >\n            <MenuItem value=\"\">{\"< Select method >\"}</MenuItem>\n            <MenuItem value={TREZOR}>Trezor</MenuItem>\n            <MenuItem value={LEDGER}>Ledger</MenuItem>\n            <MenuItem value={HERMIT}>Hermit</MenuItem>\n            <MenuItem value={XPUB}>Derive from extended public key</MenuItem>\n            <MenuItem value={TEXT}>Enter as text</MenuItem>\n          </Select>\n        </FormControl>\n\n        {this.renderImportByMethod()}\n      </div>\n    );\n  };\n\n  renderImportByMethod = () => {\n    const {\n      publicKeyImporter,\n      network,\n      addressType,\n      defaultBIP32Path,\n    } = this.props;\n    if (\n      publicKeyImporter.method === TREZOR ||\n      publicKeyImporter.method === LEDGER\n    ) {\n      return (\n        <HardwareWalletPublicKeyImporter\n          publicKeyImporter={publicKeyImporter}\n          validateAndSetPublicKey={this.validateAndSetPublicKey}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          resetBIP32Path={this.resetBIP32Path}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n          addressType={addressType}\n          defaultBIP32Path={defaultBIP32Path}\n          network={network}\n        />\n      );\n    }\n    if (publicKeyImporter.method === HERMIT) {\n      return (\n        <HermitPublicKeyImporter\n          publicKeyImporter={publicKeyImporter}\n          validateAndSetPublicKey={this.validateAndSetPublicKey}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          resetBIP32Path={this.resetBIP32Path}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n          reset={this.reset}\n        />\n      );\n    }\n    if (publicKeyImporter.method === XPUB) {\n      return (\n        <ExtendedPublicKeyPublicKeyImporter\n          network={network}\n          publicKeyImporter={publicKeyImporter}\n          validateAndSetPublicKey={this.validateAndSetPublicKey}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n        />\n      );\n    }\n    if (publicKeyImporter.method === TEXT) {\n      return (\n        <TextPublicKeyImporter\n          publicKeyImporter={publicKeyImporter}\n          validateAndSetPublicKey={this.validateAndSetPublicKey}\n          addressType={addressType}\n        />\n      );\n    }\n    return null;\n  };\n\n  //\n  // Method\n  //\n\n  handleMethodChange = (event) => {\n    const { number, setMethod, setPublicKey } = this.props;\n    setMethod(number, event.target.value);\n    setPublicKey(number, \"\");\n  };\n\n  disableChangeMethod = () => {\n    this.setState({ disableChangeMethod: true });\n  };\n\n  enableChangeMethod = () => {\n    this.setState({ disableChangeMethod: false });\n  };\n\n  //\n  // State\n  //\n\n  finalize = () => {\n    const { number, setFinalized } = this.props;\n    setFinalized(number, true);\n  };\n\n  reset = (resetBIP32Path) => {\n    const { number, setPublicKey, setFinalized } = this.props;\n    setPublicKey(number, \"\");\n    setFinalized(number, false);\n    if (resetBIP32Path) {\n      this.resetBIP32Path();\n    }\n  };\n\n  //\n  // Position\n  //\n\n  moveUp = (event) => {\n    const { moveUp, number } = this.props;\n    event.preventDefault();\n    moveUp(number);\n  };\n\n  moveDown = (event) => {\n    const { moveDown, number } = this.props;\n    event.preventDefault();\n    moveDown(number);\n  };\n\n  //\n  // BIP32 Path\n  //\n\n  renderBIP32Path = () => {\n    const { publicKeyImporter } = this.props;\n    if (publicKeyImporter.method !== TEXT) {\n      return (\n        <Box mt={4}>\n          <p>The BIP32 path for this public key is:</p>\n          <Grid container justify=\"center\">\n            <Copyable text={publicKeyImporter.bip32Path} code />\n          </Grid>\n          <Box mt={4}>\n            <p>\n              You will need this BIP32 path to sign for this key later.{\" \"}\n              <strong>Write down this BIP32 path!</strong>\n            </p>\n          </Box>\n        </Box>\n      );\n    }\n    return null;\n  };\n\n  validateAndSetBIP32Path = (bip32Path, callback, errback, options) => {\n    const { number, setBIP32Path } = this.props;\n    const error = validateBIP32Path(bip32Path, options);\n    setBIP32Path(number, bip32Path);\n    if (error) {\n      errback(error);\n    } else {\n      errback(\"\");\n      callback();\n    }\n  };\n\n  resetBIP32Path = () => {\n    const { number, resetBIP32Path } = this.props;\n    resetBIP32Path(number);\n  };\n\n  //\n  // Public Key\n  //\n\n  renderPublicKey = () => {\n    const { publicKeyImporter } = this.props;\n    return (\n      <div>\n        <p>The following public key was imported:</p>\n        <Grid container justify=\"center\">\n          <Copyable text={publicKeyImporter.publicKey} showIcon code />\n        </Grid>\n        {this.renderBIP32Path()}\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            size=\"small\"\n            onClick={() => {\n              this.reset(publicKeyImporter.method === HERMIT);\n            }}\n          >\n            Remove Public Key\n          </Button>\n        </Box>\n      </div>\n    );\n  };\n\n  validateAndSetPublicKey = (publicKey, errback, callback) => {\n    const { number, publicKeyImporters, setPublicKey } = this.props;\n    const error = validatePublicKey(publicKey);\n    setPublicKey(number, publicKey);\n    if (error) {\n      if (errback) errback(error);\n    } else if (\n      publicKey &&\n      Object.values(publicKeyImporters).find(\n        (publicKeyImporter, publicKeyImporterIndex) =>\n          publicKeyImporterIndex !== number - 1 &&\n          publicKeyImporter.publicKey === publicKey\n      )\n    ) {\n      if (errback) errback(\"This public key has already been imported.\");\n    } else {\n      if (errback) errback(\"\");\n      this.finalize();\n      if (callback) callback();\n    }\n  };\n\n  render() {\n    const { publicKeyImporter, addressType } = this.props;\n    const publicKeyError = validatePublicKey(\n      publicKeyImporter.publicKey,\n      addressType\n    );\n    return (\n      <Card>\n        <CardHeader title={this.title()} />\n        <CardContent>\n          {publicKeyImporter.method &&\n            publicKeyImporter.method !== TEXT &&\n            publicKeyImporter.conflict && (\n              <Conflict message=\"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!\" />\n            )}\n          {publicKeyError.includes(\n            \"does not support uncompressed public keys\"\n          ) && <Conflict message={publicKeyError} />}\n          {publicKeyImporter.finalized\n            ? this.renderPublicKey()\n            : this.renderImport()}\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nPublicKeyImporter.propTypes = {\n  network: PropTypes.string.isRequired,\n  totalSigners: PropTypes.number.isRequired,\n  number: PropTypes.number.isRequired,\n  publicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    conflict: PropTypes.bool,\n    finalized: PropTypes.bool,\n    method: PropTypes.string,\n    name: PropTypes.string,\n    publicKey: PropTypes.string,\n  }).isRequired,\n  publicKeyImporters: PropTypes.shape({}).isRequired,\n  defaultBIP32Path: PropTypes.string.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  addressType: PropTypes.string.isRequired,\n  setName: PropTypes.func.isRequired,\n  setBIP32Path: PropTypes.func.isRequired,\n  setMethod: PropTypes.func.isRequired,\n  setPublicKey: PropTypes.func.isRequired,\n  setFinalized: PropTypes.func.isRequired,\n  moveUp: PropTypes.func.isRequired,\n  moveDown: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    ...state.settings,\n    ...state.address,\n    ...{ publicKeyImporter: state.address.publicKeyImporters[ownProps.number] },\n  };\n}\n\nconst mapDispatchToProps = {\n  setName: setPublicKeyImporterName,\n  setBIP32Path: setPublicKeyImporterBIP32Path,\n  resetBIP32Path: resetPublicKeyImporterBIP32Path,\n  setMethod: setPublicKeyImporterMethod,\n  setPublicKey: setPublicKeyImporterPublicKey,\n  setFinalized: setPublicKeyImporterFinalized,\n  moveUp: movePublicKeyImporterUp,\n  moveDown: movePublicKeyImporterDown,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PublicKeyImporter);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Grid, Box } from \"@material-ui/core\";\nimport { connect } from \"react-redux\";\n\n// Components\nimport NetworkPicker from \"../NetworkPicker\";\nimport QuorumPicker from \"../QuorumPicker\";\nimport AddressTypePicker from \"../AddressTypePicker\";\nimport AddressGenerator from \"./AddressGenerator\";\nimport PublicKeyImporter from \"./PublicKeyImporter\";\nimport ClientPicker from \"../ClientPicker\";\nimport ImportAddressesButton from \"../ImportAddressesButton\";\n\nimport { clientPropTypes } from \"../../proptypes\";\nimport \"../styles.css\";\n\nclass CreateAddress extends React.Component {\n  render = () => {\n    const { address, client } = this.props;\n    return (\n      <Box mt={2}>\n        <Grid container spacing={3}>\n          <Grid item xs={12}>\n            <h1>Address Generator</h1>\n          </Grid>\n          <Grid item md={8}>\n            {this.renderPublicKeyImporters()}\n            <Box mt={2}>\n              <AddressGenerator />\n            </Box>\n          </Grid>\n          <Grid item md={4}>\n            <Box>\n              <QuorumPicker />\n            </Box>\n            <Box mt={2}>\n              <AddressTypePicker />\n            </Box>\n            <Box mt={2}>\n              <NetworkPicker />\n            </Box>\n            <Box mt={2}>\n              <ClientPicker\n                publicNotes={\n                  <span>\n                    If you plan to use this address with your own bitcoind node\n                    you can import the address created here by switching for\n                    &quot;Public&quot; to &quot;Private&quot;. Otherwise no\n                    action is needed here.\n                  </span>\n                }\n                privateNotes={\n                  <div>\n                    <ImportAddressesButton\n                      addresses={[address]}\n                      client={client}\n                    />\n                  </div>\n                }\n              />\n            </Box>\n          </Grid>\n        </Grid>\n      </Box>\n    );\n  };\n\n  renderPublicKeyImporters = () => {\n    const { totalSigners } = this.props;\n    const publicKeyImporters = [];\n    for (\n      let publicKeyImporterNum = 1;\n      publicKeyImporterNum <= totalSigners;\n      publicKeyImporterNum += 1\n    ) {\n      publicKeyImporters.push(\n        <Box key={publicKeyImporterNum} mt={publicKeyImporterNum === 1 ? 0 : 2}>\n          <PublicKeyImporter number={publicKeyImporterNum} />\n        </Box>\n      );\n    }\n    return publicKeyImporters;\n  };\n}\n\nfunction mapStateToProps(state) {\n  return {\n    ...{ totalSigners: state.settings.totalSigners },\n    ...state.address,\n    client: state.client,\n  };\n}\n\nCreateAddress.propTypes = {\n  address: PropTypes.string,\n  totalSigners: PropTypes.number.isRequired,\n  client: PropTypes.shape(clientPropTypes).isRequired,\n};\n\nCreateAddress.defaultProps = {\n  address: \"\",\n};\n\nexport default connect(mapStateToProps)(CreateAddress);\n","export const START_TEST_SUITE_RUN = \"START_TEST_SUITE_RUN\";\nexport const SET_CURRENT_TEST_RUN = \"SET_CURRENT_TEST_RUN\";\n\nexport function startTestSuiteRun() {\n  return {\n    type: START_TEST_SUITE_RUN,\n  };\n}\n\nexport function setCurrentTestRun(runIndex) {\n  return {\n    type: SET_CURRENT_TEST_RUN,\n    value: runIndex,\n  };\n}\n","export const SET_KEYSTORE = \"SET_KEYSTORE\";\nexport const SET_KEYSTORE_NOTE = \"SET_KEYSTORE_NOTE\";\nexport const SET_KEYSTORE_STATUS = \"SET_KEYSTORE_STATUS\";\n\nexport function setKeystore(keystoreType, version) {\n  return {\n    type: SET_KEYSTORE,\n    keystoreType,\n    version,\n  };\n}\n\nexport function setKeystoreNote(text) {\n  return {\n    type: SET_KEYSTORE_NOTE,\n    value: text,\n  };\n}\n\nexport function setKeystoreStatus(status) {\n  return {\n    type: SET_KEYSTORE_STATUS,\n    value: status,\n  };\n}\n","export const START_TEST_RUN = \"START_TEST_RUN\";\nexport const END_TEST_RUN = \"END_TEST_RUN\";\nexport const RESET_TEST_RUN = \"RESET_TEST_RUN\";\nexport const SET_TEST_RUN_NOTE = \"SET_TEST_RUN_NOTE\";\n\nexport function startTestRun(testRunIndex) {\n  return {\n    type: START_TEST_RUN,\n    testRunIndex,\n  };\n}\n\nexport function endTestRun(testRunIndex, status, message) {\n  return {\n    type: END_TEST_RUN,\n    testRunIndex,\n    status,\n    message,\n  };\n}\n\nexport function resetTestRun(testRunIndex) {\n  return {\n    type: RESET_TEST_RUN,\n    testRunIndex,\n  };\n}\n\nexport function setTestRunNote(testRunIndex, text) {\n  return {\n    type: SET_TEST_RUN_NOTE,\n    testRunIndex,\n    note: text,\n  };\n}\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { PropTypes } from \"prop-types\";\n\nimport { TextField } from \"@material-ui/core\";\nimport { setKeystoreNote } from \"../../actions/keystoreActions\";\nimport { setTestRunNote } from \"../../actions/testRunActions\";\n\nconst KEYSTORE_MODE = \"keystore\";\nconst TEST_RUN_MODE = \"testRun\";\n\nclass NoteBase extends React.Component {\n  handleChange = (event) => {\n    const { setNote, mode, testRunIndex } = this.props;\n    const newNote = event.target.value;\n    if (mode === TEST_RUN_MODE) {\n      setNote(testRunIndex, newNote);\n    } else {\n      setNote(newNote);\n    }\n  };\n\n  render() {\n    const { note } = this.props;\n    return (\n      <TextField\n        name=\"notes\"\n        label=\"Notes\"\n        value={note}\n        onChange={this.handleChange}\n        multiline\n        fullWidth\n        rows={3}\n      />\n    );\n  }\n}\n\nNoteBase.propTypes = {\n  note: PropTypes.string.isRequired,\n  mode: PropTypes.string.isRequired,\n  setNote: PropTypes.func.isRequired,\n  testRunIndex: PropTypes.number,\n};\n\nNoteBase.defaultProps = {\n  testRunIndex: 0,\n};\n\nconst mapStateToKeystoreNoteProps = (state) => {\n  return {\n    note: state.keystore.note,\n    mode: KEYSTORE_MODE,\n  };\n};\n\nconst mapDispatchToKeystoreNoteProps = {\n  setNote: setKeystoreNote,\n};\n\nconst mapStateToTestRunNoteProps = (state) => {\n  return {\n    mode: TEST_RUN_MODE,\n    testRunIndex: state.testSuiteRun.currentTestRunIndex,\n    note:\n      state.testSuiteRun.testRuns[state.testSuiteRun.currentTestRunIndex].note,\n  };\n};\n\nconst mapDispatchToTestRunNoteProps = {\n  setNote: setTestRunNote,\n};\n\nconst KeystoreNote = connect(\n  mapStateToKeystoreNoteProps,\n  mapDispatchToKeystoreNoteProps\n)(NoteBase);\nconst TestRunNote = connect(\n  mapStateToTestRunNoteProps,\n  mapDispatchToTestRunNoteProps\n)(NoteBase);\n\nexport { KeystoreNote, TestRunNote };\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\nimport {\n  TREZOR,\n  LEDGER,\n  HERMIT,\n  COLDCARD,\n  PENDING,\n  ACTIVE,\n  INDIRECT_KEYSTORES,\n  GetMetadata,\n} from \"unchained-wallets\";\n\nimport {\n  Box,\n  Grid,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  TextField,\n  Button,\n} from \"@material-ui/core\";\nimport * as keystoreActions from \"../../actions/keystoreActions\";\nimport { setErrorNotification as setErrorNotificationAction } from \"../../actions/errorNotificationActions\";\n\nimport { KeystoreNote } from \"./Note\";\nimport InteractionMessages from \"../InteractionMessages\";\n\nconst NO_VERSION_DETECTION = [\"\", ...Object.values(INDIRECT_KEYSTORES)];\n\nclass KeystorePickerBase extends React.Component {\n  detectVersion = async () => {\n    const {\n      type,\n      setKeystore,\n      setKeystoreStatus,\n      setErrorNotification,\n    } = this.props;\n    setKeystoreStatus(ACTIVE);\n    try {\n      const result = await this.interaction().run();\n      if (result) {\n        setKeystore(type, result.spec);\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      setErrorNotification(e.message);\n    }\n    setKeystoreStatus(PENDING);\n  };\n\n  interaction = () => {\n    const { type } = this.props;\n    return GetMetadata({ keystore: type });\n  };\n\n  handleTypeChange = (event) => {\n    const { version, setKeystore } = this.props;\n    const newType = event.target.value;\n    setKeystore(newType, version);\n  };\n\n  handleVersionChange = (event) => {\n    const { type, setKeystore } = this.props;\n    const newVersion = event.target.value;\n    setKeystore(type, newVersion);\n  };\n\n  render() {\n    const { type, status, version } = this.props;\n    return (\n      <Box>\n        <Grid container spacing={2} justify=\"center\">\n          <Grid item md={4}>\n            <FormControl fullWidth>\n              <InputLabel id=\"keystore-select-label\">Type</InputLabel>\n              <Select\n                labelId=\"keystore-select-label\"\n                id=\"keystore-select\"\n                value={type}\n                onChange={this.handleTypeChange}\n              >\n                <MenuItem value=\"\">{\"< Select type >\"}</MenuItem>\n                <MenuItem value={TREZOR}>Trezor</MenuItem>\n                <MenuItem value={LEDGER}>Ledger</MenuItem>\n                <MenuItem value={COLDCARD}>Coldcard</MenuItem>\n                <MenuItem value={HERMIT}>Hermit</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n\n          <Grid item md={6}>\n            <TextField\n              name=\"version\"\n              fullWidth\n              label=\"Version\"\n              value={version}\n              disabled={type === \"\"}\n              onChange={this.handleVersionChange}\n            />\n          </Grid>\n\n          <Grid item md={2}>\n            <Button\n              disabled={\n                status === ACTIVE || NO_VERSION_DETECTION.includes(type)\n              }\n              onClick={this.detectVersion}\n            >\n              {status === ACTIVE ? \"Detecting...\" : \"Detect\"}\n            </Button>\n          </Grid>\n        </Grid>\n\n        {type && !NO_VERSION_DETECTION.includes(type) && (\n          <InteractionMessages\n            messages={this.interaction().messagesFor({ state: status })}\n          />\n        )}\n\n        <KeystoreNote />\n      </Box>\n    );\n  }\n}\n\nKeystorePickerBase.propTypes = {\n  setErrorNotification: PropTypes.func.isRequired,\n  setKeystore: PropTypes.func.isRequired,\n  setKeystoreStatus: PropTypes.func.isRequired,\n  status: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  version: PropTypes.string.isRequired,\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    ...state.keystore,\n  };\n};\n\nconst mapDispatchToProps = {\n  ...keystoreActions,\n  setErrorNotification: setErrorNotificationAction,\n};\n\nconst KeystorePicker = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(KeystorePickerBase);\n\nexport default KeystorePicker;\n","import { diffChars, diffArrays, diffJson } from \"diff\";\n\nconst SUCCESS = \"success\";\nconst FAILURE = \"failure\";\nconst ERROR = \"error\";\n\nclass Test {\n  static SUCCESS = SUCCESS;\n\n  static FAILURE = FAILURE;\n\n  static ERROR = ERROR;\n\n  // eslint-disable-next-line class-methods-use-this\n  postprocess(thing) {\n    return thing;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  interaction() {\n    throw Error(\"Define the `interaction` method in your subclass of `Test`.\");\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  matches(expected, actual) {\n    if (typeof expected === \"object\" && typeof actual === \"object\") {\n      return Object.keys(actual).every((key) => {\n        return expected[key] === actual[key];\n      });\n    }\n    return expected === actual;\n  }\n\n  constructor(params) {\n    this.params = params || {};\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  diff(expected, actual) {\n    if (typeof expected === \"string\" && typeof actual === \"string\") {\n      return diffChars(expected, actual);\n    }\n    if (typeof expected === \"object\" && typeof actual === \"object\") {\n      if (expected.length !== undefined && actual.length !== undefined) {\n        return diffArrays(expected, actual);\n      }\n      if (expected.length === undefined && actual.length === undefined) {\n        return diffJson(expected, actual);\n      }\n    }\n    return null;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  supports() {\n    return true;\n  }\n\n  name() {\n    return this.params.name;\n  }\n\n  description() {\n    return this.params.description;\n  }\n\n  expected() {\n    return this.params.expected;\n  }\n\n  async actual(data) {\n    return this.postprocess(\n      data ? this.interaction().parse(data) : this.interaction().run()\n    );\n  }\n\n  async run() {\n    try {\n      const actual = await this.actual();\n      return this.resolve(actual);\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      return { status: ERROR, message: e.message };\n    }\n  }\n\n  async runParse(data) {\n    try {\n      const actual = await this.actual(data);\n      // Both Coldcard responses include Objects\n      // but the xpub object includes a rootFingerprint\n      // while signatures only includes pubkeys and signatures\n      const sendToResolver = actual.rootFingerprint\n        ? {\n            // Either an xpub or a pubkey\n            pubkey: actual.pubkey,\n            xpub: actual.xpub || actual.tpub,\n            rootFingerprint: actual.rootFingerprint,\n          }\n        : Object.values(actual)[0];\n      return this.resolve(sendToResolver);\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      return { status: ERROR, message: e.message };\n    }\n  }\n\n  resolve(actual) {\n    const expected = this.expected();\n    if (this.matches(expected, actual)) {\n      return { status: SUCCESS };\n    }\n    return {\n      status: FAILURE,\n      expected,\n      actual,\n      diff: this.diff(expected, actual),\n    };\n  }\n}\n\nexport default Test;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport Bowser from \"bowser\";\nimport {\n  TREZOR,\n  LEDGER,\n  HERMIT,\n  COLDCARD,\n  PENDING,\n  ACTIVE,\n  VERSION as UNCHAINED_WALLETS_VERSION,\n} from \"unchained-wallets\";\n\nimport {\n  Grid,\n  Box,\n  Typography,\n  Card,\n  CardHeader,\n  CardContent,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Divider,\n  Tooltip,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport {\n  ThumbUp as SuccessIcon,\n  ThumbDown as FailureIcon,\n  Error as ErrorIcon,\n  Notes as NoteIcon,\n  MoreHoriz as PendingIcon,\n} from \"@material-ui/icons\";\nimport Test from \"../../tests/Test\";\n\nimport { setCurrentTestRun as setCurrentTestRunAction } from \"../../actions/testSuiteRunActions\";\n\nimport \"./TestSuiteRunSummary.css\";\n\nclass TestSuiteRunSummaryBase extends React.Component {\n  render = () => {\n    const { testSuiteRun, keystore } = this.props;\n    const environment = Bowser.getParser(window.navigator.userAgent);\n    return (\n      <Grid container direction=\"column\" spacing={3}>\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Summary\" />\n            <CardContent>\n              <dl>\n                <dt>OS:</dt>\n                <dd>\n                  {environment.getOSName()} {environment.getOSVersion()}\n                </dd>\n                <dt>Browser:</dt>\n                <dd>\n                  {environment.getBrowserName()}{\" \"}\n                  {environment.getBrowserVersion()}\n                </dd>\n                <dt>unchained-wallets:</dt>\n                <dd>\n                  v.\n                  {UNCHAINED_WALLETS_VERSION}\n                </dd>\n                {keystore.type && (\n                  <Box>\n                    <dt>Keystore:</dt>\n                    <dd>\n                      {this.keystoreName(keystore.type)} {keystore.version}\n                    </dd>\n                  </Box>\n                )}\n                {keystore.note && (\n                  <Box>\n                    <dt>Notes:</dt>\n                    <dd>{keystore.note}</dd>\n                  </Box>\n                )}\n              </dl>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item>\n          <Card>\n            <CardHeader\n              title=\"Tests\"\n              subheader={`${testSuiteRun.testRuns.length} Total`}\n            />\n            <CardContent>{this.renderTests()}</CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    );\n  };\n\n  renderTests = () => {\n    const { testSuiteRun, keystore } = this.props;\n    if (keystore.type === \"\") {\n      return <p>Choose a keystore type to generate a test suite...</p>;\n    }\n    return (\n      <Box>\n        <Typography variant=\"h6\">\n          <span className=\"TestSuiteRunSummary-success\">\n            {\n              testSuiteRun.testRuns.filter(\n                (testRun) => testRun.status === Test.SUCCESS\n              ).length\n            }{\" \"}\n            <small>SUCCESS</small>\n          </span>\n          &nbsp; / &nbsp;\n          <span className=\"TestSuiteRunSummary-failure\">\n            {\n              testSuiteRun.testRuns.filter(\n                (testRun) => testRun.status === Test.FAILURE\n              ).length\n            }{\" \"}\n            <small>FAIL</small>\n          </span>\n          &nbsp; / &nbsp;\n          <span className=\"TestSuiteRunSummary-error\">\n            {\n              testSuiteRun.testRuns.filter(\n                (testRun) => testRun.status === Test.ERROR\n              ).length\n            }{\" \"}\n            <small>ERROR</small>\n          </span>\n        </Typography>\n\n        <Divider />\n\n        <List\n          style={{ maxHeight: \"200px\", overflow: \"auto\" }}\n          dense\n          component=\"nav\"\n        >\n          {testSuiteRun.testRuns.map(this.renderTestRun)}\n        </List>\n      </Box>\n    );\n  };\n\n  renderTestRun = (testRun, i) => {\n    const { testSuiteRun } = this.props;\n    return (\n      <ListItem\n        selected={testSuiteRun.currentTestRunIndex === i}\n        button\n        key={i}\n        onClick={this.testRunChooser(i)}\n        disabled={!testSuiteRun.started}\n      >\n        {this.renderTestRunResult(testRun)}\n        <ListItemText>\n          {testRun.test.name()}\n          {testRun.status !== PENDING && testRun.status !== ACTIVE && (\n            <small>\n              &nbsp; (\n              {moment\n                .duration(testRun.endedAt.diff(testRun.startedAt))\n                .asSeconds()}\n              s)\n            </small>\n          )}\n        </ListItemText>\n        {testRun.note && (\n          <ListItemIcon>\n            <Tooltip title={testRun.note}>\n              <NoteIcon />\n            </Tooltip>\n          </ListItemIcon>\n        )}\n      </ListItem>\n    );\n  };\n\n  renderTestRunResult = (testRun) => {\n    switch (testRun.status) {\n      case PENDING:\n        return (\n          <ListItemIcon>\n            <PendingIcon className=\"TestSuiteRunSummary-pending\" />\n          </ListItemIcon>\n        );\n      case Test.SUCCESS:\n        return (\n          <ListItemIcon>\n            <SuccessIcon className=\"TestSuiteRunSummary-success\" />\n          </ListItemIcon>\n        );\n      case Test.FAILURE:\n        return (\n          <ListItemIcon>\n            <FailureIcon className=\"TestSuiteRunSummary-failure\" />\n          </ListItemIcon>\n        );\n      case Test.ERROR:\n        return (\n          <ListItemIcon>\n            <ErrorIcon className=\"TestSuiteRunSummary-error\" />\n          </ListItemIcon>\n        );\n      case ACTIVE:\n        return (\n          <ListItemIcon>\n            <CircularProgress className=\"TestSuiteRunSummary-active\" />\n          </ListItemIcon>\n        );\n      default:\n        return null;\n    }\n  };\n\n  testRunChooser = (testRunIndex) => {\n    const { setCurrentTestRun } = this.props;\n    return () => {\n      setCurrentTestRun(testRunIndex);\n    };\n  };\n\n  keystoreName = (type) => {\n    switch (type) {\n      case TREZOR:\n        return \"Trezor\";\n      case LEDGER:\n        return \"Ledger\";\n      case HERMIT:\n        return \"Hermit\";\n      case COLDCARD:\n        return \"Coldcard\";\n      default:\n        return \"\";\n    }\n  };\n}\n\nTestSuiteRunSummaryBase.propTypes = {\n  keystore: PropTypes.shape({\n    note: PropTypes.string,\n    type: PropTypes.string,\n    version: PropTypes.string,\n  }).isRequired,\n  testSuiteRun: PropTypes.shape({\n    currentTestRunIndex: PropTypes.number,\n    started: PropTypes.bool,\n    testRuns: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  setCurrentTestRun: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    keystore: state.keystore,\n    testSuiteRun: state.testSuiteRun,\n  };\n};\n\nconst mapDispatchToProps = {\n  setCurrentTestRun: setCurrentTestRunAction,\n};\n\nconst TestSuiteRunSummary = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TestSuiteRunSummaryBase);\n\nexport default TestSuiteRunSummary;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport {\n  PENDING,\n  ACTIVE,\n  HERMIT,\n  COLDCARD,\n  INDIRECT_KEYSTORES,\n} from \"unchained-wallets\";\nimport {\n  Box,\n  Typography,\n  Card,\n  CardHeader,\n  CardContent,\n  CardActions,\n  Button,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport {\n  ThumbUp as SuccessIcon,\n  ThumbDown as FailureIcon,\n  Error as ErrorIcon,\n} from \"@material-ui/icons\";\nimport moment from \"moment\";\nimport Test from \"../../tests/Test\";\nimport * as testRunActions from \"../../actions/testRunActions\";\nimport * as errorNotificationActions from \"../../actions/errorNotificationActions\";\nimport InteractionMessages from \"../InteractionMessages\";\nimport { TestRunNote } from \"./Note\";\nimport { HermitReader, HermitDisplayer } from \"../Hermit\";\nimport {\n  ColdcardJSONReader,\n  ColdcardPSBTReader,\n  ColdcardSigningButtons,\n} from \"../Coldcard\";\nimport \"./TestRun.css\";\nimport { downloadFile } from \"../../utils\";\n\nconst SPACEBAR_CODE = 32;\n\nclass TestRunBase extends React.Component {\n  componentDidMount = () => {\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n  };\n\n  handleKeyDown = (event) => {\n    const { status, isLastTest, nextTest } = this.props;\n    if (event.keyCode !== SPACEBAR_CODE) {\n      return;\n    }\n    if (event.target.tagName.toLowerCase() === \"textarea\") {\n      return;\n    }\n    event.preventDefault();\n    if (status === ACTIVE) {\n      return;\n    }\n    if (status === PENDING) {\n      this.start();\n    } else if (!isLastTest) {\n      nextTest();\n    }\n  };\n\n  handleDownloadPSBTClick = () => {\n    const { test } = this.props;\n    const interaction = test.interaction();\n    const nameBits = test.name().split(\" \");\n    const body = interaction.request().toBase64();\n    const timestamp = moment().format(\"HHmm\");\n    const filename = `${timestamp}-${nameBits[2]}-${nameBits[1][0]}.psbt`;\n    downloadFile(body, filename);\n  };\n\n  handledDownloadWalletConfigClick = () => {\n    const { test } = this.props;\n    const nameBits = test.name().split(\" \");\n    const name = `${nameBits[2].toLowerCase()}-${nameBits[1][0]}`;\n    // FIXME - need to know firmware version and then set P2WSH-P2SH vs P2SH-P2WSH appropriately\n    //   leaving it as P2WSH-P2SH for now.\n    let output = `# Coldcard Multisig setup file for test suite\n#\nName: ${name}\nPolicy: 2 of 2\nFormat: ${test.params.format.includes(\"-\") ? \"P2WSH-P2SH\" : test.params.format}\nDerivation: ${test.params.derivation}\n\n`;\n    // We need to loop over xpubs and output `xfp: xpub` for each\n    const xpubs = test.params.extendedPublicKeys.map(\n      (xpub) => `${xpub.rootFingerprint}: ${xpub.base58String}`\n    );\n    output += xpubs.join(\"\\r\\n\");\n    output += \"\\r\\n\";\n    const filename = `wc-${name}.txt`;\n    downloadFile(output, filename);\n  };\n\n  render = () => {\n    const { test, testRunIndex, status, keystore } = this.props;\n    if (!test) {\n      return (\n        <Box>\n          <p>No test selected.</p>\n        </Box>\n      );\n    }\n    return (\n      <Box>\n        <Card>\n          <CardHeader\n            title={test.name()}\n            subheader={`Test ${testRunIndex + 1}`}\n          />\n          <CardContent>\n            {test.description()}\n            {keystore.type === COLDCARD && !test.unsignedTransaction && (\n              <Box align=\"center\">\n                <ColdcardJSONReader\n                  interaction={test.interaction()}\n                  onReceive={this.startParse}\n                  onStart={this.start}\n                  setError={this.reset}\n                  isTest\n                />\n              </Box>\n            )}\n            {keystore.type === COLDCARD && test.unsignedTransaction && (\n              <Box align=\"center\" style={{ marginTop: \"2em\" }}>\n                <ColdcardSigningButtons\n                  handlePSBTDownloadClick={this.handleDownloadPSBTClick}\n                  handleWalletConfigDownloadClick={\n                    this.handledDownloadWalletConfigClick\n                  }\n                />\n                <ColdcardPSBTReader\n                  interaction={test.interaction()}\n                  onReceivePSBT={this.startParse}\n                  onStart={this.start}\n                  setError={this.reset}\n                  fileType=\"PSBT\"\n                  validFileFormats=\".psbt\"\n                />\n              </Box>\n            )}\n            {this.renderInteractionMessages()}\n            {status === PENDING &&\n              !Object.values(INDIRECT_KEYSTORES).includes(keystore.type) && (\n                <Box align=\"center\">\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={this.start}\n                  >\n                    Start Test\n                  </Button>\n                </Box>\n              )}\n            {keystore.type === HERMIT &&\n              test.interaction().displayer &&\n              status === PENDING && (\n                <Box align=\"center\">\n                  <HermitDisplayer\n                    width={400}\n                    string={test.interaction().request()}\n                  />\n                </Box>\n              )}\n            {keystore.type === HERMIT && !this.testComplete() && (\n              <Box>\n                <HermitReader\n                  onStart={this.start}\n                  onSuccess={this.resolve}\n                  onClear={this.reset}\n                  startText=\"Scan Hermit Response\"\n                  interaction={test.interaction()}\n                />\n              </Box>\n            )}\n            {this.testComplete() && this.renderResult()}\n\n            <TestRunNote />\n          </CardContent>\n          <CardActions>\n            {status === ACTIVE && (\n              <Button disabled>\n                <CircularProgress />\n                &nbsp; Running test...\n              </Button>\n            )}\n            {this.testComplete() && (\n              <Button color=\"secondary\" onClick={this.reset}>\n                Reset Test\n              </Button>\n            )}\n          </CardActions>\n        </Card>\n      </Box>\n    );\n  };\n\n  testComplete = () => {\n    const { status } = this.props;\n    return (\n      status === Test.SUCCESS ||\n      status === Test.ERROR ||\n      status === Test.FAILURE\n    );\n  };\n\n  renderInteractionMessages = () => {\n    const { status, test } = this.props;\n    if (status === PENDING || status === ACTIVE) {\n      return (\n        <InteractionMessages\n          excludeCodes={[\"hermit.command\"]}\n          messages={test.interaction().messagesFor({ state: status })}\n        />\n      );\n    }\n    return null;\n  };\n\n  renderResult = () => {\n    const { status, message } = this.props;\n    switch (status) {\n      case Test.SUCCESS:\n        return (\n          <Box mt={2} align=\"center\">\n            <Typography variant=\"h5\" className=\"TestRun-success\">\n              <SuccessIcon />\n              &nbsp; Test passed\n            </Typography>\n          </Box>\n        );\n      case Test.FAILURE:\n        return (\n          <Box mt={2}>\n            <Box align=\"center\">\n              <Typography variant=\"h5\" className=\"TestRun-failure\">\n                <FailureIcon />\n                &nbsp; Test failed\n              </Typography>\n            </Box>\n            {message}\n          </Box>\n        );\n      case Test.ERROR:\n        return (\n          <Box mt={2}>\n            <Box align=\"center\">\n              <Typography variant=\"h5\" className=\"TestRun-error\">\n                <ErrorIcon />\n                &nbsp; Test error\n              </Typography>\n            </Box>\n            {message}\n          </Box>\n        );\n      default:\n        return null;\n    }\n  };\n\n  start = async () => {\n    const { test, keystore, testRunIndex, startTestRun } = this.props;\n    startTestRun(testRunIndex);\n    if (keystore.type === HERMIT) {\n      return;\n    }\n    const result = await test.run();\n    this.handleResult(result);\n  };\n\n  startParse = async (data) => {\n    const { test, testRunIndex, startTestRun } = this.props;\n    startTestRun(testRunIndex);\n    const result = await test.runParse(data);\n    this.handleResult(result);\n  };\n\n  resolve = (actual) => {\n    const { test } = this.props;\n    const result = test.resolve(test.postprocess(actual));\n    this.handleResult(result);\n  };\n\n  handleResult = (result) => {\n    const { testRunIndex, endTestRun, setErrorNotification } = this.props;\n    if (result.status === Test.ERROR) {\n      setErrorNotification(result.message);\n    }\n    endTestRun(testRunIndex, result.status, this.formatMessage(result));\n  };\n\n  reset = () => {\n    const { testRunIndex, resetTestRun } = this.props;\n    resetTestRun(testRunIndex);\n  };\n\n  formatMessage = (result) => {\n    switch (result.status) {\n      case Test.FAILURE:\n        return (\n          <Box>\n            <dl>\n              <dt>Expected:</dt>\n              <dd>\n                <code className=\"TestRun-wrap\">\n                  {this.formatOutput(result.expected)}\n                </code>\n              </dd>\n              <dt>Actual:</dt>\n              <dd>\n                <code className=\"TestRun-wrap\">\n                  {this.formatOutput(result.actual)}\n                </code>\n              </dd>\n              {result.diff && (\n                <div>\n                  <dt>Diff:</dt>\n                  <dd>\n                    <code className=\"TestRun-wrap\">\n                      {result.diff.map(this.formatDiffSegment)}\n                    </code>\n                  </dd>\n                </div>\n              )}\n            </dl>\n          </Box>\n        );\n      case Test.ERROR:\n        return <code>{result.message}</code>;\n      default:\n        return \"\";\n    }\n  };\n\n  formatOutput = (output) => {\n    switch (typeof output) {\n      case \"object\":\n        return JSON.stringify(output);\n      case \"string\":\n      case \"number\":\n        return output;\n      default:\n        return \"Did not recognize output type\";\n    }\n  };\n\n  formatDiffSegment = (segment, i) => {\n    return (\n      <span\n        key={i}\n        className={`TestRun-diff-segment-${this.diffSegmentClass(segment)}`}\n      >\n        {segment.value}\n      </span>\n    );\n  };\n\n  diffSegmentClass = (segment) => {\n    if (segment.added) {\n      return \"added\";\n    }\n    if (segment.removed) {\n      return \"removed\";\n    }\n    return \"common\";\n  };\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    ...{ keystore: state.keystore },\n    ...(state.testSuiteRun.testRuns[ownProps.testRunIndex] || {}),\n    ...{ testRunIndex: ownProps.testRunIndex },\n  };\n};\n\nconst mapDispatchToProps = {\n  ...testRunActions,\n  ...errorNotificationActions,\n};\n\nconst TestRun = connect(mapStateToProps, mapDispatchToProps)(TestRunBase);\n\nTestRunBase.propTypes = {\n  endTestRun: PropTypes.func.isRequired,\n  isLastTest: PropTypes.bool.isRequired,\n  keystore: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n  message: PropTypes.oneOfType([PropTypes.string, PropTypes.shape({})])\n    .isRequired,\n  nextTest: PropTypes.func.isRequired,\n  resetTestRun: PropTypes.func.isRequired,\n  testRunIndex: PropTypes.number.isRequired,\n  test: PropTypes.shape({\n    name: PropTypes.func.isRequired,\n    description: PropTypes.func.isRequired,\n    interaction: PropTypes.func.isRequired,\n    params: PropTypes.shape({\n      format: PropTypes.string,\n      derivation: PropTypes.string,\n      extendedPublicKeys: PropTypes.array,\n    }),\n    run: PropTypes.func.isRequired,\n    runParse: PropTypes.func.isRequired,\n    resolve: PropTypes.func.isRequired,\n    postprocess: PropTypes.func.isRequired,\n    unsignedTransaction: PropTypes.func,\n  }),\n  setErrorNotification: PropTypes.func.isRequired,\n  startTestRun: PropTypes.func.isRequired,\n  status: PropTypes.string.isRequired,\n};\n\nTestRunBase.defaultProps = {\n  test: {\n    unsignedTransaction: null,\n    params: {},\n  },\n};\n\nexport default TestRun;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { TEST_FIXTURES } from \"unchained-bitcoin\";\nimport { Grid } from \"@material-ui/core\";\nimport { COLDCARD } from \"unchained-wallets\";\nimport PropTypes from \"prop-types\";\n\nconst { bip39Phrase } = TEST_FIXTURES.keys.open_source;\n\nclass SeedBase extends React.Component {\n  static renderSeedWord(word, i) {\n    return (\n      <li key={i}>\n        <code>{word}</code>\n      </li>\n    );\n  }\n\n  render() {\n    const { keystore } = this.props;\n    return (\n      <>\n        <Grid container>\n          <Grid item md={3}>\n            <ol>{bip39Phrase.slice(0, 6).map(SeedBase.renderSeedWord)}</ol>\n          </Grid>\n          <Grid item md={3}>\n            <ol start={7}>\n              {bip39Phrase.slice(6, 12).map(SeedBase.renderSeedWord)}\n            </ol>\n          </Grid>\n          <Grid item md={3}>\n            <ol start={13}>\n              {bip39Phrase.slice(12, 18).map(SeedBase.renderSeedWord)}\n            </ol>\n          </Grid>\n          <Grid item md={3}>\n            <ol start={19}>\n              {bip39Phrase.slice(18, 24).map(SeedBase.renderSeedWord)}\n            </ol>\n          </Grid>\n        </Grid>\n        {keystore && keystore.type === COLDCARD && (\n          <Grid style={{ marginTop: \"2em\", marginBottom: \"2em\" }}>\n            If using the simulator, here&apos;s a handy command with the same\n            seed phrase:\n            <br />\n            <code>\n              ./simulator.py --seed &apos;{bip39Phrase.join(\" \")}&apos;\n            </code>\n          </Grid>\n        )}\n      </>\n    );\n  }\n}\n\nSeedBase.propTypes = {\n  keystore: PropTypes.shape({\n    note: PropTypes.string,\n    type: PropTypes.string,\n    status: PropTypes.string,\n    version: PropTypes.string,\n  }),\n};\n\nSeedBase.defaultProps = {\n  keystore: null,\n};\n\nconst mapStateToProps = () => {\n  return {};\n};\n\nconst mapDispatchToProps = {};\n\nconst Seed = connect(mapStateToProps, mapDispatchToProps)(SeedBase);\n\nexport default Seed;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\nimport { PENDING, ACTIVE } from \"unchained-wallets\";\n\nimport {\n  Grid,\n  Box,\n  Card,\n  CardHeader,\n  CardContent,\n  Button,\n  LinearProgress,\n} from \"@material-ui/core\";\nimport { ArrowBack, ArrowForward } from \"@material-ui/icons\";\nimport * as testSuiteRunActions from \"../../actions/testSuiteRunActions\";\nimport KeystorePicker from \"./KeystorePicker\";\nimport TestSuiteRunSummary from \"./TestSuiteRunSummary\";\nimport TestRun from \"./TestRun\";\nimport Seed from \"./Seed\";\n\nconst SPACEBAR_CODE = 32;\nconst LEFT_ARROW_CODE = 37;\nconst UP_ARROW_CODE = 38;\nconst RIGHT_ARROW_CODE = 39;\nconst DOWN_ARROW_CODE = 40;\n\nclass TestSuiteRunBase extends React.Component {\n  componentDidMount = () => {\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n  };\n\n  currentTestIsActive = () => {\n    const { testSuiteRun } = this.props;\n    if (!testSuiteRun.started) {\n      return false;\n    }\n    const test = testSuiteRun.testRuns[testSuiteRun.currentTestRunIndex];\n    if (!test) {\n      return false;\n    }\n    return test.status === ACTIVE;\n  };\n\n  handleKeyDown = (event) => {\n    const { testSuiteRun } = this.props;\n    if (testSuiteRun.started) {\n      if (this.currentTestIsActive()) {\n        return;\n      }\n      switch (event.keyCode) {\n        case LEFT_ARROW_CODE:\n          if (!this.isFirstTest()) {\n            this.previousTest();\n          }\n          break;\n        case UP_ARROW_CODE:\n          if (!this.isFirstTest()) {\n            this.previousTest();\n          }\n          break;\n        case RIGHT_ARROW_CODE:\n          if (!this.isLastTest()) {\n            this.nextTest();\n          }\n          break;\n        case DOWN_ARROW_CODE:\n          if (!this.isLastTest()) {\n            this.nextTest();\n          }\n          break;\n        default:\n          break;\n      }\n    } else {\n      if (event.keyCode !== SPACEBAR_CODE) {\n        return;\n      }\n      const tag = event.target.tagName.toLowerCase();\n      if (tag === \"textarea\" || tag === \"input\") {\n        return;\n      }\n      event.preventDefault();\n      if (this.startDisabled()) {\n        return;\n      }\n      this.start();\n    }\n  };\n\n  render = () => {\n    const { testSuiteRun } = this.props;\n    return (\n      <Box mt={2}>\n        {testSuiteRun.started && (\n          <Box mt={2} mb={2}>\n            <LinearProgress\n              variant=\"determinate\"\n              value={\n                100 *\n                (testSuiteRun.testRuns.filter(\n                  (testRun) =>\n                    testRun.status !== PENDING && testRun.status !== ACTIVE\n                ).length /\n                  testSuiteRun.testRuns.length)\n              }\n            />\n          </Box>\n        )}\n        <Grid container spacing={3}>\n          <Grid item md={4}>\n            <TestSuiteRunSummary />\n          </Grid>\n          <Grid item md={8}>\n            {this.renderBody()}\n          </Grid>\n        </Grid>\n      </Box>\n    );\n  };\n\n  renderSetup = () => {\n    const { keystore } = this.props;\n    return (\n      <Grid container direction=\"column\" spacing={3}>\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Choose Keystore\" />\n            <CardContent>\n              <KeystorePicker />\n              <Box align=\"center\" mt={2}>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  disabled={this.startDisabled()}\n                  onClick={this.start}\n                  type=\"submit\"\n                >\n                  Begin Test Suite\n                </Button>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item>\n          <Card>\n            <CardHeader title=\"Keystore Setup\" />\n            <CardContent>\n              <p>\n                Ensure your keystore has been initialized with the following\n                seed:\n              </p>\n              <Seed keystore={keystore} />\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    );\n  };\n\n  renderBody = () => {\n    const { testSuiteRun } = this.props;\n    if (testSuiteRun.started) {\n      return (\n        <Box>\n          <TestRun\n            isLastTest={this.isLastTest()}\n            nextTest={this.nextTest}\n            testRunIndex={testSuiteRun.currentTestRunIndex}\n          />\n          <Box mt={2}>\n            <Grid container justify=\"space-between\">\n              <Grid item>\n                <Button\n                  disabled={this.isFirstTest() || this.currentTestIsActive()}\n                  onClick={this.previousTest}\n                >\n                  <ArrowBack /> &nbsp; Previous\n                </Button>\n              </Grid>\n              <Grid item>\n                <Button\n                  disabled={this.isLastTest() || this.currentTestIsActive()}\n                  onClick={this.nextTest}\n                >\n                  Next &nbsp; <ArrowForward />\n                </Button>\n              </Grid>\n            </Grid>\n          </Box>\n        </Box>\n      );\n    }\n    return this.renderSetup();\n  };\n\n  start = () => {\n    const { startTestSuiteRun } = this.props;\n    startTestSuiteRun();\n  };\n\n  startDisabled = () => {\n    const { testSuiteRun, keystore } = this.props;\n    return (\n      keystore.type === \"\" ||\n      keystore.status === ACTIVE ||\n      testSuiteRun.started ||\n      testSuiteRun.testRuns.length === 0\n    );\n  };\n\n  isFirstTest = () => {\n    const { testSuiteRun } = this.props;\n    return testSuiteRun.currentTestRunIndex === 0;\n  };\n\n  isLastTest = () => {\n    const { testSuiteRun } = this.props;\n    return (\n      testSuiteRun.currentTestRunIndex === testSuiteRun.testRuns.length - 1\n    );\n  };\n\n  previousTest = () => {\n    const { testSuiteRun, setCurrentTestRun } = this.props;\n    if (testSuiteRun.currentTestRunIndex < 1) {\n      return;\n    }\n    setCurrentTestRun(testSuiteRun.currentTestRunIndex - 1);\n  };\n\n  nextTest = () => {\n    const { testSuiteRun, setCurrentTestRun } = this.props;\n    if (testSuiteRun.currentTestRunIndex === testSuiteRun.testRuns.length - 1) {\n      return;\n    }\n    setCurrentTestRun(testSuiteRun.currentTestRunIndex + 1);\n  };\n}\n\nTestSuiteRunBase.propTypes = {\n  keystore: PropTypes.shape({\n    note: PropTypes.string,\n    type: PropTypes.string,\n    status: PropTypes.string,\n    version: PropTypes.string,\n  }).isRequired,\n  setCurrentTestRun: PropTypes.func.isRequired,\n  startTestSuiteRun: PropTypes.func.isRequired,\n  testSuiteRun: PropTypes.shape({\n    currentTestRunIndex: PropTypes.number,\n    started: PropTypes.bool,\n    testRuns: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    keystore: state.keystore,\n    testSuiteRun: state.testSuiteRun,\n  };\n};\n\nconst mapDispatchToProps = {\n  ...testSuiteRunActions,\n};\n\nconst TestSuiteRun = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TestSuiteRunBase);\n\nexport default TestSuiteRun;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport {\n  P2SH,\n  P2SH_P2WSH,\n  P2WSH,\n  generateMultisigFromHex,\n  validateHex,\n  multisigRequiredSigners,\n  multisigTotalSigners,\n} from \"unchained-bitcoin\";\nimport {\n  Box,\n  Grid,\n  Card,\n  CardHeader,\n  CardContent,\n  Button,\n  TextField,\n  FormHelperText,\n} from \"@material-ui/core\";\nimport { fetchAddressUTXOs } from \"../../blockchain\";\n\n// Components\nimport MultisigDetails from \"../MultisigDetails\";\nimport ImportAddressesButton from \"../ImportAddressesButton\";\n\n// Actions\nimport { setFrozen as setFrozenAction } from \"../../actions/settingsActions\";\nimport {\n  choosePerformSpend as chosePerformSpendAction,\n  setRequiredSigners as setRequiredSignersAction,\n  setTotalSigners as setTotalSignersAction,\n  setInputs as setInputsAction,\n} from \"../../actions/transactionActions\";\nimport {\n  chooseConfirmOwnership as chooseConfirmOwnershipAction,\n  setOwnershipMultisig as setOwnershipMultisigAction,\n} from \"../../actions/ownershipActions\";\n\nclass ScriptEntry extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      scriptHex: \"\",\n      scriptError: \"\",\n      fetchUTXOsError: \"\",\n      fetchedUTXOs: false,\n    };\n  }\n\n  disabled = () => {};\n\n  hasScriptError = () => {\n    const { scriptError } = this.state;\n    return scriptError !== \"\";\n  };\n\n  hasFetchUTXOsError = () => {\n    const { fetchUTXOsError } = this.state;\n    return fetchUTXOsError !== \"\";\n  };\n\n  hasError = () => this.hasScriptError() || this.hasFetchUTXOsError();\n\n  //\n  // Script\n  //\n\n  scriptName = () => {\n    const { addressType } = this.props;\n    switch (addressType) {\n      case P2SH:\n        return \"redeem\";\n      case P2SH_P2WSH:\n        return \"witness\";\n      case P2WSH:\n        return \"witness\";\n      default:\n        return null;\n    }\n  };\n\n  scriptTitle = () => {\n    const scriptName = this.scriptName();\n    return scriptName.charAt(0).toUpperCase() + scriptName.substring(1);\n  };\n\n  handleScriptChange = (event) => {\n    const scriptHex = event.target.value;\n    let scriptError = \"\";\n\n    if (scriptHex === \"\") {\n      scriptError = `${this.scriptTitle()} script cannot be blank.`;\n    }\n\n    if (\n      scriptError === \"\" &&\n      (scriptHex.includes(\"\\n\") ||\n        scriptHex.includes(\"\\t\") ||\n        scriptHex.includes(\" \"))\n    ) {\n      scriptError = `${this.scriptTitle()} script should not contain spaces, tabs, or newlines.`;\n    }\n\n    if (scriptError === \"\") {\n      const hexError = validateHex(scriptHex);\n      if (hexError !== \"\") {\n        scriptError = `${this.scriptTitle()} script is not valid hex.`;\n      }\n    }\n\n    if (scriptHex !== \"\" && scriptError === \"\") {\n      try {\n        this.generateMultisig(scriptHex);\n      } catch (parseError) {\n        // eslint-disable-next-line no-console\n        console.error(parseError);\n        scriptError = `Failed to parse ${this.scriptName()} script.`;\n      }\n    }\n\n    this.setState({\n      scriptHex,\n      scriptError,\n      fetchUTXOsError: \"\",\n      fetchedUTXOs: false,\n    });\n  };\n\n  generateMultisig = (newScriptHex) => {\n    const { network, addressType } = this.props;\n    const { scriptHex } = this.state;\n    let multisigScriptHex = scriptHex;\n    if (newScriptHex) multisigScriptHex = newScriptHex;\n\n    return generateMultisigFromHex(network, addressType, multisigScriptHex);\n  };\n\n  //\n  // Details\n  //\n\n  renderDetails = () => {\n    const { fetchUTXOsError } = this.state;\n    const { chosePerformSpend, choseConfirmOwnership, client } = this.props;\n    const multisig = this.generateMultisig();\n    const buttonsDisabled = chosePerformSpend || choseConfirmOwnership;\n    return (\n      <div>\n        <MultisigDetails multisig={multisig} />\n        <Box mt={2}>\n          <Grid container spacing={3}>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                size=\"large\"\n                onClick={this.performSpend}\n                disabled={buttonsDisabled}\n              >\n                Spend from this address\n              </Button>\n            </Grid>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                size=\"large\"\n                onClick={this.confirmOwnership}\n                disabled={buttonsDisabled}\n              >\n                Confirm ownership\n              </Button>\n            </Grid>\n          </Grid>\n          <FormHelperText error>{fetchUTXOsError}</FormHelperText>\n        </Box>\n        {client.type === \"private\" && (\n          <Box mt={2}>\n            <ImportAddressesButton\n              addresses={[multisig.address]}\n              client={client}\n            />\n          </Box>\n        )}\n      </div>\n    );\n  };\n\n  //\n  // Perform Spend\n  //\n\n  performSpend = async () => {\n    const {\n      setRequiredSigners,\n      setTotalSigners,\n      setInputs,\n      setFrozen,\n      choosePerformSpend,\n    } = this.props;\n    const multisig = this.generateMultisig();\n    const fetchUTXOsResult = await this.fetchUTXOs(multisig);\n    if (fetchUTXOsResult) {\n      const { utxos, balanceSats } = fetchUTXOsResult;\n      let fetchUTXOsError = \"\";\n      if (balanceSats.isLessThanOrEqualTo(0)) {\n        fetchUTXOsError = \"This address has a zero balance.\";\n      }\n      this.setState({\n        fetchedUTXOs: true,\n        fetchUTXOsError,\n      });\n      if (fetchUTXOsError === \"\") {\n        // transaction methods expect inputs to have a multisig prop\n        // that provides input info such as address\n        const inputs = utxos.map((utxo) => {\n          const input = { ...utxo, multisig };\n          return input;\n        });\n        setInputs(inputs);\n        setRequiredSigners(multisigRequiredSigners(multisig));\n        setTotalSigners(multisigTotalSigners(multisig));\n        setFrozen(true);\n        choosePerformSpend();\n      }\n    } else {\n      this.setState({\n        fetchedUTXOs: false,\n        fetchUTXOsError: \"Failed to fetch UTXOs.\",\n      });\n    }\n  };\n\n  fetchUTXOs = async (multisig) => {\n    const { network, client } = this.props;\n    const addressData = await fetchAddressUTXOs(\n      multisig.address,\n      network,\n      client\n    );\n\n    if (addressData && addressData.utxos && addressData.utxos.length)\n      return addressData;\n\n    return false;\n  };\n\n  //\n  // Confirm Ownership\n  //\n\n  confirmOwnership = () => {\n    const {\n      chooseConfirmOwnership,\n      setOwnershipMultisig,\n      setFrozen,\n    } = this.props;\n    setOwnershipMultisig(this.generateMultisig());\n    chooseConfirmOwnership();\n    setFrozen(true);\n  };\n\n  //\n  // Render\n  //\n  render() {\n    const { scriptHex, scriptError, fetchedUTXOs } = this.state;\n\n    return (\n      <Card>\n        <CardHeader title={`Enter ${this.scriptTitle()} Script`} />\n        <CardContent>\n          <form>\n            <TextField\n              fullWidth\n              multiline\n              autoFocus\n              variant=\"outlined\"\n              label={`${this.scriptTitle()} Script`}\n              value={scriptHex}\n              rows={5}\n              onChange={this.handleScriptChange}\n              disabled={fetchedUTXOs && !this.hasFetchUTXOsError()}\n              helperText={scriptError}\n              error={scriptError !== \"\"}\n            />\n          </form>\n\n          {scriptHex !== \"\" && !this.hasScriptError() ? (\n            this.renderDetails()\n          ) : (\n            <p>\n              Enter a valid {this.scriptName()} script to generate an address to\n              spend funds from.\n            </p>\n          )}\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nScriptEntry.propTypes = {\n  addressType: PropTypes.string.isRequired,\n  choosePerformSpend: PropTypes.func.isRequired,\n  chosePerformSpend: PropTypes.bool.isRequired,\n  choseConfirmOwnership: PropTypes.bool.isRequired,\n  chooseConfirmOwnership: PropTypes.func.isRequired,\n  client: PropTypes.shape({\n    type: PropTypes.string,\n  }).isRequired,\n  network: PropTypes.string.isRequired,\n  setFrozen: PropTypes.func.isRequired,\n  setInputs: PropTypes.func.isRequired,\n  setOwnershipMultisig: PropTypes.func.isRequired,\n  setRequiredSigners: PropTypes.func.isRequired,\n  setTotalSigners: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.settings,\n    ...{ client: state.client },\n    ...{\n      choseConfirmOwnership: state.spend.ownership.chosen,\n      chosePerformSpend: state.spend.transaction.chosen,\n    },\n  };\n}\n\nconst mapDispatchToProps = {\n  choosePerformSpend: chosePerformSpendAction,\n  setInputs: setInputsAction,\n  setTotalSigners: setTotalSignersAction,\n  setRequiredSigners: setRequiredSignersAction,\n  chooseConfirmOwnership: chooseConfirmOwnershipAction,\n  setOwnershipMultisig: setOwnershipMultisigAction,\n  setFrozen: setFrozenAction,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScriptEntry);\n","export const CHOOSE_CONFIRM_OWNERSHIP = \"CHOOSE_CONFIRM_OWNERSHIP\";\nexport const SET_OWNERSHIP_MULTISIG = \"SET_OWNERSHIP_MULTISIG\";\nexport const RESET_PUBLIC_KEY_IMPORTER = \"RESET_PUBLIC_KEY_IMPORTER\";\nexport const RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH =\n  \"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_PUBLIC_KEY_IMPORTER_BIP32_PATH =\n  \"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH\";\nexport const SET_PUBLIC_KEY_IMPORTER_METHOD = \"SET_PUBLIC_KEY_IMPORTER_METHOD\";\nexport const SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY =\n  \"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY\";\n\nexport function chooseConfirmOwnership() {\n  return {\n    type: CHOOSE_CONFIRM_OWNERSHIP,\n  };\n}\n\nexport function setOwnershipMultisig(value) {\n  return {\n    type: SET_OWNERSHIP_MULTISIG,\n    value,\n  };\n}\n\nexport function resetPublicKeyImporter() {\n  return {\n    type: RESET_PUBLIC_KEY_IMPORTER,\n  };\n}\n\nexport function resetPublicKeyImporterBIP32Path() {\n  return {\n    type: RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  };\n}\n\nexport function setPublicKeyImporterBIP32Path(value) {\n  return {\n    type: SET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n    value,\n  };\n}\n\nexport function setPublicKeyImporterMethod(value) {\n  return {\n    type: SET_PUBLIC_KEY_IMPORTER_METHOD,\n    value,\n  };\n}\n\nexport function setPublicKeyImporterPublicKey(value) {\n  return {\n    type: SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY,\n    value,\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { validatePublicKey, validateBIP32Path } from \"unchained-bitcoin\";\nimport { TREZOR, LEDGER, HERMIT } from \"unchained-wallets\";\n\n// Components\nimport CheckIcon from \"@material-ui/icons/Check\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport { styled } from \"@material-ui/core/styles\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  Select,\n  MenuItem,\n  InputLabel,\n  FormControl,\n  Button,\n  Typography,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from \"@material-ui/core\";\nimport HardwareWalletPublicKeyImporter from \"../CreateAddress/HardwareWalletPublicKeyImporter\";\nimport HermitPublicKeyImporter from \"../CreateAddress/HermitPublicKeyImporter\";\n\n// Actions\nimport {\n  resetPublicKeyImporter,\n  resetPublicKeyImporterBIP32Path,\n  setPublicKeyImporterBIP32Path,\n  setPublicKeyImporterMethod,\n  setPublicKeyImporterPublicKey,\n} from \"../../actions/ownershipActions\";\n\nimport \"react-table/react-table.css\";\n\nclass ConfirmOwnership extends React.Component {\n  titleRef = React.createRef();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      disableChangeMethod: false,\n    };\n  }\n\n  componentDidMount = () => {\n    this.resetBIP32Path();\n    this.scrollToTitle();\n  };\n\n  componentDidUpdate = () => {\n    this.scrollToTitle();\n  };\n\n  scrollToTitle = () => {\n    this.titleRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  //\n  // Method\n  //\n\n  handleMethodChange = (event) => {\n    const { setMethod } = this.props;\n    setMethod(event.target.value);\n    this.reset();\n  };\n\n  disableChangeMethod = () => {\n    this.setState({ disableChangeMethod: true });\n  };\n\n  enableChangeMethod = () => {\n    this.setState({ disableChangeMethod: false });\n  };\n\n  //\n  // State\n  //\n\n  reset = () => {\n    const { reset } = this.props;\n    reset();\n  };\n\n  //\n  // BIP32 Path\n  //\n\n  resetBIP32Path = () => {\n    const { resetBIP32Path } = this.props;\n    resetBIP32Path();\n  };\n\n  validateAndSetBIP32Path = (bip32Path, callback, errback, options) => {\n    const { setBIP32Path } = this.props;\n    const error = validateBIP32Path(bip32Path, options);\n    setBIP32Path(bip32Path);\n    if (error) {\n      errback(error);\n    } else {\n      errback(\"\");\n      callback();\n    }\n  };\n\n  //\n  // Public Keey & Confirmation\n  //\n\n  validateAndSetPublicKey = (publicKey, errback, callback) => {\n    const { setPublicKey } = this.props;\n    const error = validatePublicKey(publicKey);\n    setPublicKey(publicKey);\n    if (error) {\n      if (errback) errback(error);\n    } else {\n      if (errback) errback(\"\");\n      if (callback) callback();\n    }\n  };\n\n  renderConfirmation = () => {\n    const { publicKeys, publicKeyImporter } = this.props;\n    if (publicKeyImporter.publicKey === \"\") {\n      return null;\n    }\n    if (publicKeys.includes(publicKeyImporter.publicKey)) {\n      const GreenListItemIcon = styled(ListItemIcon)({ color: \"green\" });\n      return (\n        <List>\n          <ListItem>\n            <GreenListItemIcon>\n              <CheckIcon />\n            </GreenListItemIcon>\n            <ListItemText>\n              The public key exported at BIP32 path{\" \"}\n              <code>{publicKeyImporter.bip32Path}</code> is present in the\n              provided redeem script.\n            </ListItemText>\n          </ListItem>\n        </List>\n      );\n    }\n    return (\n      <List>\n        <ListItem>\n          <ListItemIcon>\n            <Typography color=\"error\">\n              <ClearIcon />\n            </Typography>\n          </ListItemIcon>\n          <ListItemText>\n            The public key exported at BIP32 path{\" \"}\n            <code>{publicKeyImporter.bip32Path}</code> is not present in the\n            provided redeem script.\n          </ListItemText>\n        </ListItem>\n      </List>\n    );\n  };\n\n  renderImportByMethod = () => {\n    const { network, publicKeyImporter, defaultBIP32Path } = this.props;\n    if (publicKeyImporter.method === HERMIT) {\n      return (\n        <HermitPublicKeyImporter\n          publicKeyImporter={publicKeyImporter}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          validateAndSetPublicKey={this.validateAndSetPublicKey}\n          resetBIP32Path={this.resetBIP32Path}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n          reset={this.reset}\n        />\n      );\n    }\n    if (\n      publicKeyImporter.method === TREZOR ||\n      publicKeyImporter.method === LEDGER\n    ) {\n      return (\n        <HardwareWalletPublicKeyImporter\n          network={network}\n          publicKeyImporter={publicKeyImporter}\n          validateAndSetBIP32Path={this.validateAndSetBIP32Path}\n          resetBIP32Path={this.resetBIP32Path}\n          defaultBIP32Path={defaultBIP32Path}\n          validateAndSetPublicKey={this.validateAndSetPublicKey}\n          enableChangeMethod={this.enableChangeMethod}\n          disableChangeMethod={this.disableChangeMethod}\n        />\n      );\n    }\n    return null;\n  };\n\n  render() {\n    const { publicKeyImporter } = this.props;\n    const { disableChangeMethod } = this.state;\n    const labelId = \"public-key-importer-select-label\";\n    const selectLabelId = `${labelId}-select`;\n\n    return (\n      <Card>\n        <CardHeader ref={this.titleRef} title=\"Confirm Ownership\" />\n        <CardContent>\n          <form>\n            <p>How will you confirm your ownership of this address?</p>\n\n            <FormControl fullWidth>\n              <InputLabel id={labelId}>Select Method</InputLabel>\n\n              <Select\n                labelId={selectLabelId}\n                id=\"public-key-importer-select\"\n                disabled={disableChangeMethod}\n                value={publicKeyImporter.method}\n                onChange={this.handleMethodChange}\n              >\n                <MenuItem value=\"\">{\"< Select method >\"}</MenuItem>\n                <MenuItem value={TREZOR}>Trezor</MenuItem>\n                <MenuItem value={LEDGER}>Ledger</MenuItem>\n                <MenuItem value={HERMIT}>Hermit</MenuItem>\n              </Select>\n            </FormControl>\n\n            {this.renderImportByMethod()}\n\n            {this.renderConfirmation()}\n\n            {publicKeyImporter.method !== \"\" && (\n              <Button\n                variant=\"contained\"\n                size=\"small\"\n                color=\"secondary\"\n                role=\"button\"\n                onClick={this.reset}\n              >\n                Start Again\n              </Button>\n            )}\n          </form>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nConfirmOwnership.propTypes = {\n  defaultBIP32Path: PropTypes.string.isRequired,\n  network: PropTypes.string.isRequired,\n  publicKeys: PropTypes.arrayOf(PropTypes.string).isRequired,\n  publicKeyImporter: PropTypes.shape({\n    bip32Path: PropTypes.string,\n    method: PropTypes.string,\n    publicKey: PropTypes.string,\n  }).isRequired,\n  reset: PropTypes.func.isRequired,\n  resetBIP32Path: PropTypes.func.isRequired,\n  setMethod: PropTypes.func.isRequired,\n  setPublicKey: PropTypes.func.isRequired,\n  setBIP32Path: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return state.spend.ownership;\n}\n\nconst mapDispatchToProps = {\n  setMethod: setPublicKeyImporterMethod,\n  setBIP32Path: setPublicKeyImporterBIP32Path,\n  setPublicKey: setPublicKeyImporterPublicKey,\n  resetBIP32Path: resetPublicKeyImporterBIP32Path,\n  reset: resetPublicKeyImporter,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmOwnership);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\n// Components\nimport { Grid, Box, Card, CardContent, Typography } from \"@material-ui/core\";\nimport NetworkPicker from \"../NetworkPicker\";\nimport ClientPicker from \"../ClientPicker\";\nimport AddressTypePicker from \"../AddressTypePicker\";\nimport ScriptEntry from \"./ScriptEntry\";\nimport UTXOSet from \"./UTXOSet\";\nimport OutputsForm from \"./OutputsForm\";\nimport SignatureImporter from \"./SignatureImporter\";\nimport Transaction from \"./Transaction\";\nimport ConfirmOwnership from \"./ConfirmOwnership\";\nimport UnsignedTransaction from \"../UnsignedTransaction\";\nimport \"../styles.css\";\n\nclass Spend extends React.Component {\n  render = () => {\n    return (\n      <Box mt={2}>\n        <Grid container spacing={3}>\n          <Grid item md={8}>\n            <Box>\n              <ScriptEntry />\n            </Box>\n            {this.renderBody()}\n          </Grid>\n          <Grid item md={4}>\n            <Box>\n              <AddressTypePicker />\n            </Box>\n            <Box mt={2}>\n              <NetworkPicker />\n            </Box>\n            <Box mt={2}>\n              <ClientPicker />\n            </Box>\n          </Grid>\n        </Grid>\n      </Box>\n    );\n  };\n\n  renderBody = () => {\n    const { transaction, ownership } = this.props;\n    if (ownership.chosen) {\n      return (\n        <Box mt={2}>\n          <ConfirmOwnership />\n        </Box>\n      );\n    }\n    return (\n      <Box>\n        {this.spendable() && (\n          <Box>\n            <Box mt={2}>\n              <Card>\n                <CardContent>\n                  <UTXOSet\n                    inputs={transaction.inputs}\n                    inputsTotalSats={transaction.inputsTotalSats}\n                  />\n                </CardContent>\n              </Card>\n            </Box>\n            <Box mt={2}>\n              <Card>\n                <CardContent>\n                  <Typography variant=\"h5\">Define Outputs</Typography>\n                  <OutputsForm />\n                </CardContent>\n              </Card>\n            </Box>\n          </Box>\n        )}\n\n        {transaction.finalizedOutputs && (\n          <div>\n            <Box mt={2}>\n              <UnsignedTransaction />\n            </Box>\n\n            <Box mt={2}>{this.renderSignatureImporters()}</Box>\n          </div>\n        )}\n\n        {this.signaturesFinalized() && (\n          <Box mt={2}>\n            <Transaction />\n          </Box>\n        )}\n      </Box>\n    );\n  };\n\n  renderSignatureImporters = () => {\n    const { transaction } = this.props;\n    const signatureImporters = [];\n    for (\n      let signatureImporterNum = 1;\n      signatureImporterNum <= transaction.requiredSigners;\n      signatureImporterNum += 1\n    ) {\n      signatureImporters.push(\n        <Box key={signatureImporterNum} mt={2}>\n          <SignatureImporter number={signatureImporterNum} />\n        </Box>\n      );\n    }\n    return signatureImporters;\n  };\n\n  spendable = () => {\n    const { transaction } = this.props;\n    return transaction.inputs.length > 0;\n  };\n\n  signaturesFinalized = () => {\n    const { signatureImporters } = this.props;\n    return (\n      Object.values(signatureImporters).length > 0 &&\n      Object.values(signatureImporters).every(\n        (signatureImporter) => signatureImporter.finalized\n      )\n    );\n  };\n\n  confirmOwnership = (value) => {\n    // TODO can this entire function be removed? The states aren't being used.\n    // eslint-disable-next-line react/no-unused-state\n    this.setState({ addressFinalized: true, confirmOwnership: value });\n  };\n}\n\nSpend.propTypes = {\n  transaction: PropTypes.shape({\n    finalizedOutputs: PropTypes.bool,\n    inputs: PropTypes.arrayOf(PropTypes.shape({})),\n    inputsTotalSats: PropTypes.shape({}),\n    requiredSigners: PropTypes.number,\n  }).isRequired,\n  ownership: PropTypes.shape({\n    chosen: PropTypes.bool,\n  }).isRequired,\n  signatureImporters: PropTypes.shape({}).isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return state.spend;\n}\n\nexport default connect(mapStateToProps)(Spend);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  AppBar,\n  Toolbar,\n  Button,\n  makeStyles,\n  Typography,\n  Menu,\n  MenuItem,\n  Box,\n} from \"@material-ui/core\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  menuItem: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n    paddingX: theme.spacing(3),\n  },\n  menuLink: {\n    color: \"inherit\",\n    textDecoration: \"none\",\n  },\n}));\n\n// This needs to be a class component because it uses a ref\n// eslint-disable-next-line react/prefer-stateless-function\nclass NavItem extends React.Component {\n  render() {\n    const { href, title, classes, handleClose } = this.props;\n    return (\n      <a href={href} className={classes.menuLink}>\n        <MenuItem className={classes.menuItem} onClick={handleClose}>\n          {title}\n        </MenuItem>\n      </a>\n    );\n  }\n}\n\nNavItem.propTypes = {\n  href: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  classes: PropTypes.shape({\n    menuLink: PropTypes.string.isRequired,\n    menuItem: PropTypes.string.isRequired,\n  }).isRequired,\n  handleClose: PropTypes.func.isRequired,\n};\n\nconst Navbar = () => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const menuItems = [\n    { href: \"#/wallet\", title: \"Wallet\" },\n    { href: \"#/address\", title: \"Create Address\" },\n    { href: \"#/script\", title: \"Script Explorer\" },\n    { href: \"#/test\", title: \"Test Suite\" },\n    { href: \"#/help\", title: \"Help\" },\n  ];\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            <Button color=\"inherit\" href=\"#/\">\n              Caravan\n            </Button>\n          </Typography>\n\n          <Button\n            aria-controls=\"simple-menu\"\n            aria-haspopup=\"true\"\n            color=\"inherit\"\n            onClick={handleClick}\n          >\n            <Box mr={3}>\n              <Typography>Menu</Typography>\n            </Box>\n            <MenuIcon />\n          </Button>\n          <Menu\n            id=\"simple-menu\"\n            anchorEl={anchorEl}\n            keepMounted\n            open={Boolean(anchorEl)}\n            onClose={() => setAnchorEl(null)}\n          >\n            {menuItems.map(({ href, title }) => (\n              <NavItem\n                href={href}\n                title={title}\n                classes={classes}\n                key={href}\n                handleClose={() => setAnchorEl(null)}\n              />\n            ))}\n          </Menu>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nexport default Navbar;\n","import React from \"react\";\nimport { Grid, Box } from \"@material-ui/core\";\nimport { externalLink } from \"../utils\";\nimport { version } from \"../../package.json\";\n\n// Components\n\n// Assets\nconst logo = require(\"../images/logo.png\");\n\nconst Footer = () => (\n  <Box mt={2}>\n    <hr />\n    <Grid container justify=\"space-between\" alignItems=\"center\">\n      <Grid item sm={2}>\n        {externalLink(\n          \"https://www.unchained-capital.com\",\n          <img\n            src={logo}\n            className=\"logo\"\n            alt=\"Unchained Capital logo\"\n            height=\"32\"\n          />\n        )}\n      </Grid>\n\n      <Grid item sm={6}>\n        <p>\n          Copyright&nbsp;\n          {new Date(Date.now()).getFullYear()} by Unchained Capital and released\n          under an MIT license.\n        </p>\n      </Grid>\n\n      <Grid item sm={1} align=\"right\">\n        <p> v{version} </p>\n      </Grid>\n    </Grid>\n  </Box>\n);\n\nexport default Footer;\n","import { Box, Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst reportingURL = \"https://github.com/unchained-capital/caravan/issues\";\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: null, errorInfo: null };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    this.setState({\n      errorInfo,\n      error,\n    });\n  }\n\n  render() {\n    const { children } = this.props;\n    const { error, errorInfo } = this.state;\n    if (errorInfo) {\n      return (\n        <Box m={4}>\n          <Box m={2}>\n            <Typography variant=\"h3\" component=\"h1\">\n              Something went wrong.\n            </Typography>\n          </Box>\n          <Box m={2}>\n            <Typography variant=\"body1\">\n              Let us know what happened on{\" \"}\n              <a href={reportingURL} target=\"_blank\" rel=\"noopener noreferrer\">\n                github\n              </a>\n              .\n            </Typography>\n          </Box>\n          <Box mx={2} my={3}>\n            <details style={{ whiteSpace: \"pre-wrap\" }}>\n              {error && error.toString()}\n              <br />\n              {errorInfo.componentStack}\n            </details>\n          </Box>\n        </Box>\n      );\n    }\n\n    return children;\n  }\n}\n\nErrorBoundary.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]).isRequired,\n};\n\nexport default ErrorBoundary;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\nimport { Snackbar, IconButton } from \"@material-ui/core\";\nimport { Close } from \"@material-ui/icons\";\nimport { clearErrorNotification as clearErrorNotificationAction } from \"../actions/errorNotificationActions\";\n\nconst ErrorNotificationBase = (props) => {\n  const { open, message, clearErrorNotification } = props;\n\n  return (\n    <Snackbar\n      anchorOrigin={{\n        vertical: \"bottom\",\n        horizontal: \"left\",\n      }}\n      open={open}\n      /* autoHideDuration={6000} */\n      onClose={clearErrorNotification}\n      ContentProps={{\n        \"aria-describedby\": \"error-notification\",\n      }}\n      message={<span id=\"error-notification\">{message}</span>}\n      action={[\n        <IconButton\n          key=\"close\"\n          aria-label=\"close\"\n          color=\"inherit\"\n          onClick={clearErrorNotification}\n        >\n          <Close />\n        </IconButton>,\n      ]}\n    />\n  );\n};\n\nErrorNotificationBase.propTypes = {\n  open: PropTypes.bool.isRequired,\n  message: PropTypes.string.isRequired,\n  clearErrorNotification: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => {\n  return state.errorNotification;\n};\n\nconst mapDispatchToProps = {\n  clearErrorNotification: clearErrorNotificationAction,\n};\n\nconst ErrorNotification = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ErrorNotificationBase);\n\nexport default ErrorNotification;\n","import React from \"react\";\nimport {\n  HashRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n} from \"react-router-dom\";\n\n// Components\nimport { CssBaseline, Container } from \"@material-ui/core\";\nimport { SnackbarProvider } from \"notistack\";\n\nimport Help from \"./Help\";\nimport Wallet from \"./Wallet\";\nimport CreateAddress from \"./CreateAddress\";\nimport TestSuiteRun from \"./TestSuiteRun\";\nimport ScriptExplorer from \"./ScriptExplorer\";\nimport Navbar from \"./Navbar\";\nimport Footer from \"./Footer\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport ErrorNotification from \"./ErrorNotification\";\n\nconst App = () => (\n  <div className=\"App\">\n    <CssBaseline />\n    <SnackbarProvider maxSnack={3}>\n      <Container maxWidth=\"lg\">\n        <Navbar />\n        <ErrorBoundary>\n          <Router>\n            <Switch>\n              <Route path=\"/test\" component={TestSuiteRun} />\n              <Route path=\"/address\" component={CreateAddress} />\n              <Redirect from=\"/spend\" to=\"/script\" />\n              <Route path=\"/script\" component={ScriptExplorer} />\n              <Route path=\"/wallet\" component={Wallet} />\n              <Route path=\"/help\" component={Help} />\n              <Route path=\"/\" component={Help} />\n            </Switch>\n          </Router>\n          <ErrorNotification />\n        </ErrorBoundary>\n        <Footer />\n      </Container>\n    </SnackbarProvider>\n  </div>\n);\n\nexport default App;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createBrowserHistory } from \"history\";\nimport { connect } from \"react-redux\";\n\nimport App from \"./App\";\n\nclass AppContainer extends Component {\n  history = createBrowserHistory();\n\n  componentDidMount() {\n    const { resetApp } = this.props;\n    // Listen for changes to the current location\n    // and reset the redux store which is needed\n    // to avoid conflicts in the state between views/pages\n    this.unlisten = this.history.listen(() => {\n      resetApp();\n    });\n  }\n\n  componentWillUnmount() {\n    this.unlisten();\n  }\n\n  render() {\n    return <App />;\n  }\n}\n\nAppContainer.propTypes = {\n  resetApp: PropTypes.func.isRequired,\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    resetApp: () => dispatch({ type: \"RESET_APP_STATE\" }),\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(AppContainer);\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      // TODO FIXME\n      // eslint-disable-next-line  no-param-reassign\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              // eslint-disable-next-line no-console\n              console.log(\"New content is available; please refresh.\");\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              // eslint-disable-next-line no-console\n              console.log(\"Content is cached for offline use.\");\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      // eslint-disable-next-line no-console\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      // eslint-disable-next-line no-console\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport default function register() {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          // eslint-disable-next-line no-console\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://goo.gl/SC7cgQ\"\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","function updateState(state, change) {\n  return {\n    ...state,\n    ...change,\n  };\n}\n\nexport default updateState;\n","import { MAINNET, P2SH } from \"unchained-bitcoin\";\n\nimport updateState from \"./utils\";\nimport {\n  SET_NETWORK,\n  SET_TOTAL_SIGNERS,\n  SET_REQUIRED_SIGNERS,\n  SET_STARTING_ADDRESS_INDEX,\n  SET_ADDRESS_TYPE,\n  SET_FROZEN,\n} from \"../actions/settingsActions\";\n\nconst initialState = {\n  network: MAINNET,\n  totalSigners: 3,\n  requiredSigners: 2,\n  addressType: P2SH,\n  startingAddressIndex: 0,\n  frozen: false,\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_NETWORK:\n      return updateState(state, { network: action.value });\n    case SET_TOTAL_SIGNERS:\n      return updateState(state, { totalSigners: action.value });\n    case SET_REQUIRED_SIGNERS:\n      return updateState(state, { requiredSigners: action.value });\n    case SET_STARTING_ADDRESS_INDEX:\n      return updateState(state, { startingAddressIndex: action.value });\n    case SET_ADDRESS_TYPE:\n      return updateState(state, { addressType: action.value });\n    case SET_FROZEN:\n      return updateState(state, { frozen: action.value });\n    default:\n      return state;\n  }\n};\n","import updateState from \"./utils\";\nimport {\n  SET_CLIENT_TYPE,\n  SET_CLIENT_URL,\n  SET_CLIENT_USERNAME,\n  SET_CLIENT_PASSWORD,\n  SET_CLIENT_URL_ERROR,\n  SET_CLIENT_USERNAME_ERROR,\n  SET_CLIENT_PASSWORD_ERROR,\n} from \"../actions/clientActions\";\n\nconst initialState = {\n  type: \"public\",\n  url: \"\",\n  username: \"\",\n  password: \"\",\n  urlError: \"\",\n  usernameError: \"\",\n  passwordError: \"\",\n  status: \"unknown\",\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_CLIENT_TYPE:\n      return updateState(state, { type: action.value });\n    case SET_CLIENT_URL:\n      return updateState(state, { url: action.value });\n    case SET_CLIENT_USERNAME:\n      return updateState(state, { username: action.value });\n    case SET_CLIENT_PASSWORD:\n      return updateState(state, { password: action.value });\n    case SET_CLIENT_URL_ERROR:\n      return updateState(state, { urlError: action.value });\n    case SET_CLIENT_USERNAME_ERROR:\n      return updateState(state, { usernameError: action.value });\n    case SET_CLIENT_PASSWORD_ERROR:\n      return updateState(state, { passwordError: action.value });\n\n    default:\n      return state;\n  }\n};\n","import BigNumber from \"bignumber.js\";\nimport {\n  RESET_NODES_SPEND,\n  RESET_NODES_FETCH_ERRORS,\n} from \"../actions/walletActions\";\nimport updateState from \"./utils\";\n\nconst intialSliceState = {\n  present: true,\n  bip32Path: \"\",\n  publicKeys: [],\n  multisig: {},\n  address: \"\",\n  balanceSats: new BigNumber(0),\n  utxos: [],\n  change: false,\n  spend: false,\n  fetchedUTXOs: false,\n  fetchUTXOsError: \"\",\n  addressUsed: false,\n  addressKnown: true,\n};\n\nconst initialState = {\n  nodes: {},\n  trailingEmptyNodes: 0,\n  fetchUTXOsErrors: 0,\n  balanceSats: new BigNumber(0),\n  spendingSats: new BigNumber(0),\n  nextNode: null,\n};\n\nfunction getNextNode(state) {\n  const nodes = Object.values(state.nodes);\n  for (let i = 0; i < nodes.length; i += 1) {\n    const node = nodes[i];\n    if (node.balanceSats.isEqualTo(0) && !node.addressUsed) {\n      return node;\n    }\n  }\n  return null;\n}\n\nfunction updateSlice(state, action) {\n  const slice = {\n    ...intialSliceState,\n    ...(state.nodes[action.value.bip32Path] || {}),\n    ...action.value,\n  };\n  const newSlices = {};\n  newSlices[slice.bip32Path] = slice;\n\n  const updatedState = {\n    ...state,\n    ...{\n      nodes: {\n        ...state.nodes,\n        ...newSlices,\n      },\n    },\n  };\n  if (typeof action.value.spend !== \"undefined\") {\n    // TODO (BUCK): I'm not sure this works. If you change\n    // the output value of a spend before spending, this will just\n    // add the new value to the previous value. We also can't just\n    // reset spendingSats because there might be multiple outputs\n    updatedState.spendingSats = action.value.spend\n      ? state.spendingSats.plus(slice.balanceSats)\n      : state.spendingSats.minus(slice.balanceSats);\n  }\n\n  if (action.value.balanceSats) {\n    const currentNodeBalance = state.nodes[slice.bip32Path]\n      ? state.nodes[slice.bip32Path].balanceSats\n      : BigNumber(0);\n    updatedState.balanceSats = state.balanceSats.plus(\n      slice.balanceSats.minus(currentNodeBalance)\n    );\n  }\n\n  let trailingEmptyNodes = 0;\n  let fetchUTXOsErrors = 0;\n  const allBIP32Paths = Object.keys(updatedState.nodes);\n  allBIP32Paths.sort((p1, p2) => {\n    const p1Segments = (p1 || \"\").split(\"/\");\n    const p2Segments = (p2 || \"\").split(\"/\");\n    const p1Index = parseInt(p1Segments[2], 10);\n    const p2Index = parseInt(p2Segments[2], 10);\n    return p1Index - p2Index;\n  });\n  let nodeFoundWithValue = false;\n  for (let i = 0; i < allBIP32Paths.length; i += 1) {\n    const bip32Path = allBIP32Paths[allBIP32Paths.length - (i + 1)];\n    const otherNode = updatedState.nodes[bip32Path];\n    if (otherNode.fetchedUTXOs) {\n      if (\n        otherNode.balanceSats.isEqualTo(0) &&\n        !otherNode.addressUsed &&\n        !nodeFoundWithValue\n      ) {\n        trailingEmptyNodes += 1;\n      } else nodeFoundWithValue = true;\n    }\n    if (otherNode.fetchUTXOsError !== \"\") {\n      fetchUTXOsErrors += 1;\n    }\n  }\n  updatedState.trailingEmptyNodes = trailingEmptyNodes;\n  updatedState.fetchUTXOsErrors = fetchUTXOsErrors;\n  updatedState.nextNode = getNextNode(updatedState);\n  return updatedState;\n}\n\nfunction resetSpend(state) {\n  const updatedState = { ...state };\n  Object.values(updatedState.nodes).forEach((node) => {\n    node.spend = false; // eslint-disable-line no-param-reassign\n  });\n  return updatedState;\n}\n\nexport default (actionType) => (state = initialState, action) => {\n  switch (action.type) {\n    case RESET_NODES_SPEND:\n      return resetSpend(state);\n    case RESET_NODES_FETCH_ERRORS:\n      return updateState(state, {\n        fetchUTXOsErrors: 0,\n        nodes: Object.values(state.nodes).reduce((allNodes, thisNode) => {\n          const updatedNodes = allNodes;\n          updatedNodes[thisNode.bip32Path] = {\n            ...thisNode,\n            fetchUTXOsError: \"\",\n          };\n          return updatedNodes;\n        }, {}),\n      });\n    case actionType:\n      return updateSlice(state, action);\n    default:\n      return state;\n  }\n};\n","import { MAINNET, P2SH, multisigBIP32Root } from \"unchained-bitcoin\";\nimport updateState from \"./utils\";\nimport {\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME,\n  RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED,\n  SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE,\n} from \"../actions/extendedPublicKeyImporterActions\";\nimport {\n  SET_TOTAL_SIGNERS,\n  SET_NETWORK,\n  SET_ADDRESS_TYPE,\n} from \"../actions/settingsActions\";\n\nfunction fingerprint(state) {\n  const timestamp = new Date().getTime().toString();\n  const extendedPublicKeys = Object.values(state.extendedPublicKeyImporters)\n    .map(\n      (extendedPublicKeyImporter) => extendedPublicKeyImporter.extendedPublicKey\n    )\n    .join(\"\");\n  return `${timestamp}-${extendedPublicKeys}`;\n}\n\nconst initialExtendedPublicKeyImporterState = (name = \"\") => ({\n  name,\n  bip32Path: multisigBIP32Root(P2SH, MAINNET),\n  bip32PathModified: false,\n  method: \"\",\n  extendedPublicKey: \"\",\n  rootXfp: \"\",\n  finalized: false,\n  conflict: false,\n});\n\nfunction createInitialState() {\n  const extendedPublicKeyImporters = [...Array(4).keys()]\n    .slice(1)\n    .reduce((importers, index) => {\n      return {\n        ...importers,\n        [index]: initialExtendedPublicKeyImporterState(\n          `Extended Public Key ${index}`\n        ),\n      };\n    }, {});\n\n  return {\n    extendedPublicKeyImporters,\n    defaultBIP32Path: multisigBIP32Root(P2SH, MAINNET),\n    network: MAINNET,\n    addressType: P2SH,\n    fingerprint: \"\",\n    finalizedNetwork: \"\",\n    finalizedAddressType: \"\",\n    configuring: true,\n  };\n}\n\nfunction setConflict(extendedPublicKeyImporter, state) {\n  if (state.finalizedNetwork) {\n    // eslint-disable-next-line no-param-reassign\n    extendedPublicKeyImporter.conflict =\n      state.finalizedNetwork !== state.network ||\n      state.finalizedAddressType !== state.addressType;\n  }\n}\n\nfunction updateExtendedPublicKeyImporterState(state, action, field) {\n  const extendedPublicKeyImporterChange = {};\n  extendedPublicKeyImporterChange[field] = action.value;\n  const newState = {\n    ...state,\n    ...{ nodes: {} },\n  };\n  newState.extendedPublicKeyImporters[action.number] = updateState(\n    state.extendedPublicKeyImporters[action.number],\n    extendedPublicKeyImporterChange\n  );\n  const importCount = Object.values(newState.extendedPublicKeyImporters).reduce(\n    (sum, current) => {\n      return sum + current.finalized;\n    },\n    0\n  );\n  if (\n    importCount === Object.keys(newState.extendedPublicKeyImporters).length &&\n    field === \"finalized\" &&\n    Object.values(newState.extendedPublicKeyImporters).every(\n      (xpub) => !xpub.conflict\n    )\n  ) {\n    newState.configuring = false;\n  }\n  setConflict(newState.extendedPublicKeyImporters[action.number], state);\n  return updateState(newState, { fingerprint: fingerprint(newState) });\n}\n\nfunction updateTotalSigners(state, action) {\n  const totalSigners = action.value;\n  const extendedPublicKeyImporters = {};\n  for (\n    let extendedPublicKeyImporterNum = 1;\n    extendedPublicKeyImporterNum <= totalSigners;\n    extendedPublicKeyImporterNum += 1\n  ) {\n    extendedPublicKeyImporters[extendedPublicKeyImporterNum] =\n      state.extendedPublicKeyImporters[extendedPublicKeyImporterNum] ||\n      initialExtendedPublicKeyImporterState(\n        `Extended Public Key ${extendedPublicKeyImporterNum}`\n      );\n  }\n  let finalizedCount = 0;\n\n  Object.keys(extendedPublicKeyImporters).forEach((index) => {\n    const importer = extendedPublicKeyImporters[index];\n    if (importer.finalized) finalizedCount += 1;\n  });\n\n  return {\n    ...state,\n    configuring: finalizedCount < totalSigners,\n    ...{ extendedPublicKeyImporters },\n  };\n}\n\nfunction updateImporterPaths(state, newState, bip32Path) {\n  for (\n    let extendedPublicKeyImporterNum = 1;\n    extendedPublicKeyImporterNum <=\n    Object.values(state.extendedPublicKeyImporters).length;\n    extendedPublicKeyImporterNum += 1\n  ) {\n    const extendedPublicKeyImporter =\n      newState.extendedPublicKeyImporters[extendedPublicKeyImporterNum];\n    if (!extendedPublicKeyImporter.bip32PathModified) {\n      if (!extendedPublicKeyImporter.finalized)\n        extendedPublicKeyImporter.bip32Path = bip32Path;\n    }\n    setConflict(extendedPublicKeyImporter, newState);\n  }\n}\n\nfunction updateNetwork(state, action) {\n  const { addressType } = state;\n  const network = action.value;\n  const bip32Path = multisigBIP32Root(addressType, network);\n  const newState = { ...state, ...{ network, defaultBIP32Path: bip32Path } };\n  updateImporterPaths(state, newState, bip32Path);\n  return newState;\n}\n\nfunction updateAddressType(state, action) {\n  const addressType = action.value;\n  const { network } = state;\n  const bip32Path = multisigBIP32Root(addressType, network);\n  const newState = {\n    ...state,\n    ...{ addressType, defaultBIP32Path: bip32Path },\n  };\n  updateImporterPaths(state, newState, bip32Path);\n  return newState;\n}\n\nfunction updateFinalizedSettings(state, action) {\n  const newState = { ...state };\n  if (action.value === true && state.finalizedNetwork === \"\") {\n    newState.finalizedNetwork = state.network;\n    newState.finalizedAddressType = state.addressType;\n  } else if (action.value === false && state.finalizedNetwork !== \"\") {\n    const finalizedCount = Object.values(\n      state.extendedPublicKeyImporters\n    ).reduce((count, importer) => {\n      if (importer.finalized === true) return count + 1;\n      return count;\n    }, 0);\n    if (finalizedCount === 1) {\n      // last one to be removed\n      newState.finalizedNetwork = \"\";\n      newState.finalizedAddressType = \"\";\n      Object.values(newState.extendedPublicKeyImporters).forEach(\n        // eslint-disable-next-line no-param-reassign,no-return-assign\n        (importer) => (importer.conflict = false)\n      );\n    }\n  }\n  return newState;\n}\n\nexport default (state = createInitialState(), action) => {\n  switch (action.type) {\n    case SET_NETWORK:\n      return updateNetwork(state, action);\n    case SET_ADDRESS_TYPE:\n      return updateAddressType(state, action);\n    case SET_TOTAL_SIGNERS:\n      return updateTotalSigners(state, action);\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME:\n      return updateExtendedPublicKeyImporterState(state, action, \"name\");\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n      return updateExtendedPublicKeyImporterState(\n        updateExtendedPublicKeyImporterState(state, action, \"bip32Path\"),\n        { number: action.number, value: true },\n        \"bip32PathModified\"\n      );\n    case RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n      return updateExtendedPublicKeyImporterState(\n        updateExtendedPublicKeyImporterState(\n          state,\n          { number: action.number, value: state.defaultBIP32Path },\n          \"bip32Path\"\n        ),\n        { number: action.number, value: false },\n        \"bip32PathModified\"\n      );\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD:\n      return updateExtendedPublicKeyImporterState(state, action, \"method\");\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY:\n      return updateExtendedPublicKeyImporterState(\n        state,\n        action,\n        \"extendedPublicKey\"\n      );\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT:\n      return updateExtendedPublicKeyImporterState(state, action, \"rootXfp\");\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED:\n      return updateExtendedPublicKeyImporterState(\n        updateFinalizedSettings(state, action),\n        action,\n        \"finalized\"\n      );\n    case SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE:\n      return { ...state, ...{ configuring: action.value } };\n    default:\n      return state;\n  }\n};\n","import { MAINNET, P2SH, multisigBIP32Path } from \"unchained-bitcoin\";\nimport updateState from \"./utils\";\nimport {\n  SET_TOTAL_SIGNERS,\n  SET_NETWORK,\n  SET_ADDRESS_TYPE,\n} from \"../actions/settingsActions\";\nimport {\n  SET_PUBLIC_KEY_IMPORTER_NAME,\n  RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_PUBLIC_KEY_IMPORTER_METHOD,\n  SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY,\n  SET_PUBLIC_KEY_IMPORTER_FINALIZED,\n  MOVE_PUBLIC_KEY_IMPORTER_UP,\n  MOVE_PUBLIC_KEY_IMPORTER_DOWN,\n  SORT_PUBLIC_KEY_IMPORTERS,\n  UPDATE_MULTISIG_ADDRESS,\n} from \"../actions/publicKeyImporterActions\";\n\nconst TEXT = \"text\";\n\nfunction fingerprint(state) {\n  const timestamp = new Date().getTime().toString();\n  const publicKeys = Object.values(state.publicKeyImporters)\n    .map((publicKeyImporter) => publicKeyImporter.publicKey)\n    .join(\"\");\n  return `${timestamp}-${publicKeys}`;\n}\n\nconst initialPublicKeyImporterState = (name = \"\") => ({\n  name,\n  bip32Path: multisigBIP32Path(P2SH, MAINNET),\n  bip32PathModified: false,\n  method: \"\",\n  publicKey: \"\",\n  finalized: false,\n  conflict: false,\n});\n\n// function to create a new initial state so that it\n// is properly initialized when the state is cleared\n// i.e. a \"deep clean\" through the object\nfunction createInitialState() {\n  // need create new objects for each pub key importer\n  // otherwise does not properly reset when state is cleared\n  const publicKeyImporters = [...Array(4).keys()]\n    .slice(1)\n    .reduce((importers, index) => {\n      return {\n        ...importers,\n        [index]: initialPublicKeyImporterState(`Public Key ${index}`),\n      };\n    }, {});\n\n  return {\n    publicKeyImporters,\n    defaultBIP32Path: multisigBIP32Path(P2SH, MAINNET),\n    network: MAINNET,\n    addressType: P2SH,\n    fingerprint: \"\",\n    finalizedNetwork: \"\",\n    finalizedAddressType: \"\",\n    address: \"\",\n  };\n}\n\nfunction movePublicKeyImporterUp(state, action) {\n  if (action.number === 1) {\n    return state;\n  }\n  const newState = {\n    ...state,\n  };\n  const abovePublicKeyImporter = state.publicKeyImporters[action.number - 1];\n  const publicKeyImporter = state.publicKeyImporters[action.number];\n  newState.publicKeyImporters[action.number - 1] = publicKeyImporter;\n  newState.publicKeyImporters[action.number] = abovePublicKeyImporter;\n  return updateState(newState, { fingerprint: fingerprint(newState) });\n}\n\nfunction movePublicKeyImporterDown(state, action) {\n  if (action.number === Object.values(state.publicKeyImporters).length) {\n    return state;\n  }\n  const newState = {\n    ...state,\n  };\n  const belowPublicKeyImporter = state.publicKeyImporters[action.number + 1];\n  const publicKeyImporter = state.publicKeyImporters[action.number];\n  newState.publicKeyImporters[action.number + 1] = publicKeyImporter;\n  newState.publicKeyImporters[action.number] = belowPublicKeyImporter;\n  return updateState(newState, { fingerprint: fingerprint(newState) });\n}\n\nfunction sortPublicKeyImporters(state) {\n  const publicKeyImporters = Object.values(state.publicKeyImporters);\n  const sortedPublicKeys = publicKeyImporters\n    .map((publicKeyImporter) => publicKeyImporter.publicKey)\n    .sort();\n  const sortedPublicKeyImporters = sortedPublicKeys.map((publicKey) => {\n    return publicKeyImporters.find(\n      (publicKeyImporter) => publicKeyImporter.publicKey === publicKey\n    );\n  });\n  const publicKeyImportersChange = {};\n  for (\n    let publicKeyImporterNum = 1;\n    publicKeyImporterNum <= sortedPublicKeyImporters.length;\n    publicKeyImporterNum += 1\n  ) {\n    publicKeyImportersChange[publicKeyImporterNum] =\n      sortedPublicKeyImporters[publicKeyImporterNum - 1];\n  }\n\n  const newState = {\n    ...state,\n    ...{ publicKeyImporters: publicKeyImportersChange },\n  };\n  return updateState(newState, { fingerprint: fingerprint(newState) });\n}\n\nfunction setConflict(publicKeyImporterIndex, state) {\n  if (state.finalizedNetwork) {\n    const publicKeyImporters = { ...state.publicKeyImporters };\n    const publicKeyImporter = publicKeyImporters[publicKeyImporterIndex];\n\n    publicKeyImporter.conflict =\n      state.finalizedNetwork !== state.network ||\n      state.finalizedAddressType !== state.addressType;\n\n    return updateState(state, { publicKeyImporters });\n  }\n  return state;\n}\n\nfunction updatePublicKeyImporterState(state, action, field) {\n  const publicKeyImporterChange = {};\n  publicKeyImporterChange[field] = action.value;\n  let newState = {\n    ...state,\n  };\n  newState.publicKeyImporters[action.number] = updateState(\n    state.publicKeyImporters[action.number],\n    publicKeyImporterChange\n  );\n  newState = setConflict(action.number, state);\n  return updateState(newState, { fingerprint: fingerprint(newState) });\n}\n\nfunction updateTotalSigners(state, action) {\n  const totalSigners = action.value;\n  const publicKeyImporters = {};\n  for (\n    let publicKeyImporterNum = 1;\n    publicKeyImporterNum <= totalSigners;\n    publicKeyImporterNum += 1\n  ) {\n    publicKeyImporters[publicKeyImporterNum] = state.publicKeyImporters[\n      publicKeyImporterNum\n    ] || {\n      ...initialPublicKeyImporterState(),\n      ...{\n        name: `Public Key ${publicKeyImporterNum}`,\n      },\n    };\n  }\n  const newState = {\n    ...state,\n    ...{ publicKeyImporters, stub: action.type },\n  };\n  return updateState(newState, { fingerprint: fingerprint(newState) });\n}\n\nfunction updateImporterPaths(state, bip32Path) {\n  let newState = { ...state };\n  for (\n    let publicKeyImporterNum = 1;\n    publicKeyImporterNum <= Object.values(state.publicKeyImporters).length;\n    publicKeyImporterNum += 1\n  ) {\n    const publicKeyImporter = newState.publicKeyImporters[publicKeyImporterNum];\n    if (!publicKeyImporter.bip32PathModified) {\n      if (!publicKeyImporter.finalized) publicKeyImporter.bip32Path = bip32Path;\n    }\n    newState = setConflict(publicKeyImporterNum, newState);\n  }\n  return newState;\n}\n\nfunction updateNetwork(state, action) {\n  const network = action.value;\n  const { addressType } = state;\n  const bip32Path = multisigBIP32Path(addressType, network);\n  let newState = { ...state, ...{ network, defaultBIP32Path: bip32Path } };\n  newState = updateImporterPaths(newState, bip32Path);\n  return newState;\n}\n\nfunction updateAddressType(state, action) {\n  const { network } = state;\n  const addressType = action.value;\n  const bip32Path = multisigBIP32Path(addressType, network);\n  let newState = {\n    ...state,\n    ...{ addressType, defaultBIP32Path: bip32Path },\n  };\n  newState = updateImporterPaths(newState, bip32Path);\n  return newState;\n}\n\nfunction updateFinalizedSettings(state, action) {\n  const newState = { ...state };\n  if (\n    action.value === true &&\n    state.finalizedNetwork === \"\" &&\n    newState.publicKeyImporters[action.number].method !== TEXT\n  ) {\n    newState.finalizedNetwork = state.network;\n    newState.finalizedAddressType = state.addressType;\n  } else if (action.value === false && state.finalizedNetwork !== \"\") {\n    const finalizedCount = Object.values(state.publicKeyImporters).reduce(\n      (count, importer) => {\n        if (importer.finalized === true && importer.method !== TEXT)\n          return count + 1;\n        return count;\n      },\n      0\n    );\n    if (finalizedCount === 1) {\n      // last one to be removed\n      newState.finalizedNetwork = \"\";\n      newState.finalizedAddressType = \"\";\n      Object.values(newState.publicKeyImporters).forEach(\n        // eslint-disable-next-line no-param-reassign,no-return-assign\n        (importer) => (importer.conflict = false)\n      );\n    }\n  }\n  return newState;\n}\n\nexport default (state = createInitialState(), action) => {\n  switch (action.type) {\n    case SET_NETWORK:\n      return updateNetwork(state, action);\n    case SET_ADDRESS_TYPE:\n      return updateAddressType(state, action);\n    case SET_TOTAL_SIGNERS:\n      return updateTotalSigners(state, action);\n    case SET_PUBLIC_KEY_IMPORTER_NAME:\n      return updatePublicKeyImporterState(state, action, \"name\");\n    case RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n      return updatePublicKeyImporterState(\n        updatePublicKeyImporterState(\n          state,\n          { number: action.number, value: state.defaultBIP32Path },\n          \"bip32Path\"\n        ),\n        { number: action.number, value: false },\n        \"bip32PathModified\"\n      );\n    case SET_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n      return updatePublicKeyImporterState(\n        updatePublicKeyImporterState(state, action, \"bip32Path\"),\n        { number: action.number, value: true },\n        \"bip32PathModified\"\n      );\n    case SET_PUBLIC_KEY_IMPORTER_METHOD:\n      return updatePublicKeyImporterState(state, action, \"method\");\n    case SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY:\n      return updatePublicKeyImporterState(state, action, \"publicKey\");\n    case SET_PUBLIC_KEY_IMPORTER_FINALIZED:\n      return updatePublicKeyImporterState(\n        updateFinalizedSettings(state, action),\n        action,\n        \"finalized\"\n      );\n    case MOVE_PUBLIC_KEY_IMPORTER_UP:\n      return movePublicKeyImporterUp(state, action);\n    case MOVE_PUBLIC_KEY_IMPORTER_DOWN:\n      return movePublicKeyImporterDown(state, action);\n    case SORT_PUBLIC_KEY_IMPORTERS:\n      return sortPublicKeyImporters(state, action);\n    case UPDATE_MULTISIG_ADDRESS:\n      return updateState(state, { address: action.value });\n    default:\n      return state;\n  }\n};\n","import {\n  UPDATE_WALLET_NAME,\n  RESET_WALLET_VIEW,\n  WALLET_MODES,\n  UPDATE_WALLET_MODE,\n  INITIAL_LOAD_COMPLETE,\n} from \"../actions/walletActions\";\nimport updateState from \"./utils\";\n\nconst initialState = {\n  walletMode: WALLET_MODES.VIEW,\n  walletName: \"My Multisig Wallet\",\n  nodesLoaded: false,\n};\n\nfunction resetWalletViews(state) {\n  return updateState(state, {\n    walletMode: WALLET_MODES.VIEW,\n  });\n}\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case UPDATE_WALLET_MODE:\n      return updateState(state, { walletMode: action.value });\n    case UPDATE_WALLET_NAME:\n      return updateState(state, { walletName: action.value });\n    case RESET_WALLET_VIEW:\n      return resetWalletViews(state);\n    case INITIAL_LOAD_COMPLETE:\n      return updateState(state, { nodesLoaded: true });\n    default:\n      return state;\n  }\n};\n","import {\n  P2SH,\n  MAINNET,\n  multisigAddressType,\n  multisigBIP32Path,\n  multisigPublicKeys,\n} from \"unchained-bitcoin\";\nimport updateState from \"./utils\";\nimport { SET_NETWORK } from \"../actions/settingsActions\";\nimport {\n  CHOOSE_CONFIRM_OWNERSHIP,\n  SET_OWNERSHIP_MULTISIG,\n  RESET_PUBLIC_KEY_IMPORTER,\n  RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_PUBLIC_KEY_IMPORTER_BIP32_PATH,\n  SET_PUBLIC_KEY_IMPORTER_METHOD,\n  SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY,\n} from \"../actions/ownershipActions\";\n\nconst initialPublicKeyImporterState = {\n  bip32Path: \"\",\n  method: \"\",\n  publicKey: \"\",\n};\n\nconst initialState = {\n  chosen: false,\n  publicKeyImporter: { ...initialPublicKeyImporterState },\n  network: MAINNET,\n  addressType: P2SH,\n  publicKeys: [],\n  address: \"\",\n  defaultBIP32Path: multisigBIP32Path(P2SH, MAINNET),\n};\n\nfunction updatePublicKeyImporterState(state, action, field) {\n  const publicKeyImporterChange = {};\n  publicKeyImporterChange[field] = action.value;\n  return {\n    ...state,\n    ...{\n      publicKeyImporter: {\n        ...state.publicKeyImporter,\n        ...publicKeyImporterChange,\n      },\n    },\n  };\n}\n\nfunction updateMultisig(state, action) {\n  const multisig = action.value;\n  const addressType = multisigAddressType(multisig);\n  const defaultBIP32Path = multisigBIP32Path(addressType, state.network);\n  return {\n    ...state,\n    ...{\n      network: state.network,\n      addressType,\n      publicKeys: multisigPublicKeys(multisig),\n      address: multisig.address,\n      defaultBIP32Path,\n    },\n  };\n}\n\nexport default (state = initialState, action) => {\n  const keyResetState = updatePublicKeyImporterState(\n    state,\n    { value: \"\" },\n    \"publicKey\"\n  );\n\n  switch (action.type) {\n    case CHOOSE_CONFIRM_OWNERSHIP:\n      return updateState(state, { chosen: true });\n    case SET_NETWORK:\n      return updateState(state, { network: action.value });\n    case SET_OWNERSHIP_MULTISIG:\n      return updateMultisig(state, action);\n    case SET_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n      return updatePublicKeyImporterState(keyResetState, action, \"bip32Path\");\n    case SET_PUBLIC_KEY_IMPORTER_METHOD:\n      return updatePublicKeyImporterState(state, action, \"method\");\n    case SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY:\n      return updatePublicKeyImporterState(state, action, \"publicKey\");\n    case RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH:\n      return updatePublicKeyImporterState(\n        state,\n        { value: state.defaultBIP32Path },\n        \"bip32Path\"\n      );\n    case RESET_PUBLIC_KEY_IMPORTER:\n      return {\n        ...state,\n        ...{\n          publicKeyImporter: {\n            ...state.publicKeyImporter,\n            ...{ bip32Path: state.defaultBIP32Path, publicKey: \"\" },\n          },\n        },\n      };\n    default:\n      return state;\n  }\n};\n","import updateState from \"./utils\";\nimport {\n  SET_SIGNATURE_IMPORTER_NAME,\n  SET_SIGNATURE_IMPORTER_METHOD,\n  SET_SIGNATURE_IMPORTER_BIP32_PATH,\n  SET_SIGNATURE_IMPORTER_SIGNATURE,\n  SET_SIGNATURE_IMPORTER_PUBLIC_KEYS,\n  SET_SIGNATURE_IMPORTER_FINALIZED,\n  SET_SIGNATURE_IMPORTER_COMPLETE,\n} from \"../actions/signatureImporterActions\";\nimport {\n  SET_REQUIRED_SIGNERS,\n  RESET_TRANSACTION,\n} from \"../actions/transactionActions\";\n\nconst initialSignatureImporterState = {\n  name: \"\",\n  method: \"\",\n  publicKeys: [],\n  signature: [],\n  bip32Path: \"\",\n  finalized: false,\n};\n\nconst initialState = {};\n\nfunction setRequiredSigners(state, action) {\n  const signatureImporters = {};\n  for (\n    let signatureImporterNum = 1;\n    signatureImporterNum <= action.value;\n    signatureImporterNum += 1\n  ) {\n    signatureImporters[signatureImporterNum] = {\n      ...initialSignatureImporterState,\n      ...{ name: `Signature ${signatureImporterNum}` },\n    };\n  }\n  return signatureImporters;\n}\n\nfunction updateSignatureImporterState(state, action, field) {\n  const signatureImporterChange = {};\n  signatureImporterChange[field] = action.value;\n  const newState = {\n    ...state,\n  };\n  newState[action.number] = updateState(\n    state[action.number],\n    signatureImporterChange\n  );\n  return newState;\n}\n\nfunction finalizeSignatureImporterState(state, action) {\n  const newState = {\n    ...state,\n  };\n  newState[action.number] = updateState(state[action.number], action.value);\n  return newState;\n}\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case RESET_TRANSACTION:\n      return { ...initialState };\n    case SET_REQUIRED_SIGNERS:\n      return setRequiredSigners(state, action);\n    case SET_SIGNATURE_IMPORTER_NAME:\n      return updateSignatureImporterState(state, action, \"name\");\n    case SET_SIGNATURE_IMPORTER_METHOD:\n      return updateSignatureImporterState(state, action, \"method\");\n    case SET_SIGNATURE_IMPORTER_BIP32_PATH:\n      return updateSignatureImporterState(state, action, \"bip32Path\");\n    case SET_SIGNATURE_IMPORTER_SIGNATURE:\n      return updateSignatureImporterState(state, action, \"signature\");\n    case SET_SIGNATURE_IMPORTER_PUBLIC_KEYS:\n      return updateSignatureImporterState(state, action, \"publicKeys\");\n    case SET_SIGNATURE_IMPORTER_FINALIZED:\n      return updateSignatureImporterState(state, action, \"finalized\");\n    case SET_SIGNATURE_IMPORTER_COMPLETE:\n      return finalizeSignatureImporterState(state, action);\n\n    default:\n      return state;\n  }\n};\n","import BigNumber from \"bignumber.js\";\nimport {\n  MAINNET,\n  P2SH,\n  estimateMultisigTransactionFee,\n  validateFeeRate,\n  validateFee,\n  validateOutputAmount,\n  satoshisToBitcoins,\n  bitcoinsToSatoshis,\n  validateAddress,\n  unsignedMultisigTransaction,\n  unsignedMultisigPSBT,\n  unsignedTransactionObjectFromPSBT,\n} from \"unchained-bitcoin\";\nimport updateState from \"./utils\";\nimport { SET_NETWORK, SET_ADDRESS_TYPE } from \"../actions/settingsActions\";\nimport {\n  CHOOSE_PERFORM_SPEND,\n  SET_REQUIRED_SIGNERS,\n  SET_TOTAL_SIGNERS,\n  SET_INPUTS,\n  ADD_OUTPUT,\n  SET_OUTPUT_ADDRESS,\n  SET_OUTPUT_AMOUNT,\n  DELETE_OUTPUT,\n  SET_FEE_RATE,\n  SET_FEE,\n  FINALIZE_OUTPUTS,\n  RESET_OUTPUTS,\n  SET_TXID,\n  RESET_TRANSACTION,\n  SET_IS_WALLET,\n  SET_CHANGE_OUTPUT_INDEX,\n  SET_CHANGE_OUTPUT_MULTISIG,\n  UPDATE_AUTO_SPEND,\n  SET_SIGNING_KEY,\n  SET_CHANGE_ADDRESS,\n  SET_BALANCE_ERROR,\n  SET_SPEND_STEP,\n  SPEND_STEP_CREATE,\n} from \"../actions/transactionActions\";\nimport { RESET_NODES_SPEND } from \"../actions/walletActions\";\n\nfunction sortInputs(a, b) {\n  const x = a.txid.toLowerCase();\n  const y = b.txid.toLowerCase();\n  if (x < y) {\n    return -1;\n  }\n  if (x > y) {\n    return 1;\n  }\n  if (a.n < b.n) {\n    return -1;\n  }\n  if (a.n > b.n) {\n    return 1;\n  }\n  return 0;\n}\n\nexport const initialOutputState = () => ({\n  address: \"\",\n  amount: \"\",\n  amountSats: \"\",\n  addressError: \"\",\n  amountError: \"\",\n});\n\nconst initialOutputsState = () => [initialOutputState()];\n\nexport const initialState = () => ({\n  chosen: false,\n  network: MAINNET,\n  inputs: [],\n  inputsTotalSats: new BigNumber(0),\n  outputs: initialOutputsState(),\n  changeOutputIndex: 0,\n  feeRate: \"\",\n  feeRateError: \"\",\n  fee: \"\",\n  feeError: \"\",\n  finalizedOutputs: false,\n  txid: \"\",\n  balanceError: \"\",\n  addressType: P2SH,\n  requiredSigners: 2,\n  totalSigners: 3,\n  unsignedTransaction: {},\n  isWallet: false,\n  autoSpend: true,\n  changeAddress: \"\",\n  updatesComplete: true,\n  signingKeys: [0, 0], // default 2 required signers\n  spendingStep: SPEND_STEP_CREATE,\n});\n\nfunction updateInputs(state, action) {\n  const inputsTotalSats = action.value.reduce(\n    (accumulator, input) => accumulator.plus(input.amountSats),\n    new BigNumber(0)\n  );\n  return updateState(state, {\n    inputs: action.value.sort(sortInputs),\n    inputsTotalSats,\n  });\n}\n\nfunction calcOutputTotalSats(state) {\n  return state.outputs.reduce(\n    (accumulator, { amount }) =>\n      accumulator.plus(bitcoinsToSatoshis(new BigNumber(amount || 0))),\n    new BigNumber(0)\n  );\n}\n\nfunction setFeeForRate(state, feeRateString, nout) {\n  return satoshisToBitcoins(\n    estimateMultisigTransactionFee({\n      addressType: state.addressType,\n      numInputs: state.inputs.length,\n      numOutputs: nout,\n      m: state.requiredSigners,\n      n: state.totalSigners,\n      feesPerByteInSatoshis: feeRateString,\n    })\n  )\n    .toFixed(8)\n    .toString();\n}\n\nfunction deleteOutput(state, action) {\n  const newState = { ...state };\n  const newOutputs = [];\n  for (let i = 0; i < newState.outputs.length; i += 1) {\n    if (i !== action.number - 1) {\n      newOutputs.push(newState.outputs[i]);\n    } else if (action.number === newState.changeOutputIndex) {\n      newState.changeOutputIndex = 0;\n    }\n    if (action.number < newState.changeOutputIndex)\n      newState.changeOutputIndex -= 1;\n  }\n  return {\n    ...newState,\n    ...{\n      outputs: newOutputs,\n      fee: setFeeForRate(newState, newState.feeRate, newOutputs.length),\n    },\n  };\n}\n\nfunction updateFeeRate(state, action) {\n  const feeRateString = action.value;\n  const feeRateError = validateFeeRate(feeRateString);\n  const fee =\n    feeRateError === \"\"\n      ? setFeeForRate(state, feeRateString, state.outputs.length)\n      : \"\";\n\n  return updateState(state, {\n    feeRate: feeRateString,\n    feeRateError,\n    fee,\n    feeError: \"\",\n  });\n}\n\nfunction updateFee(state, action) {\n  const feeString = action.value;\n  const feeSats = bitcoinsToSatoshis(feeString);\n  const feeError = validateFee(feeSats, state.inputsTotalSats);\n\n  return updateState(state, {\n    fee: feeString,\n    feeError,\n    feeRateError: \"\",\n  });\n}\n\nfunction addOutput(state) {\n  const newOutputs = state.outputs.concat(initialOutputState());\n  return {\n    ...state,\n    ...{\n      outputs: newOutputs,\n      fee: setFeeForRate(state, state.feeRate, newOutputs.length),\n    },\n  };\n}\n\nfunction updateOutputAddress(state, action) {\n  const newOutputs = [...state.outputs];\n  const address = action.value;\n  let error = validateAddress(address, state.network);\n  if (error === \"\") {\n    for (\n      let inputIndex = 0;\n      inputIndex < state.inputs.length;\n      inputIndex += 1\n    ) {\n      const input = state.inputs[inputIndex];\n      if (input.multisig && address === input.multisig.address) {\n        error = \"Output address cannot equal input address.\";\n        break;\n      }\n    }\n  }\n  if (error === \"\") {\n    for (\n      let outputIndex = 0;\n      outputIndex < state.outputs.length;\n      outputIndex += 1\n    ) {\n      if (outputIndex !== action.number - 1) {\n        if (state.outputs[outputIndex].address === address) {\n          error = \"Duplicate output address.\";\n          break;\n        }\n      }\n    }\n  }\n  newOutputs[action.number - 1].address = address;\n  newOutputs[action.number - 1].addressError = error;\n  return {\n    ...state,\n    ...{ outputs: newOutputs },\n  };\n}\n\nfunction updateOutputMultisig(state, action) {\n  const newOutputs = [...state.outputs];\n  newOutputs[action.number - 1].multisig = action.value;\n  return {\n    ...state,\n    ...{ outputs: newOutputs },\n  };\n}\n\nfunction updateOutputAmount(state, action) {\n  const newOutputs = [...state.outputs];\n  let amount = action.value;\n  const amountSats = bitcoinsToSatoshis(BigNumber(amount));\n  let error = validateOutputAmount(amountSats, state.inputsTotalSats);\n\n  if (state.isWallet && error === \"Total input amount must be positive.\")\n    error = \"\";\n  if (state.isWallet && error === \"Output amount is too large.\") error = \"\";\n\n  const dp = BigNumber(amount).dp();\n  if (dp > 8) amount = amount.slice(0, 8 - dp);\n\n  newOutputs[action.number - 1].amount = amount;\n  newOutputs[action.number - 1].amountError = error;\n  newOutputs[action.number - 1].amountSats = error ? \"\" : amountSats;\n  return {\n    ...state,\n    ...{ outputs: newOutputs },\n  };\n}\n\nfunction finalizeOutputs(state, action) {\n  let unsignedTransaction;\n  // First try to build the transaction via PSBT, if that fails (e.g. an input doesn't know about its braid),\n  // then try to build it using the old TransactionBuilder plumbing.\n  try {\n    const unsignedTransactionPSBT = unsignedMultisigPSBT(\n      state.network,\n      state.inputs,\n      state.outputs\n    );\n    unsignedTransaction = unsignedTransactionObjectFromPSBT(\n      unsignedTransactionPSBT\n    );\n  } catch (e) {\n    // probably has an input that isn't braid aware.\n    unsignedTransaction = unsignedMultisigTransaction(\n      state.network,\n      state.inputs,\n      state.outputs\n    ); // bitcoinjs-lib will throw a Deprecation warning for using TransactionBuilder\n  }\n  return {\n    ...state,\n    ...{ finalizedOutputs: action.value, unsignedTransaction },\n  };\n}\n\nfunction updateRequiredSigners(state, action) {\n  return updateState(state, {\n    requiredSigners: action.value,\n    signingKeys: Array(action.value).fill(0),\n  });\n}\n\nfunction updateSigningKey(state, action) {\n  const signingKeys = [...state.signingKeys];\n  signingKeys[action.number - 1] = action.value;\n  return updateState(state, { signingKeys });\n}\n\nfunction outputInitialStateForMode(state) {\n  return updateState(state, {\n    outputs: initialOutputsState(),\n    fee: \"\",\n    balanceError: \"\",\n    changeOutputIndex: 0,\n  });\n}\n\nfunction resetTransactionState(state) {\n  let newState = updateState(state, {\n    ...initialState(),\n    totalSigners: state.totalSigners,\n    network: state.network,\n    addressType: state.addressType,\n    isWallet: state.isWallet,\n    changeAddress: state.changeAddress,\n  });\n  newState = updateRequiredSigners(newState, { value: state.requiredSigners });\n  newState = outputInitialStateForMode(newState);\n  return newState;\n}\n\nfunction validateTransaction(state) {\n  let newState = { ...state };\n  // TODO: need less hacky way to supress error\n  if (\n    newState.outputs.find(\n      (output) => output.addressError !== \"\" || output.amountError !== \"\"\n    ) ||\n    newState.feeError !== \"\" ||\n    newState.feeRateError !== \"\" ||\n    newState.inputs.length === 0\n  ) {\n    return {\n      ...newState,\n      balanceError: \"\",\n    };\n  }\n  const feeSats = bitcoinsToSatoshis(new BigNumber(newState.fee));\n  const outputTotalSats = calcOutputTotalSats(newState);\n  if (!newState.inputsTotalSats.isEqualTo(outputTotalSats.plus(feeSats))) {\n    const diff = outputTotalSats.plus(feeSats).minus(newState.inputsTotalSats);\n    let balanceError;\n    if (diff.isNaN()) {\n      balanceError = \"Cannot calculate total.\";\n    } else {\n      newState = updateState(newState, { updatesComplete: true });\n      const action = diff.isLessThan(0) ? \"Increase\" : \"Decrease\";\n      balanceError = `${action} by ${satoshisToBitcoins(\n        diff.absoluteValue()\n      ).toFixed(8)}.`;\n    }\n    return {\n      ...newState,\n      balanceError,\n    };\n  }\n  const minFee = new BigNumber(setFeeForRate(newState, \"1\", 0));\n\n  if (new BigNumber(newState.fee).isLessThan(minFee)) {\n    return {\n      ...newState,\n      balanceError: `Fee is too small. Should be no less than ${bitcoinsToSatoshis(\n        minFee\n      )} satoshis.`,\n    };\n  }\n\n  return {\n    ...newState,\n    balanceError: \"\",\n  };\n}\n\nexport default (state = initialState(), action) => {\n  switch (action.type) {\n    case CHOOSE_PERFORM_SPEND:\n      return updateState(state, { chosen: true });\n    case SET_NETWORK:\n      return updateState(state, { network: action.value });\n    case SET_ADDRESS_TYPE:\n      return updateState(state, { addressType: action.value });\n    case SET_REQUIRED_SIGNERS:\n      return updateRequiredSigners(state, action);\n    case SET_TOTAL_SIGNERS:\n      return updateState(state, { totalSigners: action.value });\n    case SET_INPUTS:\n      return validateTransaction(updateInputs(state, action));\n    case ADD_OUTPUT:\n      return validateTransaction(addOutput(state, action));\n    case SET_CHANGE_OUTPUT_INDEX:\n      return updateState(state, { changeOutputIndex: action.value });\n    case SET_CHANGE_OUTPUT_MULTISIG:\n      return updateOutputMultisig(state, action);\n    case SET_OUTPUT_ADDRESS:\n      return validateTransaction(updateOutputAddress(state, action));\n    case SET_OUTPUT_AMOUNT:\n      return validateTransaction(updateOutputAmount(state, action));\n    case DELETE_OUTPUT:\n      return validateTransaction(deleteOutput(state, action));\n    case SET_FEE_RATE:\n      return validateTransaction(updateFeeRate(state, action));\n    case SET_FEE:\n      return validateTransaction(updateFee(state, action));\n    case FINALIZE_OUTPUTS:\n      return finalizeOutputs(state, action);\n    case RESET_OUTPUTS:\n      return outputInitialStateForMode(state);\n    case SET_TXID:\n      return updateState(state, { txid: action.value });\n    case SET_IS_WALLET:\n      return updateState(state, { isWallet: true });\n    case RESET_TRANSACTION:\n      return resetTransactionState(state);\n    case UPDATE_AUTO_SPEND:\n      return updateState(state, { autoSpend: action.value });\n    case SET_SIGNING_KEY:\n      return updateSigningKey(state, action);\n    case SET_CHANGE_ADDRESS:\n      return updateState(state, { changeAddress: action.value });\n    case RESET_NODES_SPEND:\n      return updateInputs(state, { value: [] });\n    case SET_BALANCE_ERROR:\n      return updateState(state, { balanceError: action.value });\n    case SET_SPEND_STEP:\n      return updateState(state, { spendingStep: action.value });\n    default:\n      return state;\n  }\n};\n","import { PENDING } from \"unchained-wallets\";\n\nimport {\n  SET_KEYSTORE,\n  SET_KEYSTORE_NOTE,\n  SET_KEYSTORE_STATUS,\n} from \"../actions/keystoreActions\";\n\nconst initialState = {\n  type: \"\",\n  version: \"\",\n  note: \"\",\n  status: PENDING,\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_KEYSTORE:\n      return {\n        ...state,\n        ...{ type: action.keystoreType, version: action.version },\n      };\n    case SET_KEYSTORE_NOTE:\n      return {\n        ...state,\n        ...{ note: action.value },\n      };\n    case SET_KEYSTORE_STATUS:\n      return {\n        ...state,\n        ...{ status: action.value },\n      };\n    default:\n      return state;\n  }\n};\n","import React from \"react\";\nimport { MAINNET, TESTNET, TEST_FIXTURES } from \"unchained-bitcoin\";\nimport { COLDCARD, ExportPublicKey, HERMIT } from \"unchained-wallets\";\n\nimport Test from \"./Test\";\n\nclass ExportPublicKeyTest extends Test {\n  // eslint-disable-next-line class-methods-use-this\n  postprocess(result) {\n    return result.pubkey ? result.pubkey : result;\n  }\n\n  name() {\n    return `Export ${this.params.network} public key at ${this.params.bip32Path}`;\n  }\n\n  description() {\n    return (\n      <p>\n        Export a public key at BIP32 path\n        <code>{this.params.bip32Path}</code>.\n      </p>\n    );\n  }\n\n  interaction() {\n    return ExportPublicKey({\n      keystore: this.params.keystore,\n      network: this.params.network,\n      bip32Path: this.params.bip32Path,\n      includeXFP: true,\n    });\n  }\n\n  expected() {\n    const { pub, rootFingerprint } = TEST_FIXTURES.keys.open_source.nodes[\n      this.params.bip32Path\n    ];\n    if (this.params.keystore === HERMIT) {\n      return pub;\n    }\n    return { publicKey: pub, rootFingerprint };\n  }\n}\n\nconst publicKeyTests = (keystore) => {\n  switch (keystore) {\n    case COLDCARD:\n      return [\n        new ExportPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/48'/1'/0'/1'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/48'/1'/0'/2'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/48'/0'/0'/1'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/48'/0'/0'/2'/0/0\",\n        }),\n      ];\n    default:\n      return [\n        new ExportPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/1'/0'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/48'/1'/0'/1'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/48'/1'/0'/2'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/48'/0'/0'/1'/0/0\",\n        }),\n        new ExportPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/48'/0'/0'/2'/0/0\",\n        }),\n      ];\n  }\n};\n\nexport default publicKeyTests;\n","import React from \"react\";\nimport { MAINNET, TESTNET, TEST_FIXTURES } from \"unchained-bitcoin\";\nimport {\n  LEDGER,\n  TREZOR,\n  COLDCARD,\n  ExportExtendedPublicKey,\n  HERMIT,\n} from \"unchained-wallets\";\nimport Test from \"./Test\";\n\nclass ExportExtendedPublicKeyTest extends Test {\n  // eslint-disable-next-line class-methods-use-this\n  postprocess(result) {\n    return result.pubkey ? result.pubkey : result;\n  }\n\n  name() {\n    return `Export ${this.params.network} xpub at ${this.params.bip32Path}`;\n  }\n\n  description() {\n    return (\n      <p>\n        Export an extended public key at BIP32 path{\" \"}\n        <code>{this.params.bip32Path}</code>\n      </p>\n    );\n  }\n\n  interaction() {\n    return ExportExtendedPublicKey({\n      keystore: this.params.keystore,\n      network: this.params.network,\n      bip32Path: this.params.bip32Path,\n      includeXFP: true,\n    });\n  }\n\n  expected() {\n    const {\n      xpub,\n      tpub,\n      rootFingerprint,\n    } = TEST_FIXTURES.keys.open_source.nodes[this.params.bip32Path];\n\n    if (this.params.keystore === HERMIT) {\n      return { xpub, bip32Path: this.params.bip32Path };\n    }\n    if (this.params.network === MAINNET || this.params.keystore === TREZOR)\n      return { xpub, rootFingerprint };\n    if (this.params.keystore === LEDGER || this.params.keystore === COLDCARD)\n      return { xpub: tpub, rootFingerprint };\n    return { tpub, rootFingerprint };\n  }\n}\n\nconst extendedPublicKeyTests = (keystore) => {\n  switch (keystore) {\n    case COLDCARD:\n      return [\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/1/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0/0\",\n        }),\n      ];\n    case LEDGER:\n      return [\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/4'/99'/2147483647/3/1\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/4'/99'/2147483647/3/1\",\n        }),\n      ];\n    case TREZOR:\n      return [\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/4'/99'/2147483647/3/1\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/4'/99'/2147483647/3/1\",\n        }),\n      ];\n    default:\n      return [\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: TESTNET,\n          bip32Path: \"m/45'/0'/4'/99'/2147483647/3/1\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/0'/0/0\",\n        }),\n        new ExportExtendedPublicKeyTest({\n          keystore,\n          network: MAINNET,\n          bip32Path: \"m/45'/0'/4'/99'/2147483647/3/1\",\n        }),\n      ];\n  }\n};\n\nexport default extendedPublicKeyTests;\n","import React from \"react\";\nimport {\n  blockExplorerAddressURL,\n  satoshisToBitcoins,\n  unsignedMultisigTransaction,\n  unsignedMultisigPSBT,\n  unsignedTransactionObjectFromPSBT,\n  TEST_FIXTURES,\n} from \"unchained-bitcoin\";\nimport { HERMIT, SignMultisigTransaction } from \"unchained-wallets\";\nimport { Box, Table, TableBody, TableRow, TableCell } from \"@material-ui/core\";\nimport { externalLink } from \"../utils\";\nimport Test from \"./Test\";\n\nclass SignMultisigTransactionTest extends Test {\n  // eslint-disable-next-line class-methods-use-this\n  postprocess(result) {\n    return result.signatures ? result.signatures : result;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  matches(expected, actual) {\n    return JSON.stringify(expected) === JSON.stringify(actual);\n  }\n\n  description() {\n    return (\n      <Box>\n        <p>Sign a transaction which{this.params.description}.</p>\n        <p>\n          <small>\n            This transaction is not meant to be broadcast, but just in case, the\n            output address is fixed and owned by Unchained Capital.\n          </small>\n        </p>\n        <Table>\n          <TableBody>\n            <TableRow>\n              <TableCell>Output Address:</TableCell>\n              <TableCell>\n                {externalLink(\n                  blockExplorerAddressURL(\n                    this.outputAddress(),\n                    this.params.network\n                  ),\n                  <code>{this.outputAddress()}</code>\n                )}\n              </TableCell>\n            </TableRow>\n\n            <TableRow>\n              <TableCell>Output Amount:</TableCell>\n              <TableCell>\n                {satoshisToBitcoins(this.outputAmountSats()).toString()} BTC\n              </TableCell>\n            </TableRow>\n\n            <TableRow>\n              <TableCell>Change Output Address:</TableCell>\n              <TableCell>\n                <code>{this.changeOutputAddress()}</code>\n              </TableCell>\n            </TableRow>\n\n            <TableRow>\n              <TableCell>Change Output Amount:</TableCell>\n              <TableCell>\n                {satoshisToBitcoins(this.changeOutputAmountSats()).toString()}{\" \"}\n                BTC\n              </TableCell>\n            </TableRow>\n\n            <TableRow>\n              <TableCell>Fees:</TableCell>\n              <TableCell>\n                {satoshisToBitcoins(this.feeSats()).toString()} BTC\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </Box>\n    );\n  }\n\n  inputsTotalSats() {\n    return this.params.inputs.reduce((total, input) => {\n      return total + input.amountSats.toNumber();\n    }, 0);\n  }\n\n  outputAddress() {\n    return this.params.outputs[0].address;\n  }\n\n  outputAmountSats() {\n    return this.params.outputs[0].amountSats.toNumber();\n  }\n\n  changeOutputAddress() {\n    return this.params.outputs[1].address;\n  }\n\n  changeOutputAmountSats() {\n    return this.params.outputs[1].amountSats.toNumber();\n  }\n\n  feeSats() {\n    return (\n      this.inputsTotalSats() -\n      this.outputAmountSats() -\n      this.changeOutputAmountSats()\n    );\n  }\n\n  unsignedTransaction() {\n    let unsignedTx;\n    try {\n      const unsignedTransactionPSBT = unsignedMultisigPSBT(\n        this.params.network,\n        this.params.inputs,\n        this.params.outputs\n      );\n      unsignedTx = unsignedTransactionObjectFromPSBT(unsignedTransactionPSBT);\n    } catch (e) {\n      // probably has an input that isn't braid aware.\n      unsignedTx = unsignedMultisigTransaction(\n        this.params.network,\n        this.params.inputs,\n        this.params.outputs\n      ); // bitcoinjs-lib will throw a Deprecation warning for using TransactionBuilder\n    }\n    return unsignedTx;\n  }\n\n  interaction() {\n    return SignMultisigTransaction({\n      keystore: this.params.keystore,\n      network: this.params.network,\n      inputs: this.params.inputs,\n      outputs: this.params.outputs,\n      bip32Paths: this.params.bip32Paths,\n    });\n  }\n\n  expected() {\n    return this.params.signature;\n  }\n}\n\nexport function signingTests(keystore) {\n  const transactions = [];\n\n  switch (keystore) {\n    case HERMIT:\n      TEST_FIXTURES.transactions.forEach((fixture) => {\n        if (!fixture.segwit) {\n          transactions.push(\n            new SignMultisigTransactionTest({\n              ...fixture,\n              ...{ keystore },\n            })\n          );\n        }\n      });\n      return transactions;\n    default:\n      return TEST_FIXTURES.transactions.map((fixture) => {\n        return new SignMultisigTransactionTest({\n          ...fixture,\n          ...{ keystore },\n        });\n      });\n  }\n}\n\nexport default signingTests;\n","import { TREZOR } from \"unchained-wallets\";\n\nimport publicKeyTests from \"./publicKeys\";\nimport extendedPublicKeyTests from \"./extendedPublicKeys\";\nimport { signingTests } from \"./signing\";\n\nexport default publicKeyTests(TREZOR)\n  .concat(extendedPublicKeyTests(TREZOR))\n  .concat(signingTests(TREZOR));\n","import { LEDGER } from \"unchained-wallets\";\n\nimport publicKeyTests from \"./publicKeys\";\nimport extendedPublicKeyTests from \"./extendedPublicKeys\";\nimport { signingTests } from \"./signing\";\n\nexport default publicKeyTests(LEDGER)\n  .concat(extendedPublicKeyTests(LEDGER))\n  .concat(signingTests(LEDGER));\n","import { HERMIT } from \"unchained-wallets\";\n\nimport publicKeyTests from \"./publicKeys\";\nimport extendedPublicKeyTests from \"./extendedPublicKeys\";\nimport { signingTests } from \"./signing\";\n\nexport default publicKeyTests(HERMIT)\n  .concat(extendedPublicKeyTests(HERMIT))\n  .concat(signingTests(HERMIT));\n","import { COLDCARD } from \"unchained-wallets\";\n\nimport extendedPublicKeyTests from \"./extendedPublicKeys\";\nimport { signingTests } from \"./signing\";\nimport publicKeyTests from \"./publicKeys\";\n\nexport default publicKeyTests(COLDCARD)\n  .concat(extendedPublicKeyTests(COLDCARD))\n  .concat(signingTests(COLDCARD));\n","import { TREZOR, LEDGER, HERMIT, COLDCARD } from \"unchained-wallets\";\nimport { TEST_FIXTURES } from \"unchained-bitcoin\";\n\nimport trezorTests from \"./trezor\";\nimport ledgerTests from \"./ledger\";\nimport hermitTests from \"./hermit\";\nimport coldcardTests from \"./coldcard\";\n\nconst SUITE = {};\n\nSUITE[TREZOR] = trezorTests;\nSUITE[LEDGER] = ledgerTests;\nSUITE[HERMIT] = hermitTests;\nSUITE[COLDCARD] = coldcardTests;\n\nconst SEED = TEST_FIXTURES.bip39Phrase;\n\nexport { SUITE, SEED };\n","import moment from \"moment\";\nimport { PENDING, ACTIVE } from \"unchained-wallets\";\n\nimport { SUITE } from \"../tests\";\n\nimport { SET_KEYSTORE } from \"../actions/keystoreActions\";\nimport {\n  START_TEST_SUITE_RUN,\n  SET_CURRENT_TEST_RUN,\n} from \"../actions/testSuiteRunActions\";\nimport {\n  START_TEST_RUN,\n  END_TEST_RUN,\n  RESET_TEST_RUN,\n  SET_TEST_RUN_NOTE,\n} from \"../actions/testRunActions\";\n\nconst initialTestRunState = {\n  startedAt: \"\",\n  endedAt: \"\",\n  status: PENDING,\n  message: \"\",\n  note: \"\",\n};\n\nconst initialState = {\n  started: false,\n  startedAt: \"\",\n  endedAt: \"\",\n  testRuns: [],\n  currentTestRunIndex: -1,\n};\n\nconst testRunsForKeystore = (action) => {\n  if (action.keystoreType === \"\") {\n    return [];\n  }\n  return (SUITE[action.keystoreType] || []).map((test) => {\n    return {\n      ...initialTestRunState,\n      ...{ test },\n    };\n  });\n};\n\nconst updatedTestRun = (state, testRunIndex, update) => {\n  return {\n    ...state,\n    ...{\n      testRuns: state.testRuns.map((testRun, i) => {\n        if (i === testRunIndex) {\n          return {\n            ...testRun,\n            ...update,\n          };\n        }\n        return testRun;\n      }),\n    },\n  };\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_KEYSTORE:\n      return {\n        ...state,\n        ...{ testRuns: testRunsForKeystore(action) },\n      };\n    case START_TEST_SUITE_RUN:\n      return {\n        ...state,\n        ...{\n          started: true,\n          startedAt: moment(),\n          currentTestRunIndex: 0,\n        },\n      };\n    case SET_CURRENT_TEST_RUN:\n      return {\n        ...state,\n        ...{ currentTestRunIndex: action.value },\n      };\n    case START_TEST_RUN:\n      return updatedTestRun(state, action.testRunIndex, {\n        startedAt: moment(),\n        status: ACTIVE,\n      });\n    case END_TEST_RUN:\n      return updatedTestRun(state, action.testRunIndex, {\n        endedAt: moment(),\n        status: action.status,\n        message: action.message,\n      });\n    case RESET_TEST_RUN:\n      return updatedTestRun(state, action.testRunIndex, initialTestRunState);\n    case SET_TEST_RUN_NOTE:\n      return updatedTestRun(state, action.testRunIndex, { note: action.note });\n    default:\n      return state;\n  }\n};\n","import {\n  SET_ERROR_NOTIFICATION,\n  CLEAR_ERROR_NOTIFICATION,\n} from \"../actions/errorNotificationActions\";\n\nconst initialState = {\n  message: \"\",\n  open: false,\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_ERROR_NOTIFICATION:\n      return {\n        ...state,\n        ...{ open: true, message: action.value },\n      };\n    case CLEAR_ERROR_NOTIFICATION:\n      return {\n        ...state,\n        ...{ open: false, message: \"\" },\n      };\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\n\nimport settingsReducer from \"./settingsReducer\";\nimport clientReducer from \"./clientReducer\";\nimport braidReducer from \"./braidReducer\";\nimport quorumReducer from \"./quorumReducer\";\nimport addressReducer from \"./addressReducer\";\nimport walletReducer from \"./walletReducer\";\n\nimport ownershipReducer from \"./ownershipReducer\";\nimport signatureImportersReducer from \"./signatureImportersReducer\";\nimport transactionReducer from \"./transactionReducer\";\nimport keystoreReducer from \"./keystoreReducer\";\nimport testSuiteRunReducer from \"./testSuiteRunReducer\";\nimport errorNotificationReducer from \"./errorNotificationReducer\";\n\nimport {\n  UPDATE_DEPOSIT_SLICE,\n  UPDATE_CHANGE_SLICE,\n  RESET_WALLET,\n} from \"../actions/walletActions\";\n\nconst spendReducers = combineReducers({\n  ownership: ownershipReducer,\n  transaction: transactionReducer,\n  signatureImporters: signatureImportersReducer,\n});\n\nconst walletReducers = combineReducers({\n  deposits: braidReducer(UPDATE_DEPOSIT_SLICE),\n  change: braidReducer(UPDATE_CHANGE_SLICE),\n  common: walletReducer,\n});\n\nconst appReducer = combineReducers({\n  settings: settingsReducer,\n  client: clientReducer,\n  address: addressReducer,\n  spend: spendReducers,\n  quorum: quorumReducer,\n  wallet: walletReducers,\n  testSuiteRun: testSuiteRunReducer,\n  keystore: keystoreReducer,\n  errorNotification: errorNotificationReducer,\n});\n\nconst rootReducer = (state, action) => {\n  let newState = state;\n  if (action.type === RESET_WALLET || action.type === \"RESET_APP_STATE\")\n    newState = undefined;\n\n  return appReducer(newState, action);\n};\n\nexport default rootReducer;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport ReduxPromise from \"redux-promise\";\nimport thunk from \"redux-thunk\";\n\nimport App from \"./components/AppContainer\";\nimport registerServiceWorker from \"./registerServiceWorker\";\nimport reducers from \"./reducers\";\n\n/* eslint-disable-next-line no-underscore-dangle */\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  reducers,\n  composeEnhancers(applyMiddleware(ReduxPromise, thunk))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"app\")\n);\nregisterServiceWorker();\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.estimateMultisigP2SH_P2WSHTransactionVSize = estimateMultisigP2SH_P2WSHTransactionVSize;\nexports.P2SH_P2WSH = void 0;\n\n/**\n * This module provides functions and constants for the P2SH-wrapped\n * P2WSH address type, sometimes written P2SH-P2WSH.\n * \n * @module p2sh_p2wsh\n */\n\n/**\n * Address type constant for \"pay-to-script-hash\" wrapped\n * \"pay-to-witness-script-hash\" (P2SH-P2WSH) addresses.\n *\n * @constant\n * @type {string}\n * @default P2SH-P2WSH\n * \n */\nvar P2SH_P2WSH = \"P2SH-P2WSH\";\n/**\n * Estimate the transaction virtual size (vsize) when spending inputs\n * from the same multisig P2SH-P2WSH address.\n *\n * @param {Object} config - configuration for the calculation\n * @param {number} config.numInputs - number of m-of-n multisig P2SH inputs\n * @param {number} config.numOutputs - number of outputs\n * @param {number} config.m - required signers\n * @param {number} config.n - total signers\n * @returns {number} estimated transaction virtual size in bytes\n */\n\nexports.P2SH_P2WSH = P2SH_P2WSH;\n\nfunction estimateMultisigP2SH_P2WSHTransactionVSize(config) {\n  var baseSize = 76 * config.numInputs + 34 * config.numOutputs + 30;\n  var signatureLength = 72;\n  var overhead = 6;\n  var keylength = 33;\n  var witnessSize = signatureLength * config.m * config.numInputs + keylength * config.n * config.numInputs + overhead * config.numInputs;\n  var vsize = Math.ceil(0.75 * baseSize + 0.25 * (baseSize + witnessSize));\n  return vsize;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRedeemScriptSize = getRedeemScriptSize;\nexports.getWitnessSize = getWitnessSize;\nexports.calculateBase = calculateBase;\nexports.calculateTotalWitnessSize = calculateTotalWitnessSize;\nexports.estimateMultisigP2WSHTransactionVSize = estimateMultisigP2WSHTransactionVSize;\nexports.P2WSH = void 0;\n\nvar _bufio = require(\"bufio\");\n\n/**\n * This module provides functions and constants for the P2WSH address type.\n * \n * @module p2wsh\n */\n\n/**\n * Address type constant for \"pay-to-witness-script-hash\" or (P2WSH)\n * addresses.\n * \n * @constant\n * @type {string}\n * @default P2WSH\n */\nvar P2WSH = \"P2WSH\";\n/**\n * @description provides the size of single tx input for a segwit tx (i.e. empty script)\n * Each input field will look like:\n * prevhash (32 bytes) + prevIndex (4) + scriptsig (1) + sequence bytes (4)\n * @returns {Number} 41 (always 41 for segwit inputs since script sig is in witness)\n */\n\nexports.P2WSH = P2WSH;\n\nfunction txinSize() {\n  var PREVHASH_BYTES = 32;\n  var PREV_INDEX_BYTES = 4;\n  var SCRIPT_LENGTH_BYTES = 1;\n  var SEQUENCE_BYTES = 4;\n  return PREVHASH_BYTES + PREV_INDEX_BYTES + SEQUENCE_BYTES + SCRIPT_LENGTH_BYTES;\n}\n/**\n * @description Returns the approximate size of outputs in tx. \n * Calculated by adding value field (8 bytes), field providing length\n * scriptPubkey and the script pubkey itself\n * @param {Number} [scriptPubkeySize = 34] size of script pubkey. \n * Defaults to 34 which is the size of a P2WSH script pubkey and the\n * largest possible standard\n * @returns {Number} size of tx output (default: 43)\n */\n\n\nfunction txoutSize() {\n  var scriptPubkeySize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 34;\n  // per_output: value (8) + script length (1) + \n  var VAL_BYTES = 8;\n\n  var scriptLengthBytes = _bufio.encoding.sizeVarint(scriptPubkeySize); // for P2WSH Locking script which is largest possible(34)\n\n\n  return VAL_BYTES + scriptLengthBytes + scriptPubkeySize;\n}\n/**\n * @description calculates size of redeem script given n pubkeys.\n * Calculation looks like: \n * OP_M (1 byte) + size of each pubkey in redeem script (OP_DATA= 1 byte * N) +\n * pubkey size (33 bytes * N) + OP_N (1 byte) + OP_CHECKMULTISIG (1 byte)\n *  => 1 + (1 * N) + (33 * N) + 1 + 1\n * @param {Number} n - value of n in m-of-n for multisig script\n * @returns {Number} 3 + 34 * N\n */\n\n\nfunction getRedeemScriptSize(n) {\n  var OP_M_BYTES = 1;\n  var OP_N_BYTES = 1;\n  var opDataBytes = n; // 1 byte per pubkey in redeem script\n\n  var pubkeyBytes = 33 * n;\n  var OP_CHECKMULTISIG_BYTES = 1;\n  return OP_M_BYTES + opDataBytes + pubkeyBytes + OP_N_BYTES + OP_CHECKMULTISIG_BYTES;\n}\n/**\n * @description Calculates the value of a multisig witness given m-of-n values\n * Calculation is of the following form:\n * witness_items count (varint 1+) + null_data (1 byte) + size of each signature (1 byte * OP_M) + signatures (73 * M) +\n * redeem script length (1 byte) + redeem script size (4 + 34 * N bytes)\n * @param {Number} m - value of m in m-of-n for multisig script\n * @param {Number} n - value of n in m-of-n for multisig script\n * @returns {Number} 6 + (74 * M) + (34 * N)\n */\n\n\nfunction getWitnessSize(m, n) {\n  var OP_NULL_BYTES = 1; // needs to be added b/c of bug in multisig implementation\n\n  var opDataBytes = m; // assumes largest possible signature size which could be 71, 72, or 73\n\n  var signaturesSize = 73 * m;\n  var REDEEM_SCRIPT_LENGTH = 1;\n  var redeemScriptSize = getRedeemScriptSize(n); // total witness stack will be null bytes + each signature (m) + redeem script\n\n  var WITNESS_ITEMS_COUNT = _bufio.encoding.sizeVarint(1 + m + 1);\n\n  return WITNESS_ITEMS_COUNT + OP_NULL_BYTES + opDataBytes + signaturesSize + REDEEM_SCRIPT_LENGTH + redeemScriptSize;\n}\n/**\n * @description Calculates the size of the fields in a transaction which DO NOT\n * get counted towards witness discount.\n * Calculated as: version bytes (4) + locktime bytes (4) + input_len (1+) + txins (41+) + output_len (1+) + outputs (9+)\n * @param {*} inputsCount - number of inputs in the tx\n * @param {*} outputsCount - number of outputs in the tx\n * @returns {Number} number of bytes in the tx without witness fields\n */\n\n\nfunction calculateBase(inputsCount, outputsCount) {\n  var total = 0;\n  total += 4; // version\n\n  total += 4; // locktime\n\n  total += _bufio.encoding.sizeVarint(inputsCount); // inputs length\n\n  total += inputsCount * txinSize();\n  total += _bufio.encoding.sizeVarint(outputsCount);\n  total += outputsCount * txoutSize();\n  return total;\n}\n\nfunction calculateTotalWitnessSize(_ref) {\n  var numInputs = _ref.numInputs,\n      m = _ref.m,\n      n = _ref.n;\n  var total = 0;\n  total += 1; // segwit marker\n\n  total += 1; // segwit flag\n\n  total += _bufio.encoding.sizeVarint(numInputs); // bytes for number of witnesses\n\n  total += numInputs * getWitnessSize(m, n); // add witness for each input\n\n  return total;\n}\n/**\n * @description Calculate virtual bytes or \"vsize\". \n * vsize is equal three times \"base size\" of a tx w/o witness data, plus the\n * total size of all data, with the final result divided by scaling factor\n * of 4 and round up to the next integer. For example, if a transaction is\n * 200 bytes with new serialization, and becomes 99 bytes with marker, flag,\n * and witness removed, the vsize is (99 * 3 + 200) / 4 = 125 with round up.\n * @param {Number} baseSize - base size of transaction\n * @param {Number} witnessSize - size of witness fields\n * @returns {Number} virtual size of tx\n */\n\n\nfunction calculateVSize(baseSize, witnessSize) {\n  var WITNESS_SCALE_FACTOR = 4;\n  var totalSize = baseSize + witnessSize;\n  var txWeight = baseSize * 3 + totalSize;\n  return Math.ceil(txWeight / WITNESS_SCALE_FACTOR);\n}\n/**\n * Estimate the transaction virtual size (vsize) when spending inputs\n * from the same multisig P2WSH address. \n * @param {Object} config - configuration for the calculation\n * @param {number} config.numInputs - number of m-of-n multisig P2SH inputs\n * @param {number} config.numOutputs - number of outputs\n * @param {number} config.m - required signers\n * @param {number} config.n - total signers\n * @returns {number} estimated transaction virtual size in bytes\n */\n\n\nfunction estimateMultisigP2WSHTransactionVSize(config) {\n  // non-segwit discount fields\n  var baseSize = calculateBase(config.numInputs, config.numOutputs); // these are the values that benefit from the segwit discount\n\n  var witnessSize = calculateTotalWitnessSize(config);\n  return calculateVSize(baseSize, witnessSize);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.networkData = networkData;\nexports.networkLabel = networkLabel;\nexports.getNetworkFromPrefix = getNetworkFromPrefix;\nexports.NETWORKS = exports.TESTNET = exports.MAINNET = void 0;\n\nvar _bitcoinjsLib = require(\"bitcoinjs-lib\");\n\n/**\n * This module exports network constants and provide some utility\n * functions for displaying the network name and passing the network\n * value to bitcoinjs.\n * \n * @module networks\n */\n\n/**\n * Constant corresponding to the Bitcoin mainnet.\n * \n * @constant\n * @type {string}\n * @default mainnet\n * \n */\nvar MAINNET = \"mainnet\";\n/**\n * Constant corresponding to the current Bitcoin testnet.\n * \n * @constant\n * @type {string}\n * @default testnet\n */\n\nexports.MAINNET = MAINNET;\nvar TESTNET = \"testnet\";\n/**\n * Enumeration of possible values for bitcoin networks ([MAINET]{@link module:networks.MAINNET}|[TESTNET]{@link module:networks.TESTNET}).\n *\n * @constant\n * @enum {string}\n * @default\n */\n\nexports.TESTNET = TESTNET;\nvar NETWORKS = {\n  MAINNET: MAINNET,\n  TESTNET: TESTNET\n};\n/**\n * Returns bitcoinjs-lib network object corresponding to the given\n * network.\n *\n * This function is for internal use by this library.\n * \n * @param {module:networks.NETWORKS} network - bitcoin network\n * @returns {Network} bitcoinjs-lib network object\n */\n\nexports.NETWORKS = NETWORKS;\n\nfunction networkData(network) {\n  switch (network) {\n    case NETWORKS.MAINNET:\n      return _bitcoinjsLib.networks.bitcoin;\n\n    case NETWORKS.TESTNET:\n      return _bitcoinjsLib.networks.testnet;\n\n    default:\n      return _bitcoinjsLib.networks.testnet;\n  }\n}\n/**\n * Returns human-readable network label for the specified network.\n * \n * @param {module:networks.NETWORKS} network - bitcoin network\n * @returns {string} network label\n * @example\n * import {MAINNET} from \"unchained-bitcoin\";\n * console.log(networkLabel(MAINNET)); // \"Mainnet\"\n */\n\n\nfunction networkLabel(network) {\n  switch (network) {\n    case NETWORKS.MAINNET:\n      return \"Mainnet\";\n\n    case NETWORKS.TESTNET:\n      return \"Testnet\";\n\n    default:\n      return \"Testnet\";\n  }\n}\n/**\n * @description given a prefix determine the network it indicates\n * @param {string} prefix - extended public key prefix (e.g. xpub, tpub)\n * @returns {string} - string indicating network\n */\n\n\nfunction getNetworkFromPrefix(prefix) {\n  switch (prefix.toLowerCase()) {\n    case 'xpub':\n    case 'ypub':\n    case 'zpub':\n      return MAINNET;\n\n    case 'tpub':\n    case 'upub':\n    case 'vpub':\n      return TESTNET;\n\n    default:\n      throw new Error(\"Unrecognized extended public key prefix \".concat(prefix));\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toHexString = toHexString;\nexports.validateHex = validateHex;\nexports.satoshisToBitcoins = satoshisToBitcoins;\nexports.bitcoinsToSatoshis = bitcoinsToSatoshis;\nexports.hash160 = hash160;\nexports.ZERO = void 0;\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar _bignumber = _interopRequireDefault(require(\"bignumber.js\"));\n\nvar _bitcoinjsLib = require(\"bitcoinjs-lib\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * This module provides conversion and validation functions for units\n * (Satoshis, BTC) and hex strings.\n * \n * @module utils\n */\n\n/**\n * Converts a byte array to its hex representation.\n * \n * @param {number[] | Buffer} byteArray - input byte array\n * @returns {string} hex representation of input array\n * \n * @example\n * import {toHexString} from \"unchained-bitcoin\";\n * const hex = toHexString([255, 0, 15, 16, 31, 32]);\n * console.log(hex) // ff000f101f20\n * \n */\nfunction toHexString(byteArray) {\n  return Array.prototype.map.call(byteArray, function (byte) {\n    return ('0' + (byte & 0xFF).toString(16)).slice(-2);\n  }).join('');\n}\n/**\n * Validate whether the given string is hex.\n *\n * - Valid hex consists of an even number of characters 'a-f`, `A-F`,\n *   or `0-9`.  This is case-insensitive.\n *\n * - The presence of the common prefix `0x` will make the input be\n *   considered invalid (because of the` `x`).\n * \n * @param {string} inputString - string to validate\n * @returns {string} empty if valid or corresponding validation message if not\n * \n * @example\n * import {validateHex} from \"unchained-bitcoin\";\n * console.log(validateHex('00112233gg')) // \"Invalid hex: ...\"\n * console.log(validateHex('0xdeadbeef')) // \"Invalid hex: ...\"\n * console.log(validateHex('deadbeef')) // \"\"\n * console.log(validateHex('DEADbeef')) // \"\"\n * \n */\n\n\nfunction validateHex(inputString) {\n  if (inputString.length % 2) {\n    return 'Invalid hex: odd-length string.';\n  }\n\n  var re = /^[0-9A-Fa-f]*$/;\n\n  if (!re.test(inputString)) {\n    return 'Invalid hex: only characters a-f, A-F and 0-9 allowed.';\n  }\n\n  return '';\n}\n/**\n * Convert a value in Satoshis to BTC.\n *\n * - Accepts both positive and negative input values.\n * - Rounds down (towards zero) input value to the nearest Satoshi.\n * \n * @param {BigNumber|string|number} satoshis - value in Satoshis\n * @returns {BigNumber} value in BTC\n * \n * @example\n * import {satoshisToBitcoins} from \"unchained-bitcoin\";\n * console.log(satoshisToBitcoins(123450000)); // 1.2345\n * console.log(satoshisToBitcoins('0.5')); // 0\n * console.log(satoshisToBitcoins('-100000000.5')); // -1.0\n * \n */\n\n\nfunction satoshisToBitcoins(satoshis) {\n  var originalValue = (0, _bignumber.default)(satoshis);\n  var roundedValue = originalValue.integerValue(_bignumber.default.ROUND_DOWN);\n  return roundedValue.shiftedBy(-8);\n}\n/**\n * Convert a value in BTC to Satoshis.\n *\n * - Accepts both positive and negative input values.\n * - Rounds down output value to the nearest Satoshi.\n * \n * @param {BigNumber|string|number} btc - value in BTC\n * @returns {BigNumber} value in satoshis\n * \n * @example\n * import {bitcoinsToSatoshis} from \"unchained-bitcoin\";\n * console.log(bitcoinsToSatoshis(1.2345)); // 123450000\n * console.log(bitcoinsToSatoshis(-1.2345)); // -123450000\n */\n\n\nfunction bitcoinsToSatoshis(btc) {\n  return (0, _bignumber.default)(btc).shiftedBy(8).integerValue(_bignumber.default.ROUND_DOWN);\n}\n\nvar ZERO = (0, _bignumber.default)(0);\n/**\n * Given a buffer as a digest, pass through sha256 and ripemd160\n * hash functions. Returns the result\n * @param {Buffer} buf - buffer to get hash160 of\n * @returns {Buffer} hash160 of the given buffer\n */\n\nexports.ZERO = ZERO;\n\nfunction hash160(buf) {\n  return _bitcoinjsLib.crypto.ripemd160(_bitcoinjsLib.crypto.sha256(buf));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateMultisigFromPublicKeys = generateMultisigFromPublicKeys;\nexports.generateMultisigFromHex = generateMultisigFromHex;\nexports.generateMultisigFromRaw = generateMultisigFromRaw;\nexports.multisigAddressType = multisigAddressType;\nexports.multisigRequiredSigners = multisigRequiredSigners;\nexports.multisigTotalSigners = multisigTotalSigners;\nexports.multisigScript = multisigScript;\nexports.multisigRedeemScript = multisigRedeemScript;\nexports.multisigWitnessScript = multisigWitnessScript;\nexports.multisigPublicKeys = multisigPublicKeys;\nexports.multisigAddress = multisigAddress;\nexports.multisigBraidDetails = multisigBraidDetails;\nexports.MULTISIG_ADDRESS_TYPES = void 0;\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nvar _networks = require(\"./networks\");\n\nvar _p2sh = require(\"./p2sh\");\n\nvar _p2sh_p2wsh = require(\"./p2sh_p2wsh\");\n\nvar _p2wsh = require(\"./p2wsh\");\n\nvar _utils = require(\"./utils\");\n\nvar _bitcoinjsLib = require(\"bitcoinjs-lib\");\n\n/**\n * This module provides an API around the multisig capabilities of the\n * bitcoinjs-lib library.  The API is functional but requires you\n * creating and passing around a [`Multisig`]{@link module:multisig.MULTISIG} object.\n *\n * This `Multisig` object represents the combination of:\n *\n * 1) a sequence of N public keys\n * 2) the number of required signers (M)\n * 3) the address type  (P2SH, P2SH-P2WSH, P2WSH)\n * 4) the bitcoin network\n *\n * This corresponds to a unique bitcoin multisig address.  Note that\n * since (3) & (4) can change without changing (1) & (2), different\n * `Multisig` objects (and their corresponding bitcoin addresses) can\n * have different representations but the same security rules as to\n * who can sign.\n *\n * You can create `Multisig` objects yourself using the following\n * functions:\n *\n * - `generateMultisigFromPublicKeys` which takes public keys as input\n * - `generateMultisigFromHex` which takes a redeem/witness script as input\n *\n * Once you have a `Multisig` object you can pass it around in your\n * code and then ask questions about it using the other functions\n * defined in this module.\n *\n * You can manipulate `Multisig` objects directly but it's better to\n * use the functions from API provided by this module.\n *\n * @module multisig\n * @example\n * import {\n *   generateMultisigFromPublicKeys, MAINNET, P2SH,\n *   multisigRequiredSigners, multisigTotalSigners,\n *   multisigAddressType,\n *   multisigPublicKeys,\n * } from \"unchained-bitcoin\";\n * const pubkey1 = \"03a...\";\n * const pubkey2 = \"03b...\";\n * // A mainnet 1-of-2 P2SH multisig\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2SH, 1, pubkey1, pubkey2);\n *\n * console.log(multisigRequiredSigners(multisig)); // 1\n * console.log(multisigTotalSigners(multisig)); // 2\n * console.log(multisigAddressType(multisig)); // \"P2SH\"\n * console.log(multisigPublicKeys(multisig)); // [\"03a...\", \"03b...\"]\n *\n */\n\n/**\n * Describes the return type of several functions in the\n * `payments` module of bitcoinjs-lib.\n *\n * The following functions in this module will return objects of this\n * type:\n *\n * - `generateMultisigFromPublicKeys` which takes public keys as input\n * - `generateMultisigFromHex` which takes a redeem/witness script as input\n *\n * The remaining functions accept these objects as arguments.\n *\n * @typedef module:multisig.Multisig\n * @type {Object}\n * @property {string} address - The multisig address\n * @property {Object} redeem - the redeem object from p2ms\n * @property {Object} multisigBraidDetails - details about the braid (addressType, network, requiredSigners, xpubs, index)\n * @property {Object[]} getBip32Derivation - Array of objects for every key in this multisig address\n *\n */\n\n/**\n * Enumeration of possible multisig address types ([P2SH]{@link module:p2sh.P2SH}|[P2SH_P2WSH]{@link module:p2sh_p2wsh.P2SH_P2WSH}|[P2WSH]{@link module:p2wsh.P2WSH}).\n *\n * @constant\n * @enum {string}\n * @default\n */\nvar MULTISIG_ADDRESS_TYPES = {\n  P2SH: _p2sh.P2SH,\n  P2SH_P2WSH: _p2sh_p2wsh.P2SH_P2WSH,\n  P2WSH: _p2wsh.P2WSH\n};\n/**\n * Return an M-of-N [`Multisig`]{@link module:multisig.MULTISIG}\n * object by specifying the total number of signers (M) and the public\n * keys (N total).\n *\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} addressType - address type\n * @param {number} requiredSigners - number of signers required needed to spend funds (M)\n * @param  {...string} publicKeys - list of public keys, 1 per possible signer (N)\n * @returns {Multisig} the corresponding `Multisig` object\n * @example\n * // A 2-of-3 P2SH mainnet multisig built from 3 public keys.\n * import {\n *   generateMultisigFromPublicKeys, MAINNET, P2SH, P2WSH,\n * } from \"unchained-bitcoin\";\n * const multisigP2SH = generateMultisigFromPublicKeys(MAINNET, P2SH, 2, \"03a...\", \"03b...\", \"03c...\");\n * const multisigP2WSH = generateMultisigFromPublicKeys(MAINNET, P2WSH, 2, \"03a...\", \"03b...\", \"03c...\");\n */\n\nexports.MULTISIG_ADDRESS_TYPES = MULTISIG_ADDRESS_TYPES;\n\nfunction generateMultisigFromPublicKeys(network, addressType, requiredSigners) {\n  for (var _len = arguments.length, publicKeys = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    publicKeys[_key - 3] = arguments[_key];\n  }\n\n  var multisig = _bitcoinjsLib.payments.p2ms({\n    m: requiredSigners,\n    pubkeys: publicKeys.map(function (hex) {\n      return Buffer.from(hex, 'hex');\n    }),\n    network: (0, _networks.networkData)(network)\n  });\n\n  return generateMultisigFromRaw(addressType, multisig);\n}\n/**\n * Return an M-of-N [`Multisig`]{@link module.multisig:Multisig}\n * object by passing a script in hex.\n *\n * If the `addressType` is `P2SH` then the script hex being passed is\n * the redeem script.  If the `addressType` is P2SH-wrapped SegWit\n * (`P2SH_P2WSH`) or native SegWit (`P2WSH`) then the script hex being\n * passed is the witness script.\n *\n * In practice, the same script hex can be thought of as any of\n * several address types, depending on context.\n *\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} addressType - address type\n * @param {string} multisigScriptHex - hex representation of the redeem/witness script\n * @returns {Multisig} object for further parsing\n * @example\n * import {\n *   generateMultisigFromHex, MAINNET, P2SH, P2WSH,\n * } from \"unchained-bitcoin\";\n * const multisigScript = \"512103a90d10bf3794352bb1fa533dbd4ea75a0ffc98e0d05124938fcc3e10cdbe1a4321030d60e8d497fa8ce59a2b3203f0e597cd0182e1fe0cc3688f73497f2e99fbf64b52ae\";\n * const multisigP2SH = generateMultisigFromHex(MAINNET, P2SH, multisigScript);\n * const multisigP2WSH = generateMultisigFromHex(MAINNET, P2WSH, multisigScript);\n */\n\n\nfunction generateMultisigFromHex(network, addressType, multisigScriptHex) {\n  var multisig = _bitcoinjsLib.payments.p2ms({\n    output: Buffer.from(multisigScriptHex, 'hex'),\n    network: (0, _networks.networkData)(network)\n  });\n\n  return generateMultisigFromRaw(addressType, multisig);\n}\n/**\n * Return an M-of-N [`Multisig`]{@link module.multisig:Multisig}\n * object by passing in a raw P2MS multisig object (from bitcoinjs-lib).\n *\n * This function is only used internally, do not call it directly.\n *\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} addressType - address type\n * @param {object} multisig - P2MS multisig object\n * @returns {Multisig} object for further parsing\n * @ignore\n *\n */\n\n\nfunction generateMultisigFromRaw(addressType, multisig) {\n  switch (addressType) {\n    case _p2sh.P2SH:\n      return _bitcoinjsLib.payments.p2sh({\n        redeem: multisig\n      });\n\n    case _p2sh_p2wsh.P2SH_P2WSH:\n      return _bitcoinjsLib.payments.p2sh({\n        redeem: _bitcoinjsLib.payments.p2wsh({\n          redeem: multisig\n        })\n      });\n\n    case _p2wsh.P2WSH:\n      return _bitcoinjsLib.payments.p2wsh({\n        redeem: multisig\n      });\n\n    default:\n      return null;\n  }\n}\n/**\n * Return the [address type]{@link module:multisig.MULTISIG_ADDRESS_TYPES} of the given `Multisig` object.\n *\n * @param {module:multisig.Multisig} multisig the `Multisig` object\n * @returns {module:multisig.MULTISIG_ADDRESS_TYPES|String} the address type\n * @example\n * import {\n *   multisigAddressType, P2SH, P2SH_P2WSH, P2WSH,\n * } from \"unchained-bitcoin\";\n * function doSomething(multisig) {\n *   switch (multisigAddressType(multisig)) {\n *   case P2SH:\n *     // handle P2SH here\n *   case P2SH_P2WSH:\n *     // handle P2SH-P2WSH here\n *   case P2WSH:\n *     // handle P2WSH here\n *   default:\n *     // shouldn't reach here\n * }\n */\n\n\nfunction multisigAddressType(multisig) {\n  if (multisig.redeem.redeem) {\n    return _p2sh_p2wsh.P2SH_P2WSH;\n  } else {\n    // FIXME why is multisig.witness null?\n    // if (multisig.witness) {\n    if (multisig.address.match(/^(tb|bc)/)) {\n      return _p2wsh.P2WSH;\n    } else {\n      return _p2sh.P2SH;\n    }\n  }\n}\n/**\n * Return the number of required signers of the given `Multisig`\n * object.\n *\n * @param {module:multisig.Multisig} multisig the `Multisig` object\n * @returns {number} number of required signers\n * @example\n * import {\n *   generateMultisigFromPublicKeys, MAINNET, P2SH,\n *   multisigRequiredSigners,\n * } from \"unchained-bitcoin\";\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2SH, 2, \"03a...\", \"03b...\", \"03c...\");\n * console.log(multisigRequiredSigners(multisig)); // 2\n */\n\n\nfunction multisigRequiredSigners(multisig) {\n  return multisigAddressType(multisig) === _p2sh_p2wsh.P2SH_P2WSH ? multisig.redeem.redeem.m : multisig.redeem.m;\n}\n/**\n * Return the number of total signers (public keys) of the given\n * `Multisig` object.\n *\n * @param {module:multisig.Multisig} multisig the `Multisig` object\n * @returns {number} number of total signers\n * @example\n * import {\n *   generateMultisigFromPublicKeys, MAINNET, P2SH,\n *   multisigTotalSigners,\n * } from \"unchained-bitcoin\";\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2SH, 2, \"03a...\", \"03b...\", \"03c...\");\n * console.log(multisigTotalSigners(multisig)); // 3\n */\n\n\nfunction multisigTotalSigners(multisig) {\n  return multisigAddressType(multisig) === _p2sh_p2wsh.P2SH_P2WSH ? multisig.redeem.redeem.n : multisig.redeem.n;\n}\n/**\n * Return the multisig script for the given `Multisig` object.\n *\n * If the address type of the given multisig object is P2SH, the\n * redeem script will be returned.  Otherwise, the witness script will\n * be returned.\n *\n * @param {module:multisig.Multisig} multisig the `Multisig` object\n * @returns {Multisig|null} the corresponding script\n * @example\n * import {\n *   generateMultisigFromPublicKeys, MAINNET, P2SH,\n *   multisigScript,\n * } from \"unchained-bitcoin\";\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2SH, 2, \"03a...\", \"03b...\", \"03c...\");\n * console.log(multisigScript(multisig));\n */\n\n\nfunction multisigScript(multisig) {\n  switch (multisigAddressType(multisig)) {\n    case _p2sh.P2SH:\n      return multisigRedeemScript(multisig);\n\n    case _p2sh_p2wsh.P2SH_P2WSH:\n      return multisigWitnessScript(multisig);\n\n    case _p2wsh.P2WSH:\n      return multisigWitnessScript(multisig);\n\n    default:\n      /* istanbul ignore next */\n      // multisigAddressType only returns one of the 3 above choices\n      return null;\n  }\n}\n/**\n * Return the redeem script for the given `Multisig` object.\n *\n * If the address type of the given multisig object is P2WSH, this\n * will return null.\n *\n * @param {module:multisig.Multisig} multisig the `Multisig` object\n * @returns {Multisig|null} the redeem script\n * @example\n * import {\n *   generateMultisigFromPublicKeys, MAINNET, P2SH,\n *   multisigRedeemScript,\n * } from \"unchained-bitcoin\";\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2SH, 2, \"03a...\", \"03b...\", \"03c...\");\n * console.log(multisigRedeemScript(multisig));\n */\n\n\nfunction multisigRedeemScript(multisig) {\n  switch (multisigAddressType(multisig)) {\n    case _p2sh.P2SH:\n      return multisig.redeem;\n\n    case _p2sh_p2wsh.P2SH_P2WSH:\n      return multisig.redeem;\n\n    case _p2wsh.P2WSH:\n      return null;\n\n    default:\n      /* istanbul ignore next */\n      // multisigAddressType only returns one of the 3 above choices\n      return null;\n  }\n}\n/**\n * Return the witness script for the given `Multisig` object.\n *\n * If the address type of the given multisig object is P2SH, this will\n * return null.\n *\n * @param {module:multisig.Multisig} multisig the `Multisig` object\n * @returns {Multisig|null} the witness script\n * @example\n * import {\n *   generateMultisigFromPublicKeys, MAINNET, P2WSH,\n *   multisigWitnessScript,\n * } from \"unchained-bitcoin\";\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2WSH, 2, \"03a...\", \"03b...\", \"03c...\");\n * console.log(multisigWitnessScript(multisig));\n */\n\n\nfunction multisigWitnessScript(multisig) {\n  switch (multisigAddressType(multisig)) {\n    case _p2sh.P2SH:\n      return null;\n\n    case _p2sh_p2wsh.P2SH_P2WSH:\n      return multisig.redeem.redeem;\n\n    case _p2wsh.P2WSH:\n      return multisig.redeem;\n\n    default:\n      /* istanbul ignore next */\n      // multisigAddressType only returns one of the 3 above choices\n      return null;\n  }\n}\n/**\n * Return the (compressed) public keys in hex for the given `Multisig`\n * object.\n *\n * The public keys are in the order used in the corresponding\n * redeem/witness script.\n *\n * @param {module:multisig.Multisig} multisig the `Multisig` object\n * @returns {string[]} (compressed) public keys in hex\n * @example\n * import {\n *   generateMultisigFromPublicKeys, MAINNET, P2WSH,\n *   multisigPublicKeys,\n * } from \"unchained-bitcoin\";\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2WSH, 2, \"03a...\", \"03b...\", \"03c...\");\n * console.log(multisigPublicKeys(multisig)); // [\"03a...\", \"03b...\", \"03c...\"]\n *\n */\n\n\nfunction multisigPublicKeys(multisig) {\n  return (multisigAddressType(multisig) === _p2sh.P2SH ? multisigRedeemScript(multisig) : multisigWitnessScript(multisig)).pubkeys.map(_utils.toHexString);\n}\n/**\n * Return the address for a given `Multisig` object.\n *\n * @param {module:multisig.Multisig} multisig the `Multisig` object\n * @returns {string} the address\n * @example\n * import {\n *   generateMultisigFromPublicKeys, MAINNET, P2SH,\n *   multisigAddress,\n * } from \"unchained-bitcoin\";\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2SH, 2, \"03a...\", \"03b...\", \"03c...\");\n * console.log(multisigAddress(multisig)); // \"3j...\"\n *\n */\n\n\nfunction multisigAddress(multisig) {\n  return multisig.address;\n}\n/**\n * Return the braid details (if known) for a given `Multisig` object.\n *\n * @param {module:multisig.Multisig} multisig the `Multisig` object\n * @returns {string} the braid details\n * @example\n * import {\n *   generateBraidFromExtendedPublicKeys,\n *   generateMultisigFromPublicKeys, MAINNET, P2SH,\n *   braidConfig,\n * } from \"unchained-bitcoin\";\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2SH, 2, \"03a...\", \"03b...\", \"03c...\");\n * console.log(multisigBraidDetails(multisig)); // null, unknown\n *\n * const braid = generateBraidFromExtenedPublicKeys(MAINNET, P2SH, {{'xpub...', bip32path: \"m/45'/0'/0'\"}, {'xpub...', bip32path: \"m/45'/0/0\"}, {'xpub...', bip32path: \"m/45'/0/0\"}}, 2);\n * const multisig = braid.deriveMultisigByPath(\"0/0\");\n * console.log(multisigBraidDetails(multisig)); // {network: mainnet, addressType: p2sh, extendedPublicKeys: {...}, requiredSigners: 2}}\n */\n\n\nfunction multisigBraidDetails(multisig) {\n  return multisig.braidDetails ? multisig.braidDetails : null;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.estimateMultisigP2SHTransactionVSize = estimateMultisigP2SHTransactionVSize;\nexports.P2SH = void 0;\n\n/**\n * This module provides functions and constants for the P2SH address type.\n * \n * @module p2sh\n */\n\n/**\n * Address type constant for \"pay-to-script-hash\" (P2SH) addresses.\n *\n * @constant\n * @type {string}\n * @default P2SH\n */\nvar P2SH = \"P2SH\";\n/**\n * Estimate the transaction virtual size (vsize) when spending inputs\n * from the same multisig P2SH address.\n * \n * @param {Object} config - configuration for the calculation\n * @param {number} config.numInputs - number of m-of-n multisig P2SH inputs\n * @param {number} config.numOutputs - number of outputs\n * @param {number} config.m - required signers\n * @param {number} config.n - total signers\n * @returns {number} estimated transaction virtual size in bytes\n */\n\nexports.P2SH = P2SH;\n\nfunction estimateMultisigP2SHTransactionVSize(config) {\n  var baseSize = 41 * config.numInputs + 34 * config.numOutputs + 30;\n  var signatureLength = 72 + 1; // approx including push byte\n\n  var scriptOverhead = 4;\n  var keylength = 33 + 1; // push byte\n\n  var sigSize = signatureLength * config.m * config.numInputs + keylength * config.n * config.numInputs + scriptOverhead * config.numInputs;\n  var vsize = baseSize + sigSize;\n  return vsize;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IndirectKeystoreInteraction = exports.DirectKeystoreInteraction = exports.UnsupportedInteraction = exports.KeystoreInteraction = exports.LEVELS = exports.STATES = exports.ERROR = exports.WARNING = exports.INFO = exports.ACTIVE = exports.PENDING = exports.UNSUPPORTED = void 0;\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.reflect.get\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nvar _bowser = _interopRequireDefault(require(\"bowser\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Constant representing a keystore which is unsupported due to the\n * kind of interaction or combination of paramters provided.\n *\n * @type {string}\n */\nvar UNSUPPORTED = \"unsupported\";\n/**\n * Constant representing a keystore pending activation by the user.\n *\n * @type {string}\n */\n\nexports.UNSUPPORTED = UNSUPPORTED;\nvar PENDING = \"pending\";\n/**\n * Constant representing a keystore in active use.\n *\n * @type {string}\n */\n\nexports.PENDING = PENDING;\nvar ACTIVE = \"active\";\n/**\n * Constant for messages at the \"info\" level.\n *\n * @type {string}\n */\n\nexports.ACTIVE = ACTIVE;\nvar INFO = \"info\";\n/**\n * Constant for messages at the \"warning\" level.\n *\n * @type {string}\n */\n\nexports.INFO = INFO;\nvar WARNING = \"warning\";\n/**\n * Constant for messages at the \"error\" level.\n *\n * @type {string}\n */\n\nexports.WARNING = WARNING;\nvar ERROR = \"error\";\n/**\n * Enumeration of possible keystore states ([PENDING]{@link module:interaction.PENDING}|[ACTIVE]{@link module:interaction.ACTIVE}|[UNSUPPORTED]{@link module:interaction.UNSUPPORTED}).\n *\n * @constant\n * @enum {string}\n * @default\n *\n */\n\nexports.ERROR = ERROR;\nvar STATES = [PENDING, ACTIVE, UNSUPPORTED];\n/**\n * Enumeration of possible message levels ([INFO]{@link module:interaction.INFO}|[WARNING]{@link module:interaction.WARNING}|[ERROR]{@link module:interaction.ERROR}).\n *\n * @constant\n * @enum {string}\n * @default\n *\n */\n\nexports.STATES = STATES;\nvar LEVELS = [INFO, WARNING, ERROR];\n/**\n * Represents an image in a message returned by an interaction.\n *\n * @typedef module:interaction.MessageImage\n * @type {Object}\n * @property {string} label - a human-readable label for the image\n * @property {string} mimeType - the MIME type of the image\n * @property {string} data - base64-encoded image data\n */\n\n/**\n * Represents a message returned by an interaction.\n *\n * Message objects may have additional properties.\n *\n * @typedef module:interaction.Message\n * @type {Object}\n * @property {string} text - message text\n * @property {string} code - a dot-separated message code, e.g. `device.connect` (*Optional for submessages*)\n * @property {module:interaction.STATES} state - keystore state (*Optional for submessages*)\n * @property {module:interaction.LEVELS} level - message level (*Optional for submessages*)\n * @property {string} version - keystore version (can be a single version string or a range/spec) (*Optional*)\n * @property {string} action - keystore action user is expected to take (*Optional*)\n * @property {module:interaction.MessageImage} image - image for this message (*Optional*)\n * @property {Message[]} messages - submessages (*Optional*)\n */\n\n/**\n * Abstract base class for all keystore interactions.\n *\n * Concrete subclasses will want to subclass either\n * `DirectKeystoreInteraction` or `IndirectKeystoreInteraction`.\n *\n * Defines an API for subclasses to leverage and extend.\n *\n * - Subclasses should not have any internal state.  External tools\n *   (UI frameworks such as React) will maintain state and pass it\n *   into the interaction in order to display properly.\n *\n * - Subclasses may override the default constructor in order to allow\n *   users to pass in parameters.\n *\n * - Subclasses should override the `messages` method to customize\n *   what messages are surfaced in applications at what state of the\n *   user interface.\n *\n * - Subclasses should not try to catch all errors, instead letting\n *   them bubble up the stack.  This allows UI developers to deal with\n *   them as appropriate.\n *\n * @example\n * import {KeystoreInteraction, PENDING, ACTIVE, INFO} from \"unchained-wallets\";\n * class DoNothingInteraction extends KeystoreInteraction {\n *\n *   constructor({param}) {\n *     super();\n *     this.param = param;\n *   }\n *\n *   messages() {\n *     const messages = super.messages()\n *     messages.push({state: PENDING, level: INFO, text: `Interaction pending: ${this.param}` code: \"pending\"});\n *     messages.push({state: ACTIVE, level: INFO, text: `Interaction active: ${this.param}` code: \"active\"});\n *     return messages;\n *   }\n * \n * }\n *\n * // usage\n * const interaction = new DoNothingInteraction({param: \"foo\"});\n * console.log(interaction.messageTextFor({state: ACTIVE})); // \"Interaction active: foo\"\n * console.log(interaction.messageTextFor({state: PENDING})); // \"Interaction pending: foo\"\n *\n */\n\nexports.LEVELS = LEVELS;\n\nvar KeystoreInteraction =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Base constructor.\n   *\n   * Subclasses will often override this constructor to accept options.\n   *\n   * Just make sure to call `super()` if you do that!\n   *\n   * @constructor\n   */\n  function KeystoreInteraction() {\n    _classCallCheck(this, KeystoreInteraction);\n\n    this.environment = _bowser[\"default\"].getParser(window.navigator.userAgent);\n  }\n  /**\n   * Subclasses can override this method to indicate they are not\n   * supported.\n   *\n   * This method has access to whatever options may have been passed\n   * in by the constructor as well as the ability to interact with\n   * `this.environment` to determine whether the functionality is\n   * supported.  See the Bowser documentation for more details:\n   * https://github.com/lancedikson/bowser\n   *\n   * @returns {boolean} whether this interaction is supported\n   * @example\n   * isSupported() {\n   *   return this.environment.satisfies({\n   *     * declare browsers per OS\n   *     windows: {\n   *       \"internet explorer\": \">10\",\n   *     },\n   *     macos: {\n   *       safari: \">10.1\"\n   *     },\n   *\n   *     * per platform (mobile, desktop or tablet)\n   *     mobile: {\n   *       safari: '>=9',\n   *       'android browser': '>3.10'\n   *     },\n   *\n   *     * or in general\n   *     chrome: \"~20.1.1432\",\n   *     firefox: \">31\",\n   *     opera: \">=22\",\n   *\n   *     * also supports equality operator\n   *     chrome: \"=20.1.1432\", * will match particular build only\n   *\n   *     * and loose-equality operator\n   *     chrome: \"~20\",        * will match any 20.* sub-version\n   *     chrome: \"~20.1\"       * will match any 20.1.* sub-version (20.1.19 as well as 20.1.12.42-alpha.1)\n   *   });\n   * }\n   */\n\n\n  _createClass(KeystoreInteraction, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return true;\n    }\n    /**\n     * Return messages array for this interaction.\n     *\n     * The messages array is a (possibly empty) array of [`Message`]{@link module:interaction.Message} objects.\n     *\n     * Subclasses should override this method and add messages as\n     * needed.  Make sure to call `super.messages()` to return an empty\n     * messages array for you to begin populating.\n     *\n     * @returns {module:interaction.Message[]} []\n     */\n\n  }, {\n    key: \"messages\",\n    value: function messages() {\n      var messages = [];\n      return messages;\n    }\n    /**\n     * Return messages filtered by the given options.\n     *\n     * Multiple options can be given at once to filter along multiple\n     * dimensions.\n     *\n     * @param {object} options - options argument\n     * @param {string} options.state - must equal this keystore state\n     * @param {string} options.level - must equal this message level\n     * @param {string|regexp} options.code - code must match this regular expression\n     * @param {string|regexp} options.text - text must match this regular expression\n     * @param {string|regexp} options.version - version must match this regular expression\n     * @returns {module:interaction.Message[]} matching `Message` objects\n     * @example\n     * import {PENDING, ACTIVE} from \"unchained-bitcoin\";\n     * // Create any interaction instance\n     * interaction.messages().forEach(msg => console.log(msg));\n     *   { code: \"device.connect\", state: \"pending\", level: \"info\", text: \"Please plug in your device.\"}\n     *   { code: \"device.active\", state: \"active\", level: \"info\", text: \"Communicating with your device...\"}\n     *   { code: \"device.active.warning\", state: \"active\", level: \"warning\", text: \"Your device will warn you about...\", version: \"2.x\"}\n     * interaction.messagesFor({state: PENDING}).forEach(msg => console.log(msg));\n     *   { code: \"device.connect\", state: \"pending\", level: \"info\", text: \"Please plug in your device.\"}\n     * interaction.messagesFor({code: ACTIVE}).forEach(msg => console.log(msg));\n     *   { code: \"device.active\", state: \"active\", level: \"info\", text: \"Communicating with your device...\"}\n     *   { code: \"device.active.warning\", state: \"active\", level: \"warning\", text: \"Your device will warn you about...\", version: \"2.x\"}\n     * interaction.messagesFor({version: /^2/}).forEach(msg => console.log(msg));\n     *   { code: \"device.active\", state: \"active\", level: \"warning\", text: \"Your device will warn you about...\", version: \"2.x\"}\n     */\n\n  }, {\n    key: \"messagesFor\",\n    value: function messagesFor(_ref) {\n      var state = _ref.state,\n          level = _ref.level,\n          code = _ref.code,\n          text = _ref.text,\n          version = _ref.version;\n      return this.messages().filter(function (message) {\n        if (state && message.state !== state) {\n          return false;\n        }\n\n        if (level && message.level !== level) {\n          return false;\n        }\n\n        if (code && !(message.code || '').match(code)) {\n          return false;\n        }\n\n        if (text && !(message.text || '').match(text)) {\n          return false;\n        }\n\n        if (version && !(message.version || '').match(version)) {\n          return false;\n        }\n\n        return true;\n      });\n    }\n    /**\n     * Return whether there are any messages matching the given options.\n     *\n     * @param {object} options - options argument\n     * @param {string} options.state - must equal this keystore state\n     * @param {string} options.level - must equal this message level\n     * @param {string|regexp} options.code - code must match this regular expression\n     * @param {string|regexp} options.text - text must match this regular expression\n     * @param {string|regexp} options.version - version must match this regular expression\n     * @returns {boolean} - whether any messages match the given filters\n     */\n\n  }, {\n    key: \"hasMessagesFor\",\n    value: function hasMessagesFor(_ref2) {\n      var state = _ref2.state,\n          level = _ref2.level,\n          code = _ref2.code,\n          text = _ref2.text,\n          version = _ref2.version;\n      return this.messagesFor({\n        state: state,\n        level: level,\n        code: code,\n        text: text,\n        version: version\n      }).length > 0;\n    }\n    /**\n     * Return the first message matching the given options (or `null` if none is found).\n     *\n     * @param {object} options - options argument\n     * @param {string} options.state - must equal this keystore state\n     * @param {string} options.level - must equal this message level\n     * @param {string|regexp} options.code - code must match this regular expression\n     * @param {string|regexp} options.text - text must match this regular expression\n     * @param {string|regexp} options.version - version must match this regular expression\n     * @returns {module:interaction.Message|null} the first matching `Message` object (or `null` if none is found)\n     */\n\n  }, {\n    key: \"messageFor\",\n    value: function messageFor(_ref3) {\n      var state = _ref3.state,\n          level = _ref3.level,\n          code = _ref3.code,\n          text = _ref3.text,\n          version = _ref3.version;\n      var messages = this.messagesFor({\n        state: state,\n        level: level,\n        code: code,\n        text: text,\n        version: version\n      });\n\n      if (messages.length > 0) {\n        return messages[0];\n      }\n\n      return null;\n    }\n    /**\n     * Retrieve the text of the first message matching the given options\n     * (or `null` if none is found).\n     *\n     * @param {object} options - options argument\n     * @param {string} options.state - must equal this keystore state\n     * @param {string} options.level - must equal this message level\n     * @param {string|regexp} options.code - code must match this regular expression\n     * @param {string|regexp} options.text - text must match this regular expression\n     * @param {string|regexp} options.version - version must match this regular expression\n     * @returns {string|null} the text of the first matching message (or `null` if none is found)\n     */\n\n  }, {\n    key: \"messageTextFor\",\n    value: function messageTextFor(_ref4) {\n      var state = _ref4.state,\n          level = _ref4.level,\n          code = _ref4.code,\n          text = _ref4.text,\n          version = _ref4.version;\n      var message = this.messageFor({\n        state: state,\n        level: level,\n        code: code,\n        text: text,\n        version: version\n      });\n      return message ? message.text : null;\n    }\n  }]);\n\n  return KeystoreInteraction;\n}();\n/**\n * Class used for describing an unsupported interaction.\n *\n * - Always returns `false` when the `isSupported` method is called.\n *\n * - Has a keystore state `unsupported` message at the `error` level.\n *\n * - Throws errors when attempting to call API methods such as `run`,\n *   `request`, and `parse`.\n *\n * @extends {module:interaction.KeystoreInteraction}\n * @example\n * import {UnsupportedInteraction} from \"unchained-wallets\";\n * const interaction = new UnsupportedInteraction({text: \"failure text\", code: \"fail\"});\n * console.log(interaction.isSupported()); // false\n *\n */\n\n\nexports.KeystoreInteraction = KeystoreInteraction;\n\nvar UnsupportedInteraction =\n/*#__PURE__*/\nfunction (_KeystoreInteraction) {\n  _inherits(UnsupportedInteraction, _KeystoreInteraction);\n\n  /**\n   * Accepts parameters to describe what is unsupported and why.\n   *\n   * The `text` should be human-readable.  The `code` is for machines.\n   *\n   * @param {object} options - options argument\n   * @param {string} options.text - the text of the error message\n   * @param {string} options.code - the code of the error message\n   * @constructor\n   */\n  function UnsupportedInteraction(_ref5) {\n    var _this;\n\n    var text = _ref5.text,\n        code = _ref5.code;\n\n    _classCallCheck(this, UnsupportedInteraction);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UnsupportedInteraction).call(this));\n    _this.text = text;\n    _this.code = code;\n    return _this;\n  }\n  /**\n   * By design, this method always returns false.\n   *\n   * @returns {false} Always.\n   */\n\n\n  _createClass(UnsupportedInteraction, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return false;\n    }\n    /**\n     * Returns a single `error` level message at the `unsupported`\n     * state.\n     *\n     * @returns {module:interaction.Message[]} the messages for this class\n     */\n\n  }, {\n    key: \"messages\",\n    value: function messages() {\n      var messages = _get(_getPrototypeOf(UnsupportedInteraction.prototype), \"messages\", this).call(this);\n\n      messages.push({\n        state: UNSUPPORTED,\n        level: ERROR,\n        code: this.code,\n        text: this.text\n      });\n      return messages;\n    }\n    /**\n     * Throws an error.\n     *\n     * @returns {void}\n     * @throws An error containing this `this.text`.\n     *\n     */\n\n  }, {\n    key: \"run\",\n    value: function () {\n      var _run = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                throw new Error(this.text);\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function run() {\n        return _run.apply(this, arguments);\n      }\n\n      return run;\n    }()\n    /**\n     * Throws an error.\n     *\n     * @returns {void}\n     * @throws An error containing this `this.text`.\n     *\n     */\n\n  }, {\n    key: \"request\",\n    value: function request() {\n      throw new Error(this.text);\n    }\n    /**\n     * Throws an error.\n     *\n     * @returns {void}\n     * @throws An error containing this `this.text`.\n     *\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse() {\n      throw new Error(this.text);\n    }\n  }]);\n\n  return UnsupportedInteraction;\n}(KeystoreInteraction);\n/**\n * Base class for direct keystore interactions.\n *\n * Subclasses *must* implement a `run` method which communicates\n * directly with the keystore.  This method must be asynchronous\n * (return a `Promise`) to accommodate delays with network, devices,\n * &c.\n *\n * @example\n * import {DirectKeystoreInteraction} from \"unchained-wallets\";\n * class SimpleDirectInteraction extends DirectKeystoreInteraction {   *\n *\n *   constructor({param}) {\n *     super();\n *     this.param = param;\n *   }\n *\n *   async run() {\n *     // Or do something complicated...\n *     return this.param;\n *   }\n * }\n *\n * const interaction = new SimpleDirectInteraction({param: \"foo\"});\n *\n * const result = await interaction.run();\n * console.log(result);\n * // \"foo\"\n *\n */\n\n\nexports.UnsupportedInteraction = UnsupportedInteraction;\n\nvar DirectKeystoreInteraction =\n/*#__PURE__*/\nfunction (_KeystoreInteraction2) {\n  _inherits(DirectKeystoreInteraction, _KeystoreInteraction2);\n\n  /**\n   * Sets the `this.direct` property to `true`.  This property can be\n   * utilized when introspecting on interaction classes..\n   *\n   * @constructor\n   */\n  function DirectKeystoreInteraction() {\n    var _this2;\n\n    _classCallCheck(this, DirectKeystoreInteraction);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(DirectKeystoreInteraction).call(this));\n    _this2.direct = true;\n    return _this2;\n  }\n  /**\n   * Initiate the intended interaction and return a result.\n   *\n   * Subclasses *must* override this function.  This function must\n   * always return a promise as it is designed to be called within an\n   * `await` block.\n   *\n   * @returns {Promise} Does the work of interacting with the keystore.\n   *\n   */\n\n\n  _createClass(DirectKeystoreInteraction, [{\n    key: \"run\",\n    value: function () {\n      var _run2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                throw new Error(\"Override the `run` method in this interaction.\");\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function run() {\n        return _run2.apply(this, arguments);\n      }\n\n      return run;\n    }()\n    /**\n     * Throws an error.\n     *\n     * @throws An error since this is a direct interaction.\n     * @returns {void}\n     *\n     */\n\n  }, {\n    key: \"request\",\n    value: function request() {\n      throw new Error(\"This interaction is direct and does not support a `request` method.\");\n    }\n    /**\n     * Throws an error.\n     *\n     * @throws An error since this is a direct interaction.\n     * @returns {void}\n     *\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse() {\n      throw new Error(\"This interaction is direct and does not support a `parse` method.\");\n    }\n  }]);\n\n  return DirectKeystoreInteraction;\n}(KeystoreInteraction);\n/**\n * Base class for indirect keystore interactions.\n *\n * Subclasses *must* implement two methods: `request` and `parse`.\n * Application code will pass the result of calling `request` to some\n * external process (HTTP request, QR code, &c.) and pass the response\n * to `parse` which should return a result.\n *\n * @example\n * import {IndirectKeystoreInteraction} from \"unchained-wallets\";\n * class SimpleIndirectInteraction extends IndirectKeystoreInteraction {   *\n *\n *   constructor({param}) {\n *     super();\n *     this.param = param;\n *   }\n *\n *   async request() {\n *     // Or do something complicated...\n *     return this.param;\n *   }\n *\n *   parse(response) {\n *     // Or do something complicated with `response`...\n *     return response;\n *   }\n *\n * }\n *\n * const interaction = new SimpleIndirectInteraction({param: \"foo\"});\n *\n * const request = interaction.request();\n * const response = \"bar\"; // Or do something complicated with `request`\n * const result = interaction.parse(response);\n * console.log(result);\n * // \"bar\"\n *\n */\n\n\nexports.DirectKeystoreInteraction = DirectKeystoreInteraction;\n\nvar IndirectKeystoreInteraction =\n/*#__PURE__*/\nfunction (_KeystoreInteraction3) {\n  _inherits(IndirectKeystoreInteraction, _KeystoreInteraction3);\n\n  /**\n   * Sets the `this.indirect` property to `true`.  This property can\n   * be utilized when introspecting on interaction classes..\n   *\n   * @constructor\n   */\n  function IndirectKeystoreInteraction() {\n    var _this3;\n\n    _classCallCheck(this, IndirectKeystoreInteraction);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(IndirectKeystoreInteraction).call(this));\n    _this3.indirect = true;\n    return _this3;\n  }\n  /**\n   * Provide the request.\n   *\n   * Subclasses *may* override this function.  It can return any kind\n   * of object.  Strings, data for QR codes, HTTP requests, command\n   * lines, functions, &c. are all allowed.  Whatever is appropriate\n   * for the interaction.\n   *\n   * @returns {Object} the request data\n   *\n   */\n\n\n  _createClass(IndirectKeystoreInteraction, [{\n    key: \"request\",\n    value: function request() {\n      throw new Error(\"Override the `request` method in this interaction.\");\n    }\n    /**\n     * Parse the response into a result.\n     *\n     * Subclasses *must* override this function.  It must accept an\n     * appropriate kind of `response` object and return the final result\n     * of this interaction.\n     *\n     * @param {Object} response - the raw response\n     * @returns {Object} the parsed response\n     *\n     */\n\n  }, {\n    key: \"parse\",\n    value: function parse(response) {\n      console.log(response);\n      throw new Error(\"Override the `parse` method in this interaction.\");\n    }\n    /**\n     * Throws an error.\n     *\n     * @throws An error since this is an indirect interaction.\n     * @returns {void}\n     *\n     */\n\n  }, {\n    key: \"run\",\n    value: function () {\n      var _run3 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                throw new Error(\"This interaction is indirect and does not support a `run` method.\");\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function run() {\n        return _run3.apply(this, arguments);\n      }\n\n      return run;\n    }()\n  }]);\n\n  return IndirectKeystoreInteraction;\n}(KeystoreInteraction);\n\nexports.IndirectKeystoreInteraction = IndirectKeystoreInteraction;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateFeeRate = validateFeeRate;\nexports.validateFee = validateFee;\nexports.estimateMultisigTransactionFeeRate = estimateMultisigTransactionFeeRate;\nexports.estimateMultisigTransactionFee = estimateMultisigTransactionFee;\n\nvar _bignumber = _interopRequireDefault(require(\"bignumber.js\"));\n\nvar _p2sh = require(\"./p2sh\");\n\nvar _p2sh_p2wsh = require(\"./p2sh_p2wsh\");\n\nvar _p2wsh = require(\"./p2wsh\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/** \n * This module provides functions for calculating & validating\n * transaction fees.\n * \n * @module fees\n */\n\n/**\n * Maxmium acceptable transaction fee rate in Satoshis/vbyte.\n *\n * @constant\n * @type {BigNumber}\n * @default 1000 Satoshis/vbyte\n * \n */\nvar MAX_FEE_RATE_SATS_PER_VBYTE = (0, _bignumber.default)(1000); // 1000 Sats/vbyte\n\n/**\n * Maxmium acceptable transaction fee in Satoshis.\n *\n * @constant\n * @type {BigNumber}\n * @default 2500000 Satoshis (=0.025 BTC)\n */\n\nvar MAX_FEE_SATS = (0, _bignumber.default)(2500000); // ~ 0.025 BTC ~ $250 if 1 BTC = $10k\n\n/**\n * Validate the given transaction fee rate (in Satoshis/vbyte).\n *\n * - Must be a parseable as a number.\n *\n * - Cannot be negative (zero is OK).\n * \n * - Cannot be greater than the limit set by\n *   `MAX_FEE_RATE_SATS_PER_VBYTE`.\n * \n * @param {string|number|BigNumber} feeRateSatsPerVbyte - the fee rate in Satoshis/vbyte\n * @returns {string} empty if valid or corresponding validation message if not\n * @example\n * import {validateFeeRate} from \"unchained-bitcoin\";\n * console.log(validateFeeRate(-1)); // \"Fee rate must be positive.\"\n * console.log(validateFeeRate(10000)); // \"Fee rate is too high.\"\n * console.log(validateFeeRate(250)); // \"\"\n */\n\nfunction validateFeeRate(feeRateSatsPerVbyte) {\n  var fr;\n\n  try {\n    fr = (0, _bignumber.default)(feeRateSatsPerVbyte);\n  } catch (e) {\n    return \"Invalid fee rate.\";\n  }\n\n  if (!fr.isFinite()) {\n    return \"Invalid fee rate.\";\n  }\n\n  if (fr.isLessThan(_utils.ZERO)) {\n    return \"Fee rate cannot be negative.\";\n  }\n\n  if (fr.isGreaterThan(MAX_FEE_RATE_SATS_PER_VBYTE)) {\n    return \"Fee rate is too high.\";\n  }\n\n  return '';\n}\n/**\n * Validate the given transaction fee (in Satoshis).\n *\n * - Must be a parseable as a number.\n *\n * - Cannot be negative (zero is OK).\n *\n * - Cannot exceed the total input amount.\n *\n * - Cannot be higher than the limit set by `MAX_FEE_SATS`.\n * \n * @param {string|number|BigNumber} feeSats - fee in Satoshis\n * @param {string|number|BigNumber} inputsTotalSats - total input amount in Satoshis\n * @returns {string} empty if valid or corresponding validation message if not\n * @example\n * import {validateFee} from \"unchained-bitcoin\";\n * console.log(validateFee(3000000, 10000000)) // \"Fee is too high.\"\n * console.log(validateFee(30000, 20000)) // \"Fee is too high.\"\n * console.log(validateFee(-30000)) // \"Fee cannot be negative.\"\n * console.log(validateFee(30000, 10000000)) // \"\"\n */\n\n\nfunction validateFee(feeSats, inputsTotalSats) {\n  var fs, its;\n\n  try {\n    fs = (0, _bignumber.default)(feeSats);\n  } catch (e) {\n    return \"Invalid fee.\";\n  }\n\n  if (!fs.isFinite()) {\n    return \"Invalid fee.\";\n  }\n\n  try {\n    its = (0, _bignumber.default)(inputsTotalSats);\n  } catch (e) {\n    return \"Invalid total input amount.\";\n  }\n\n  if (!its.isFinite()) {\n    return \"Invalid total input amount.\";\n  }\n\n  if (fs.isLessThan(_utils.ZERO)) {\n    return \"Fee cannot be negative.\";\n  }\n\n  if (its.isLessThanOrEqualTo(_utils.ZERO)) {\n    return \"Total input amount must be positive.\";\n  }\n\n  if (fs.isGreaterThan(its)) {\n    return \"Fee is too high.\";\n  }\n\n  if (fs.isGreaterThan(MAX_FEE_SATS)) {\n    return \"Fee is too high.\";\n  }\n\n  return '';\n}\n/**\n * Estimate transaction fee rate based on actual fee and address type, number of inputs and number of outputs.\n * \n * @param {Object} config - configuration for the calculation\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} config.addressType - address type used for estimation\n * @param {number} config.numInputs - number of inputs used in calculation\n * @param {number} config.numOutputs - number of outputs used in calculation\n * @param {number} config.m - number of required signers for the quorum\n * @param {number} config.n - number of total signers for the quorum\n * @param {BigNumber} config.feesInSatoshis - total transaction fee in satoshis\n * @example \n * import {estimateMultisigP2WSHTransactionFeeRate} from \"unchained-bitcoin\";\n * // get the fee rate a P2WSH multisig transaction with 2 inputs and 3 outputs with a known fee of 7060\n * const feerate = estimateMultisigTransactionFeeRate({\n *   addressType: P2WSH, \n *   numInputs: 2, \n *   numOutputs: 3, \n *   m: 2,\n *   n: 3,\n *   feesInSatoshis: 7060\n * });\n * \n * \n * @returns {string} estimated fee rate\n */\n\n\nfunction estimateMultisigTransactionFeeRate(config) {\n  return (0, _bignumber.default)(config.feesInSatoshis).dividedBy(estimateMultisigTransactionVSize(config));\n}\n/**\n * Estimate transaction fee based on fee rate, address type, number of inputs and outputs.\n * @param {Object} config - configuration for the calculation\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} config.addressType - address type used for estimation\n * @param {number} config.numInputs - number of inputs used in calculation\n * @param {number} config.numOutputs - number of outputs used in calculation\n * @param {number} config.m - number of required signers for the quorum\n * @param {number} config.n - number of total signers for the quorum\n * @param {string} config.feesPerByteInSatoshis - satoshis per byte fee rate\n * @example\n * // get fee for P2SH multisig transaction with 2 inputs and 3 outputs at 10 satoshis per byte\n * import {estimateMultisigP2WSHTransactionFee} from \"unchained-bitcoin\";\n * const fee = estimateMultisigTransactionFee({\n *   addressType: P2SH, \n *   numInputs: 2, \n *   numOutputs: 3, \n *   m: 2,\n *   n: 3,\n *   feesPerByteInSatoshis: 10\n * });\n * @returns {number} estimated transaction fee\n */\n\n\nfunction estimateMultisigTransactionFee(config) {\n  return (0, _bignumber.default)(config.feesPerByteInSatoshis).multipliedBy(estimateMultisigTransactionVSize(config));\n}\n\nfunction estimateMultisigTransactionVSize(config) {\n  switch (config.addressType) {\n    case _p2sh.P2SH:\n      return (0, _p2sh.estimateMultisigP2SHTransactionVSize)(config);\n\n    case _p2sh_p2wsh.P2SH_P2WSH:\n      return (0, _p2sh_p2wsh.estimateMultisigP2SH_P2WSHTransactionVSize)(config);\n\n    case _p2wsh.P2WSH:\n      return (0, _p2wsh.estimateMultisigP2WSHTransactionVSize)(config);\n\n    default:\n      return null;\n  }\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"uploadIcon\":\"ColdcardFileReader_uploadIcon__1gKkv\",\"instruction\":\"ColdcardFileReader_instruction__2JEz4\",\"dropzone\":\"ColdcardFileReader_dropzone__32-R_\",\"dropzoneDull\":\"ColdcardFileReader_dropzoneDull__2lJaF ColdcardFileReader_dropzone__32-R_\",\"uploadContainer\":\"ColdcardFileReader_uploadContainer__3NUxc\"};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hardenedBIP32Index = hardenedBIP32Index;\nexports.bip32PathToSequence = bip32PathToSequence;\nexports.bip32SequenceToPath = bip32SequenceToPath;\nexports.validateBIP32Path = validateBIP32Path;\nexports.validateBIP32Index = validateBIP32Index;\nexports.multisigBIP32Root = multisigBIP32Root;\nexports.multisigBIP32Path = multisigBIP32Path;\nexports.getParentBIP32Path = getParentBIP32Path;\nexports.getRelativeBIP32Path = getRelativeBIP32Path;\n\nrequire(\"core-js/modules/es6.string.starts-with\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.number.is-nan\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nvar _networks = require(\"./networks\");\n\nvar _p2sh = require(\"./p2sh\");\n\nvar _p2sh_p2wsh = require(\"./p2sh_p2wsh\");\n\nvar _p2wsh = require(\"./p2wsh\");\n\n/**\n * This module contains various utility functions for converting and\n * validating BIP32 derivation paths.\n *\n * @module paths\n */\nvar HARDENING_OFFSET = Math.pow(2, 31);\nvar BIP32_PATH_REGEX = /^(m\\/)?(\\d+'?\\/)*\\d+'?$/;\nvar BIP32_HARDENED_PATH_REGEX = /^(m\\/)?(\\d+'\\/)*\\d+'$/;\nvar BIP32_UNHARDENED_PATH_REGEX = /^(m\\/)?(\\d+\\/)*\\d+$/;\nvar BIP32_INDEX_REGEX = /^\\d+'?$/;\nvar MAX_BIP32_HARDENED_NODE_INDEX = Math.pow(2, 31) - 1;\nvar MAX_BIP32_NODE_INDEX = Math.pow(2, 32) - 1;\n/**\n * Return the hardened version of the given BIP32 index.\n *\n * Hardening is equivalent to adding 2^31.\n *\n * @param {string|number} index - BIP32 index\n * @returns {number} the hardened index\n * @example\n * import {hardenedBIP32Index} from \"unchained-bitcoin\";\n * console.log(hardenedBIP32Index(44); // 2147483692\n */\n\nfunction hardenedBIP32Index(index) {\n  return parseInt(index, 10) + HARDENING_OFFSET;\n}\n/**\n * Convert BIP32 derivation path to an array of integer values\n * representing the corresponding derivation indices.\n *\n * Hardened path segments will have the [hardening offset]{@link module:paths.HARDENING_OFFSET} added to the index.\n *\n * @param {string} pathString - BIP32 derivation path string\n * @returns {number[]} the derivation indices\n * @example\n * import {bip32PathToSequence} from \"unchained-bitcoin\";\n * console.log(bip32PathToSequence(\"m/45'/1/99\")); // [2147483693, 1, 99]\n */\n\n\nfunction bip32PathToSequence(pathString) {\n  var pathSegments = pathString.split(\"/\").splice(1);\n  return pathSegments.map(function (pathSegment) {\n    if (pathSegment.substr(-1) === \"'\") {\n      return parseInt(pathSegment.slice(0, -1), 10) + HARDENING_OFFSET;\n    } else {\n      return parseInt(pathSegment, 10);\n    }\n  });\n}\n/**\n * Convert a sequence of derivation indices into the corresponding\n * BIP32 derivation path.\n *\n * Indices above the [hardening offset]{@link * module:paths.HARDENING_OFFSET} will be represented wiith hardened * path segments (using a trailing single-quote).\n *\n * @param {number[]} sequence - the derivation indices\n * @returns {string} BIP32 derivation path\n * @example\n * import {bip32SequenceToPath} from \"unchained-bitcoin\";\n * console.log(bip32SequenceToPath([2147483693, 1, 99])); // m/45'/1/99\n */\n\n\nfunction bip32SequenceToPath(sequence) {\n  return \"m/\" + sequence.map(function (index) {\n    if (index >= HARDENING_OFFSET) {\n      return \"\".concat(index - HARDENING_OFFSET, \"'\");\n    } else {\n      return index.toString();\n    }\n  }).join('/');\n}\n/**\n * Validate a given BIP32 derivation path string.\n *\n * - Path segments are validated numerically as well as statically\n *   (the value of 2^33 is an invalid path segment).\n *\n * - The `mode` option can be pass to validate fully `hardened` or\n *   `unhardened` paths.\n *\n * @param {string} pathString - BIP32 derivation path string\n * @param {Object} [options] - additional options\n * @param {string} [options.mode] - \"hardened\" or \"unhardened\"\n * @returns {string} empty if valid or corresponding validation message if not\n * @example\n * import {validateBIP32Path} from \"unchained-bitcoin\";\n * console.log(validateBIP32Path(\"\")); // \"BIP32 path cannot be blank.\"\n * console.log(validateBIP32Path(\"foo\")); // \"BIP32 path is invalid.\"\n * console.log(validateBIP32Path(\"//45\")); // \"BIP32 path is invalid.\"\n * console.log(validateBIP32Path(\"/45/\")); // \"BIP32 path is invalid.\"\n * console.log(validateBIP32Path(\"/45''\")); // \"BIP32 path is invalid.\"\n * console.log(validateBIP32Path('/45\"')); // \"BIP32 path is invalid.\"\n * console.log(validateBIP32Path(\"/-45\")); // \"BIP32 path is invalid.\"\n * console.log(validateBIP32Path(\"/8589934592\")); // \"BIP32 index is too high.\"\n * console.log(validateBIP32Path(\"/45\")); // \"\"\n * console.log(validateBIP32Path(\"/45/0'\")); // \"\"\n * console.log(validateBIP32Path(\"/45/0'\", {mode: \"hardened\")); // \"BIP32 path must be fully-hardened.\"\n * console.log(validateBIP32Path(\"/45'/0'\", {mode: \"hardened\")); // \"\"\n * console.log(validateBIP32Path(\"/0'/0\", {mode: \"unhardened\")); // \"BIP32 path cannot include hardened segments.\"\n * console.log(validateBIP32Path(\"/0/0\", {mode: \"unhardened\")); // \"\"\n */\n\n\nfunction validateBIP32Path(pathString, options) {\n  if (pathString === null || pathString === undefined || pathString === '') {\n    return \"BIP32 path cannot be blank.\";\n  }\n\n  if (!pathString.match(BIP32_PATH_REGEX)) {\n    return \"BIP32 path is invalid.\";\n  }\n\n  if (options && options.mode === 'hardened') {\n    if (!pathString.match(BIP32_HARDENED_PATH_REGEX)) {\n      return \"BIP32 path must be fully-hardened.\";\n    }\n  }\n\n  if (options && options.mode === 'unhardened') {\n    if (!pathString.match(BIP32_UNHARDENED_PATH_REGEX)) {\n      return \"BIP32 path cannot include hardened segments.\";\n    }\n  }\n\n  var segmentStrings = pathString.toLowerCase().split('/');\n  return validateBIP32PathSegments(segmentStrings.slice(1));\n}\n\nfunction validateBIP32PathSegments(segmentStrings) {\n  for (var i = 0; i < segmentStrings.length; i++) {\n    var indexString = segmentStrings[i];\n    var error = validateBIP32Index(indexString);\n\n    if (error !== '') {\n      return error;\n    }\n  }\n\n  return '';\n}\n/**\n * Validate a given BIP32 index string.\n *\n * - Path segments are validated numerically as well as statically\n *   (the value of 2^33 is an invalid path segment).\n *\n * - By default, 0-4294967295 and 0'-2147483647' are valid.\n *\n * - The `mode` option can be pass to validate index is hardened\n *   `unhardened` paths.\n *\n * - `hardened` paths include 0'-2147483647' and 2147483648-4294967295\n *\n * - `unharded` paths include 0-2147483647\n *\n * @param {string} indexString - BIP32 index string\n * @param {Object} [options] - additional options\n * @param {string} [options.mode] - \"hardened\" or \"unhardened\"\n * @returns {string} empty if valid or corresponding validation message if not\n * @example\n * import {validateBIP32Path} from \"unchained-bitcoin\";\n * console.log(validateBIP32Path(\"\")); // \"BIP32 index cannot be blank.\"\n * console.log(validateBIP32Path(\"foo\")); // \"BIP32 index is invalid.\"\n * console.log(validateBIP32Path(\"//45\")); // \"BIP32 index is invalid.\"\n * console.log(validateBIP32Path(\"/45/\")); // \"BIP32 index is invalid.\"\n * console.log(validateBIP32Index(\"4294967296\")); // \"BIP32 index is too high.\"\n * console.log(validateBIP32Index(\"2147483648'\")); // \"BIP32 index is too high.\"\n * console.log(validateBIP32Index(\"45\", { mode: \"hardened\" })); // \"BIP32 index must be hardened.\"\n * console.log(validateBIP32Index(\"45'\", { mode: \"unhardened\" })); // \"BIP32 index cannot be hardened.\"\n * console.log(validateBIP32Index(\"2147483648\", {mode: \"unhardened\"})); // \"BIP32 index cannot be hardened.\"\n * console.log(validateBIP32Index(\"45\")); // \"\"\n * console.log(validateBIP32Index(\"45'\")); // \"\"\n * console.log(validateBIP32Index(\"0\")); // \"\"\n * console.log(validateBIP32Index(\"0'\")); // \"\"\n * console.log(validateBIP32Index(\"4294967295\")); // \"\"\n * console.log(validateBIP32Index(\"2147483647\")); // \"\"\n * console.log(validateBIP32Index(\"2147483647'\")); // \"\"\n */\n\n\nfunction validateBIP32Index(indexString, options) {\n  if (indexString === null || indexString === undefined || indexString === '') {\n    return \"BIP32 index cannot be blank.\";\n  }\n\n  if (!indexString.match(BIP32_INDEX_REGEX)) {\n    return \"BIP32 index is invalid.\";\n  }\n\n  var numberString, hardened;\n\n  if (indexString.substr(indexString.length - 1) === \"'\") {\n    numberString = indexString.substr(0, indexString.length - 1);\n    hardened = true;\n  } else {\n    numberString = indexString;\n    hardened = false;\n  } // This comes after the regex, so no need to test that parseInt fails.\n\n\n  var numberError = \"Invalid BIP32 index.\";\n  var number = parseInt(numberString, 10);\n\n  if (Number.isNaN(number) || number.toString().length !== numberString.length) {\n    return numberError;\n  } // allows up to 4294967295 or 2147483647'\n\n\n  if (number > (hardened ? MAX_BIP32_HARDENED_NODE_INDEX : MAX_BIP32_NODE_INDEX)) {\n    return \"BIP32 index is too high.\";\n  } // allows 0'-2147483647' or 2147483648-4294967295\n\n\n  if (options && options.mode === 'hardened') {\n    if (!hardened && number <= MAX_BIP32_HARDENED_NODE_INDEX) {\n      return \"BIP32 index must be hardened.\";\n    }\n  } // allows 0-2147483647\n\n\n  if (options && options.mode === 'unhardened') {\n    if (hardened || number > MAX_BIP32_HARDENED_NODE_INDEX) {\n      return \"BIP32 index cannot be hardened.\";\n    }\n  }\n\n  return '';\n}\n/**\n * Return the default BIP32 root derivation path for the given\n * `addressType` and `network`.\n *\n * - Mainnet:\n *   - P2SH: m/45'/0'/0'\n *   - P2SH-P2WSH: m/48'/0'/0'/1'\n *   - P2WSH: m/48'/0'/0'/2'\n * - Testnet:\n *   - P2SH: m/45'/1'/0'\n *   - P2SH-P2WSH: m/48'/1'/0'/1'\n *   - P2WSH: m/48'/1'/0'/2'\n *\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} addressType - address type\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @returns {string} derivation path\n * @example\n * import {multisigBIP32Root} from \"unchained-bitcoin\";\n * console.log(multisigBIP32Root(P2SH, MAINNET)); // m/45'/0'/0'\n * console.log(multisigBIP32Root(P2SH_P2WSH, TESTNET); // m/48'/1'/0'/1'\n */\n\n\nfunction multisigBIP32Root(addressType, network) {\n  var coinPath = network === _networks.MAINNET ? \"0'\" : \"1'\";\n\n  switch (addressType) {\n    case _p2sh.P2SH:\n      return \"m/45'/\".concat(coinPath, \"/0'\");\n\n    case _p2sh_p2wsh.P2SH_P2WSH:\n      return \"m/48'/\".concat(coinPath, \"/0'/1'\");\n\n    case _p2wsh.P2WSH:\n      return \"m/48'/\".concat(coinPath, \"/0'/2'\");\n\n    default:\n      return null;\n  }\n}\n/**\n * Returns a BIP32 path at the given `relativePath` under the default\n * BIP32 root path for the given `addressType` and `network`.\n *\n * @param {module:multisig.MULTISIG_ADDRESS_TYPES} addressType - type from which to calculate BIP32 root path\n * @param {module:networks.NETWORKS} network - bitcoin network from which to calculate BIP32 root path\n * @param {number|string} relativePath - the relative BIP32 path (no leading `/`)\n * @returns {string} child BIP32 path\n * @example\n * import {multisigBIP32Path} from \"unchained-bitcoin\";\n * console.log(multisigBIP32Path(P2SH, MAINNET, 0); // m/45'/0'/0'/0\n * console.log(multisigBIP32Path(P2SH_P2WSH, TESTNET, \"3'/4\"); // m/48'/1'/0'/1'/3'/4\"\n */\n\n\nfunction multisigBIP32Path(addressType, network, relativePath) {\n  var root = multisigBIP32Root(addressType, network);\n\n  if (root) {\n    return root + \"/\".concat(relativePath || \"0\");\n  }\n\n  return null;\n}\n/**\n * Get the path of the parent of the given path\n * @param {string} bip32Path e.g. \"m/45'/0'/0'/0\"\n * @returns {string} parent path\n * @example\n * import {getParentBIP32Path} from \"unchained-bitcoin\";\n * console.log(getParentBIP32Path(\"m/45'/0'/0'/0\"); // m/45'/0'/0'\n */\n\n\nfunction getParentBIP32Path(bip32Path) {\n  // first validate the input\n  var validated = validateBIP32Path(bip32Path);\n  if (validated.length) return validated; // then slice off then last item in the path\n\n  return bip32Path.split(\"/\").slice(0, -1).join(\"/\");\n}\n/**\n * Get the path of under the parentBIP32Path of the given path\n * @param {string} parentBIP32Path e.g. \"m/45'/0'/0'\"\n * @param {string} childBIP32Path e.g. \"m/45'/0'/0'/0/1/2\"\n * @returns {string} relative path below path\n * @example\n * import {getRelativeBIP32Path} from \"unchained-bitcoin\";\n * console.log(getRelativeBIP32Path(\"m/45'/0'/0'\", \"m/45'/0'/0'/0/1/2\"); // 0/1/2\n */\n\n\nfunction getRelativeBIP32Path(parentBIP32Path, childBIP32Path) {\n  if (parentBIP32Path === childBIP32Path) return ''; // first validate the parentBIP32Path\n\n  var validatedParent = validateBIP32Path(parentBIP32Path);\n  if (validatedParent.length) return validatedParent; // next validate the input\n\n  var validatedChild = validateBIP32Path(childBIP32Path);\n  if (validatedChild.length) return validatedChild; // check that childBIP32Path starts with parentBIP32Path\n\n  if (!childBIP32Path.startsWith(parentBIP32Path)) return \"The provided bip32Path does not start with the chroot.\"; // then return the relative path beyond the parentBIP32Path.\n\n  return childBIP32Path.slice(parentBIP32Path.length + 1);\n}","\"use strict\";\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _addresses = require(\"./addresses\");\n\nObject.keys(_addresses).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _addresses[key];\n    }\n  });\n});\n\nvar _block_explorer = require(\"./block_explorer\");\n\nObject.keys(_block_explorer).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _block_explorer[key];\n    }\n  });\n});\n\nvar _braid = require(\"./braid\");\n\nObject.keys(_braid).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _braid[key];\n    }\n  });\n});\n\nvar _fees = require(\"./fees\");\n\nObject.keys(_fees).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _fees[key];\n    }\n  });\n});\n\nvar _fixtures = require(\"./fixtures\");\n\nObject.keys(_fixtures).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _fixtures[key];\n    }\n  });\n});\n\nvar _inputs = require(\"./inputs\");\n\nObject.keys(_inputs).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _inputs[key];\n    }\n  });\n});\n\nvar _keys = require(\"./keys\");\n\nObject.keys(_keys).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _keys[key];\n    }\n  });\n});\n\nvar _multisig = require(\"./multisig\");\n\nObject.keys(_multisig).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _multisig[key];\n    }\n  });\n});\n\nvar _networks = require(\"./networks\");\n\nObject.keys(_networks).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _networks[key];\n    }\n  });\n});\n\nvar _outputs = require(\"./outputs\");\n\nObject.keys(_outputs).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _outputs[key];\n    }\n  });\n});\n\nvar _p2sh = require(\"./p2sh\");\n\nObject.keys(_p2sh).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _p2sh[key];\n    }\n  });\n});\n\nvar _p2sh_p2wsh = require(\"./p2sh_p2wsh\");\n\nObject.keys(_p2sh_p2wsh).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _p2sh_p2wsh[key];\n    }\n  });\n});\n\nvar _p2wsh = require(\"./p2wsh\");\n\nObject.keys(_p2wsh).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _p2wsh[key];\n    }\n  });\n});\n\nvar _paths = require(\"./paths\");\n\nObject.keys(_paths).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _paths[key];\n    }\n  });\n});\n\nvar _psbt = require(\"./psbt\");\n\nObject.keys(_psbt).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _psbt[key];\n    }\n  });\n});\n\nvar _script = require(\"./script\");\n\nObject.keys(_script).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _script[key];\n    }\n  });\n});\n\nvar _signatures = require(\"./signatures\");\n\nObject.keys(_signatures).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _signatures[key];\n    }\n  });\n});\n\nvar _transactions = require(\"./transactions\");\n\nObject.keys(_transactions).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _transactions[key];\n    }\n  });\n});\n\nvar _utils = require(\"./utils\");\n\nObject.keys(_utils).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _utils[key];\n    }\n  });\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.braidConfig = braidConfig;\nexports.braidNetwork = braidNetwork;\nexports.braidAddressType = braidAddressType;\nexports.braidExtendedPublicKeys = braidExtendedPublicKeys;\nexports.braidRequiredSigners = braidRequiredSigners;\nexports.braidIndex = braidIndex;\nexports.validateBip32PathForBraid = validateBip32PathForBraid;\nexports.generatePublicKeysAtPath = generatePublicKeysAtPath;\nexports.generatePublicKeysAtIndex = generatePublicKeysAtIndex;\nexports.generateBip32DerivationByPath = generateBip32DerivationByPath;\nexports.generateBip32DerivationByIndex = generateBip32DerivationByIndex;\nexports.deriveMultisigByPath = deriveMultisigByPath;\nexports.deriveMultisigByIndex = deriveMultisigByIndex;\nexports.generateBraid = generateBraid;\nexports.Braid = void 0;\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.array.from\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.reflect.construct\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.string.starts-with\");\n\nrequire(\"core-js/modules/es7.object.values\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nvar _bufio = require(\"bufio\");\n\nvar _assert = _interopRequireDefault(require(\"assert\"));\n\nvar _paths = require(\"./paths\");\n\nvar _networks = require(\"./networks\");\n\nvar _multisig = require(\"./multisig\");\n\nvar _keys = require(\"./keys\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) {\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n// In building the information objects that PSBTs want, one must include information\n// about the root fingerprint for the device. If that information is unknown, just fill\n// it in with zeros.\nvar FAKE_ROOT_FINGERPRINT = '00000000';\n/**\n * Struct object for encoding and decoding braids.\n *\n * @param {string} options.network = mainnet - mainnet or testnet\n * @param {string} options.addressType P2SH, P2SH-P2WSH, P2WSH\n * @param {ExtendedPublicKey[]} options.extendedPublicKeys ExtendedPublicKeys that make up this braid\n * @param {number} options.requiredSigners - how many required signers in this braid\n * @param {string} options.index - One value, relative, to add on to all xpub absolute bip32paths (usually 0=deposit, 1=change)\n */\n\nvar Braid =\n/*#__PURE__*/\nfunction (_Struct) {\n  _inherits(Braid, _Struct);\n\n  var _super = _createSuper(Braid);\n\n  function Braid(options) {\n    var _this;\n\n    _classCallCheck(this, Braid);\n\n    _this = _super.call(this);\n\n    if (!options || !Object.keys(options).length) {\n      return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n    }\n\n    (0, _assert.default)(Object.values(_multisig.MULTISIG_ADDRESS_TYPES).includes(options.addressType), \"Expected addressType to be one of:  \".concat(Object.values(_multisig.MULTISIG_ADDRESS_TYPES), \". You sent \").concat(options.addressType));\n    _this.addressType = options.addressType;\n    (0, _assert.default)(Object.values(_networks.NETWORKS).includes(options.network), \"Expected network to be one of:  \".concat(_networks.NETWORKS, \".\"));\n    _this.network = options.network;\n    options.extendedPublicKeys.forEach(function (xpub) {\n      var xpubValidationError = (0, _keys.validateExtendedPublicKey)(typeof xpub === 'string' ? xpub : xpub.base58String, _this.network);\n      (0, _assert.default)(!xpubValidationError.length, xpubValidationError);\n    });\n    _this.extendedPublicKeys = options.extendedPublicKeys;\n    (0, _assert.default)(typeof options.requiredSigners === \"number\");\n    (0, _assert.default)(options.requiredSigners <= _this.extendedPublicKeys.length, \"Can't have more requiredSigners than there are keys.\");\n    _this.requiredSigners = options.requiredSigners; // index is a technically a bip32path, but it's also just an\n    // unhardened index (single number) - if we think of the bip32path as a\n    // filepath, then this is a directory that historically/typically tells you\n    // deposit (0) or change (1) braid, but could be any unhardened index.\n\n    var pathError = (0, _paths.validateBIP32Index)(options.index, {\n      mode: \"unhardened\"\n    });\n    (0, _assert.default)(!pathError.length, pathError);\n    _this.index = options.index;\n    _this.sequence = (0, _paths.bip32PathToSequence)(_this.index);\n    return _this;\n  }\n\n  _createClass(Braid, null, [{\n    key: \"fromData\",\n    value: function fromData(data) {\n      return new this(data);\n    }\n  }]);\n\n  return Braid;\n}(_bufio.Struct);\n/**\n * @param {Braid} braid A Braid struct to be 'exported'\n * @returns {string} string of JSON data which can used to reconstitute the Braid later\n */\n\n\nexports.Braid = Braid;\n\nfunction braidConfig(braid) {\n  return JSON.stringify({\n    network: braid.network,\n    addressType: braid.addressType,\n    extendedPublicKeys: braid.extendedPublicKeys,\n    requiredSigners: braid.requiredSigners,\n    index: braid.index\n  });\n}\n/**\n * Returns the braid's network\n * @param {Braid} braid the braid to interrogate\n * @returns {string} network string testnet/mainnet\n */\n\n\nfunction braidNetwork(braid) {\n  return braid.network;\n}\n/**\n * Returns the braid's addressType\n * @param {Braid} braid the braid to interrogate\n * @returns {string} address type p2sh/p2sh-p2wsh/p2wsh\n */\n\n\nfunction braidAddressType(braid) {\n  return braid.addressType;\n}\n/**\n * Returns the braid's extendedPublicKeys\n * @param {Braid} braid the braid to interrogate\n * @returns {ExtendedPublicKey[]} array of ExtendedPublicKeys in the braid\n */\n\n\nfunction braidExtendedPublicKeys(braid) {\n  return braid.extendedPublicKeys;\n}\n/**\n * Returns the braid's requiredSigners\n * @param {Braid} braid the braid to interrogate\n * @returns {number} number of required signers\n */\n\n\nfunction braidRequiredSigners(braid) {\n  return braid.requiredSigners;\n}\n/**\n * Returns the braid's index\n * @param {Braid} braid the braid to interrogate\n * @returns {string} index (singular) for the braid: 0 = deposit, 1 = change\n */\n\n\nfunction braidIndex(braid) {\n  return braid.index;\n}\n/**\n * Validate that a requested path is derivable from a particular braid\n * e.g. it's both a valid bip32path *and* its first index is the same as the index\n *\n * @param {Braid} braid the braid to interrogate\n * @param {string} path the path to validate\n * @returns {void} the assertions will fire errors if invalid\n */\n\n\nfunction validateBip32PathForBraid(braid, path) {\n  var pathError = (0, _paths.validateBIP32Path)(path);\n  (0, _assert.default)(!pathError.length, pathError); // The function bip32PathToSequence blindly slices the first index after splitting on '/',\n  // so make sure the slash is there. E.g. a path of \"0/0\" would validate in the above function,\n  // but fail to do what we expect here unless we prepend '/' as '/0/0'.\n\n  var pathToCheck = path.startsWith('m/') || path.startsWith('/') ? path : \"/\" + path;\n  var pathSequence = (0, _paths.bip32PathToSequence)(pathToCheck);\n  (0, _assert.default)(pathSequence[0].toString() === braid.index, \"Cannot derive paths outside of the braid's index: \".concat(braid.index));\n}\n/**\n * Returns an object with a braid's pubkeys + bip32derivation info\n * at a particular path (respects the index)\n *\n * @param {Braid} braid the braid to interrogate\n * @param {string} path what suffix to generate pubkeys at\n * @returns {Object} Object where the keys make up an array of public keys at a particular path and the values are the bip32Derivations (used in other places)\n */\n\n\nfunction derivePublicKeyObjectsAtPath(braid, path) {\n  validateBip32PathForBraid(braid, path);\n  var dataRichPubKeyObjects = {};\n  var actualPathSuffix = path.startsWith('m/') ? path.slice(2) : path;\n  braidExtendedPublicKeys(braid).forEach(function (xpub) {\n    var completePath = xpub.path + \"/\" + actualPathSuffix; // Provide ability to work whether this was called with plain xpub strings or with xpub structs\n\n    var pubkey = (0, _keys.deriveChildPublicKey)(typeof xpub === 'string' ? xpub : xpub.base58String, path, braidNetwork(braid)); // It's ok if this is faked - but at least one of them should be correct otherwise\n    // signing won't work. On Coldcard, this must match what was included in the multisig\n    // wallet config file.\n\n    var rootFingerprint = (0, _keys.extendedPublicKeyRootFingerprint)(xpub);\n    var masterFingerprint = rootFingerprint ? rootFingerprint : FAKE_ROOT_FINGERPRINT;\n    dataRichPubKeyObjects[pubkey] = {\n      masterFingerprint: Buffer.from(masterFingerprint, 'hex'),\n      path: completePath,\n      pubkey: Buffer.from(pubkey, 'hex')\n    };\n  });\n  return dataRichPubKeyObjects;\n}\n/**\n * Returns the braid's pubkeys at particular path (respects the index)\n *\n * @param {Braid} braid the braid to interrogate\n * @param {string} path the suffix to generate pubkeys at\n * @returns {string[]} array of sorted (BIP67) public keys at a particular index from the braid\n */\n\n\nfunction generatePublicKeysAtPath(braid, path) {\n  return Object.keys(derivePublicKeyObjectsAtPath(braid, path)).sort(); // BIP67\n}\n/**\n * Returns the braid's pubkeys at particular index under the index\n *\n * @param {Braid} braid the braid to interrogate\n * @param {number} index the suffix to generate pubkeys at\n * @returns {string[]} array of public keys at a particular index from the braid\n */\n\n\nfunction generatePublicKeysAtIndex(braid, index) {\n  var pathToDerive = braidIndex(braid);\n  pathToDerive += \"/\" + index.toString();\n  return generatePublicKeysAtPath(braid, pathToDerive);\n}\n/**\n * Returns the braid's bip32PathDerivation (array of bip32 infos)\n * @param {Braid} braid the braid to interrogate\n * @param {string} path what suffix to generate bip32PathDerivation at\n * @returns {Object[]} array of getBip32Derivation objects\n */\n\n\nfunction generateBip32DerivationByPath(braid, path) {\n  return Object.values(derivePublicKeyObjectsAtPath(braid, path));\n}\n/**\n * Returns the braid's bip32PathDerivation at a particular index (array of bip32 info)\n * @param {Braid} braid the braid to interrogate\n * @param {number} index what suffix to generate bip32PathDerivation at\n * @returns {Object[]} array of getBip32Derivation objects\n */\n\n\nfunction generateBip32DerivationByIndex(braid, index) {\n  var pathToDerive = braidIndex(braid); // deposit or change\n\n  pathToDerive += \"/\" + index.toString();\n  return generateBip32DerivationByPath(braid, pathToDerive);\n}\n/**\n * Returns a braid-aware Multisig object at particular path (respects index)\n * @param {Braid} braid the braid to interrogate\n * @param {string} path what suffix to generate the multisig at\n * @returns {module:multisig.Multisig} braid-aware MULTISIG object at path\n */\n\n\nfunction deriveMultisigByPath(braid, path) {\n  var pubkeys = generatePublicKeysAtPath(braid, path);\n  var bip32Derivation = generateBip32DerivationByPath(braid, path);\n  return generateBraidAwareMultisigFromPublicKeys(braid, pubkeys, bip32Derivation);\n}\n/**\n * Returns a braid-aware Multisig object at particular index\n * @param {Braid} braid the braid to interrogate\n * @param {number} index what suffix to generate the multisig at\n * @returns {module:multisig.Multisig} braid-aware MULTISIG object at index\n */\n\n\nfunction deriveMultisigByIndex(braid, index) {\n  var pathToDerive = braidIndex(braid);\n  pathToDerive += \"/\" + index.toString();\n  return deriveMultisigByPath(braid, pathToDerive);\n}\n/**\n * Returns a braid-aware Multisig object from a set of public keys\n *\n * @param {Braid} braid the braid to interrogate\n * @param {string[]} pubkeys what suffix to generate the multisig at\n * @param {Object[]} bip32Derivation this is the array of bip32info for each member of the multisig\n * @returns {module:multisig.Multisig} braid-aware MULTISIG object\n */\n\n\nfunction generateBraidAwareMultisigFromPublicKeys(braid, pubkeys, bip32Derivation) {\n  var multisig = _multisig.generateMultisigFromPublicKeys.apply(void 0, [braidNetwork(braid), braidAddressType(braid), braidRequiredSigners(braid)].concat(_toConsumableArray(pubkeys)));\n\n  multisig.braidDetails = braidConfig(braid);\n  multisig.bip32Derivation = bip32Derivation;\n  return multisig;\n}\n/**\n * Generate a braid from its parts\n *\n * @param {string} network - mainnet or testnet\n * @param {string} addressType - P2SH/P2SH-P2WSH/P2WSH\n * @param {module:keys.ExtendedPublicKey[]} extendedPublicKeys - array of xpubs that make up the braid\n * @param {number} requiredSigners - number signers needed to sign\n * @param {string} index (usually deposit/change) - e.g. '0' or '1'\n * @returns {Braid} Braid struct is returned\n */\n\n\nfunction generateBraid(network, addressType, extendedPublicKeys, requiredSigners, index) {\n  return new Braid({\n    network: network,\n    addressType: addressType,\n    extendedPublicKeys: extendedPublicKeys,\n    requiredSigners: requiredSigners,\n    index: index\n  });\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sortInputs = sortInputs;\nexports.validateMultisigInputs = validateMultisigInputs;\nexports.validateMultisigInput = validateMultisigInput;\nexports.validateTransactionID = validateTransactionID;\nexports.validateTransactionIndex = validateTransactionIndex;\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nvar _utils = require(\"./utils\");\n\nvar _multisig = require(\"./multisig\");\n\n/** \n * This module provides functions for sorting & validating multisig\n * transaction inputs.\n * \n * @module inputs\n */\n\n/**\n* Represents a transaction input.\n*\n* The [`Multisig`]{@link module:multisig.MULTISIG} object represents\n* the address the corresponding UTXO belongs to.\n* \n* @typedef module:inputs.MultisigTransactionInput\n* @type {Object}\n* @property {string} txid - The transaction ID where funds were received\n* @property {number} index - The index in the transaction referred to by {txid}\n* @property {module:multisig.Multisig} multisig - The multisig object encumbering this UTXO\n* \n*/\n\n/**\n * Sorts the given inputs according to the [BIP69 standard]{@link https://github.com/bitcoin/bips/blob/master/bip-0069.mediawiki#transaction-inputs}: ascending lexicographic order.\n * \n * @param {module:inputs.MultisigTransactionInput[]} inputs - inputs to sort\n * @returns {module:inputs.MultisigTransactionInput[]} inputs sorted according to BIP69\n */\nfunction sortInputs(inputs) {\n  return inputs.sort(function (input1, input2) {\n    if (input1.txid > input2.txid) {\n      return 1;\n    } else {\n      if (input1.txid < input2.txid) {\n        return -1;\n      } else {\n        return input1.index < input2.index ? -1 : 1;\n      }\n    }\n  });\n}\n/**\n * Validates the given transaction inputs.\n *\n * Returns an error message if there are no inputs.  Passes each output to [`validateMultisigInput`]{@link module:transactions.validateOutput}.\n *\n * If the function is called with braidRequired, an additional check is performed\n * on each input's multisig to make sure that it is braid-aware. In other words,\n * does the input know the set of ExtendedPublicKeys it came from?\n *\n * @param {module:inputs.MultisigTransactionInput[]} inputs - inputs to validate\n * @param {boolean} [braidRequired] - inputs need to have braid details attached to them\n * @returns {string} empty if valid or corresponding validation message if not\n */\n\n\nfunction validateMultisigInputs(inputs, braidRequired) {\n  if (!inputs || inputs.length === 0) {\n    return \"At least one input is required.\";\n  }\n\n  var utxoIDs = [];\n\n  for (var inputIndex = 0; inputIndex < inputs.length; inputIndex++) {\n    var input = inputs[inputIndex];\n\n    if (braidRequired && input.multisig && !(0, _multisig.multisigBraidDetails)(input.multisig)) {\n      return \"At least one input cannot be traced back to its set of extended public keys.\";\n    }\n\n    var error = validateMultisigInput(input);\n\n    if (error) {\n      return error;\n    }\n\n    var utxoID = \"\".concat(input.txid, \":\").concat(input.index);\n\n    if (utxoIDs.includes(utxoID)) {\n      return \"Duplicate input: \".concat(utxoID);\n    }\n\n    utxoIDs.push(utxoID);\n  }\n\n  return \"\";\n}\n/**\n * Validates the given transaction input.\n *\n * - Validates the presence and value of the transaction ID (`txid`) property.\n *\n * - Validates the presence and value of the transaction index (`index`) property.\n *\n * - Validates the presence of the `multisig` property.\n *\n * @param {module:inputs.MultisigTransactionInput} input - input to validate\n * @returns {string} empty if valid or corresponding validation message if not\n * \n */\n\n\nfunction validateMultisigInput(input) {\n  if (!input.txid) {\n    return \"Does not have a transaction ID ('txid') property.\";\n  }\n\n  var error = validateTransactionID(input.txid);\n\n  if (error) {\n    return error;\n  }\n\n  if (input.index !== 0 && !input.index) {\n    return \"Does not have a transaction index ('index') property.\";\n  }\n\n  error = validateTransactionIndex(input.index);\n\n  if (error) {\n    return error;\n  }\n\n  if (!input.multisig) {\n    return \"Does not have a multisig object ('multisig') property.\";\n  }\n\n  return \"\";\n}\n\nvar TXID_LENGTH = 64;\n/**\n * Validates the given transaction ID.\n *\n * @param {string} txid - transaction ID to validate\n * @returns {string} empty if valid or corresponding validation message if not\n * \n */\n\nfunction validateTransactionID(txid) {\n  if (txid === null || txid === undefined || txid === '') {\n    return \"TXID cannot be blank.\";\n  }\n\n  var error = (0, _utils.validateHex)(txid);\n\n  if (error) {\n    return \"TXID is invalid (\".concat(error, \")\");\n  }\n\n  if (txid.length !== TXID_LENGTH) {\n    return \"TXID is invalid (must be \".concat(TXID_LENGTH, \"-characters)\");\n  }\n\n  return '';\n}\n/**\n * Validates the given transaction index.\n *\n * @param {string|number} indexString - transaction index to validate\n * @returns {string} empty if valid or corresponding validation message if not\n * \n */\n\n\nfunction validateTransactionIndex(indexString) {\n  if (indexString === null || indexString === undefined || indexString === '') {\n    return \"Index cannot be blank.\";\n  }\n\n  var index = parseInt(indexString, 10);\n\n  if (!isFinite(index)) {\n    return \"Index is invalid\";\n  }\n\n  if (index < 0) {\n    return \"Index cannot be negative.\";\n  }\n\n  return \"\";\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  VERSION: true,\n  MULTISIG_ROOT: true,\n  DIRECT_KEYSTORES: true,\n  INDIRECT_KEYSTORES: true,\n  KEYSTORES: true,\n  GetMetadata: true,\n  ExportPublicKey: true,\n  ExportExtendedPublicKey: true,\n  SignMultisigTransaction: true,\n  ConfirmMultisigAddress: true,\n  ConfigAdapter: true\n};\nexports.GetMetadata = GetMetadata;\nexports.ExportPublicKey = ExportPublicKey;\nexports.ExportExtendedPublicKey = ExportExtendedPublicKey;\nexports.SignMultisigTransaction = SignMultisigTransaction;\nexports.ConfirmMultisigAddress = ConfirmMultisigAddress;\nexports.ConfigAdapter = ConfigAdapter;\nexports.KEYSTORES = exports.INDIRECT_KEYSTORES = exports.DIRECT_KEYSTORES = exports.MULTISIG_ROOT = exports.VERSION = void 0;\n\nrequire(\"core-js/modules/es6.object.define-properties\");\n\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nvar _package = require(\"../package.json\");\n\nvar _interaction = require(\"./interaction\");\n\nObject.keys(_interaction).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _interaction[key];\n    }\n  });\n});\n\nvar _coldcard = require(\"./coldcard\");\n\nObject.keys(_coldcard).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _coldcard[key];\n    }\n  });\n});\n\nvar _custom = require(\"./custom\");\n\nObject.keys(_custom).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _custom[key];\n    }\n  });\n});\n\nvar _hermit = require(\"./hermit\");\n\nObject.keys(_hermit).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _hermit[key];\n    }\n  });\n});\n\nvar _ledger = require(\"./ledger\");\n\nObject.keys(_ledger).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _ledger[key];\n    }\n  });\n});\n\nvar _trezor = require(\"./trezor\");\n\nObject.keys(_trezor).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _trezor[key];\n    }\n  });\n});\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Current unchained-wallets version.\n *\n * @type {string}\n */\nvar VERSION = _package.version;\nexports.VERSION = VERSION;\nvar MULTISIG_ROOT = \"m/45'\";\n/**\n * Enumeration of keystores which support direct interactions.\n *\n * @constant\n * @enum {string}\n * @default\n */\n\nexports.MULTISIG_ROOT = MULTISIG_ROOT;\nvar DIRECT_KEYSTORES = {\n  TREZOR: _trezor.TREZOR,\n  LEDGER: _ledger.LEDGER\n};\n/**\n * Enumeration of keystores which support indirect interactions.\n *\n * @constant\n * @enum {string}\n * @default\n */\n\nexports.DIRECT_KEYSTORES = DIRECT_KEYSTORES;\nvar INDIRECT_KEYSTORES = {\n  HERMIT: _hermit.HERMIT,\n  COLDCARD: _coldcard.COLDCARD,\n  CUSTOM: _custom.CUSTOM\n};\n/**\n * Enumeration of supported keystores.\n *\n * @type {string[]}\n */\n\nexports.INDIRECT_KEYSTORES = INDIRECT_KEYSTORES;\n\nvar KEYSTORES = _objectSpread({}, DIRECT_KEYSTORES, {}, INDIRECT_KEYSTORES);\n/**\n * Return an interaction class for obtaining metadata from the given\n * `keystore`.\n *\n * **Supported keystores:** Trezor, Ledger\n *\n * @param {Object} options - options argument\n * @param {KEYSTORES} options.keystore - keystore to use\n * @return {module:interaction.KeystoreInteraction} keystore-specific interaction instance\n * @example\n * import {GetMetadata, TREZOR} from \"unchained-wallets\";\n * // Works similarly for Ledger.\n * const interaction = GetMetadata({keystore: TREZOR});\n * const metadata = await interaction.run();\n */\n\n\nexports.KEYSTORES = KEYSTORES;\n\nfunction GetMetadata(_ref) {\n  var keystore = _ref.keystore;\n\n  switch (keystore) {\n    case _ledger.LEDGER:\n      return new _ledger.LedgerGetMetadata();\n\n    case _trezor.TREZOR:\n      return new _trezor.TrezorGetMetadata();\n\n    default:\n      return new _interaction.UnsupportedInteraction({\n        code: \"unsupported\",\n        text: \"This keystore does not return a version.\"\n      });\n  }\n}\n/**\n * Return an interaction class for exporting a public key from the\n * given `keystore` for the given `bip32Path` and `network`.\n *\n * **Supported keystores:** Trezor, Ledger, Hermit\n *\n * @param {Object} options - options argument\n * @param {KEYSTORES} options.keystore - keystore to use\n * @param {string} options.network - bitcoin network\n * @param {string} options.bip32Path - the BIP32 path of the HD node of the public key\n * @param {string} options.includeXFP - also return root fingerprint\n * @return {module:interaction.KeystoreInteraction} keystore-specific interaction instance\n * @example\n * import {MAINNET} from \"unchained-bitcoin\";\n * import {ExportPublicKey, TREZOR, HERMIT} from \"unchained-wallets\";\n * // Works similarly for Ledger\n * const interaction = ExportPublicKey({keystore: TREZOR, network: MAINNET, bip32Path: \"m/45'/0'/0'/0/0\"});\n * const publicKey = await interaction.run();\n */\n\n\nfunction ExportPublicKey(_ref2) {\n  var keystore = _ref2.keystore,\n      network = _ref2.network,\n      bip32Path = _ref2.bip32Path,\n      includeXFP = _ref2.includeXFP;\n\n  switch (keystore) {\n    case _coldcard.COLDCARD:\n      return new _coldcard.ColdcardExportPublicKey({\n        network: network,\n        bip32Path: bip32Path,\n        includeXFP: includeXFP\n      });\n\n    case _hermit.HERMIT:\n      return new _hermit.HermitExportPublicKey({\n        bip32Path: bip32Path\n      });\n\n    case _ledger.LEDGER:\n      return new _ledger.LedgerExportPublicKey({\n        bip32Path: bip32Path,\n        includeXFP: includeXFP\n      });\n\n    case _trezor.TREZOR:\n      return new _trezor.TrezorExportPublicKey({\n        network: network,\n        bip32Path: bip32Path,\n        includeXFP: includeXFP\n      });\n\n    default:\n      return new _interaction.UnsupportedInteraction({\n        code: \"unsupported\",\n        text: \"This keystore is not supported when exporting public keys.\"\n      });\n  }\n}\n/**\n * Return an interaction class for exporting an extended public key\n * from the given `keystore` for the given `bip32Path` and `network`.\n *\n * **Supported keystores:** Trezor, Hermit, Ledger\n *\n *\n * @param {Object} options - options argument\n * @param {KEYSTORES} options.keystore - keystore to use\n * @param {string} options.network - bitcoin network\n * @param {string} options.bip32Path - the BIP32 path of the HD node of the extended public key\n * @param {string} options.includeXFP - also return root fingerprint\n * @return {module:interaction.KeystoreInteraction} keystore-specific interaction instance\n * @example\n * import {MAINNET} from \"unchained-bitcoin\";\n * import {ExportExtendedPublicKey, TREZOR, HERMIT} from \"unchained-wallets\";\n * // Works similarly for Ledger\n * const interaction = ExportExtendedPublicKey({keystore: TREZOR, network: MAINNET, bip32Path: \"m/45'/0'/0'/0/0\"});\n * const xpub = await interaction.run();\n */\n\n\nfunction ExportExtendedPublicKey(_ref3) {\n  var keystore = _ref3.keystore,\n      network = _ref3.network,\n      bip32Path = _ref3.bip32Path,\n      includeXFP = _ref3.includeXFP;\n\n  switch (keystore) {\n    case _coldcard.COLDCARD:\n      return new _coldcard.ColdcardExportExtendedPublicKey({\n        bip32Path: bip32Path,\n        network: network,\n        includeXFP: includeXFP\n      });\n\n    case _custom.CUSTOM:\n      return new _custom.CustomExportExtendedPublicKey({\n        bip32Path: bip32Path,\n        network: network,\n        includeXFP: includeXFP\n      });\n\n    case _hermit.HERMIT:\n      return new _hermit.HermitExportExtendedPublicKey({\n        bip32Path: bip32Path\n      });\n\n    case _ledger.LEDGER:\n      return new _ledger.LedgerExportExtendedPublicKey({\n        bip32Path: bip32Path,\n        network: network,\n        includeXFP: includeXFP\n      });\n\n    case _trezor.TREZOR:\n      return new _trezor.TrezorExportExtendedPublicKey({\n        bip32Path: bip32Path,\n        network: network,\n        includeXFP: includeXFP\n      });\n\n    default:\n      return new _interaction.UnsupportedInteraction({\n        code: \"unsupported\",\n        text: \"This keystore is not supported when exporting extended public keys.\"\n      });\n  }\n}\n/**\n * Return an interaction class for signing a multisig transaction with\n * the given `keystore`.\n *\n * The inputs are objects which have `txid`, `index`, and a `multisig`\n * object, the last which is a `Multisig` object from\n * `unchained-bitcoin`.\n *\n * The outputs are objects which have `address` and `amountSats` (an\n * integer).\n *\n * `bip32Paths` is an array of BIP32 paths for the public keys on this\n * device, one for each input.\n *\n * **Supported keystores:** Trezor, Ledger, Hermit\n *\n *\n * @param {Object} options - options argument\n * @param {KEYSTORES} options.keystore - keystore to use\n * @param {string} options.network - bitcoin network\n * @param {object[]} options.inputs - transaction inputs\n * @param {object[]} options.outputs - transaction outputs\n * @param {string[]} options.bip32Paths - the BIP32 paths on this device corresponding to a public key in each input\n * @return {module:interaction.KeystoreInteraction} keystore-specific interaction instance\n * @example\n * import {\n *   generateMultisigFromHex, TESTNET, P2SH,\n * } from \"unchained-bitcoin\";\n * import {SignMultisigTransaction, TREZOR} from \"unchained-wallets\";\n * const redeemScript = \"5...ae\";\n * const inputs = [\n *   {\n *     txid: \"8d276c76b3550b145e44d35c5833bae175e0351b4a5c57dc1740387e78f57b11\",\n *     index: 1,\n *     multisig: generateMultisigFromHex(TESTNET, P2SH, redeemScript),\n *     amountSats: '1234000'\n *   },\n *   // other inputs...\n * ];\n * const outputs = [\n *   {\n *     amountSats: '1299659',\n *     address: \"2NGHod7V2TAAXC1iUdNmc6R8UUd4TVTuBmp\"\n *   },\n *   // other outputs...\n * ];\n * const interaction = SignMultisigTransaction({\n *   keystore: TREZOR, // works the same for Ledger\n *   network: TESTNET,\n *   inputs,\n *   outputs,\n *   bip32Paths: [\"m/45'/0'/0'/0\", // add more, 1 per input],\n * });\n * const signature = await interaction.run();\n * console.log(signatures);\n * // [\"ababab...\", // 1 per input]\n *\n */\n\n\nfunction SignMultisigTransaction(_ref4) {\n  var keystore = _ref4.keystore,\n      network = _ref4.network,\n      inputs = _ref4.inputs,\n      outputs = _ref4.outputs,\n      bip32Paths = _ref4.bip32Paths,\n      psbt = _ref4.psbt;\n\n  switch (keystore) {\n    case _coldcard.COLDCARD:\n      return new _coldcard.ColdcardSignMultisigTransaction({\n        network: network,\n        inputs: inputs,\n        outputs: outputs,\n        bip32Paths: bip32Paths,\n        psbt: psbt\n      });\n\n    case _custom.CUSTOM:\n      return new _custom.CustomSignMultisigTransaction({\n        network: network,\n        inputs: inputs,\n        outputs: outputs,\n        bip32Paths: bip32Paths,\n        psbt: psbt\n      });\n\n    case _hermit.HERMIT:\n      return new _hermit.HermitSignTransaction({\n        inputs: inputs,\n        outputs: outputs,\n        bip32Paths: bip32Paths\n      });\n\n    case _ledger.LEDGER:\n      return new _ledger.LedgerSignMultisigTransaction({\n        network: network,\n        inputs: inputs,\n        outputs: outputs,\n        bip32Paths: bip32Paths\n      });\n\n    case _trezor.TREZOR:\n      return new _trezor.TrezorSignMultisigTransaction({\n        network: network,\n        inputs: inputs,\n        outputs: outputs,\n        bip32Paths: bip32Paths\n      });\n\n    default:\n      return new _interaction.UnsupportedInteraction({\n        code: \"unsupported\",\n        text: \"This keystore is not supported when signing multisig transactions.\"\n      });\n  }\n}\n/**\n * Return an interaction class for confirming a multisig address with\n * the given `keystore`.\n *\n * The `multisig` parameter is a `Multisig` object from\n * `unchained-bitcoin`.\n *\n * `bip32Path` is the BIP32 path for the publiic key in the address on\n * this device.\n *\n * `publicKey` optional, is the public key expected to be at `bip32Path`.\n *\n * **Supported keystores:** Trezor\n *\n * @param {Object} options - options argument\n * @param {KEYSTORES} options.keystore - keystore to use\n * @param {string} options.network - bitcoin network\n * @param {object} options.multisig - `Multisig` object representing the address\n * @param {string} options.bip32Path - the BIP32 path on this device containing a public key from the address\n * @param {string} options.publicKey - optional, the public key expected to be at the given BIP32 path\n * @return {module:interaction.KeystoreInteraction} keystore-specific interaction instance\n * @example\n * import {\n *   generateMultisigFromHex, TESTNET, P2SH,\n * } from \"unchained-bitcoin\";\n * import {\n *   ConfirmMultisigAddress,\n *   multisigPublicKeys,\n *   trezorPublicKey,\n *   TREZOR} from \"unchained-wallets\";\n * const redeemScript = \"5...ae\";\n * const multisig = generateMultisigFromHex(TESTNET, P2SH, redeemScript);\n * const interaction = ConfirmMultisigAddress({\n *   keystore: TREZOR,\n *   network: TESTNET,\n *   multisig,\n *   bip32Path: \"m/45'/1'/0'/0/0\",\n * });\n * await interaction.run();\n *\n * With publicKey:\n * const redeemScript = \"5...ae\";\n * const multisig = generateMultisigFromHex(TESTNET, P2SH, redeemScript);\n * const publicKey = trezorPublicKey(multisigPublicKeys(this.multisig)[2])\n * const interaction = ConfirmMultisigAddress({\n *   keystore: TREZOR,\n *   publicKey,\n *   network: TESTNET,\n *   multisig,\n *   bip32Path: \"m/45'/1'/0'/0/0\",\n * });\n * await interaction.run();\n *\n *\n */\n\n\nfunction ConfirmMultisigAddress(_ref5) {\n  var keystore = _ref5.keystore,\n      network = _ref5.network,\n      bip32Path = _ref5.bip32Path,\n      multisig = _ref5.multisig,\n      publicKey = _ref5.publicKey;\n\n  switch (keystore) {\n    case _trezor.TREZOR:\n      return new _trezor.TrezorConfirmMultisigAddress({\n        network: network,\n        bip32Path: bip32Path,\n        multisig: multisig,\n        publicKey: publicKey\n      });\n\n    default:\n      return new _interaction.UnsupportedInteraction({\n        code: \"unsupported\",\n        text: \"This keystore is not supported when confirming multisig addresses.\"\n      });\n  }\n}\n/**\n * Return a class for creating a multisig config file for a\n * given keystore or coordinator.\n *\n * @param {string} KEYSTORE - keystore to use\n * @param {string} jsonConfig - JSON wallet configuration file e.g. from Caravan\n * @returns {ColdcardMultisigWalletConfig|UnsupportedInteraction} - A class that can translate to shape of\n * config to match the specified keystore/coordinator requirements\n */\n\n\nfunction ConfigAdapter(_ref6) {\n  var KEYSTORE = _ref6.KEYSTORE,\n      jsonConfig = _ref6.jsonConfig;\n\n  switch (KEYSTORE) {\n    case _coldcard.COLDCARD:\n      return new _coldcard.ColdcardMultisigWalletConfig({\n        jsonConfig: jsonConfig\n      });\n\n    default:\n      return new _interaction.UnsupportedInteraction({\n        code: \"unsupported\",\n        text: \"This keystore is not supported when translating external spend configuration files.\"\n      });\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateAddress = validateAddress;\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nvar _bitcoinAddressValidation = _interopRequireDefault(require(\"bitcoin-address-validation\"));\n\nvar _networks = require(\"./networks\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * This module provides validation messages related to addresses.\n * \n * @module address\n */\nvar MAINNET_ADDRESS_MAGIC_BYTE_PATTERN = \"^(bc1|[13])\";\nvar TESTNET_ADDRESS_MAGIC_BYTE_PATTERN = \"^(tb1|bcrt1|[mn2])\";\nvar ADDRESS_BODY_PATTERN = \"[A-HJ-NP-Za-km-z1-9]+$\";\nvar BECH32_ADDRESS_MAGIC_BYTE_REGEX = /^(tb|bc)/;\nvar BECH32_ADDRESS_BODY_PATTERN = \"[ac-hj-np-z02-9]+$\";\n/**\n * Validate a given bitcoin address.\n *\n * Address must be a valid address on the given bitcoin network.\n * \n * @param {string} address - the address to validate\n * @param {module:networks.NETWORKS|string} network - bitcoin network\n * @returns {string} empty if valid or corresponding validation message if not\n * @example\n * import {MAINNET, TESTNET, validateAddress} from \"unchained-bitcoin\";\n * console.log(validateAddress('', MAINNET)); // \"Address cannot be blank\"\n * console.log(validateAddress('2Mx6Y8VRj8rmSdLfwrvnpBR7ctjctPLzpWs', MAINNET)); // \"Address must start with either of 'bc1', '1' or '3' followed by letters or digits.\"\n * console.log(validateAddress('2Mx6Y8VRj8rmSdLfwrvnpBR7ctjctPLzpWs', TESTNET)); // \"\"\n * \n */\n\nfunction validateAddress(address, network) {\n  if (!address || address.trim() === '') {\n    return 'Address cannot be blank.';\n  }\n\n  var magic_byte_regex = network === _networks.TESTNET ? TESTNET_ADDRESS_MAGIC_BYTE_PATTERN : MAINNET_ADDRESS_MAGIC_BYTE_PATTERN;\n  var isBech32 = address.match(BECH32_ADDRESS_MAGIC_BYTE_REGEX);\n  var address_body_regex = isBech32 ? BECH32_ADDRESS_BODY_PATTERN : ADDRESS_BODY_PATTERN;\n  var address_regex = magic_byte_regex + address_body_regex; // This tests whether you've got the network lined up with address type or not\n\n  if (!address.match(address_regex)) {\n    if (network === _networks.TESTNET) {\n      return \"Address must start with one of 'tb1', 'm', 'n', or '2' followed by letters or digits.\";\n    } else {\n      return \"Address must start with either of 'bc1', '1' or '3' followed by letters or digits.\";\n    }\n  }\n\n  return (0, _bitcoinAddressValidation.default)(address) ? '' : \"Address is invalid.\";\n}","\"use strict\";\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.weak-map\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validatePrefix = validatePrefix;\nexports.validateRootFingerprint = validateRootFingerprint;\nexports.convertExtendedPublicKey = convertExtendedPublicKey;\nexports.validateExtendedPublicKeyForNetwork = validateExtendedPublicKeyForNetwork;\nexports.validateExtendedPublicKey = validateExtendedPublicKey;\nexports.validatePublicKey = validatePublicKey;\nexports.compressPublicKey = compressPublicKey;\nexports.deriveChildPublicKey = deriveChildPublicKey;\nexports.deriveChildExtendedPublicKey = deriveChildExtendedPublicKey;\nexports.isKeyCompressed = isKeyCompressed;\nexports.getFingerprintFromPublicKey = getFingerprintFromPublicKey;\nexports.fingerprintToFixedLengthHex = fingerprintToFixedLengthHex;\nexports.extendedPublicKeyRootFingerprint = extendedPublicKeyRootFingerprint;\nexports.deriveExtendedPublicKey = deriveExtendedPublicKey;\nexports.ExtendedPublicKey = exports.EXTENDED_PUBLIC_KEY_VERSIONS = void 0;\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.reflect.get\");\n\nrequire(\"core-js/modules/es6.reflect.construct\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nvar _bitcoinjsLib = require(\"bitcoinjs-lib\");\n\nvar bip32 = _interopRequireWildcard(require(\"bip32\"));\n\nvar _bs58check = _interopRequireDefault(require(\"bs58check\"));\n\nvar _bufio = require(\"bufio\");\n\nvar _assert = _interopRequireDefault(require(\"assert\"));\n\nvar _utils = require(\"./utils\");\n\nvar _paths = require(\"./paths\");\n\nvar _networks = require(\"./networks\");\n\nvar _p2sh_p2wsh = require(\"./p2sh_p2wsh\");\n\nvar _p2wsh = require(\"./p2wsh\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) {\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar EXTENDED_PUBLIC_KEY_VERSIONS = {\n  xpub: \"0488b21e\",\n  ypub: \"049d7cb2\",\n  zpub: \"04b24746\",\n  Ypub: \"0295b43f\",\n  Zpub: \"02aa7ed3\",\n  tpub: \"043587cf\",\n  upub: \"044a5262\",\n  vpub: \"045f1cf6\",\n  Upub: \"024289ef\",\n  Vpub: \"02575483\"\n};\n/**\n * Validate whether or not a string is a valid extended public key prefix\n * @param {string} prefix string to be tested\n * @returns {null} returns null if valid\n * @throws Error with message indicating the invalid prefix.\n */\n\nexports.EXTENDED_PUBLIC_KEY_VERSIONS = EXTENDED_PUBLIC_KEY_VERSIONS;\n\nfunction validatePrefix(prefix) {\n  if (!EXTENDED_PUBLIC_KEY_VERSIONS[prefix]) {\n    throw new Error(\"Invalid prefix \\\"\".concat(prefix, \"\\\" for extended public key.\"));\n  }\n\n  return null;\n}\n/**\n * checks length, is string, and valid hex\n * @param {string} rootFingerprint - fingerprint to validate\n * @return {void}\n */\n\n\nfunction validateRootFingerprint(rootFingerprint) {\n  (0, _assert.default)(typeof rootFingerprint === \"string\", 'Root fingerprint must be a string.');\n  (0, _assert.default)(rootFingerprint.length === 8, \"Expected hex value of length 8\");\n  var rootXfpError = (0, _utils.validateHex)(rootFingerprint);\n  (0, _assert.default)(!rootXfpError.length, \"Root fingerprint must be valid hex\");\n}\n/**\n * Struct object for encoding and decoding extended public keys.\n * base58 encoded serialization of the following information:\n * [ version ][ depth ][ parent fingerprint ][ key index ][ chain code ][ pubkey ]\n * @param {string} options.bip32Path e.g. m/45'/0'/0\n * @param {string} options.pubkey pubkey found at bip32Path\n * @param {string} options.chaincode chaincode corresponding to pubkey and path\n * @param {string} options.parentFingerprint - fingerprint of parent public key\n * @param {string} [options.network = mainnet] - mainnet or testnet\n * @param {string} [options.rootFingerprint] - the root fingerprint of the device, e.g. 'ca2ab33f'\n * @example\n * import { ExtendedPublicKey } from \"unchained-bitcoin\"\n * const xpub = ExtendedPublicKey.fromBase58(\"xpub6CCHViYn5VzKSmKD9cK9LBDPz9wBLV7owXJcNDioETNvhqhVtj3ABnVUERN9aV1RGTX9YpyPHnC4Ekzjnr7TZthsJRBiXA4QCeXNHEwxLab\")\n * console.log(xpub.encode()) // returns raw Buffer of xpub encoded as per BIP32\n * console.log(xpub.toBase58()) // returns base58 check encoded xpub\n */\n\n\nvar ExtendedPublicKey =\n/*#__PURE__*/\nfunction (_Struct) {\n  _inherits(ExtendedPublicKey, _Struct);\n\n  var _super = _createSuper(ExtendedPublicKey);\n\n  function ExtendedPublicKey(options) {\n    var _this;\n\n    _classCallCheck(this, ExtendedPublicKey);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"path\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"sequence\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"index\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"depth\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"chaincode\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"pubkey\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"parentFingerprint\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"network\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"version\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"rootFingerprint\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"base58String\", void 0);\n\n    if (!options || !Object.keys(options).length) {\n      return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n    }\n\n    if (options.path) {\n      var pathError = (0, _paths.validateBIP32Path)(options.path);\n      (0, _assert.default)(!pathError.length, pathError);\n      _this.path = options.path;\n      _this.sequence = (0, _paths.bip32PathToSequence)(_this.path);\n      _this.index = _this.sequence[_this.sequence.length - 1];\n      _this.depth = _this.path.split(\"/\").length - 1;\n    } else {\n      (0, _assert.default)(options.depth !== undefined && options.index !== undefined && options.depth >= 0 && options.index >= 0, 'Either an absolute bip32 path or index and depth are required to create ExtendedPublicKey');\n      _this.depth = options.depth;\n      _this.index = options.index;\n    }\n\n    (0, _assert.default)(options.pubkey, 'pubkey required to create ExtendedPublicKey');\n    var pubKeyError = validatePublicKey(options.pubkey);\n    (0, _assert.default)(!pubKeyError.length, pubKeyError);\n    _this.pubkey = isKeyCompressed(options.pubkey) ? options.pubkey : compressPublicKey(options.pubkey);\n    (0, _assert.default)(options.chaincode && options.chaincode.length === 64, \"xpub derivation requires 32-byte chaincode\");\n    var chaincodeError = (0, _utils.validateHex)(options.chaincode);\n    (0, _assert.default)(!chaincodeError.length, chaincodeError);\n    _this.chaincode = options.chaincode;\n    (0, _assert.default)(typeof options.parentFingerprint === \"number\");\n    _this.parentFingerprint = options.parentFingerprint;\n\n    if (options.network) {\n      (0, _assert.default)([_networks.MAINNET, _networks.TESTNET].includes(options.network), \"Expected network to be one of \".concat(_networks.MAINNET, \" or \").concat(_networks.TESTNET, \".\"));\n      _this.network = options.network;\n    } else {\n      _this.network = _networks.MAINNET;\n    }\n\n    _this.version = _this.network === _networks.MAINNET ? EXTENDED_PUBLIC_KEY_VERSIONS.xpub : EXTENDED_PUBLIC_KEY_VERSIONS.tpub;\n\n    if (options.rootFingerprint) {\n      validateRootFingerprint(options.rootFingerprint);\n      _this.rootFingerprint = options.rootFingerprint;\n    }\n\n    _this.base58String = _this.toBase58();\n    return _this;\n  }\n  /**\n   * A Buffer Writer used to encode an xpub. This is called\n   * by the `encode` and `toBase58` methods\n   * @param {BufferWriter} bw bufio.BufferWriter\n   * @returns {void} doesn't have a return, only updates given buffer writer\n   */\n\n\n  _createClass(ExtendedPublicKey, [{\n    key: \"write\",\n    value: function write(bw) {\n      bw.writeString(this.version, \"hex\");\n      bw.writeU8(this.depth);\n      bw.writeU32BE(this.parentFingerprint);\n      bw.writeU32BE(this.index);\n      bw.writeString(this.chaincode, \"hex\");\n      bw.writeString(this.pubkey, \"hex\");\n    }\n    /**\n     * Given a network string, will update the network and matching\n     * version magic bytes used for generating xpub\n     * @param {string} network - one of \"mainnet\" or \"testnet\"\n     * @returns {void}\n     */\n\n  }, {\n    key: \"setNetwork\",\n    value: function setNetwork(network) {\n      (0, _assert.default)([_networks.MAINNET, _networks.TESTNET].includes(network), \"Expected network to be one of \".concat(_networks.MAINNET, \" or \").concat(_networks.TESTNET, \".\"));\n      this.network = network;\n      this.version = this.network === _networks.MAINNET ? EXTENDED_PUBLIC_KEY_VERSIONS.xpub : EXTENDED_PUBLIC_KEY_VERSIONS.tpub;\n    }\n    /**\n     * @param {string} bip32Path set this xpub's path\n     * @returns {void}\n     */\n\n  }, {\n    key: \"setBip32Path\",\n    value: function setBip32Path(bip32Path) {\n      var pathError = (0, _paths.validateBIP32Path)(bip32Path);\n      (0, _assert.default)(!pathError.length, pathError);\n      this.path = bip32Path;\n    }\n    /**\n     * @param {string} rootFingerprint fingerprint of pubkey at m/\n     * @returns {void}\n     */\n\n  }, {\n    key: \"setRootFingerprint\",\n    value: function setRootFingerprint(rootFingerprint) {\n      validateRootFingerprint(rootFingerprint);\n      this.rootFingerprint = rootFingerprint;\n    }\n  }, {\n    key: \"encode\",\n    value: function encode(extra) {\n      return _get(_getPrototypeOf(ExtendedPublicKey.prototype), \"encode\", this).call(this, extra);\n    }\n    /**\n     * Return the base58 encoded xpub, adding the\n     * @returns {string} base58check encoded xpub, prefixed by network\n     */\n\n  }, {\n    key: \"toBase58\",\n    value: function toBase58() {\n      return _bs58check.default.encode(this.encode());\n    }\n    /**\n     * Return a new Extended Public Key class given\n     * an xpub string\n     * @param {string} data base58 check encoded xpub\n     * @returns {ExtendedPublicKey} new ExtendedPublicKey instance\n     */\n\n  }, {\n    key: \"addBase58String\",\n\n    /**\n     * Sometimes we hop back and forth between a \"Rich ExtendedPublicKey\"\n     * (a Struct with a couple extra parameters set) and the minimal\n     * Struct - let's keep the actual string of the Struct around\n     * for easy usage in other functions\n     * @returns {void}\n     */\n    value: function addBase58String() {\n      this.base58String = this.toBase58();\n    }\n    /**\n     * Used by the decoder to convert a raw xpub Buffer into\n     * an ExtendedPublicKey class\n     * @param {BufferReader} br - A bufio.BufferReader\n     * @returns {ExtendedPublicKey} new instance of Extended Public Key\n     */\n\n  }, {\n    key: \"read\",\n    value: function read(br) {\n      this.version = br.readString(4, \"hex\");\n      this.depth = br.readU8();\n      this.parentFingerprint = br.readU32BE();\n      this.index = br.readU32BE();\n      this.chaincode = br.readString(32, \"hex\");\n      this.pubkey = br.readString(33, \"hex\");\n      this.base58String = this.toBase58();\n      return this;\n    }\n  }], [{\n    key: \"fromBase58\",\n    value: function fromBase58(data) {\n      return ExtendedPublicKey.decode(_bs58check.default.decode(data));\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(data, extra) {\n      return _get(_getPrototypeOf(ExtendedPublicKey), \"decode\", this).call(this, data, extra);\n    }\n  }]);\n\n  return ExtendedPublicKey;\n}(_bufio.Struct);\n/**\n * Convert an extended public key between formats\n * @param {string} extendedPublicKey - the extended public key to convert\n * @param {string} targetPrefix - the target format to convert to\n * @example\n * import {convertExtendedPublicKey} from \"unchained-bitcoin\";\n * const tpub = convertExtendedPublicKey(\"xpub6CCH...\", \"tpub\");\n * console.log(tpub.extendedPublicKey, tpub.message)\n * // tpubDCZv...\n * @returns {(string|object)} converted extended public key or error object\n * with the failed key and error message\n */\n\n\nexports.ExtendedPublicKey = ExtendedPublicKey;\n\nfunction convertExtendedPublicKey(extendedPublicKey, targetPrefix) {\n  try {\n    var sourcePrefix = extendedPublicKey.slice(0, 4);\n    validatePrefix(targetPrefix);\n    validatePrefix(sourcePrefix);\n\n    var decodedExtendedPublicKey = _bs58check.default.decode(extendedPublicKey.trim());\n\n    var extendedPublicKeyNoPrefix = decodedExtendedPublicKey.slice(4);\n    var extendedPublicKeyNewPrefix = Buffer.concat([Buffer.from(EXTENDED_PUBLIC_KEY_VERSIONS[targetPrefix], \"hex\"), extendedPublicKeyNoPrefix]);\n    return _bs58check.default.encode(extendedPublicKeyNewPrefix);\n  } catch (err) {\n    throw new Error(\"Unable to convert extended public key: \" + err.message);\n  }\n}\n/**\n * Check to see if an extended public key is of the correct prefix for the network\n * this can be used in conjunction with convertExtendedPublicKey to attempt to automatically convert\n * @param {string} extendedPublicKey - the extended public key to check\n * @param {string} network - the bitcoin network\n * @example\n * import {validateExtendedPublicKeyForNetwork} from \"unchained-bitcoin\";\n * console.log(validateExtendedPublicKeyForNetwork('xpub...', MAINNET)) // empty\n * console.log(validateExtendedPublicKeyForNetwork('tpub...', MAINNET)) // \"Extended public key must begin with ....\"\n * @returns {string} a validation message or empty if valid\n */\n\n\nfunction validateExtendedPublicKeyForNetwork(extendedPublicKey, network) {\n  var requiredPrefix = \"'xpub'\";\n\n  if (network === _networks.TESTNET) {\n    requiredPrefix += \" or 'tpub'\";\n  }\n\n  var prefix = extendedPublicKey.slice(0, 4);\n\n  if (!(network === _networks.MAINNET && prefix === \"xpub\" || network === _networks.TESTNET && prefix === \"tpub\")) {\n    return \"Extended public key must begin with \".concat(requiredPrefix, \".\");\n  }\n\n  return \"\";\n}\n/**\n * Validate the given extended public key.\n *\n * - Must start with the appropriate (network-dependent) prefix.\n * - Must be a valid BIP32 extended public key\n *\n * @param {string} xpubString - base58 encoded extended public key (`xpub...`)\n * @param {module:networks.NETWORKS} network  - bitcoin network\n * @returns {string} empty if valid or corresponding validation message if not\n * @example\n * import {validateExtendedPublicKey} from \"unchained-bitcoin\";\n * console.log(validateExtendedPublicKey(\"\", MAINNET)); // \"Extended public key cannot be blank.\"\n * console.log(validateExtendedPublicKey(\"foo\", MAINNET)); // \"Extended public key must begin with ...\"\n * console.log(validateExtendedPublicKey(\"xpub123\", MAINNET)); // \"Extended public key is too short.\"\n * console.log(validateExtendedPublicKey(\"tpub123...\", MAINNET)); // \"Extended public key must begin with ....\"\n * console.log(validateExtendedPublicKey(\"xpub123%%!~~...\", MAINNET)); // \"Invalid extended public key\"\n * console.log(validateExtendedPublicKey(\"xpub123...\", MAINNET)); // \"\"\n */\n\n\nfunction validateExtendedPublicKey(xpubString, network) {\n  if (xpubString === null || xpubString === undefined || xpubString === \"\") {\n    return \"Extended public key cannot be blank.\";\n  }\n\n  var requiredPrefix = network === _networks.TESTNET ? \"tpub\" : \"xpub\";\n  var notXpubError = \"Extended public key must begin with '\".concat(requiredPrefix, \"'.\");\n\n  if (xpubString.length < 4) {\n    return notXpubError;\n  }\n\n  var prefix = xpubString.slice(0, 4);\n\n  if (prefix !== requiredPrefix) {\n    return notXpubError;\n  }\n\n  if (xpubString.length < 111) {\n    return \"Extended public key is too short.\";\n  }\n\n  try {\n    ExtendedPublicKey.fromBase58(xpubString);\n  } catch (e) {\n    return \"Invalid extended public key.\";\n  }\n\n  return \"\";\n}\n/**\n * Validate the given public key.\n *\n * - Must be valid hex.\n * - Must be a valid BIP32 public key.\n *\n * @param {string} pubkeyHex - (compressed) public key in hex\n * @param {string} [addressType] - one of P2SH, P2SH-P2WSH, P2WSH\n * @returns {string} empty if valid or corresponding validation message if not\n * @example\n * import {validatePublicKey} from \"unchained-bitcoin\";\n * console.log(validatePublicKey(\"\")); // \"Public key cannot be blank.\"\n * console.log(validatePublicKey(\"zzzz\")); // \"Invalid hex...\"\n * console.log(validatePublicKey(\"deadbeef\")); // \"Invalid public key.\"\n * console.log(validatePublicKey(\"03b32dc780fba98db25b4b72cf2b69da228f5e10ca6aa8f46eabe7f9fe22c994ee\")); // \"\"\n * console.log(validatePublicKey(\"04a17f3ad2ecde2fff2abd1b9ca77f35d5449a3b50a8b2dc9a0b5432d6596afd01ee884006f7e7191f430c7881626b95ae1bcacf9b54d7073519673edaea71ee53\")); // \"\"\n * console.log(validatePublicKey(\"04a17f3ad2ecde2fff2abd1b9ca77f35d5449a3b50a8b2dc9a0b5432d6596afd01ee884006f7e7191f430c7881626b95ae1bcacf9b54d7073519673edaea71ee53\", \"P2SH\")); // \"\"\n * console.log(validatePublicKey(\"04a17f3ad2ecde2fff2abd1b9ca77f35d5449a3b50a8b2dc9a0b5432d6596afd01ee884006f7e7191f430c7881626b95ae1bcacf9b54d7073519673edaea71ee53\", \"P2WSH\")); // \"P2WSH does not support uncompressed public keys.\"\n */\n\n\nfunction validatePublicKey(pubkeyHex, addressType) {\n  if (pubkeyHex === null || pubkeyHex === undefined || pubkeyHex === \"\") {\n    return \"Public key cannot be blank.\";\n  }\n\n  var error = (0, _utils.validateHex)(pubkeyHex);\n\n  if (error !== \"\") {\n    return error;\n  }\n\n  try {\n    _bitcoinjsLib.ECPair.fromPublicKey(Buffer.from(pubkeyHex, \"hex\"));\n  } catch (e) {\n    return \"Invalid public key.\";\n  }\n\n  if (!isKeyCompressed(pubkeyHex) && addressType && [_p2sh_p2wsh.P2SH_P2WSH, _p2wsh.P2WSH].includes(addressType)) {\n    return \"\".concat(addressType, \" does not support uncompressed public keys.\");\n  }\n\n  return \"\";\n}\n/**\n * Compresses the given public key.\n *\n * @param {string} publicKey - (uncompressed) public key in hex\n * @returns {string} compressed public key in hex\n * @example\n * import {compressPublicKey} from \"unchained-bitcoin\";\n * console.log(compressPublicKey(\"04b32dc780fba98db25b4b72cf2b69da228f5e10ca6aa8f46eabe7f9fe22c994ee6e43c09d025c2ad322382347ec0f69b4e78d8e23c8ff9aa0dd0cb93665ae83d5\"));\n * // \"03b32dc780fba98db25b4b72cf2b69da228f5e10ca6aa8f46eabe7f9fe22c994ee\"\n */\n\n\nfunction compressPublicKey(publicKey) {\n  // validate Public Key Length\n  // validate Public Key Structure\n  var pubkeyBuffer = Buffer.from(publicKey, \"hex\"); // eslint-disable-next-line no-bitwise\n\n  var prefix = (pubkeyBuffer[64] & 1) !== 0 ? 0x03 : 0x02;\n  var prefixBuffer = Buffer.alloc(1);\n  prefixBuffer[0] = prefix;\n  return Buffer.concat([prefixBuffer, pubkeyBuffer.slice(1, 1 + 32)]).toString(\"hex\");\n}\n/**\n * Return the public key at the given BIP32 path below the given\n * extended public key.\n *\n * @param {string} extendedPublicKey - base58 encoded extended public key (`xpub...`)\n * @param {string} bip32Path - BIP32 derivation path string (with or without initial `m/`)\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @returns {string} (compressed) child public key in hex\n * @example\n * import {deriveChildPublicKey, MAINNET} from \"unchained-bitcoin\";\n * const xpub = \"xpub6CCHViYn5VzKSmKD9cK9LBDPz9wBLV7owXJcNDioETNvhqhVtj3ABnVUERN9aV1RGTX9YpyPHnC4Ekzjnr7TZthsJRBiXA4QCeXNHEwxLab\";\n * console.log(deriveChildPublicKey(xpub, \"m/0/0\", MAINNET));\n * // \"021a0b6eb37bd9d2767a364601e41635a11c1dbbbb601efab8406281e210336ace\"\n * console.log(deriveChildPublicKey(xpub, \"0/0\", MAINNET)); // w/o leading `m/`\n * // \"021a0b6eb37bd9d2767a364601e41635a11c1dbbbb601efab8406281e210336ace\"\n *\n */\n\n\nfunction deriveChildPublicKey(extendedPublicKey, bip32Path, network) {\n  if (bip32Path.slice(0, 2) === \"m/\") {\n    return deriveChildPublicKey(extendedPublicKey, bip32Path.slice(2), network);\n  }\n\n  var node = bip32.fromBase58(extendedPublicKey, (0, _networks.networkData)(network));\n  var child = node.derivePath(bip32Path);\n  return (0, _utils.toHexString)(child.publicKey);\n}\n/**\n * Return the extended public key at the given BIP32 path below the\n * given extended public key.\n *\n * @param {string} extendedPublicKey - base58 encoded extended public key (`xpub...`)\n * @param {string} bip32Path - BIP32 derivation path string (with or without initial `m/`)\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @returns {string} child extended public key in base58\n * @example\n * import {deriveChildExtendedPublicKey, MAINNET} from \"unchained-bitcoin\";\n * const xpub = \"xpub6CCHViYn5VzKSmKD9cK9LBDPz9wBLV7owXJcNDioETNvhqhVtj3ABnVUERN9aV1RGTX9YpyPHnC4Ekzjnr7TZthsJRBiXA4QCeXNHEwxLab\";\n * console.log(deriveChildExtendedPublicKey(xpub, \"m/0/0\", MAINNET));\n * // \"xpub6GYTTMaaN8bSEhicdKq7ji9H7B2SL4un33obThv9aekop4J7L7B3snYMnJUuwXJiUmsbSVSyZydbqLC97JMWnj3R4MHz6JNunMJhjEBKovS\"\n * console.log(deriveChildExtendedPublicKey(xpub, \"0/0\", MAINNET)); // without initial `m/`\n * // \"xpub6GYTTMaaN8bSEhicdKq7ji9H7B2SL4un33obThv9aekop4J7L7B3snYMnJUuwXJiUmsbSVSyZydbqLC97JMWnj3R4MHz6JNunMJhjEBKovS\"\n\n */\n\n\nfunction deriveChildExtendedPublicKey(extendedPublicKey, bip32Path, network) {\n  if (bip32Path.slice(0, 2) === \"m/\") {\n    return deriveChildExtendedPublicKey(extendedPublicKey, bip32Path.slice(2), network);\n  }\n\n  var node = bip32.fromBase58(extendedPublicKey, (0, _networks.networkData)(network));\n  var child = node.derivePath(bip32Path);\n  return child.toBase58();\n}\n/**\n * Check if a given pubkey is compressed or not by checking its length\n * and the possible prefixes\n * @param {string | Buffer} _pubkey pubkey to check\n * @returns {boolean} true if compressed, otherwise false\n * @example\n * import {isKeyCompressed} from \"unchained-bitcoin\"\n * const uncompressed = \"0487cb4929c287665fbda011b1afbebb0e691a5ee11ee9a561fcd6adba266afe03f7c55f784242305cfd8252076d038b0f3c92836754308d06b097d11e37bc0907\"\n * const compressed = \"0387cb4929c287665fbda011b1afbebb0e691a5ee11ee9a561fcd6adba266afe03\"\n * console.log(isKeyCompressed(uncompressed)) // false\n * console.log(isKeyCompressed(compressed)) // true\n */\n\n\nfunction isKeyCompressed(_pubkey) {\n  var pubkey = _pubkey;\n  if (!Buffer.isBuffer(_pubkey)) pubkey = Buffer.from(_pubkey, \"hex\");\n  return pubkey.length === 33 && (pubkey[0] === 2 || pubkey[0] === 3);\n}\n/**\n * Get fingerprint for a given pubkey. This is useful for generating xpubs\n * which need the fingerprint of the parent pubkey. If not a compressed key\n * then this function will attempt to compress it.\n * @param {string} _pubkey - pubkey to derive fingerprint from\n * @returns {number} fingerprint\n * @example\n * import {getFingerprintFromPublicKey} from \"unchained-bitcoin\"\n * const pubkey = \"03b32dc780fba98db25b4b72cf2b69da228f5e10ca6aa8f46eabe7f9fe22c994ee\"\n * console.log(getFingerprintFromPublicKey(pubkey)) // 724365675\n *\n * const uncompressedPubkey = \"04dccdc7fc599ed379c415fc2bb398b1217f0142af23692359057094ce306cd3930e6634c71788b9ed283219ca2fea102aaf137cd74e025cce97b94478a02029cf\"\n * console.log(getFingerprintFromPublicKey(uncompressedPubkey)) // 247110101\n */\n\n\nfunction getFingerprintFromPublicKey(_pubkey) {\n  var pubkey = _pubkey;\n\n  if (!isKeyCompressed(_pubkey)) {\n    pubkey = compressPublicKey(_pubkey);\n  }\n\n  var pubkeyBuffer = Buffer.from(pubkey, \"hex\");\n  var hash = (0, _utils.hash160)(pubkeyBuffer);\n  return (hash[0] << 24 | hash[1] << 16 | hash[2] << 8 | hash[3]) >>> 0;\n}\n/**\n * Take a fingerprint and return a zero-padded, hex-formatted string\n * that is exactly eight characters long.\n *\n * @param {number} xfp the fingerprint\n * @returns {string} zero-padded, fixed-length hex xfp\n *\n * @example\n * import {fingerprintToFixedLengthHex} from \"unchained-bitcoin\"\n * const pubkeyFingerprint = 724365675\n * console.log(fingerprintToFixedLengthHex(pubkeyFingerprint)) // 2b2cf16b\n *\n * const uncompressedPubkeyFingerprint = 247110101\n * console.log(fingerprintToFixedLengthHex(uncompressedPubkeyFingerprint)) // 0eba99d5\n */\n\n\nfunction fingerprintToFixedLengthHex(xfp) {\n  return (xfp + 0x100000000).toString(16).substr(-8);\n}\n/**\n * Returns the root fingerprint of the extendedPublicKey\n *\n * @param {Struct} extendedPublicKey the extendedPublicKey Struct\n * @returns {string|null} zero-padded, fixed-length hex xfp\n *\n * @example\n * import {extendedPublicKeyRootFingerprint} from \"unchained-bitcoin\"\n * console.log(extendedPublicKeyRootFingerprint({})) // null\n * import { ExtendedPublicKey } from \"unchained-bitcoin\"\n * const xpub = ExtendedPublicKey.fromBase58(\"xpub6CCHViYn5VzKSmKD9cK9LBDPz9wBLV7owXJcNDioETNvhqhVtj3ABnVUERN9aV1RGTX9YpyPHnC4Ekzjnr7TZthsJRBiXA4QCeXNHEwxLab\")\n * xpub.setRootFingerprint('12341234');\n * console.log(extendedPublicKeyRootFingerprint(xpub)) // 12341234\n */\n\n\nfunction extendedPublicKeyRootFingerprint(extendedPublicKey) {\n  return extendedPublicKey.rootFingerprint ? extendedPublicKey.rootFingerprint : null;\n}\n/**\n * Derive base58 encoded xpub given known information about\n * BIP32 Wallet Node.\n * @param {string} bip32Path e.g. m/45'/0'/0\n * @param {string} pubkey pubkey to derive from\n * @param {string} chaincode chaincode corresponding to pubkey and path\n * @param {string} parentFingerprint - fingerprint of parent public key\n * @param {string} network - mainnet or testnet\n * @returns {string} base58 encoded extended public key (xpub or tpub)\n */\n\n\nfunction deriveExtendedPublicKey(bip32Path, pubkey, chaincode, parentFingerprint) {\n  var network = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : _networks.MAINNET;\n  var xpub = new ExtendedPublicKey({\n    path: bip32Path,\n    pubkey: pubkey,\n    chaincode: chaincode,\n    parentFingerprint: parentFingerprint,\n    network: network\n  });\n  return xpub.toBase58();\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateOutputs = validateOutputs;\nexports.validateOutput = validateOutput;\nexports.validateOutputAmount = validateOutputAmount;\n\nvar _bignumber = _interopRequireDefault(require(\"bignumber.js\"));\n\nvar _utils = require(\"./utils\");\n\nvar _addresses = require(\"./addresses\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/** \n * This module provides functions for validating transaction\n * output and amounts.\n * \n * @module outputs\n */\n\n/**\n* Represents an output in a transaction.\n*\n* @typedef module:outputs.TransactionOutput\n* @type {Object}\n* @property {string} address - the output address\n* @property {string|number|BigNumber} amountSats - output amount in Satoshis\n* @property {Multisig} [multisig] - output multisig for a change address\n* \n*/\n\n/**\n * Validates the given transaction outputs.\n *\n * Returns an error message if there are no outputs.  Passes each output to [`validateOutput`]{@link module:transactions.validateOutput}.\n *\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {module:outputs.TransactionOutput[]} outputs - outputs to validate\n * @param {string|number|BigNumber} [inputsTotalSats] - (optional) the total input amount in Satoshis\n * @returns {string} empty if valid or corresponding validation message if not\n * \n */\nfunction validateOutputs(network, outputs, inputsTotalSats) {\n  if (!outputs || outputs.length === 0) {\n    return \"At least one output is required.\";\n  }\n\n  for (var outputIndex = 0; outputIndex < outputs.length; outputIndex++) {\n    var output = outputs[outputIndex];\n    var error = validateOutput(network, output, inputsTotalSats);\n\n    if (error) {\n      return error;\n    }\n  }\n\n  return \"\";\n}\n/**\n * Validate the given transaction output.\n *\n * - Validates the presence and value of `address`.\n * \n * - Validates the presence and value of `amountSats`.  If `inputsTotalSats`\n *   is also passed, this will be taken into account when validating the\n *   amount.\n *\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {module:outputs.TransactionOutput} output - output to validate\n * @param {string|number|BigNumber} inputsTotalSats - (optional) the total input amount in Satoshis\n * @returns {string} empty if valid or corresponding validation message if not\n * @example\n * import {validateOutput} from \"unchained-bitcoin\";\n * console.log(validateOutput(MAINNET, {amountSats: 100000, address: \"2...\"})); // \"...address is invalid...\"\n * console.log(validateOutput(MAINNET, {amountSats: 100000, address: \"3...\"})); // \"\"\n * console.log(validateOutput(MAINNET, {amountSats: 100000, address: \"3...\"}, 10000)); // \"Amount is too large.\"\n */\n\n\nfunction validateOutput(network, output, inputsTotalSats) {\n  if (output.amountSats !== 0 && !output.amountSats) {\n    return \"Does not have an 'amountSats' property.\";\n  }\n\n  var error = validateOutputAmount(output.amountSats, inputsTotalSats);\n\n  if (error) {\n    return error;\n  }\n\n  if (!output.address) {\n    return \"Does not have an 'address' property.\";\n  }\n\n  error = (0, _addresses.validateAddress)(output.address, network);\n\n  if (error) {\n    return \"Has an invalid 'address' property: \".concat(error, \".\");\n  }\n\n  return '';\n}\n/**\n * Lowest acceptable output amount in Satoshis.\n * \n * @constant\n * @type {BigNumber}\n * @default 546 Satoshis\n * \n */\n\n\nvar DUST_LIMIT_SATS = (0, _bignumber.default)(546);\n/**\n * Validate the given output amount (in Satoshis).\n * \n * - Must be a parseable as a number.\n *\n * - Cannot be negative (zero is OK).\n *\n * - Cannot be smaller than the limit set by `DUST_LIMIT_SATS`.\n * \n * - Cannot exceed the total input amount (this check is only run if `inputsTotalSats` is passed.\n * \n * @param {string|number|BigNumber} amountSats - output amount in Satoshis\n * @param {string|number|BigNumber} inputsTotalSats - (optional) total input amount in Satoshis\n * @returns {string} empty if valid or corresponding validation message if not\n * @example\n * import {validateOutputAmount} from \"unchained-bitcoin\";\n * console.log(validateOutputAmount(-100, 1000000) // \"Output amount must be positive.\"\n * console.log(validateOutputAmount(0, 1000000) // \"Output amount must be positive.\"\n * console.log(validateOutputAmount(10, 1000000) // \"Output amount is too small.\"\n * console.log(validateOutputAmount(1000000, 100000) // \"Output amount is too large.\"\n * console.log(validateOutputAmount(100000, 1000000) // \"\"\n */\n\nfunction validateOutputAmount(amountSats, inputsTotalSats) {\n  var a, its;\n\n  try {\n    a = (0, _bignumber.default)(amountSats);\n  } catch (e) {\n    return \"Invalid output amount.\";\n  }\n\n  if (!a.isFinite()) {\n    return \"Invalid output amount.\";\n  }\n\n  if (a.isLessThanOrEqualTo(_utils.ZERO)) {\n    return \"Output amount must be positive.\";\n  }\n\n  if (a.isLessThanOrEqualTo(DUST_LIMIT_SATS)) {\n    return \"Output amount is too small.\";\n  }\n\n  if (inputsTotalSats !== undefined) {\n    try {\n      its = (0, _bignumber.default)(inputsTotalSats);\n    } catch (e) {\n      return \"Invalid total input amount.\";\n    }\n\n    if (!its.isFinite()) {\n      return \"Invalid total input amount.\";\n    }\n\n    if (its.isLessThanOrEqualTo(_utils.ZERO)) {\n      return \"Total input amount must be positive.\";\n    }\n\n    if (a.isGreaterThan(its)) {\n      return \"Output amount is too large.\";\n    }\n  }\n\n  return '';\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.psbtInputFormatter = psbtInputFormatter;\nexports.psbtOutputFormatter = psbtOutputFormatter;\nexports.parseSignaturesFromPSBT = parseSignaturesFromPSBT;\nexports.PSBT_MAGIC_B64 = exports.PSBT_MAGIC_HEX = void 0;\n\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar _bitcoinjsLib = require(\"bitcoinjs-lib\");\n\nvar _utils = require(\"./utils\");\n\nvar _multisig = require(\"./multisig\");\n\nvar _paths = require(\"./paths\");\n\nvar _bignumber = _interopRequireDefault(require(\"bignumber.js\"));\n\nvar _p2sh = require(\"./p2sh\");\n\nvar _p2wsh = require(\"./p2wsh\");\n\nvar _p2sh_p2wsh = require(\"./p2sh_p2wsh\");\n\nvar _braid = require(\"./braid\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * This module provides functions for interacting with PSBTs, see BIP174\n * https://github.com/bitcoin/bips/blob/master/bip-0174.mediawiki\n *\n * @module psbt\n */\n\n/**\n * Represents a transaction PSBT input.\n *\n * The [`Multisig`]{@link module:multisig.MULTISIG} object represents\n * the address the corresponding UTXO belongs to.\n *\n * @typedef module:inputs.MultisigTransactionPSBTInput\n * @type {Object}\n * @property {string} hash - The transaction ID where funds were received\n * @property {number} index - The index in the transaction referred to by {txid}\n * @property {Buffer|Object} utxoToVerify - The UTXO to verify\n * @property {Multisig} multisigScript - Locking script(s) for the multisig address\n * @property {Object} bip32Derivation - the set of (rootFingerprints && pubkeys && bip32paths) for this Multisig\n *\n */\n\n/**\n * Represents an output in a PSBT transaction.\n *\n * @typedef module:outputs.TransactionPSBTOutput\n * @type {Object}\n * @property {string} address - the output address\n * @property {number} value - output amount in Satoshis\n * @property {Object} [redeemScript] For change addresses - Locking script(s) for the multisig address\n * @property {Object} [witnessScript] For change addresses - Locking script(s) for the multisig address\n * @property {Object} [bip32Derivation] For change addresses - the set of (rootFingerprints && pubkeys && bip32paths) for this Multisig\n *\n */\nvar PSBT_MAGIC_HEX = \"70736274ff\";\nexports.PSBT_MAGIC_HEX = PSBT_MAGIC_HEX;\nvar PSBT_MAGIC_B64 = \"cHNidP8\";\n/**\n * Return the getBip32Derivation (if known) for a given `Multisig` object.\n *\n * @param {module:multisig.Multisig} multisig the `Multisig` object\n * @param {number} [index] the index to generate at\n * @returns {Object[]} the getBip32Derivation includes all paths/root fingerprints to all pubkeys in the multisig object\n * @example\n * import {\n *   getBip32Derivation,\n *   generateBraidFromExtendedPublicKeys,\n *   generateMultisigFromPublicKeys, MAINNET, P2SH,\n *   braidConfig,\n * } from \"unchained-bitcoin\";\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2SH, 2, \"03a...\", \"03b...\", \"03c...\");\n * console.log(getBip32Derivation(multisig, 0)); // null, Multisig object isn't aware of its braid.\n *\n * const braid = generateBraidFromExtendedPublicKeys(MAINNET, P2SH, {{'xpub...', bip32path: \"m/45'/0'/0'\"}, {'xpub...', bip32path: \"m/45'/0/0\"}, {'xpub...', bip32path: \"m/45'/0/0\"}}, 2);\n * const multisig = braid.deriveMultisigByIndex(\"0\");\n * console.log(getBip32Derivation(multisig, 0)); // {\n *   {masterFingerprint: Buffer('1234..', 'hex'), path: \"m/45'/0'/0'/0/0\", pubkey: Buffer.from(\"02...\", 'hex')}\n *   {masterFingerprint: Buffer('3453..', 'hex'), path: \"m/45'/0/0/0/0\", pubkey: Buffer.from(\"03...\", 'hex')}\n *   {masterFingerprint: Buffer('1533..', 'hex'), path: \"m/45'/0/0/0/0\", pubkey: Buffer.from(\"02...\", 'hex')}\n * }\n */\n\nexports.PSBT_MAGIC_B64 = PSBT_MAGIC_B64;\n\nfunction getBip32Derivation(multisig) {\n  var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n  // Already have one, return it\n  if (multisig.bip32Derivation) {\n    return multisig.bip32Derivation;\n  } // Otherwise generate it\n\n\n  var config = JSON.parse((0, _multisig.multisigBraidDetails)(multisig));\n  var braid = (0, _braid.generateBraid)(config.network, config.addressType, config.extendedPublicKeys, config.requiredSigners, config.index);\n  return (0, _braid.generateBip32DerivationByIndex)(braid, index);\n}\n/**\n * Grabs appropriate bip32Derivation based on the input's last index\n *\n * @param {module:inputs.MultisigTransactionInput} input - input you are requesting bip32Derivation from\n * @return {Object[]} array of objects containing (rootFingerprints && pubkeys && bip32paths) for this Multisig\n */\n\n\nfunction psbtInputDerivation(input) {\n  // Multi-address inputs will have different bip32Derivations per address (index/path),\n  // so specify the index ... If the input is missing a path, assume you want index = 0.\n  var index = input.bip32Path ? (0, _paths.bip32PathToSequence)(input.bip32Path).slice(-1)[0] : 0;\n  return getBip32Derivation(input.multisig, index);\n}\n/**\n * Grabs appropriate bip32Derivation for a change output\n *\n * @param {module:outputs.TransactionOutput} output - output you are requesting bip32Derivation from\n * @return {Object[]} array of objects containing (rootFingerprints && pubkeys && bip32paths) for this Multisig\n */\n\n\nfunction psbtOutputDerivation(output) {\n  return getBip32Derivation(output.multisig);\n}\n/**\n * Gets the Witness script from the ouput that generated the input\n * @param {module:inputs.MultisigTransactionInput} input - input you are requesting output's script from\n * @return {Output} bitcoinjs-lib Output object (amount+script)\n */\n\n\nfunction getWitnessOutputScriptFromInput(input) {\n  // We have the transactionHex - use bitcoinjs to pluck out the witness script\n  // return format is:\n  //  {\n  //    script: Buffer.from(out.script, 'hex'),\n  //    amount: out.value,\n  //  }\n  // See https://github.com/bitcoinjs/bitcoinjs-lib/issues/1282\n  var tx = _bitcoinjsLib.Transaction.fromHex(input.transactionHex);\n\n  return tx.outs[input.index];\n}\n/**\n * Return the locking script for the given `Multisig` object in a PSBT consumable format\n *\n * @param {module:multisig.Multisig} multisig the `Multisig` object\n * @return {Object} returns an object with proper parameters attached that are needed to validate spending\n */\n\n\nfunction psbtMultisigLock(multisig) {\n  var multisigLock = {}; // eslint-disable-next-line default-case\n\n  switch ((0, _multisig.multisigAddressType)(multisig)) {\n    case _p2sh.P2SH:\n      multisigLock.redeemScript = (0, _multisig.multisigRedeemScript)(multisig).output;\n      break;\n\n    case _p2wsh.P2WSH:\n      multisigLock.witnessScript = (0, _multisig.multisigWitnessScript)(multisig).output;\n      break;\n\n    case _p2sh_p2wsh.P2SH_P2WSH:\n      // need both\n      multisigLock.witnessScript = (0, _multisig.multisigWitnessScript)(multisig).output;\n      multisigLock.redeemScript = (0, _multisig.multisigRedeemScript)(multisig).output;\n      break;\n  }\n\n  return multisigLock;\n}\n/**\n * Take a MultisigTransactionInput and turn it into a MultisigTransactionPSBTInput\n *\n * @param {module:inputs.MultisigTransactionInput} input - to decorate for PSBT\n * @return {module:inputs.MultisigTransactionPSBTInput} outputs the PSBT-ready Transaction Input\n */\n\n\nfunction psbtInputFormatter(input) {\n  // In this function we're decorating the MultisigTransactionInput appropriately based\n  // on its address type.\n  //\n  // Essentially we need to define a couple parameters to make the whole thing work.\n  //   1) Either a Witness UTXO or Non-Witness UTXO pointing to where this input originated\n  //   2) multisigScript (spending lock) which can be either a redeemScript, a witnessScript, or both.\n  //\n  // For more info see https://github.com/bitcoinjs/bitcoinjs-lib/blob/v5.1.10/test/integration/transactions.spec.ts#L680\n  // For SegWit inputs, you need an object with the output script buffer and output value\n  var witnessUtxo = getWitnessOutputScriptFromInput(input); // For non-SegWit inputs, you must pass the full transaction buffer\n\n  var nonWitnessUtxo = Buffer.from(input.transactionHex, 'hex'); // FIXME - this makes the assumption that the funding transaction used the same transaction type as the current input\n  //   we dont have isSegWit info on our inputs at the moment, so we don't know for sure.\n  //   This assumption holds in our fixtures, but it may need to be remedied in the future.\n\n  var isSegWit = (0, _multisig.multisigWitnessScript)(input.multisig) !== null;\n  var utxoToVerify = isSegWit ? {\n    witnessUtxo: witnessUtxo\n  } : {\n    nonWitnessUtxo: nonWitnessUtxo\n  };\n  var multisigScripts = psbtMultisigLock(input.multisig);\n  var bip32Derivation = psbtInputDerivation(input);\n  return _objectSpread(_objectSpread(_objectSpread({\n    hash: input.txid,\n    index: input.index\n  }, utxoToVerify), multisigScripts), {}, {\n    bip32Derivation: bip32Derivation\n  });\n}\n/**\n * Take a MultisigTransactionOutput and turn it into a MultisigTransactionPSBTOutput\n *\n * @param {module:outputs.TransactionOutput} output output to decorate for PSBT\n * @return {module:outputs.TransactionPSBTOutput} outputs the PSBT-ready Transaction Object\n */\n\n\nfunction psbtOutputFormatter(output) {\n  var multisigScripts = {};\n  var bip32Derivation = [];\n\n  if (output.multisig) {\n    // This indicates that this output is a *change* output, so we include additional information:\n    //    Change address bip32Derivation (rootFingerprints && pubkeys && bip32paths)\n    //    Change address multisig locking script (redeem || witness || both)\n    // With the above information, the device (e.g. Coldcard) can validate that the change address\n    // can be signed with the same device. The display will show the output as \"Change\" instead of\n    // a normal external output.\n    multisigScripts = psbtMultisigLock(output.multisig);\n    bip32Derivation = psbtOutputDerivation(output);\n    return _objectSpread(_objectSpread({\n      address: output.address,\n      value: (0, _bignumber.default)(output.amountSats).toNumber()\n    }, multisigScripts), {}, {\n      bip32Derivation: bip32Derivation\n    });\n  }\n\n  return _objectSpread({\n    address: output.address,\n    value: (0, _bignumber.default)(output.amountSats).toNumber()\n  }, output);\n}\n/**\n * Extracts the signature(s) from a PSBT.\n * NOTE: there should be one signature per input, per signer.\n *\n * ADDITIONAL NOTE: because of the restrictions we place on braids to march their\n * multisig addresses (slices) forward at the *same* index across each chain of the\n * braid, we do not run into a possible collision with this data structure.\n * BUT - to have this method accommodate the *most* general form of signature parsing,\n * it would be wise to wrap this one level deeper like:\n *\n *                     address: [pubkey : [signature(s)]]\n *\n * that way if your braid only advanced one chain's (member's) index so that a pubkey\n * could be used in more than one address, everything would still function properly.\n *\n * @param {String} psbtFromFile -  base64 or hex\n * @returns {Object} returns an object with signatureSet(s) - an object with format\n * {pubkey : [signature(s)]}\n *\n */\n\n\nfunction parseSignaturesFromPSBT(psbtFromFile) {\n  var psbt = {}; // Auto-detect and decode Base64 and Hex.\n\n  if (psbtFromFile.substring(0, 10) === PSBT_MAGIC_HEX) {\n    psbt = _bitcoinjsLib.Psbt.fromHex(psbtFromFile);\n  } else if (psbtFromFile.substring(0, 7) === PSBT_MAGIC_B64) {\n    psbt = _bitcoinjsLib.Psbt.fromBase64(psbtFromFile);\n  } else {\n    return null;\n  }\n\n  var partialSignatures = psbt && psbt.data && psbt.data.inputs && psbt.data.inputs[0] ? psbt.data.inputs[0].partialSig : undefined;\n  var numSigners = partialSignatures === undefined ? 0 : partialSignatures.length;\n  var signatureSet = {};\n  var pubKey = '';\n  var inputs = psbt.data.inputs; // Find signatures in the PSBT\n\n  if (numSigners >= 1) {\n    // return array of arrays of signatures\n    for (var i = 0; i < inputs.length; i++) {\n      for (var j = 0; j < numSigners; j++) {\n        pubKey = (0, _utils.toHexString)(Array.prototype.slice.call(inputs[i].partialSig[j].pubkey));\n\n        if (pubKey in signatureSet) {\n          signatureSet[pubKey].push(inputs[i].partialSig[j].signature.toString(\"hex\"));\n        } else {\n          signatureSet[pubKey] = [inputs[i].partialSig[j].signature.toString(\"hex\")];\n        }\n      }\n    }\n  } else {\n    return null;\n  }\n\n  return signatureSet;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.scriptToOps = scriptToOps;\nexports.scriptToHex = scriptToHex;\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar _bitcoinjsLib = require(\"bitcoinjs-lib\");\n\n/**\n * This module provides functions for converting generic bitcoin\n * scripts to hex or opcodes.\n * \n * @module script\n */\n\n/**\n * Extracts the ASM (opcode) representation of a script from a\n * `Multisig` object.\n * \n * @param {Multisig} multisig - Multisig object\n * @returns {string} ASM representation of script\n * @example\n * import {\n *   generateMultisigFromPublicKeys, MAINNET, P2SH,\n *   scriptToOps,\n * } from \"unchained-bitcoin\";\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2SH, 1, \"03a...\", \"03b...\");\n * console.log(scriptToOps(multisig)) // \"OP_1 03a... 03b... OP_2 OP_CHECKMULTISIG\"\n * \n */\nfunction scriptToOps(multisig) {\n  return _bitcoinjsLib.script.toASM(multisig.output);\n}\n/**\n * Extracts the hex representation of a script from a `Multisig`\n * object.\n * \n * @param {Multisig} script - Multisig object\n * @returns {string} hex representation of script\n * @example\n * import {\n *   generateMultisigFromPublicKeys, MAINNET, P2SH,\n *   scriptToHex,\n * } from \"unchained-bitcoin\";\n * const multisig = generateMultisigFromPublicKeys(MAINNET, P2SH, 1, \"03a...\", \"03b...\");\n * console.log(scriptToHex(multisig)) // \"5121024f355bdcb...5871aa52ae\"\n * \n */\n\n\nfunction scriptToHex(script) {\n  return script.output.toString('hex');\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateMultisigSignature = validateMultisigSignature;\nexports.signatureNoSighashType = signatureNoSighashType;\n\nvar _bignumber = _interopRequireDefault(require(\"bignumber.js\"));\n\nvar _bip = _interopRequireDefault(require(\"bip66\"));\n\nvar _bitcoinjsLib = require(\"bitcoinjs-lib\");\n\nvar _p2sh_p2wsh = require(\"./p2sh_p2wsh\");\n\nvar _p2wsh = require(\"./p2wsh\");\n\nvar _multisig = require(\"./multisig\");\n\nvar _transactions = require(\"./transactions\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * This module provides functions for validating and handling\n * multisig transaction signatures.\n * \n * @module signatures\n */\n\n/**\n * Validate a multisig signature for given input and public key.\n * \n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {module:inputs.MultisigTransactionInput[]} inputs - multisig transaction inputs\n * @param {module:outputs.TransactionOutput[]} outputs - transaction outputs\n * @param {number} inputIndex - the index where the input appears in the transaction\n * @param {string} inputSignature - signature to validate\n * @returns {string|boolean} false if invalid or corresponding public key\n * @example\n * import {\n *   generateMultisigFromPublicKeys, TESTNET, P2SH,\n *   unsignedMultisigTransaction,\n *   validateMultisigSignature,\n * } from \"unchained-bitcoin\";\n * const pubkey1 = \"03a...\";\n * const pubkey2 = \"03b...\";\n * const multisig = generateMultisigFromPublicKeys(TESTNET, P2SH, 2, pubkey1, pubkey2);\n * const inputs = [\n *   {\n *     txid: \"ae...\",\n *     index: 0,\n *     multisig,\n *   },\n *   // other inputs...\n * ];\n * const outputs = [\n *   {\n *     address: \"2N...\",\n *     amountSats: 90000,\n *   },\n *   // other outputs...\n * ];\n * const unsignedTransaction = unsignedMultisigTransaction(TESTNET, inputs, outputs);\n * // Use unsignedTransaction to obtain a signature.\n * const transactionSignature = [\"304...\", // other input signatures...];\n * // Validate signature for input 0\n * const result = validateMultisigSignature(TESTNET, inputs, outputs, 0, transactionSignature[0]);\n * switch (result) {\n *   case false:\n *     // signature was invalid\n *   case pubkey1:\n *     // signature was valid for pubkey1\n *   case pubkey2:\n *     // signature was valid for pubkey2\n *   default:\n *     // ...\n * }\n */\nfunction validateMultisigSignature(network, inputs, outputs, inputIndex, inputSignature) {\n  var hash = multisigSignatureHash(network, inputs, outputs, inputIndex);\n  var signatureBuffer = multisigSignatureBuffer(signatureNoSighashType(inputSignature));\n  var input = inputs[inputIndex];\n  var publicKeys = (0, _multisig.multisigPublicKeys)(input.multisig);\n\n  for (var publicKeyIndex = 0; publicKeyIndex < (0, _multisig.multisigTotalSigners)(input.multisig); publicKeyIndex++) {\n    var publicKey = publicKeys[publicKeyIndex];\n    var publicKeyBuffer = Buffer.from(publicKey, 'hex');\n\n    var keyPair = _bitcoinjsLib.ECPair.fromPublicKey(publicKeyBuffer);\n\n    if (keyPair.verify(hash, signatureBuffer)) {\n      return publicKey;\n    }\n  }\n\n  return false;\n}\n/**\n * This function takes a DER encoded signature and returns it without the SIGHASH_BYTE\n * @param {string} signature inputSignature which includes DER encoding bytes and may include SIGHASH byte\n * @return {string} signature_no_sighash with sighash_byte removed\n */\n\n\nfunction signatureNoSighashType(signature) {\n  var len = parseInt(signature.slice(2, 4), 16);\n  if (len === (signature.length - 4) / 2) return signature;else return signature.slice(0, -2);\n}\n/**\n * Returns the multisig Signature Hash for an input at inputIndex\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {module:inputs.MultisigTransactionInput[]} inputs - multisig transaction inputs\n * @param {module:outputs.TransactionOutput[]} outputs - transaction outputs\n * @param {number} inputIndex - the index where the input appears in the transaction\n * @return {Buffer} unsignedTransaction hash in a Buffer for consumption by ECPair.verify\n */\n\n\nfunction multisigSignatureHash(network, inputs, outputs, inputIndex) {\n  var unsignedTransaction = (0, _transactions.unsignedMultisigTransaction)(network, inputs, outputs);\n  var input = inputs[inputIndex];\n\n  if ((0, _multisig.multisigAddressType)(input.multisig) === _p2wsh.P2WSH || (0, _multisig.multisigAddressType)(input.multisig) === _p2sh_p2wsh.P2SH_P2WSH) {\n    return unsignedTransaction.hashForWitnessV0(inputIndex, (0, _multisig.multisigWitnessScript)(input.multisig).output, (0, _bignumber.default)(input.amountSats).toNumber(), _bitcoinjsLib.Transaction.SIGHASH_ALL);\n  } else {\n    return unsignedTransaction.hashForSignature(inputIndex, (0, _multisig.multisigRedeemScript)(input.multisig).output, _bitcoinjsLib.Transaction.SIGHASH_ALL);\n  }\n}\n/**\n * Create a signature buffer that can be passed to ECPair.verify\n * @param {string} signature - a DER encoded signature string\n * @return {Buffer} signatureBuffer - correctly allocated buffer with relevant r, S information from the encoded signature\n */\n\n\nfunction multisigSignatureBuffer(signature) {\n  var encodedSignerInputSignatureBuffer = Buffer.from(signature, 'hex');\n\n  var decodedSignerInputSignatureBuffer = _bip.default.decode(encodedSignerInputSignatureBuffer);\n\n  var r = decodedSignerInputSignatureBuffer.r,\n      s = decodedSignerInputSignatureBuffer.s; // The value returned from the decodedSignerInputSignatureBuffer has\n  // a few edge cases that need to be handled properly. There exists a mismatch between the\n  // DER serialization and the ECDSA requirements, namely:\n  //   DER says that its highest bit states polarity (positive/negative)\n  //   ECDSA says no negatives, only positives.\n  // So in the case where DER would result in a negative, a one-byte 0x00 is added to the value\n  // NOTE: this can happen on r and on S.\n  // See https://transactionfee.info/charts/bitcoin-script-ecdsa-length/ for more information\n  // Truncate the leading 0x00 if r or S is 33 bytes long\n\n  var rToUse = r.byteLength > 32 ? r.slice(1) : r; // Technically, this could be done but extremely unlikely in the current era.\n  // let sToUse = s.byteLength > 32 ? s.slice(1) : s;\n\n  var signatureBuffer = Buffer.alloc(64); // r/s bytelength could be < 32, in which case, zero padding needed\n\n  signatureBuffer.set(Buffer.from(rToUse), 32 - rToUse.byteLength);\n  signatureBuffer.set(Buffer.from(s), 64 - s.byteLength);\n  return signatureBuffer;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.unsignedMultisigTransaction = unsignedMultisigTransaction;\nexports.unsignedMultisigPSBT = unsignedMultisigPSBT;\nexports.unsignedTransactionObjectFromPSBT = unsignedTransactionObjectFromPSBT;\nexports.signedMultisigTransaction = signedMultisigTransaction;\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.array.from\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nvar _bignumber = _interopRequireDefault(require(\"bignumber.js\"));\n\nvar _assert = _interopRequireDefault(require(\"assert\"));\n\nvar _bitcoinjsLib = require(\"bitcoinjs-lib\");\n\nvar _networks = require(\"./networks\");\n\nvar _p2sh_p2wsh = require(\"./p2sh_p2wsh\");\n\nvar _p2wsh = require(\"./p2wsh\");\n\nvar _multisig = require(\"./multisig\");\n\nvar _signatures = require(\"./signatures\");\n\nvar _inputs = require(\"./inputs\");\n\nvar _outputs = require(\"./outputs\");\n\nvar _script = require(\"./script\");\n\nvar _psbt = require(\"./psbt\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Create an unsigned bitcoin transaction based on the network, inputs\n * and outputs.\n *\n * Returns a [`Transaction`]{@link https://github.com/bitcoinjs/bitcoinjs-lib/blob/master/types/transaction.d.ts|Transaction} object from bitcoinjs-lib.\n *\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {module:inputs.MultisigTransactionInput[]} inputs - transaction inputs\n * @param {module:outputs.TransactionOutput[]} outputs - transaction outputs\n * @returns {Transaction} an unsigned bitcoinjs-lib Transaction object\n * @example\n * import {\n *   generateMultisigFromPublicKeys, TESTNET, P2SH,\n *   unsignedMultisigTransaction,\n * } from \"unchained-bitcoin\";\n * const multisig = generateMultisigFromPublicKeys(TESTNET, P2SH, 2, \"03a...\", \"03b...\");\n * const inputs = [\n *   {\n *     txid: \"ae...\",\n *     index: 0,\n *     multisig,\n *   },\n *   // other inputs...\n * ];\n * const outputs = [\n *   {\n *     address: \"2N...\",\n *     amountSats: 90000,\n *   },\n *   // other outputs...\n * ];\n * const unsignedTransaction = unsignedMultisigTransaction(TESTNET, inputs, outputs);\n * \n */\nfunction unsignedMultisigTransaction(network, inputs, outputs) {\n  var multisigInputError = (0, _inputs.validateMultisigInputs)(inputs);\n  (0, _assert.default)(!multisigInputError.length, multisigInputError);\n  var multisigOutputError = (0, _outputs.validateOutputs)(network, outputs);\n  (0, _assert.default)(!multisigOutputError.length, multisigOutputError);\n  var transactionBuilder = new _bitcoinjsLib.TransactionBuilder();\n  transactionBuilder.setVersion(1); // FIXME this depends on type...\n\n  transactionBuilder.network = (0, _networks.networkData)(network);\n\n  for (var inputIndex = 0; inputIndex < inputs.length; inputIndex += 1) {\n    var input = inputs[inputIndex];\n    transactionBuilder.addInput(input.txid, input.index);\n  }\n\n  for (var outputIndex = 0; outputIndex < outputs.length; outputIndex += 1) {\n    var output = outputs[outputIndex];\n    transactionBuilder.addOutput(output.address, (0, _bignumber.default)(output.amountSats).toNumber());\n  }\n\n  return transactionBuilder.buildIncomplete();\n}\n/**\n * Create an unsigned bitcoin transaction based on the network, inputs\n * and outputs stored as a PSBT object\n *\n * Returns a [`PSBT`]{@link https://github.com/bitcoinjs/bitcoinjs-lib/blob/master/types/psbt.d.ts|PSBT} object from bitcoinjs-lib.\n *\n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {module:inputs.MultisigTransactionInput[]} inputs - transaction inputs : NOTE - must be braid-aware\n * @param {module:outputs.TransactionOutput[]} outputs - transaction outputs\n * @returns {Psbt} an unsigned bitcoinjs-lib Psbt object\n */\n\n\nfunction unsignedMultisigPSBT(network, inputs, outputs) {\n  var multisigInputError = (0, _inputs.validateMultisigInputs)(inputs, true);\n  (0, _assert.default)(!multisigInputError.length, multisigInputError);\n  var multisigOutputError = (0, _outputs.validateOutputs)(network, outputs);\n  (0, _assert.default)(!multisigOutputError.length, multisigOutputError);\n  var psbt = new _bitcoinjsLib.Psbt({\n    network: (0, _networks.networkData)(network)\n  }); // FIXME: update fixtures with unsigned tx version 02000000 and proper signatures\n\n  psbt.setVersion(1); // Our fixtures currently sign transactions with version 0x01000000\n\n  var psbtInputs = inputs.map(function (input) {\n    return (0, _psbt.psbtInputFormatter)(_objectSpread({}, input));\n  });\n  psbt.addInputs(psbtInputs);\n  var psbtOutputs = outputs.map(function (output) {\n    return (0, _psbt.psbtOutputFormatter)(_objectSpread({}, output));\n  });\n  psbt.addOutputs(psbtOutputs);\n  psbt.txn = psbt.data.globalMap.unsignedTx.tx.toHex();\n  return psbt;\n}\n/**\n * Returns an unsigned Transaction object from bitcoinjs-lib that is not\n * generated via the TransactionBuilder (deprecating soon)\n *\n * FIXME: try squat out old implementation with the new PSBT one and see if\n *   everything works (the tx is the same)\n *\n * @param {Object} psbt - the PSBT object which has your transaction inside\n * @returns {Transaction} an unsigned {@link https://github.com/bitcoinjs/bitcoinjs-lib/blob/master/types/transaction.d.ts|Transaction} object (unsigned)\n */\n\n\nfunction unsignedTransactionObjectFromPSBT(psbt) {\n  return _bitcoinjsLib.Transaction.fromHex(psbt.txn);\n}\n/**\n * Create a fully signed multisig transaction based on the unsigned\n * transaction, inputs, and their signatures.\n * \n * @param {module:networks.NETWORKS} network - bitcoin network\n * @param {module:inputs.MultisigTransactionInput[]} inputs - multisig transaction inputs\n * @param {module:outputs.TransactionOutput[]} outputs - transaction outputs\n * @param {Object[]} transactionSignatures - array of transaction signatures, each an array of input signatures (1 per input)\n * @returns {Transaction} a signed {@link https://github.com/bitcoinjs/bitcoinjs-lib/blob/master/types/transaction.d.ts|Transaction} object\n * @example\n * import {\n *   generateMultisigFromPublicKeys, TESTNET, P2SH,\n *   signedMultisigTransaction,\n * } from \"unchained-bitcoin\";\n * const pubkey1 = \"03a...\";\n * const pubkey2 = \"03b...\";\n * const multisig = generateMultisigFromPublicKeys(TESTNET, P2SH, 2, pubkey1, pubkey2);\n * const inputs = [\n *   {\n *     txid: \"ae...\",\n *     index: 0,\n *     multisig,\n *   },\n *   // other inputs...\n * ];\n * const outputs = [\n *   {\n *     address: \"2N...\",\n *     amountSats: 90000,\n *   },\n *   // other outputs...\n * ];\n * const transactionSignatures = [\n *   // Each element is an array of signatures from a given key, one per input.\n *   [\n *     \"301a...\",\n *     // more, 1 per input\n *   ],\n *   [\n *     \"301b...\",\n *     // more, 1 per input\n *   ],\n *   // More transaction signatures if required, based on inputs\n * ];\n * const signedTransaction = signedMultisigTransaction(TESTNET, inputs, outputs, transactionSignatures)\n */\n\n\nfunction signedMultisigTransaction(network, inputs, outputs, transactionSignatures) {\n  var unsignedTransaction = unsignedMultisigTransaction(network, inputs, outputs); // validates inputs & outputs\n\n  if (!transactionSignatures || transactionSignatures.length === 0) {\n    throw new Error(\"At least one transaction signature is required.\");\n  }\n\n  transactionSignatures.forEach(function (transactionSignature, transactionSignatureIndex) {\n    if (transactionSignature.length < inputs.length) {\n      throw new Error(\"Insufficient input signatures for transaction signature \".concat(transactionSignatureIndex + 1, \": require \").concat(inputs.length, \", received \").concat(transactionSignature.length, \".\"));\n    }\n  });\n\n  var signedTransaction = _bitcoinjsLib.Transaction.fromHex(unsignedTransaction.toHex()); // FIXME inefficient?\n\n\n  var _loop = function _loop(inputIndex) {\n    var input = inputs[inputIndex];\n    var inputSignatures = transactionSignatures.map(function (transactionSignature) {\n      return transactionSignature[inputIndex];\n    }).filter(function (inputSignature) {\n      return Boolean(inputSignature);\n    });\n    var requiredSignatures = (0, _multisig.multisigRequiredSigners)(input.multisig);\n\n    if (inputSignatures.length < requiredSignatures) {\n      throw new Error(\"Insufficient signatures for input  \".concat(inputIndex + 1, \": require \").concat(requiredSignatures, \",  received \").concat(inputSignatures.length, \".\"));\n    }\n\n    var inputSignaturesByPublicKey = {};\n    inputSignatures.forEach(function (inputSignature) {\n      var publicKey;\n\n      try {\n        publicKey = (0, _signatures.validateMultisigSignature)(network, inputs, outputs, inputIndex, inputSignature);\n      } catch (e) {\n        throw new Error(\"Invalid signature for input \".concat(inputIndex + 1, \": \").concat(inputSignature, \" (\").concat(e, \")\"));\n      }\n\n      if (inputSignaturesByPublicKey[publicKey]) {\n        throw new Error(\"Duplicate signature for input \".concat(inputIndex + 1, \": \").concat(inputSignature));\n      }\n\n      inputSignaturesByPublicKey[publicKey] = inputSignature;\n    }); // Sort the signatures for this input by the index of their\n    // corresponding public key within this input's redeem script.\n\n    var publicKeys = (0, _multisig.multisigPublicKeys)(input.multisig);\n    var sortedSignatures = publicKeys.map(function (publicKey) {\n      return inputSignaturesByPublicKey[publicKey];\n    }).filter(function (signature) {\n      return signature ? (0, _signatures.signatureNoSighashType)(signature) : signature;\n    }); // FIXME why not filter out the empty sigs?\n\n    if ((0, _multisig.multisigAddressType)(input.multisig) === _p2wsh.P2WSH) {\n      var witness = multisigWitnessField(input.multisig, sortedSignatures);\n      signedTransaction.setWitness(inputIndex, witness);\n    } else if ((0, _multisig.multisigAddressType)(input.multisig) === _p2sh_p2wsh.P2SH_P2WSH) {\n      var _witness = multisigWitnessField(input.multisig, sortedSignatures);\n\n      signedTransaction.setWitness(inputIndex, _witness);\n      var scriptSig = (0, _multisig.multisigRedeemScript)(input.multisig);\n      signedTransaction.ins[inputIndex].script = Buffer.from([scriptSig.output.length].concat(_toConsumableArray(scriptSig.output)));\n    } else {\n      var _scriptSig = multisigScriptSig(input.multisig, sortedSignatures);\n\n      signedTransaction.ins[inputIndex].script = _scriptSig.input;\n    }\n  };\n\n  for (var inputIndex = 0; inputIndex < inputs.length; inputIndex++) {\n    _loop(inputIndex);\n  }\n\n  return signedTransaction;\n} // TODO: implement this parallel function\n// /**\n//  * Create a fully signed multisig transaction based on the unsigned\n//  * transaction, braid-aware inputs, and their signatures.\n//  *\n//  * @param {module:networks.NETWORKS} network - bitcoin network\n//  * @param {module:inputs.MultisigTransactionInput[]} inputs - braid-aware multisig transaction inputs\n//  * @param {module:outputs.TransactionOutput[]} outputs - transaction outputs\n//  * @param {Object[]} transactionSignatures - array of transaction signatures, each an array of input signatures (1 per input)\n//  * @returns {Transaction} a signed {@link https://github.com/bitcoinjs/bitcoinjs-lib/blob/master/types/transaction.d.ts} Transaction object\n//  */\n// export function signedMultisigPSBT(network, inputs, outputs, transactionSignatures) {\n//   const psbt = unsignedMultisigPSBT(network, inputs, outputs);\n//  const unsignedTransaction = unsignedTransactionObjectFromPSBT(psbt); // validates inputs & outputs\n//  if (!transactionSignatures || transactionSignatures.length === 0) { throw new Error(\"At least one transaction signature is required.\"); }\n//\n//  transactionSignatures.forEach((transactionSignature, transactionSignatureIndex) => {\n//    if (transactionSignature.length < inputs.length) {\n//      throw new Error(`Insufficient input signatures for transaction signature ${transactionSignatureIndex + 1}: require ${inputs.length}, received ${transactionSignature.length}.`);\n//    }d\n//  });\n//  console.log(unsignedTransaction);\n// FIXME - add each signature to the PSBT\n//   then finalizeAllInputs()\n//   then extractTransaction()\n//\n// return signedTransaction;\n// }\n\n\nfunction multisigWitnessField(multisig, sortedSignatures) {\n  var witness = [\"\"].concat(sortedSignatures.map(function (s) {\n    return (0, _signatures.signatureNoSighashType)(s) + '01';\n  }));\n  var witnessScript = (0, _multisig.multisigWitnessScript)(multisig);\n  witness.push((0, _script.scriptToHex)(witnessScript));\n  return witness.map(function (wit) {\n    return Buffer.from(wit, 'hex');\n  });\n}\n\nfunction multisigScriptSig(multisig, signersInputSignatures) {\n  var signatureOps = signersInputSignatures.map(function (signature) {\n    return \"\".concat((0, _signatures.signatureNoSighashType)(signature), \"01\");\n  }).join(' '); // 01 => SIGHASH_ALL\n\n  var inputScript = \"OP_0 \".concat(signatureOps);\n\n  var inputScriptBuffer = _bitcoinjsLib.script.fromASM(inputScript);\n\n  var rawMultisig = _bitcoinjsLib.payments.p2ms({\n    network: multisig.network,\n    output: Buffer.from((0, _multisig.multisigRedeemScript)(multisig).output, 'hex'),\n    input: inputScriptBuffer\n  });\n\n  return (0, _multisig.generateMultisigFromRaw)((0, _multisig.multisigAddressType)(multisig), rawMultisig);\n}"],"sourceRoot":""}